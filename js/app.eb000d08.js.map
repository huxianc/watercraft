{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./src/views/Home/Head/index.vue?685d","webpack:///./src/utils/http3.ts","webpack:///./src/views/Home/content/components/contextmenuContent.vue?c62d","webpack:///./src/views/Home/content/components/monitorList.vue?d861","webpack:///./src/utils/auth.ts","webpack:///./src/views/Home/content/components/layerPersonList.vue?84e5","webpack:///./src/views/Home/content/components/mainNav.vue?268a","webpack:///./src/views/Home/content/components/waterAlarm.vue?bc8a","webpack:///./src/style/index.scss?eedc","webpack:///./src/icons/svg/fullscreen.svg","webpack:///./src/utils/urls.ts","webpack:///./src/views/Home/Head/headerBar.vue?ade0","webpack:///./src/views/Home/content/style/index.scss?7d36","webpack:///./src/views/Home/content/components/mapChoosen.vue?027d","webpack:///./src/views/Home/index.vue?45ec","webpack:///./src/views/Home/content/components/historyMonitor.vue?09e5","webpack:///./src/views/Home/index.vue","webpack:///./src/views/Home/Head/index.vue","webpack:///./src/utils/index.ts","webpack:///./src/views/Home/Head/headerBar.vue","webpack:///./src/components/Screenfull/index.vue","webpack:///./src/components/Screenfull/index.vue?0538","webpack:///./src/views/Home/Head/headerBar.vue?0b42","webpack:///./src/views/Home/Head/headerBar.vue?ad0a","webpack:///./src/views/Home/Head/index.vue?8f47","webpack:///./src/views/Home/Head/index.vue?e642","webpack:///./src/views/Home/content/index.vue","webpack:///./src/api/stage.ts","webpack:///./src/api/camera.ts","webpack:///./src/api/alarm.ts","webpack:///./src/api/common.ts","webpack:///./src/views/Home/content/constVariables/index.ts","webpack:///./src/views/Home/content/utils/index.ts","webpack:///./src/views/Home/content/directive/drag-dialog/drag.ts","webpack:///./src/views/Home/content/directive/drag-dialog/index.ts","webpack:///./src/views/Home/content/components/mainNav.vue","webpack:///./src/views/Home/content/components/mainNav.vue?5aa2","webpack:///./src/views/Home/content/components/mainNav.vue?04bb","webpack:///./src/views/Home/content/components/personList.vue","webpack:///./src/api/person.ts","webpack:///./src/views/Home/content/components/personList.vue?878a","webpack:///./src/views/Home/content/components/personList.vue?ddbf","webpack:///./src/views/Home/content/components/cameraList.vue","webpack:///./src/views/Home/content/components/cameraList.vue?867b","webpack:///./src/views/Home/content/components/cameraList.vue?9612","webpack:///./src/views/Home/content/components/basestationList.vue","webpack:///./src/api/basestation.ts","webpack:///./src/views/Home/content/components/basestationList.vue?2271","webpack:///./src/views/Home/content/components/basestationList.vue?62b2","webpack:///./src/views/Home/content/components/fenceBox.vue","webpack:///./src/views/Home/content/components/fenceBox.vue?9080","webpack:///./src/views/Home/content/components/fenceBox.vue?cbdf","webpack:///./src/views/Home/content/components/contextmenuContent.vue","webpack:///./src/views/Home/content/components/contextmenuContent.vue?4bd5","webpack:///./src/views/Home/content/components/contextmenuContent.vue?8c29","webpack:///./src/views/Home/content/components/formContent.vue","webpack:///./src/views/Home/content/filter/index.ts","webpack:///./src/views/Home/content/components/formContent.vue?d080","webpack:///./src/views/Home/content/components/formContent.vue?a4ba","webpack:///./src/views/Home/content/components/trackPlaybackMenu.vue","webpack:///./src/views/Home/content/components/trackPlaybackMenu.vue?fbce","webpack:///./src/views/Home/content/components/waterAlarm.vue","webpack:///./src/views/Home/content/components/waterAlarm.vue?e970","webpack:///./src/views/Home/content/components/monitorList.vue","webpack:///./src/views/Home/content/components/monitorList.vue?436a","webpack:///./src/views/Home/content/components/historyMonitor.vue","webpack:///./src/views/Home/content/components/historyMonitor.vue?b34e","webpack:///./src/views/Home/content/components/historyMonitor.vue?43c8","webpack:///./src/views/Home/content/components/warningList.vue","webpack:///./src/views/Home/content/components/warningList.vue?ba8a","webpack:///./src/views/Home/content/components/labelList.vue","webpack:///./src/api/label.ts","webpack:///./src/views/Home/content/components/labelList.vue?464b","webpack:///./src/views/Home/content/components/labelList.vue?aa2b","webpack:///./src/views/Home/content/components/handle.vue","webpack:///./src/views/Home/content/components/handle.vue?bdee","webpack:///./src/views/Home/content/components/handle.vue?f5b3","webpack:///./src/views/Home/content/components/layerPersonList.vue","webpack:///./src/views/Home/content/components/layerPersonList.vue?1503","webpack:///./src/views/Home/content/components/layerPersonList.vue?e048","webpack:///./src/views/Home/content/components/mapChoosen.vue","webpack:///./src/views/Home/content/components/mapChoosen.vue?6fc4","webpack:///./src/views/Home/content/components/mapChoosen.vue?4087","webpack:///./src/views/Home/content/components/alarmContent.vue","webpack:///./src/views/Home/content/components/alarmContent.vue?7a01","webpack:///./src/views/Home/content/components/alarmContent.vue?0d73","webpack:///./src/views/Home/content/index.vue?7190","webpack:///./src/views/Home/content/index.vue?a4a6","webpack:///./src/views/Home/index.vue?b56a","webpack:///./src/router/index.ts","webpack:///./src/settings.ts","webpack:///./src/permission.ts","webpack:///./src/store/index.ts","webpack:///./src/App.vue","webpack:///./src/App.vue?dfb6","webpack:///./src/plugins/element-plus.ts","webpack:///./src/directive/debounce-click/index.ts","webpack:///./src/main.ts","webpack:///./src/views/Home/Head/headerBar.vue?9e18","webpack:///./src/icons/svg/exit-fullscreen.svg","webpack:///./src/views/Home/content/components/handle.vue?e80a"],"names":["webpackJsonpCallback","data","moduleId","chunkId","chunkIds","moreModules","executeModules","i","resolves","length","Object","prototype","hasOwnProperty","call","installedChunks","push","modules","parentJsonpFunction","shift","deferredModules","apply","checkDeferredModules","result","deferredModule","fulfilled","j","depId","splice","__webpack_require__","s","installedModules","installedCssChunks","jsonpScriptSrc","p","exports","module","l","e","promises","cssChunks","Promise","resolve","reject","href","fullhref","existingLinkTags","document","getElementsByTagName","tag","dataHref","getAttribute","rel","existingStyleTags","linkTag","createElement","type","onload","onerror","event","request","target","src","err","Error","code","parentNode","removeChild","head","appendChild","then","installedChunkData","promise","onScriptComplete","script","charset","timeout","nc","setAttribute","error","clearTimeout","chunk","errorType","realSrc","message","name","undefined","setTimeout","all","m","c","d","getter","o","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","oe","console","jsonpArray","window","oldJsonpFunction","slice","service","a","baseURL","headers","jsonList","interceptors","use","config","stringify","url","visittoken","includes","log","response","res","success","msg","duration","TokenKey","getToken","setToken","token","set","removeToken","remove","UserName","setUsername","username","localStorage","setItem","UserAccount","setUserAccount","account","BNum","setBNum","bnum","wsArr","setWsArr","ws","JSON","getWsArr","parse","getItem","HomeSNum","setHomeSNum","homesnum","LoadSNum","setLoadSNum","loadsnum","getLoadSNum","deviceAll","setAllDevice","deviceall","getAllDevice","ip","locateUrl","baseUrl","imgUrl","httpFlvServer","class","now","time","cFormat","date","format","test","parseInt","replace","RegExp","toString","Date","formatObj","y","getFullYear","getMonth","getDate","h","getHours","getMinutes","getSeconds","getDay","timeStr","padStart","commonRuleItem","required","trigger","customFuncRule","func","validator","checkPositiveInteger","rule","callback","getPagination","allArr","page","prop","size","len","arguments","filter","item","arr","getPagintionCount","count","getMap","snum","sceneAllStr","sceneAll","map","sname","formatTime","timestr","style","id","dropdown","to","divided","logout","click","isFullscreen","exitFullscreen","fullscreen","mounted","this","init","beforeUnmount","destroy","methods","isEnabled","$message","toggle","change","on","off","render","components","Screenfull","setup","router","clear","__scopeId","HeaderBar","timer","setInterval","clearInterval","ref","navClick","visibleObj","nav","status","isDrawFence","drawerInfo","showList","direction","with-header","resetNavIndex","append-to-body","drawerTitle","activeName","equipSwitchClick","label","types","camera","form-data","detailsForm","formData","showEquipDetails","addEquip","basestation","labelList","person","title","fenceListInfo","tableVisible","width","model","params","label-width","inline","handleAddFence","toggleAllFenceVisible","tableData","element-loading-text","element-loading-spinner","element-loading-background","border","tooltip-effect","align","show-overflow-tooltip","default","row","show","active-color","changeAreaVisible","$event","areaids","handleEditFence","handleSeeRules","areaname","handleDelFence","reference","loading","current-page","curpage","page-size","layout","total","background","fenceCurrentChange","fenceInfo","dialogType","visible","center","footer","disabled","drawFenceInfo","clonePoints","handleSubmitFence","form","rules","gutter","span","offset","clearable","placeholder","chosenCamera","filterable","filter-placeholder","allMapCamera","titles","props","transferProps","option","dname","handleFenceDraw","handleRevokeFence","handleRedrawFence","handleCancelDrawFence","handleFinishDrawFence","ruleListInfo","visiable","handleAddRule","isloop","handleEditRule","handleDelRule","ruleCurrentChange","ruleItemDetail","handleSubmitRule","ruleItemDetailRule","isLoop","inactive-color","permitType","areaRulesOption","limitedTime","startTime","timerPickerChange","endTime","disabledDate","ruleDisabledDate","memo","alarmListInfo","SourceType","alarmType","sTime","getAlarmListByCondition","eTime","alarmLevel","CreateTime","handleDetailAlarm","alarmCurrentChange","alarmInfo","contextmenu","contextmenuTypeRef","contxtmenu-position","contxtmenuPosition","contextmenu-list","contextmenuList","seeNowVideo","seeHistoryVideo","showDetails","handleClickTrackPlayback","detailsEdit","is-add","isAdd","editable","form-type","map-id","mapIdRef","x","hideDetails","cancelForm","changeDirection","updateX","updateY","handleDetailConfirm","monitorListInfo","monitorTitle","handleCloseAllVideo","newMonitorList","index","monitorInner","camera-data","cameraData","livePlayCount","active","monitorListFlag","handleCloseAllHistoryVideo","newHistoryMonitorList","monitorHistoryInner","history-camera-data","historyCameraData","historyPlayCount","historyMonitorListFlag","trackPlayback","handleCloseContextmenu","handleClickSeeTrackPlayback","picker-options","datePickerOptions","equipImgFollow","warningWidth","showWarningList","alarmForm","layerPerson","person-list","mouse-position","layerPosition","controlPannel","mapNameRef","leftPannelSearch","remote-method","querySearch","default-first-option","remote","searchChange","userSearchRes","dids","currentMap","controlButtonList","controlButtonChange","map-list","mapListRef","mapId","closeMapChoosen","changeMap","getAllScene","method","getAllLayer","getAllBuild","getAllHArea","saveHArea","getOnehAreaSetDeivce","delHArea","saveRule","getRule","delRule","addCamera","delCamera","getCameraData","getCameraList","getAllAlamList","getAllAlarmType","dealAlarmItem","dealAlarms","getCommonApi","TYPES","List","NAV_INFO","FENCE","ALARM","TITLE_HEIGHT","ALL_MENU","clickCode","equipIconConfig","distance","height","basestationIcon","Image","cameraIcon","cameraLabelDirection","cameraDirection","String","bubblePathObj","top","bottom","left","right","areaRules","formateRuleType","findIndex","bgImageConfig","areaColorConfig","stroke","fill","strokeWidth","perfectDrawEnabled","getOffset","canvasPos","imgPos","scale","getCorrectPx","ele","pos","w","offsetWidth","offsetHeight","winWidth","innerWidth","winHeight","innerHeight","screenTocanvas","state","sx","sy","canvasToStage","svgToImage","isBubble","pathSrc","color","svg","createElementNS","path","svgStr","XMLSerializer","serializeToString","base64","btoa","image","guid","S4","Math","random","substring","generateImageDomByType","attrs","layrestype","defdata","layinfo","W","H","Color","svgConfig","imageDom","WSType","wsUrls","location","alarm","forEach","servertype","serverip","serverport","draggableDialog","el","binding","split","header","customForm","dialogHeaderEl","querySelector","dragDom","cssText","getStyle","dom","attr","getComputedStyle","onmousedown","disX","clientX","offsetLeft","disY","clientY","offsetTop","dragDomWidth","dragDomHeight","screenWidth","body","clientWidth","screenHeight","clientHeight","minDragDomLeft","maxDragDomLeft","minDragDomTop","maxDragDomTop","styL","styT","onmousemove","onmouseup","drag","navList","navItem","navIndex","handleNavClick","icon","emits","emit","resetIndex","search","handleDetail","changePage","getPersonData","getPersonList","CLICKED","getList","param","act","personAll","handleEdit","getPersonDetail","handleDelete","cameraAll","dtypecode","getCameraDetail","DeviceIdS","catch","addStation","delStation","getStationData","getStationList","stationAll","getBaseStaionDetail","list","handleClick","emitObj","1","2","3","4","keys","hiddenRef","styleAttrs","menuItem","handleClickContentmenu","SHOW_DETAILS","TRACK_PLAYBACK","EDIT","SEE_NOWVIDEO","SEE_HISTORYVIDEO","Array","contextMenuRef","getPx","positions","assign","formTitle","handleClickHeaderClose","formType","DeviceName","DeviceNum","DeviceType","SceneName","IsUse","shapeName","Username","Photo","Personnel_category","Position","Fettle","BraceletVoltage","desc","filters","UPDATE_X","UPDATE_Y","CONFIRM","CHANGE_DIRECTION","CANCEL_FORM","CLOSE","directives","Boolean","Number","formContentRef","roomNum","AlarmMappingLayerIdS","BrandCode","BrandName","BuildingName","BuildingNum","DeviceObjProperty","DeviceSelfPointRelation","DeviceTypeCode","InstallSceneNum","OwnAlarmSourceCode","PDeviceIds","checkIp","pattern","checkPos","isInteger","checkPosX","checkPosY","emitName","resetFields","validate","valid","newVal","newX","isNaN","newY","cameraDirectionFormate","0","$emit","clickHandler","hiddenBox","ctx","radarR","radarR1","shipImg","shipDeg","alpha","personPosArr","$el","$refs","waterAlarmCanvas","getContext","shipWidth","shipHeight","drawScene","animate","requestAnimationFrame","PI","clearRect","drawBasicIcon","drawRadar","drawPerson","save","translate","rotate","drawImage","restore","canvasWidth","canvasHeight","beginPath","fillStyle","arc","closePath","lineCap","strokeStyle","lineWidth","moveTo","lineTo","grd","createRadialGradient","addColorStop","posArr","offsetX","offsetY","muted","autoplay","controls","cameraName","cameraHigh","active-text","inactive-text","active-value","inactive-value","changSwitch","hidden","isLoading","CHANGE_MONITORLISTPANEL_STATE","dragDialog","players","playList","monitorPanelState","serverHost","cameraId","subtype","dataRef","playerRef","initPlayer","flv","isSupported","video","rtsp","password","brand","player","Url","encodeURIComponent","createPlayer","isLive","enableStashBuffer","autoCleanupMaxBackwardDuration","autoCleanupMinBackwardDuration","statisticsInfoReportInterval","stashInitialSize","enableDurationMonitor","enableVideoFrozenMonitor","enableConstVideoViewSize","Events","METADATA_ARRIVED","enableVideoStateMonitor","VIDEO_RESOLUTION_CHANGED","MEDIA_SOURCE_ENDED","MEDIA_SOURCE_CLOSE","paused","addEventListener","NETWORK_ERROR","MEDIA_ERROR","VIDEO_FROZEN","ERROR","errType","errDetail","attachMediaElement","load","play","pause","unload","detachMediaElement","initCameraData","newValue","handleVideoProgress","changePlayStatus","playStatus","currentTime","handleProgress","currentRate","changeRate","timePicker","day","value-format","searchVideo","CHANGE_HISTORYMONITORLISTPANEL_STATE","innerBarRef","progressBarRef","overTime","currentId","allDuration","time1","time2","progressLength","originTime","formatHaiKangTime","timestamps","timestamp","parseFloat","year","month","hour","minute","second","formatDahuaTime","nvr_username","nvr_password","nvr_ip","nvr_channel","hasVideo","formatDay","getTime","flag","formatTimes","floor","rate","playbackRate","getLabelData","getLabelList","labelAll","version","xmlns","xmlns:xlink","viewBox","xml:space","attributeType","attributeName","from","dur","repeatCount","lazyLoad","handleStatus","handleLevel","scrollAlarms","showAlarms","Id","styleArr","colorStyleArr","alarmContent","viewToAlarm","alarmDetail","handleAlarm","dispose_status","handleAll","alarms","oldY","disposeStatus","typeid","alarmTypeArr","alarmTypeName","contentVisiable","itemsRef","alarmBarRef","getAlarmList","sys_showpagesize","ShowSceneNum","alarmProgress","content","targetTouches","pageX","scrollTop","itemLength","ulLength","val","personList","mousePosition","listRef","mapList","mapItem","surl","alt","CLOSED","ChangeMap","EpauletActionCode","BG_NAME","ADD_EQUIP","defaultCameraType","wsUrl","warningListWidth","mainNav","cameraList","basestationList","fenceBox","contextmenuContent","formContent","monitorList","historyMonitor","handle","layerPersonList","mapChoosen","mapObj","cameraImageObjRef","personImageObjRef","basestationImageObjRef","clickTimerRef","minScale","maxScale","isPlayBack","isfollowing","draggable","currentContextmenuRef","tween","steps","lineNode","linePos","waterAlarmPanel","area","cameraCount","liveCameraCount","historyCameraCount","allData","points","ruleFormRef","checkEndTime","ymd","hms","start","IDS","SourceDbOrDeviceIdS","SourceName","SourcePointNum","dealAccount","dealMemo","dealTime","mousePos","stage","batchDraw","layer","Layer","bgLayer","operationLayer","allGroup","cameraGroup","Group","basestationGroup","personGroup","fenceGroup","locateBubbleGroup","activeTarget","equipmentInfo","basestationData","checkedNode","cacheDrawFence","handleStartDrawFence","isFinished","pointsArr","fenceArea","Shape","sceneFunc","shape","fillStrokeShape","add","info","close","pop","editRestore","clearShadowColor","showMenuList","hideMenuList","cacheImage","imageAbout","imageObj","isCached","imageELe","handleStageWheel","ev","evt","wheelDelta","deltaY","rateX","rateY","toFixed","setAttrs","scaleX","scaleY","handleStageMouseDown","container","cursor","handleStageMouseUp","handleStageMouseMove","mouseMoveFunc","maxSx","minSx","maxSy","minSy","midSy","handleStageContextMenu","preventDefault","stageEventsInit","initStage","Stage","bubble","personImgObj","addLayer","moveToBottom","moveToTop","cacheBasestationObj","initBasestation","lids","shadowColor","shadowBlur","cacheCameraObj","initCamera","cacheBubbleObj","initBubble","OffsetX","OffsetY","IsHaveCount","CountItem","group","ltype","Text","text","fontSize","line","Line","bottomGroup","gap","cornerGroup","cornerH","cornerRect","Rect","cornerRadius","cornerText","cacheAreaObj","initArea","startPoint","X","Y","areaItem","cachePersonObj","initPerson","initType","generate","img","transferData","getAllMapCamera","TypeCodeChar","getCurrentMapCamera","getCurrentMapBubble","getCurrentMapBasestation","getCurrentMapPerson","LocationSceneId","ProductId","getCurrentMapArea","getAllAlarm","cacheBgImage","initBgImage","listening","initAlarmWs","updataBgImage","bgImageDom","initShape","bgSrc","startInit","getAllMap","computedRem","docEl","documentElement","mainNavRef","fenceInfoFormRef","openFenceDetail","editFenceId","LayerIdS","SceneNum","deviceArr","deviceitem","showClose","chooseDevice","CheckSourceID","DevicePointRelation","CheckSourceUnitName","getRules","labelType","ptype","editPoints","layerId","layerName","openRule","clearValidate","ruleId","stime","etime","limtime","dateTime","loop","formateTime","formateStr","StartTime","EndTime","ID","Memo","RuleLocateType","PermitType","IsLoopEveryDay","OwnUserType","OwnParam","LimitedTime","formContentComponentRef","popMonitorVideo","popHistoryMonitorVideo","watchMonitorListPanelState","watchHistoryMonitorListPanelState","trackPlaybackFormRef","equipImgRef","popEquipment","addEquipToScene","images","imgObj","node","putEquipment","children","equipImgDom","imageEle","findOne","replaceChild","updateEquipPos","locationWs","alarmWs","WebSocket","onmessage","alarmtype","destroyChildren","searchDevice","dtype","mapNum","common","confirm","confirmButtonText","cancelButtonText","handleWindowResize","debounceRem","debounceResize","removeEventListener","headerComponent","mainComponent","routes","component","Home","history","scrollBehavior","savedPosition","settings","getPageTitle","pageTitle","whiteList","beforeEach","_","meta","hasToken","afterEach","done","mutations","actions","plugins","app","globalProperties","$ELEMENT","plugin","debounceClick","App","directive","tagName","store","mount"],"mappings":"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","file":"js/app.eb000d08.js","sourcesContent":[" \t// install a JSONP callback for chunk loading\n \tfunction webpackJsonpCallback(data) {\n \t\tvar chunkIds = data[0];\n \t\tvar moreModules = data[1];\n \t\tvar executeModules = data[2];\n\n \t\t// add \"moreModules\" to the modules object,\n \t\t// then flag all \"chunkIds\" as loaded and fire callback\n \t\tvar moduleId, chunkId, i = 0, resolves = [];\n \t\tfor(;i < chunkIds.length; i++) {\n \t\t\tchunkId = chunkIds[i];\n \t\t\tif(Object.prototype.hasOwnProperty.call(installedChunks, chunkId) && installedChunks[chunkId]) {\n \t\t\t\tresolves.push(installedChunks[chunkId][0]);\n \t\t\t}\n \t\t\tinstalledChunks[chunkId] = 0;\n \t\t}\n \t\tfor(moduleId in moreModules) {\n \t\t\tif(Object.prototype.hasOwnProperty.call(moreModules, moduleId)) {\n \t\t\t\tmodules[moduleId] = moreModules[moduleId];\n \t\t\t}\n \t\t}\n \t\tif(parentJsonpFunction) parentJsonpFunction(data);\n\n \t\twhile(resolves.length) {\n \t\t\tresolves.shift()();\n \t\t}\n\n \t\t// add entry modules from loaded chunk to deferred list\n \t\tdeferredModules.push.apply(deferredModules, executeModules || []);\n\n \t\t// run deferred modules when all chunks ready\n \t\treturn checkDeferredModules();\n \t};\n \tfunction checkDeferredModules() {\n \t\tvar result;\n \t\tfor(var i = 0; i < deferredModules.length; i++) {\n \t\t\tvar deferredModule = deferredModules[i];\n \t\t\tvar fulfilled = true;\n \t\t\tfor(var j = 1; j < deferredModule.length; j++) {\n \t\t\t\tvar depId = deferredModule[j];\n \t\t\t\tif(installedChunks[depId] !== 0) fulfilled = false;\n \t\t\t}\n \t\t\tif(fulfilled) {\n \t\t\t\tdeferredModules.splice(i--, 1);\n \t\t\t\tresult = __webpack_require__(__webpack_require__.s = deferredModule[0]);\n \t\t\t}\n \t\t}\n\n \t\treturn result;\n \t}\n\n \t// The module cache\n \tvar installedModules = {};\n\n \t// object to store loaded CSS chunks\n \tvar installedCssChunks = {\n \t\t\"app\": 0\n \t}\n\n \t// object to store loaded and loading chunks\n \t// undefined = chunk not loaded, null = chunk preloaded/prefetched\n \t// Promise = chunk loading, 0 = chunk loaded\n \tvar installedChunks = {\n \t\t\"app\": 0\n \t};\n\n \tvar deferredModules = [];\n\n \t// script path function\n \tfunction jsonpScriptSrc(chunkId) {\n \t\treturn __webpack_require__.p + \"js/\" + ({\"about\":\"about\",\"login\":\"login\"}[chunkId]||chunkId) + \".\" + {\"about\":\"8f084398\",\"login\":\"bc9e85bc\"}[chunkId] + \".js\"\n \t}\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n \t// This file contains only the entry chunk.\n \t// The chunk loading function for additional chunks\n \t__webpack_require__.e = function requireEnsure(chunkId) {\n \t\tvar promises = [];\n\n\n \t\t// mini-css-extract-plugin CSS loading\n \t\tvar cssChunks = {\"login\":1};\n \t\tif(installedCssChunks[chunkId]) promises.push(installedCssChunks[chunkId]);\n \t\telse if(installedCssChunks[chunkId] !== 0 && cssChunks[chunkId]) {\n \t\t\tpromises.push(installedCssChunks[chunkId] = new Promise(function(resolve, reject) {\n \t\t\t\tvar href = \"css/\" + ({\"about\":\"about\",\"login\":\"login\"}[chunkId]||chunkId) + \".\" + {\"about\":\"31d6cfe0\",\"login\":\"69f1ce78\"}[chunkId] + \".css\";\n \t\t\t\tvar fullhref = __webpack_require__.p + href;\n \t\t\t\tvar existingLinkTags = document.getElementsByTagName(\"link\");\n \t\t\t\tfor(var i = 0; i < existingLinkTags.length; i++) {\n \t\t\t\t\tvar tag = existingLinkTags[i];\n \t\t\t\t\tvar dataHref = tag.getAttribute(\"data-href\") || tag.getAttribute(\"href\");\n \t\t\t\t\tif(tag.rel === \"stylesheet\" && (dataHref === href || dataHref === fullhref)) return resolve();\n \t\t\t\t}\n \t\t\t\tvar existingStyleTags = document.getElementsByTagName(\"style\");\n \t\t\t\tfor(var i = 0; i < existingStyleTags.length; i++) {\n \t\t\t\t\tvar tag = existingStyleTags[i];\n \t\t\t\t\tvar dataHref = tag.getAttribute(\"data-href\");\n \t\t\t\t\tif(dataHref === href || dataHref === fullhref) return resolve();\n \t\t\t\t}\n \t\t\t\tvar linkTag = document.createElement(\"link\");\n \t\t\t\tlinkTag.rel = \"stylesheet\";\n \t\t\t\tlinkTag.type = \"text/css\";\n \t\t\t\tlinkTag.onload = resolve;\n \t\t\t\tlinkTag.onerror = function(event) {\n \t\t\t\t\tvar request = event && event.target && event.target.src || fullhref;\n \t\t\t\t\tvar err = new Error(\"Loading CSS chunk \" + chunkId + \" failed.\\n(\" + request + \")\");\n \t\t\t\t\terr.code = \"CSS_CHUNK_LOAD_FAILED\";\n \t\t\t\t\terr.request = request;\n \t\t\t\t\tdelete installedCssChunks[chunkId]\n \t\t\t\t\tlinkTag.parentNode.removeChild(linkTag)\n \t\t\t\t\treject(err);\n \t\t\t\t};\n \t\t\t\tlinkTag.href = fullhref;\n\n \t\t\t\tvar head = document.getElementsByTagName(\"head\")[0];\n \t\t\t\thead.appendChild(linkTag);\n \t\t\t}).then(function() {\n \t\t\t\tinstalledCssChunks[chunkId] = 0;\n \t\t\t}));\n \t\t}\n\n \t\t// JSONP chunk loading for javascript\n\n \t\tvar installedChunkData = installedChunks[chunkId];\n \t\tif(installedChunkData !== 0) { // 0 means \"already installed\".\n\n \t\t\t// a Promise means \"currently loading\".\n \t\t\tif(installedChunkData) {\n \t\t\t\tpromises.push(installedChunkData[2]);\n \t\t\t} else {\n \t\t\t\t// setup Promise in chunk cache\n \t\t\t\tvar promise = new Promise(function(resolve, reject) {\n \t\t\t\t\tinstalledChunkData = installedChunks[chunkId] = [resolve, reject];\n \t\t\t\t});\n \t\t\t\tpromises.push(installedChunkData[2] = promise);\n\n \t\t\t\t// start chunk loading\n \t\t\t\tvar script = document.createElement('script');\n \t\t\t\tvar onScriptComplete;\n\n \t\t\t\tscript.charset = 'utf-8';\n \t\t\t\tscript.timeout = 120;\n \t\t\t\tif (__webpack_require__.nc) {\n \t\t\t\t\tscript.setAttribute(\"nonce\", __webpack_require__.nc);\n \t\t\t\t}\n \t\t\t\tscript.src = jsonpScriptSrc(chunkId);\n\n \t\t\t\t// create error before stack unwound to get useful stacktrace later\n \t\t\t\tvar error = new Error();\n \t\t\t\tonScriptComplete = function (event) {\n \t\t\t\t\t// avoid mem leaks in IE.\n \t\t\t\t\tscript.onerror = script.onload = null;\n \t\t\t\t\tclearTimeout(timeout);\n \t\t\t\t\tvar chunk = installedChunks[chunkId];\n \t\t\t\t\tif(chunk !== 0) {\n \t\t\t\t\t\tif(chunk) {\n \t\t\t\t\t\t\tvar errorType = event && (event.type === 'load' ? 'missing' : event.type);\n \t\t\t\t\t\t\tvar realSrc = event && event.target && event.target.src;\n \t\t\t\t\t\t\terror.message = 'Loading chunk ' + chunkId + ' failed.\\n(' + errorType + ': ' + realSrc + ')';\n \t\t\t\t\t\t\terror.name = 'ChunkLoadError';\n \t\t\t\t\t\t\terror.type = errorType;\n \t\t\t\t\t\t\terror.request = realSrc;\n \t\t\t\t\t\t\tchunk[1](error);\n \t\t\t\t\t\t}\n \t\t\t\t\t\tinstalledChunks[chunkId] = undefined;\n \t\t\t\t\t}\n \t\t\t\t};\n \t\t\t\tvar timeout = setTimeout(function(){\n \t\t\t\t\tonScriptComplete({ type: 'timeout', target: script });\n \t\t\t\t}, 120000);\n \t\t\t\tscript.onerror = script.onload = onScriptComplete;\n \t\t\t\tdocument.head.appendChild(script);\n \t\t\t}\n \t\t}\n \t\treturn Promise.all(promises);\n \t};\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// on error function for async loading\n \t__webpack_require__.oe = function(err) { console.error(err); throw err; };\n\n \tvar jsonpArray = window[\"webpackJsonp\"] = window[\"webpackJsonp\"] || [];\n \tvar oldJsonpFunction = jsonpArray.push.bind(jsonpArray);\n \tjsonpArray.push = webpackJsonpCallback;\n \tjsonpArray = jsonpArray.slice();\n \tfor(var i = 0; i < jsonpArray.length; i++) webpackJsonpCallback(jsonpArray[i]);\n \tvar parentJsonpFunction = oldJsonpFunction;\n\n\n \t// add entry module to deferred list\n \tdeferredModules.push([0,\"chunk-vendors\"]);\n \t// run deferred modules when ready\n \treturn checkDeferredModules();\n","export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./index.vue?vue&type=style&index=0&id=096fc136&lang=scss&scoped=true\"","/*\r\n * @Description:\r\n * @Author: huxianc\r\n * @Date: 2020-12-24 15:11:37\r\n * @LastEditors: huxianc\r\n * @LastEditTime: 2021-01-22 14:14:00\r\n */\r\n\r\nimport axios from \"axios\";\r\nimport { ElMessage } from \"element-plus\";\r\nimport { baseUrl } from \"./urls\";\r\nimport qs from \"qs\";\r\nimport { getToken } from \"./auth\";\r\n\r\nconst service = axios.create({\r\n  baseURL: baseUrl,\r\n  headers: {\r\n    \"Content-Type\": \"application/x-www-form-urlencoded\"\r\n  },\r\n  timeout: 5000\r\n});\r\n\r\nconst jsonList = [\"/alarm/deal\", \"/alarm/dealall\"];\r\n\r\nservice.interceptors.request.use(\r\n  async config => {\r\n    config.data = qs.stringify(config.data);\r\n    if (config.url !== \"/tbs/dologin\") {\r\n      config.headers.visittoken = await getToken();\r\n    }\r\n\r\n    if (jsonList.includes(config.url as string)) {\r\n      config.headers[\"Content-Type\"] = \"application/json\";\r\n    }\r\n\r\n    return config;\r\n  },\r\n  error => {\r\n    console.log(error);\r\n    return Promise.reject(error);\r\n  }\r\n);\r\n\r\nservice.interceptors.response.use(\r\n  response => {\r\n    const res = response.data;\r\n    if (res.result.success === false) {\r\n      ElMessage({\r\n        message: res.result.msg || \"Error\",\r\n        type: \"error\",\r\n        duration: 5 * 1000\r\n      });\r\n\r\n      return Promise.reject(new Error(res.result.msg || \"Error\"));\r\n    } else {\r\n      return res;\r\n    }\r\n  },\r\n  error => {\r\n    console.log(\"err\" + error);\r\n    ElMessage({\r\n      message: error.message,\r\n      type: \"error\",\r\n      duration: 5 * 1000\r\n    });\r\n    return Promise.reject(error);\r\n  }\r\n);\r\n\r\nexport default service;\r\n","export * from \"-!../../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./contextmenuContent.vue?vue&type=style&index=0&id=6e671808&lang=scss&scoped=true\"","export * from \"-!../../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./monitorList.vue?vue&type=style&index=0&id=90514850&lang=scss\"","/*\r\n * @Description:\r\n * @Author: huxianc\r\n * @Date: 2021-01-19 15:14:46\r\n * @LastEditors: huxianc\r\n * @LastEditTime: 2021-01-28 15:25:46\r\n */\r\n\r\nimport { IWsItem } from \"@/types/login\";\r\nimport { IDeviceItem } from \"@/views/Home/content/types/index\";\r\nimport Cookies from \"js-cookie\";\r\n\r\nconst TokenKey = \"hd-water-key\";\r\n\r\nexport function getToken() {\r\n  return Cookies.get(TokenKey);\r\n}\r\n\r\nexport function setToken(token: string) {\r\n  return Cookies.set(TokenKey, token);\r\n}\r\n\r\nexport function removeToken() {\r\n  return Cookies.remove(TokenKey);\r\n}\r\n\r\n// 账号名称 eg:驾驶仓指挥室\r\nconst UserName = \"username\";\r\n\r\nexport function setUsername(username: string) {\r\n  return localStorage.setItem(UserName, username);\r\n}\r\n\r\nexport function getUsername() {\r\n  return localStorage.getItem(UserName) || \"\";\r\n}\r\n\r\nexport function removeUsername() {\r\n  return localStorage.removeItem(UserName);\r\n}\r\n\r\n// 账号 eg:zscb\r\nconst UserAccount = \"useraccount\";\r\nexport function setUserAccount(account: string) {\r\n  return localStorage.setItem(UserAccount, account);\r\n}\r\n\r\nexport function getUserAccount() {\r\n  return localStorage.getItem(UserAccount) || \"\";\r\n}\r\n\r\nexport function removeUserAccount() {\r\n  return localStorage.removeItem(UserAccount);\r\n}\r\n\r\n// 当前账号所拥有的建筑编号的起始编号，后续可能会用\r\n// eg:zscb\r\nconst BNum = \"bnum\";\r\nexport function setBNum(bnum: string) {\r\n  return localStorage.setItem(BNum, bnum);\r\n}\r\n\r\nexport function getBNum() {\r\n  return localStorage.getItem(BNum) || \"\";\r\n}\r\n\r\nexport function removeBNum() {\r\n  return localStorage.removeItem(BNum);\r\n}\r\n\r\nconst wsArr = \"serveritem\";\r\n\r\nexport function setWsArr(ws: IWsItem[]) {\r\n  return localStorage.setItem(wsArr, JSON.stringify(ws));\r\n}\r\n\r\nexport function getWsArr() {\r\n  return (JSON.parse(localStorage.getItem(wsArr) as string) || []) as IWsItem[];\r\n}\r\n\r\nexport function removeWsArr() {\r\n  return localStorage.removeItem(wsArr);\r\n}\r\n\r\n// 首页场景编号\r\nconst HomeSNum = \"homesnum\";\r\nexport function setHomeSNum(homesnum: string) {\r\n  return localStorage.setItem(HomeSNum, homesnum);\r\n}\r\n\r\nexport function getHomeSNum() {\r\n  return localStorage.getItem(HomeSNum) || \"\";\r\n}\r\n\r\nexport function removeHomeSNum() {\r\n  return localStorage.removeItem(HomeSNum);\r\n}\r\n\r\n// 初始加载场景编号\r\nconst LoadSNum = \"loadsnum\";\r\nexport function setLoadSNum(loadsnum: string) {\r\n  return localStorage.setItem(LoadSNum, loadsnum);\r\n}\r\n\r\nexport function getLoadSNum() {\r\n  return localStorage.getItem(LoadSNum) || \"\";\r\n}\r\n\r\nexport function removeLoadSNum() {\r\n  return localStorage.removeItem(LoadSNum);\r\n}\r\n\r\nconst deviceAll = \"deviceAll\";\r\n// 保存所有设备信息\r\nexport function setAllDevice(deviceall: IDeviceItem[]) {\r\n  return localStorage.setItem(deviceAll, JSON.stringify(deviceall));\r\n}\r\n// 获取所有设备信息\r\nexport function getAllDevice() {\r\n  return (JSON.parse(localStorage.getItem(deviceAll) as string) ||\r\n    []) as IDeviceItem[];\r\n}\r\n","export * from \"-!../../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./layerPersonList.vue?vue&type=style&index=0&id=556b882e&lang=scss&scoped=true\"","export * from \"-!../../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./mainNav.vue?vue&type=style&index=0&id=f0915244&lang=scss&scoped=true\"","export * from \"-!../../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./waterAlarm.vue?vue&type=style&index=0&id=297d393a&lang=scss&scoped=true\"","// extracted by mini-css-extract-plugin\nmodule.exports = {\"menuText\":\"#bfcbd9\",\"menuActiveText\":\"#409eff\",\"subMenuActiveText\":\"#f4f4f5\",\"menuBg\":\"#304156\",\"menuHover\":\"#263445\",\"subMenuBg\":\"#1f2d3d\",\"subMenuHover\":\"#001528\",\"sideBarWidth\":\"210px\"};","\n            const data = {\"name\":\"fullscreen\",\"data\":{\"width\":\"128\",\"height\":\"128\",\"viewBox\":\"0 0 128 128\",\"data\":\"<path pid=\\\"0\\\" d=\\\"M38.47 52L52 38.462l-23.648-23.67L43.209 0H.035L0 43.137l14.757-14.865L38.47 52zm74.773 47.726L89.526 76 76 89.536l23.648 23.672L84.795 128h43.174L128 84.863l-14.757 14.863zM89.538 52l23.668-23.648L128 43.207V.038L84.866 0 99.73 14.76 76 38.472 89.538 52zM38.46 76L14.792 99.651 0 84.794v43.173l43.137.033-14.865-14.757L52 89.53 38.46 76z\\\"/>\"}}\n        \n                module.exports = data\n                ","/*\r\n * @Description:\r\n * @Author: huxianc\r\n * @Date: 2020-12-24 15:15:41\r\n * @LastEditors: huxianc\r\n * @LastEditTime: 2021-01-22 11:12:15\r\n */\r\n\r\nconst ip = \"http://10.1.200.223:\";\r\n// const ip = \"http://localhost:\"\r\n\r\nconst locateUrl = ip + \"39000/\";\r\n\r\nexport const baseUrl = locateUrl + \"api\";\r\nexport const imgUrl = ip + \"39001/\";\r\nexport const nodeUrl = \"http://10.1.200.16:8001/\";\r\nexport const httpFlvServer = \"ws://10.1.200.246:8888/rtsp\"; //摄像头推流 lfq\r\n","export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./headerBar.vue?vue&type=style&index=1&id=dc82bc7a&lang=scss\"","export * from \"-!../../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!./index.scss?vue&type=style&index=0&id=264210bc&lang=scss&scoped=true\"","export * from \"-!../../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./mapChoosen.vue?vue&type=style&index=0&id=7ff0bed1&lang=scss&scoped=true\"","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./index.vue?vue&type=style&index=0&id=45d78b5a&lang=scss&scoped=true\"","export * from \"-!../../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./historyMonitor.vue?vue&type=style&index=0&id=64dc0cc8&lang=scss&scoped=true\"","<!--\r\n * @Description: \r\n * @Author: huxianc\r\n * @Date: 2020-12-24 14:37:03\r\n * @LastEditors: huxianc\r\n * @LastEditTime: 2021-01-05 15:24:55\r\n-->\r\n<template>\r\n  <div class=\"home-container\">\r\n    <headerComponent />\r\n    <mainComponent />\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport headerComponent from \"./Head/index.vue\";\r\nimport mainComponent from \"./content/index.vue\";\r\nexport default {\r\n  components: {\r\n    headerComponent,\r\n    mainComponent\r\n  }\r\n};\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n.home-container {\r\n  min-height: 100vh;\r\n  display: flex;\r\n  flex-direction: column;\r\n  background: rgba(30, 42, 66, 1);\r\n}\r\n</style>\r\n","<!--\r\n * @Description: \r\n * @Author: huxianc\r\n * @Date: 2020-12-24 14:40:44\r\n * @LastEditors: huxianc\r\n * @LastEditTime: 2021-01-05 17:05:55\r\n-->\r\n\r\n<template>\r\n  <header>\r\n    <div class=\"header\">\r\n      <div class=\"side left\">\r\n        <i class=\"el-icon-time\" />\r\n        <span class=\"time\">{{ now }}</span>\r\n      </div>\r\n      <div class=\"side center\">人员定位及落水报警系统</div>\r\n      <div class=\"right\">\r\n        <header-bar />\r\n      </div>\r\n    </div>\r\n  </header>\r\n</template>\r\n\r\n<script lang=\"ts\">\r\nimport { defineComponent, onMounted, onUnmounted, ref } from \"vue\";\r\nimport { parseTime } from \"../../../utils\";\r\nimport HeaderBar from \"./headerBar.vue\";\r\nexport default defineComponent({\r\n  name: \"Header\",\r\n  components: {\r\n    HeaderBar\r\n  },\r\n  setup() {\r\n    const now = ref(parseTime(Date.now()));\r\n    let timer: null | number = null;\r\n    onMounted(() => {\r\n      timer = setInterval(() => {\r\n        now.value = parseTime(Date.now());\r\n      });\r\n    });\r\n    onUnmounted(() => {\r\n      timer && clearInterval(timer);\r\n    });\r\n    return {\r\n      now\r\n    };\r\n  }\r\n});\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\nheader {\r\n  position: absolute;\r\n  width: 100%;\r\n  height: 80px;\r\n  z-index: 1500;\r\n  font-size: 18px;\r\n  color: #fff;\r\n  background: url(\"/images/title.png\") repeat center center/100% 100%;\r\n  user-select: none;\r\n  .header {\r\n    position: relative;\r\n    height: 60px;\r\n    overflow: hidden;\r\n  }\r\n}\r\n.side {\r\n  position: absolute;\r\n  top: 50%;\r\n  transform: translateY(-50%);\r\n\r\n  &.left {\r\n    color: #3dd1ff;\r\n    left: 5%;\r\n    font-size: 24px;\r\n    display: flex;\r\n    align-items: center;\r\n    .time {\r\n      margin-left: 5px;\r\n      letter-spacing: 1px;\r\n      color: #43b0de;\r\n      font-size: 16px;\r\n    }\r\n  }\r\n\r\n  &.center {\r\n    left: 50%;\r\n    bottom: 0;\r\n    transform: translateX(-50%);\r\n    font-size: 24px;\r\n    font-weight: bold;\r\n    letter-spacing: 2px;\r\n  }\r\n}\r\n.right {\r\n  height: 100%;\r\n}\r\n</style>\r\n","/*\r\n * @Description:\r\n * @Author: huxianc\r\n * @Date: 2020-12-24 14:48:07\r\n * @LastEditors: liufuqiang\r\n * @LastEditTime: 2021-01-28 15:12:07\r\n */\r\nimport { ICommonRule, ICustomFuncRule } from \"@/types\";\r\n// Parse the time to string\r\nexport const parseTime = (\r\n  time?: object | string | number | null,\r\n  cFormat?: string\r\n): string | null => {\r\n  if (time === undefined || !time) {\r\n    return null;\r\n  }\r\n  const format = cFormat || \"{y}-{m}-{d} {h}:{i}:{s}\";\r\n  let date: Date;\r\n  if (typeof time === \"object\") {\r\n    date = time as Date;\r\n  } else {\r\n    if (typeof time === \"string\") {\r\n      if (/^[0-9]+$/.test(time)) {\r\n        // support \"1548221490638\"\r\n        time = parseInt(time);\r\n      } else {\r\n        // support safari\r\n        // https://stackoverflow.com/questions/4310953/invalid-date-in-safari\r\n        time = time.replace(new RegExp(/-/gm), \"/\");\r\n      }\r\n    }\r\n    if (typeof time === \"number\" && time.toString().length === 10) {\r\n      time = time * 1000;\r\n    }\r\n    date = new Date(time);\r\n  }\r\n  const formatObj: { [key: string]: number } = {\r\n    y: date.getFullYear(),\r\n    m: date.getMonth() + 1,\r\n    d: date.getDate(),\r\n    h: date.getHours(),\r\n    i: date.getMinutes(),\r\n    s: date.getSeconds(),\r\n    a: date.getDay()\r\n  };\r\n  const timeStr = format.replace(/{([ymdhisa])+}/g, (result, key) => {\r\n    const value = formatObj[key];\r\n    // Note: getDay() returns 0 on Sunday\r\n    if (key === \"a\") {\r\n      return [\"日\", \"一\", \"二\", \"三\", \"四\", \"五\", \"六\"][value];\r\n    }\r\n    return value.toString().padStart(2, \"0\");\r\n  });\r\n  return timeStr;\r\n};\r\n\r\n/**\r\n * @description: 公用的rule表单验证规则\r\n * @param {string} msg 提示错误\r\n * @return {object} IRule\r\n */\r\nexport function commonRuleItem(msg: string): ICommonRule {\r\n  return {\r\n    required: true,\r\n    message: msg,\r\n    trigger: [\"blur\", \"change\"]\r\n  };\r\n}\r\n\r\n/**\r\n * @description: 自定义函数验证\r\n * @param {function} func 自定义函数\r\n * @return {IRule} IRule\r\n */\r\nexport function customFuncRule(func: Function): ICustomFuncRule {\r\n  return {\r\n    required: true,\r\n    validator: func,\r\n    trigger: \"blur\"\r\n  };\r\n}\r\n/**\r\n * @description: 验证正整数\r\n */\r\nexport function checkPositiveInteger(\r\n  rule: any,\r\n  value: string,\r\n  callback: Function\r\n) {\r\n  if (value === \"0\" || value === \"\") {\r\n    return callback(new Error(\"请输入大于0的正整数\"));\r\n  }\r\n  if (!/(^[1-9]\\d*$)/.test(value)) {\r\n    callback(new Error(\"只能输入正整数！\"));\r\n  } else {\r\n    callback();\r\n  }\r\n}\r\n/**\r\n * @description: 前端自定义分页\r\n * @param allArr 原数组\r\n * @param page 当前页\r\n * @param prop 筛选参数\r\n * @param key 筛选值\r\n * @param size 每页显示条数\r\n * @return arr 当前页数据数组\r\n */\r\nexport function getPagination(\r\n  allArr: any[],\r\n  page: number,\r\n  prop = \"\",\r\n  key = \"\",\r\n  size = 10\r\n) {\r\n  const len = arguments.length;\r\n  if (len > 2) {\r\n    allArr = allArr.filter((item: any) => item[prop].includes(key)).slice();\r\n  }\r\n  const arr = allArr.slice().slice((page - 1) * size, (page - 1) * size + size);\r\n\r\n  return arr;\r\n}\r\n/**\r\n * @description: 前端自定义分页获取数量\r\n * @param allArr 原数组\r\n * @param prop 筛选参数\r\n * @param key 筛选值\r\n * @return count 筛选总数\r\n */\r\nexport function getPagintionCount(allArr: any, prop = \"\", key = \"\") {\r\n  const len = arguments.length;\r\n  if (len > 1) {\r\n    allArr = allArr.filter((item: any) => item[prop].includes(key)).slice();\r\n  }\r\n  const count = allArr.length;\r\n  return count;\r\n}\r\n/**\r\n * @description 根据场景编号获取场景名称\r\n * @param snum 场景编号\r\n * @return map 当前场景名称\r\n */\r\nexport function getMap(snum: string) {\r\n  // 从localStorage取所有场景信息\r\n  const sceneAllStr = localStorage.getItem(\"sceneAll\") as string;\r\n  const sceneAll: [] = JSON.parse(sceneAllStr);\r\n  let map = \"\";\r\n  sceneAll.filter((item: any) => {\r\n    if (item.snum === snum) {\r\n      map = item.sname;\r\n      return;\r\n    }\r\n  });\r\n  return map;\r\n}\r\n/**\r\n * @description 返回格式化时间\r\n * @param timestr 标准时间\r\n * @return timestr 格式化时间字符串\r\n */\r\nexport function formatTime(timestr: string) {\r\n  if (!timestr) return;\r\n  timestr = timestr.replace(/T|\\+08:00/gim, \" \");\r\n  return timestr;\r\n}","<!--\r\n * @Description:\r\n * @Author: huxianc\r\n * @Date: 2020-11-23 11:49:13\r\n * @LastEditors: huxianc\r\n * @LastEditTime: 2021-01-28 10:58:50\r\n-->\r\n<template>\r\n  <div class=\"right-menu\">\r\n    <!-- <header-search id=\"header-search\" class=\"right-menu-item\" /> -->\r\n\r\n    <screenfull id=\"screenfull\" class=\"right-menu-item hover-effect\" />\r\n\r\n    <el-dropdown\r\n      class=\"avatar-container right-menu-item hover-effect\"\r\n      trigger=\"click\"\r\n    >\r\n      <div class=\"avatar-wrapper\">\r\n        <i class=\"el-icon-user-solid user-avatar\" />\r\n        <i class=\"el-icon-caret-bottom\" />\r\n      </div>\r\n      <template #dropdown>\r\n        <el-dropdown-menu>\r\n          <router-link to=\"/about\">\r\n            <el-dropdown-item>后台管理</el-dropdown-item>\r\n          </router-link>\r\n\r\n          <el-dropdown-item divided @click=\"logout\">\r\n            <span style=\"display: block;\">注销</span>\r\n          </el-dropdown-item>\r\n        </el-dropdown-menu>\r\n      </template>\r\n    </el-dropdown>\r\n  </div>\r\n</template>\r\n\r\n<script lang=\"ts\">\r\nimport { defineComponent } from \"vue\";\r\nimport Screenfull from \"@/components/Screenfull/index.vue\";\r\n// import headerSearch from \"./headerSearch.vue\";\r\nimport { removeToken } from \"@/utils/auth\";\r\nimport { useRouter } from \"vue-router\";\r\nexport default defineComponent({\r\n  name: \"HeaderBar\",\r\n  components: {\r\n    Screenfull\r\n    // headerSearch\r\n  },\r\n  setup() {\r\n    const router = useRouter();\r\n    async function logout() {\r\n      await removeToken();\r\n      localStorage.clear();\r\n      router.push(\"/login\");\r\n    }\r\n\r\n    return {\r\n      logout\r\n    };\r\n  }\r\n});\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n.right-menu {\r\n  float: right;\r\n  height: 100%;\r\n  margin-right: 20px;\r\n  line-height: 60px;\r\n\r\n  &:focus {\r\n    outline: none;\r\n  }\r\n\r\n  .right-menu-item {\r\n    display: inline-block;\r\n    padding: 0 8px;\r\n    height: 100%;\r\n    font-size: 18px;\r\n    color: #fff;\r\n    vertical-align: text-bottom;\r\n\r\n    &.hover-effect {\r\n      cursor: pointer;\r\n      transition: background 0.3s;\r\n\r\n      &:hover {\r\n        background: rgba(0, 0, 0, 0.025);\r\n      }\r\n    }\r\n  }\r\n}\r\n</style>\r\n\r\n<style lang=\"scss\">\r\n.avatar-container {\r\n  margin-right: 30px;\r\n  height: 60px;\r\n  line-height: 60px;\r\n  transform: translateY(-18px);\r\n  text-align: center;\r\n  padding: 0 8px;\r\n\r\n  .avatar-wrapper {\r\n    display: flex;\r\n    align-items: center;\r\n    height: 100%;\r\n    position: relative;\r\n\r\n    .user-avatar {\r\n      cursor: pointer;\r\n      font-size: 20px;\r\n    }\r\n\r\n    .el-icon-caret-bottom {\r\n      cursor: pointer;\r\n      position: absolute;\r\n      right: -20px;\r\n      bottom: 20px;\r\n      font-size: 12px;\r\n    }\r\n  }\r\n  &.el-dropdown {\r\n    color: #fff;\r\n  }\r\n}\r\n</style>\r\n","<!--\r\n * @Description: \r\n * @Author: huxianc\r\n * @Date: 2021-01-04 09:44:34\r\n * @LastEditors: huxianc\r\n * @LastEditTime: 2021-01-04 10:24:18\r\n-->\r\n<template>\r\n  <div>\r\n    <svg-icon\r\n      @click=\"click\"\r\n      :data=\"isFullscreen ? exitFullscreen : fullscreen\"\r\n    />\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport screenfull from \"screenfull\";\r\nimport fullscreen from \"@/icons/svg/fullscreen.svg\";\r\nimport exitFullscreen from \"@/icons/svg/exit-fullscreen.svg\";\r\n\r\nexport default {\r\n  name: \"Screenfull\",\r\n  data() {\r\n    return {\r\n      isFullscreen: false,\r\n      fullscreen,\r\n      exitFullscreen\r\n    };\r\n  },\r\n  mounted() {\r\n    this.init();\r\n  },\r\n  beforeUnmount() {\r\n    this.destroy();\r\n  },\r\n  methods: {\r\n    click() {\r\n      if (!screenfull.isEnabled) {\r\n        this.$message({\r\n          message: \"您的浏览器不支持全屏\",\r\n          type: \"warning\"\r\n        });\r\n        return false;\r\n      }\r\n      screenfull.toggle();\r\n    },\r\n    change() {\r\n      this.isFullscreen = screenfull.isFullscreen;\r\n    },\r\n    init() {\r\n      if (screenfull.isEnabled) {\r\n        screenfull.on(\"change\", this.change);\r\n      }\r\n    },\r\n    destroy() {\r\n      if (screenfull.isEnabled) {\r\n        screenfull.off(\"change\", this.change);\r\n      }\r\n    }\r\n  }\r\n};\r\n</script>\r\n","import { render } from \"./index.vue?vue&type=template&id=0072140b\"\nimport script from \"./index.vue?vue&type=script&lang=js\"\nexport * from \"./index.vue?vue&type=script&lang=js\"\nscript.render = render\n\nexport default script","\r\nimport { defineComponent } from \"vue\";\r\nimport Screenfull from \"@/components/Screenfull/index.vue\";\r\n// import headerSearch from \"./headerSearch.vue\";\r\nimport { removeToken } from \"@/utils/auth\";\r\nimport { useRouter } from \"vue-router\";\r\nexport default defineComponent({\r\n  name: \"HeaderBar\",\r\n  components: {\r\n    Screenfull\r\n    // headerSearch\r\n  },\r\n  setup() {\r\n    const router = useRouter();\r\n    async function logout() {\r\n      await removeToken();\r\n      localStorage.clear();\r\n      router.push(\"/login\");\r\n    }\r\n\r\n    return {\r\n      logout\r\n    };\r\n  }\r\n});\r\n","import { render } from \"./headerBar.vue?vue&type=template&id=dc82bc7a&scoped=true\"\nimport script from \"./headerBar.vue?vue&type=script&lang=ts\"\nexport * from \"./headerBar.vue?vue&type=script&lang=ts\"\n\nimport \"./headerBar.vue?vue&type=style&index=0&id=dc82bc7a&lang=scss&scoped=true\"\nimport \"./headerBar.vue?vue&type=style&index=1&id=dc82bc7a&lang=scss\"\nscript.render = render\nscript.__scopeId = \"data-v-dc82bc7a\"\n\nexport default script","\r\nimport { defineComponent, onMounted, onUnmounted, ref } from \"vue\";\r\nimport { parseTime } from \"../../../utils\";\r\nimport HeaderBar from \"./headerBar.vue\";\r\nexport default defineComponent({\r\n  name: \"Header\",\r\n  components: {\r\n    HeaderBar\r\n  },\r\n  setup() {\r\n    const now = ref(parseTime(Date.now()));\r\n    let timer: null | number = null;\r\n    onMounted(() => {\r\n      timer = setInterval(() => {\r\n        now.value = parseTime(Date.now());\r\n      });\r\n    });\r\n    onUnmounted(() => {\r\n      timer && clearInterval(timer);\r\n    });\r\n    return {\r\n      now\r\n    };\r\n  }\r\n});\r\n","import { render } from \"./index.vue?vue&type=template&id=096fc136&scoped=true\"\nimport script from \"./index.vue?vue&type=script&lang=ts\"\nexport * from \"./index.vue?vue&type=script&lang=ts\"\n\nimport \"./index.vue?vue&type=style&index=0&id=096fc136&lang=scss&scoped=true\"\nscript.render = render\nscript.__scopeId = \"data-v-096fc136\"\n\nexport default script","<!--\r\n * @Description: \r\n * @Author: huxianc\r\n * @Date: 2020-12-24 14:56:24\r\n * @LastEditors: huxianc\r\n * @LastEditTime: 2021-01-28 18:01:14\r\n-->\r\n<template>\r\n  <main class=\"home-wrapper\">\r\n    <div id=\"container\"></div>\r\n\r\n    <!-- 底部导航 start -->\r\n    <el-collapse-transition>\r\n      <main-nav\r\n        v-show=\"visibleObj.nav && !status.isDrawFence\"\r\n        ref=\"mainNavRef\"\r\n        @navClick=\"navClick\"\r\n      />\r\n    </el-collapse-transition>\r\n    <!-- 底部导航 end -->\r\n\r\n    <!-- 右侧抽屉 start -->\r\n    <el-drawer\r\n      v-model=\"drawerInfo.showList\"\r\n      direction=\"rtl\"\r\n      size=\"50%\"\r\n      :with-header=\"false\"\r\n      @close=\"resetNavIndex\"\r\n      append-to-body\r\n    >\r\n      <div class=\"drawer-container\">\r\n        <!-- drawer - title -->\r\n        <div class=\"drawer-header\">\r\n          <div class=\"drawer-title\">{{ drawerInfo.drawerTitle }}</div>\r\n          <i class=\"el-icon-close\" @click=\"drawerInfo.showList = false\" />\r\n        </div>\r\n        <!-- drawer content -->\r\n        <el-tabs\r\n          v-model=\"drawerInfo.activeName\"\r\n          type=\"card\"\r\n          @tab-click=\"equipSwitchClick\"\r\n        >\r\n          <el-tab-pane label=\"摄像头\" :name=\"types.camera\">\r\n            <!-- 添加v-if判断 在tabs切换的时候会发起api请求 -->\r\n            <camera-list\r\n              v-if=\"drawerInfo.activeName === types.camera\"\r\n              :form-data=\"detailsForm.formData\"\r\n              @showEquipDetails=\"showEquipDetails\"\r\n              @addEquip=\"addEquip\"\r\n            />\r\n          </el-tab-pane>\r\n          <el-tab-pane label=\"基站\" :name=\"types.basestation\">\r\n            <basestation-list\r\n              v-if=\"drawerInfo.activeName === types.basestation\"\r\n              :form-data=\"detailsForm.formData\"\r\n              @showEquipDetails=\"showEquipDetails\"\r\n              @addEquip=\"addEquip\"\r\n            />\r\n          </el-tab-pane>\r\n          <el-tab-pane label=\"标签\" :name=\"types.labelList\">\r\n            <label-list\r\n              v-if=\"drawerInfo.activeName === types.labelList\"\r\n              :form-data=\"detailsForm.formData\"\r\n              @showEquipDetails=\"showEquipDetails\"\r\n            />\r\n          </el-tab-pane>\r\n          <el-tab-pane label=\"人员\" :name=\"types.person\">\r\n            <person-list\r\n              v-if=\"drawerInfo.activeName === types.person\"\r\n              :form-data=\"detailsForm.formData\"\r\n              @showEquipDetails=\"showEquipDetails\"\r\n            />\r\n          </el-tab-pane>\r\n        </el-tabs>\r\n      </div>\r\n    </el-drawer>\r\n    <!-- 右侧抽屉 end -->\r\n\r\n    <!-- 电子围栏table dialog start -->\r\n    <el-dialog\r\n      title=\"电子围栏\"\r\n      v-model=\"fenceListInfo.tableVisible\"\r\n      width=\"50%\"\r\n    >\r\n      <el-form :model=\"fenceListInfo.params\" label-width=\"80px\" :inline=\"true\">\r\n        <el-form-item label>\r\n          <el-button type=\"primary\" @click=\"handleAddFence\">新增</el-button>\r\n        </el-form-item>\r\n        <el-form-item label>\r\n          <el-button\r\n            type=\"primary\"\r\n            @click=\"toggleAllFenceVisible(true)\"\r\n            v-show=\"fenceListInfo.tableData.length > 0\"\r\n            >全部显示</el-button\r\n          >\r\n        </el-form-item>\r\n        <el-form-item label>\r\n          <el-button\r\n            type=\"primary\"\r\n            @click=\"toggleAllFenceVisible(false)\"\r\n            v-show=\"fenceListInfo.tableData.length > 0\"\r\n            >全部隐藏</el-button\r\n          >\r\n        </el-form-item>\r\n      </el-form>\r\n      <el-table\r\n        v-loading=\"fenceListInfo.loading\"\r\n        element-loading-text=\"拼命加载中\"\r\n        element-loading-spinner=\"el-icon-loading\"\r\n        element-loading-background=\"rgba(0, 0, 0, 0.5)\"\r\n        :data=\"fenceListInfo.tableData\"\r\n        border\r\n        tooltip-effect=\"dark\"\r\n      >\r\n        <el-table-column\r\n          prop=\"areaname\"\r\n          label=\"围栏名称\"\r\n          width\r\n          align=\"center\"\r\n          show-overflow-tooltip\r\n        />\r\n        <el-table-column label=\"显示\" width align=\"center\">\r\n          <template #default=\"{ row }\">\r\n            <el-switch\r\n              v-model=\"row.show\"\r\n              active-color=\"#13ce66\"\r\n              @change=\"changeAreaVisible($event, row.areaids)\"\r\n            />\r\n          </template>\r\n        </el-table-column>\r\n        <el-table-column label=\"操作\" width=\"250\" align=\"center\">\r\n          <template #default=\"{ row }\">\r\n            <el-button type=\"primary\" size=\"mini\" @click=\"handleEditFence(row)\"\r\n              >编辑</el-button\r\n            >\r\n            <el-button type=\"primary\" size=\"mini\" @click=\"handleSeeRules(row)\"\r\n              >规则</el-button\r\n            >\r\n            <el-popconfirm\r\n              :title=\"`确定删除电子围栏 ${row.areaname} ？`\"\r\n              @confirm=\"handleDelFence(row)\"\r\n            >\r\n              <template #reference>\r\n                <el-button type=\"danger\" size=\"mini\" style=\"margin-left: 10px\"\r\n                  >删除</el-button\r\n                >\r\n              </template>\r\n            </el-popconfirm>\r\n          </template>\r\n        </el-table-column>\r\n      </el-table>\r\n      <el-pagination\r\n        v-show=\"\r\n          fenceListInfo.total &&\r\n            fenceListInfo.tableData &&\r\n            fenceListInfo.tableData.length\r\n        \"\r\n        v-model:current-page=\"fenceListInfo.params.curpage\"\r\n        :page-size=\"10\"\r\n        layout=\"total, prev, pager, next, jumper\"\r\n        :total=\"fenceListInfo.total\"\r\n        background\r\n        @current-change=\"fenceCurrentChange\"\r\n      />\r\n    </el-dialog>\r\n    <!-- 电子围栏table dialog end -->\r\n\r\n    <!-- 电子围栏 明细 dialog start -->\r\n    <el-dialog\r\n      :title=\"`${fenceInfo.dialogType === 0 ? '新增' : '编辑'}电子围栏`\"\r\n      v-model=\"fenceInfo.visible\"\r\n      center\r\n      width=\"800px\"\r\n    >\r\n      <el-form\r\n        ref=\"fenceInfoFormRef\"\r\n        :model=\"fenceInfo.form\"\r\n        :rules=\"fenceInfo.rules\"\r\n        label-width=\"120px\"\r\n      >\r\n        <el-row :gutter=\"0\">\r\n          <el-col :span=\"12\" :offset=\"0\">\r\n            <el-form-item label=\"电子围栏名称：\" prop=\"name\">\r\n              <el-input\r\n                v-model.trim=\"fenceInfo.form.name\"\r\n                clearable\r\n                style=\"width: 200px\"\r\n                placeholder=\"请输入电子围栏名称\"\r\n              />\r\n            </el-form-item>\r\n          </el-col>\r\n        </el-row>\r\n\r\n        <el-form-item label=\"选择关联设备：\">\r\n          <el-transfer\r\n            v-model=\"fenceInfo.form.chosenCamera\"\r\n            filterable\r\n            filter-placeholder=\"请输入名称\"\r\n            :data=\"fenceInfo.allMapCamera\"\r\n            :titles=\"['可选择设备', '已选择设备']\"\r\n            :props=\"transferProps\"\r\n          >\r\n            <template #default=\"{ option }\">\r\n              <span>{{ option.dname }}</span>\r\n            </template>\r\n          </el-transfer>\r\n        </el-form-item>\r\n\r\n        <el-form-item label=\"绘制地图：\" required>\r\n          <el-button type=\"warning\" size=\"mini\" @click=\"handleFenceDraw\">\r\n            {{\r\n              `${drawFenceInfo.clonePoints.length === 0 ? \"开始\" : \"重新\"}绘制`\r\n            }}\r\n          </el-button>\r\n        </el-form-item>\r\n      </el-form>\r\n\r\n      <template #footer>\r\n        <span>\r\n          <el-button @click=\"fenceInfo.visible = false\">取消</el-button>\r\n          <!-- <el-button type=\"primary\" @click=\"handleSubmitFence\">提交</el-button> -->\r\n          <el-button\r\n            type=\"primary\"\r\n            :disabled=\"!drawFenceInfo.clonePoints.length\"\r\n            @click=\"handleSubmitFence\"\r\n            >提交</el-button\r\n          >\r\n        </span>\r\n      </template>\r\n    </el-dialog>\r\n    <!-- 电子围栏 明细 dialog end -->\r\n\r\n    <!-- 电子围栏 操作buttons start -->\r\n    <el-collapse-transition>\r\n      <fence-box\r\n        v-if=\"status.isDrawFence\"\r\n        @revoke=\"handleRevokeFence\"\r\n        @redraw=\"handleRedrawFence\"\r\n        @cancel=\"handleCancelDrawFence\"\r\n        @finish=\"handleFinishDrawFence\"\r\n      />\r\n    </el-collapse-transition>\r\n    <!-- 电子围栏 操作buttons end -->\r\n\r\n    <!-- 规则 table start -->\r\n    <el-dialog title=\"规则列表\" v-model=\"ruleListInfo.visiable\" width=\"80%\">\r\n      <el-form :model=\"fenceListInfo.params\" label-width=\"80px\" :inline=\"true\">\r\n        <el-form-item label>\r\n          <el-button type=\"primary\" @click=\"handleAddRule\">新增</el-button>\r\n        </el-form-item>\r\n      </el-form>\r\n      <el-table\r\n        v-loading=\"ruleListInfo.loading\"\r\n        element-loading-text=\"拼命加载中\"\r\n        element-loading-spinner=\"el-icon-loading\"\r\n        element-loading-background=\"rgba(0, 0, 0, 0.5)\"\r\n        :data=\"ruleListInfo.tableData\"\r\n        border\r\n        tooltip-effect=\"dark\"\r\n      >\r\n        <el-table-column\r\n          label=\"规则类型\"\r\n          prop=\"labelType\"\r\n          width\r\n          align=\"center\"\r\n          show-overflow-tooltip\r\n        >\r\n        </el-table-column>\r\n        <el-table-column\r\n          label=\"是否每日循环\"\r\n          width\r\n          align=\"center\"\r\n          show-overflow-tooltip\r\n        >\r\n          <template #default=\"{ row }\">\r\n            {{ row.isloop ? \"是\" : \"否\" }}\r\n          </template>\r\n        </el-table-column>\r\n        <el-table-column label=\"开始时间\" width align=\"center\" prop=\"stime\">\r\n        </el-table-column>\r\n        <el-table-column label=\"结束时间\" width align=\"center\" prop=\"etime\">\r\n        </el-table-column>\r\n\r\n        <el-table-column label=\"操作\" width=\"210\" align=\"center\">\r\n          <template #default=\"{ row }\">\r\n            <el-button type=\"primary\" size=\"mini\" @click=\"handleEditRule(row)\"\r\n              >编辑</el-button\r\n            >\r\n\r\n            <el-popconfirm\r\n              :title=\"`确定删除该规则？`\"\r\n              @confirm=\"handleDelRule(row)\"\r\n            >\r\n              <template #reference>\r\n                <el-button type=\"danger\" size=\"mini\" style=\"margin-left: 10px\"\r\n                  >删除</el-button\r\n                >\r\n              </template>\r\n            </el-popconfirm>\r\n          </template>\r\n        </el-table-column>\r\n      </el-table>\r\n      <el-pagination\r\n        v-show=\"\r\n          ruleListInfo.total &&\r\n            ruleListInfo.tableData &&\r\n            ruleListInfo.tableData.length\r\n        \"\r\n        v-model:current-page=\"fenceListInfo.params.curpage\"\r\n        layout=\"total, prev, pager, next, jumper\"\r\n        :page-size=\"10\"\r\n        :total=\"ruleListInfo.total\"\r\n        background\r\n        @current-change=\"ruleCurrentChange\"\r\n      />\r\n    </el-dialog>\r\n    <!-- 规则 table end -->\r\n\r\n    <!-- 规则详情 start -->\r\n    <el-dialog\r\n      :title=\"(ruleItemDetail.dialogType === 0 ? '新增' : '编辑') + '规则'\"\r\n      v-model=\"ruleItemDetail.visiable\"\r\n      width=\"60%\"\r\n      center\r\n    >\r\n      <el-form\r\n        ref=\"ruleFormRef\"\r\n        :model=\"ruleItemDetail.form\"\r\n        :rules=\"ruleItemDetailRule\"\r\n        label-width=\"100px\"\r\n      >\r\n        <el-row :gutter=\"0\">\r\n          <el-col :span=\"12\" :offset=\"0\">\r\n            <el-form-item label=\"每天循环：\">\r\n              <el-switch\r\n                v-model=\"ruleItemDetail.form.isLoop\"\r\n                active-color=\"#13ce66\"\r\n                inactive-color=\"#ff4949\"\r\n              >\r\n              </el-switch>\r\n            </el-form-item>\r\n          </el-col>\r\n\r\n          <el-col :span=\"12\" :offset=\"0\">\r\n            <el-form-item label=\"规则类型：\" prop=\"permitType\">\r\n              <el-select\r\n                v-model=\"ruleItemDetail.form.permitType\"\r\n                placeholder=\"请选择规则类型\"\r\n                clearable\r\n              >\r\n                <el-option\r\n                  v-for=\"item in areaRulesOption\"\r\n                  :key=\"item.value\"\r\n                  :label=\"item.label\"\r\n                  :value=\"item.value\"\r\n                >\r\n                </el-option>\r\n              </el-select>\r\n            </el-form-item>\r\n          </el-col>\r\n\r\n          <el-col :span=\"12\" :offset=\"0\">\r\n            <el-form-item label=\"限时时长：\" prop=\"limitedTime\">\r\n              <el-input\r\n                v-model.trim=\"ruleItemDetail.form.limitedTime\"\r\n                placeholder=\"请输入大于0的正整数\"\r\n                clearable\r\n                style=\"max-width: 200px\"\r\n              ></el-input>\r\n            </el-form-item>\r\n          </el-col>\r\n        </el-row>\r\n        <!-- 如果IsLoop=true,这里的值为小时分秒，如果为false则为年月日小时分秒 -->\r\n\r\n        <el-row v-if=\"ruleItemDetail.form.isLoop\" :gutter=\"20\">\r\n          <el-col :span=\"12\" :offset=\"0\">\r\n            <el-form-item label=\"开始时间：\" prop=\"startTime\">\r\n              <el-time-picker\r\n                v-model=\"ruleItemDetail.form.startTime\"\r\n                placeholder=\"开始时间\"\r\n                @change=\"timerPickerChange\"\r\n              >\r\n              </el-time-picker>\r\n            </el-form-item>\r\n          </el-col>\r\n          <el-col :span=\"12\" :offset=\"0\">\r\n            <el-form-item label=\"结束时间：\" prop=\"endTime\">\r\n              <el-time-picker\r\n                v-model=\"ruleItemDetail.form.endTime\"\r\n                placeholder=\"结束时间\"\r\n              >\r\n              </el-time-picker>\r\n            </el-form-item>\r\n          </el-col>\r\n        </el-row>\r\n        <el-row v-else :gutter=\"20\">\r\n          <el-col :span=\"12\" :offset=\"0\">\r\n            <el-form-item label=\"开始时间：\" prop=\"startTime\">\r\n              <el-date-picker\r\n                v-model=\"ruleItemDetail.form.startTime\"\r\n                type=\"datetime\"\r\n                placeholder=\"选择开始日期时间\"\r\n                @change=\"ruleItemDetail.form.endTime = ''\"\r\n              >\r\n              </el-date-picker>\r\n            </el-form-item>\r\n          </el-col>\r\n          <el-col :span=\"12\" :offset=\"0\">\r\n            <el-form-item label=\"结束时间：\" prop=\"endTime\">\r\n              <el-date-picker\r\n                v-model=\"ruleItemDetail.form.endTime\"\r\n                type=\"datetime\"\r\n                placeholder=\"选择结束日期时间\"\r\n                :disabled=\"!ruleItemDetail.form.startTime\"\r\n                :disabledDate=\"ruleDisabledDate\"\r\n              >\r\n              </el-date-picker>\r\n            </el-form-item>\r\n          </el-col>\r\n        </el-row>\r\n\r\n        <el-row :gutter=\"0\">\r\n          <el-col :span=\"24\" :offset=\"0\">\r\n            <el-form-item label=\"备注：\">\r\n              <el-input v-model=\"ruleItemDetail.form.memo\" type=\"textarea\" />\r\n            </el-form-item>\r\n          </el-col>\r\n        </el-row>\r\n      </el-form>\r\n\r\n      <template #footer>\r\n        <span>\r\n          <el-button @click=\"ruleItemDetail.visiable = false\">取消</el-button>\r\n          <el-button type=\"primary\" @click=\"handleSubmitRule\">提交</el-button>\r\n        </span>\r\n      </template>\r\n    </el-dialog>\r\n    <!-- 规则详情 end -->\r\n\r\n    <!-- 报警管理table dialog start -->\r\n    <el-dialog\r\n      title=\"报警管理\"\r\n      v-model=\"alarmListInfo.tableVisible\"\r\n      width=\"60%\"\r\n    >\r\n      <el-form :model=\"alarmListInfo.params\" label-width=\"80px\" :inline=\"true\">\r\n        <el-form-item label>\r\n          <el-select\r\n            v-model=\"alarmListInfo.SourceType\"\r\n            placeholder=\"全部类型\"\r\n            clearable\r\n            filterable\r\n            @change=\"\r\n              () => {\r\n                getAlarmListByCondition();\r\n              }\r\n            \"\r\n          >\r\n            <el-option\r\n              v-for=\"item in alarmType\"\r\n              :key=\"item.value\"\r\n              :label=\"item.label\"\r\n              :value=\"item.value\"\r\n            >\r\n            </el-option>\r\n          </el-select>\r\n        </el-form-item>\r\n        <el-form-item label>\r\n          <el-date-picker\r\n            v-model=\"alarmListInfo.sTime\"\r\n            type=\"datetime\"\r\n            placeholder=\"选择开始日期时间\"\r\n            @change=\"getAlarmListByCondition\"\r\n          >\r\n          </el-date-picker>\r\n        </el-form-item>\r\n        <el-form-item label>\r\n          <el-date-picker\r\n            v-model=\"alarmListInfo.eTime\"\r\n            type=\"datetime\"\r\n            placeholder=\"选择结束时间\"\r\n            @change=\"getAlarmListByCondition\"\r\n          >\r\n          </el-date-picker>\r\n        </el-form-item>\r\n        <el-form-item label>\r\n          <el-select\r\n            v-model=\"alarmListInfo.alarmLevel\"\r\n            placeholder=\"全部等级\"\r\n            style=\"width:120px\"\r\n            clearable\r\n            filterable\r\n            @change=\"\r\n              () => {\r\n                getAlarmListByCondition();\r\n              }\r\n            \"\r\n          >\r\n            <el-option label=\"普通\" value=\"0\"> </el-option>\r\n            <el-option label=\"紧急\" value=\"1\"> </el-option>\r\n            <el-option label=\"危急\" value=\"2\"> </el-option>\r\n          </el-select>\r\n        </el-form-item>\r\n      </el-form>\r\n      <el-table\r\n        v-loading=\"alarmListInfo.loading\"\r\n        element-loading-text=\"拼命加载中\"\r\n        element-loading-spinner=\"el-icon-loading\"\r\n        element-loading-background=\"rgba(0, 0, 0, 0.5)\"\r\n        :data=\"alarmListInfo.tableData\"\r\n        border\r\n        tooltip-effect=\"dark\"\r\n      >\r\n        <el-table-column\r\n          label=\"等级\"\r\n          width=\"100\"\r\n          align=\"center\"\r\n          show-overflow-tooltip\r\n        >\r\n          <template #default=\"{ row }\">\r\n            {{\r\n              row.alarmLevel === 0\r\n                ? \"普通\"\r\n                : row.alarmLevel === 1\r\n                ? \"紧急\"\r\n                : \"危急\"\r\n            }}\r\n          </template>\r\n        </el-table-column>\r\n        <el-table-column\r\n          label=\"类型\"\r\n          prop=\"SourceType\"\r\n          width=\"100\"\r\n          align=\"center\"\r\n          show-overflow-tooltip\r\n        />\r\n        <el-table-column\r\n          prop=\"alarmContent\"\r\n          label=\"内容\"\r\n          width\r\n          show-overflow-tooltip\r\n        />\r\n        <el-table-column label=\"时间\" width=\"180\" show-overflow-tooltip>\r\n          <template #default=\"{ row }\">\r\n            {{ formatTime(row.CreateTime) }}\r\n          </template>\r\n        </el-table-column>\r\n        <el-table-column label=\"操作\" width=\"200\" align=\"center\">\r\n          <template #default=\"{ row }\">\r\n            <el-button\r\n              type=\"primary\"\r\n              size=\"mini\"\r\n              @click=\"handleDetailAlarm(row)\"\r\n              >查看详情</el-button\r\n            >\r\n            <el-button type=\"primary\" size=\"mini\">查看位置</el-button>\r\n          </template>\r\n        </el-table-column>\r\n      </el-table>\r\n      <el-pagination\r\n        v-show=\"\r\n          alarmListInfo.total &&\r\n            alarmListInfo.tableData &&\r\n            alarmListInfo.tableData.length\r\n        \"\r\n        v-model:current-page=\"alarmListInfo.params.curpage\"\r\n        :page-size=\"alarmListInfo.params.size\"\r\n        layout=\"total, prev, pager, next, jumper\"\r\n        :total=\"alarmListInfo.total\"\r\n        background\r\n        @current-change=\"alarmCurrentChange\"\r\n      />\r\n    </el-dialog>\r\n    <!-- 报警管理table dialog end -->\r\n\r\n    <!-- 报警详情 start -->\r\n    <el-dialog title=\"报警详情\" v-model=\"alarmInfo.visible\" width=\"60%\" center>\r\n      <el-form ref=\"ruleFormRef\" :model=\"alarmInfo.form\" label-width=\"100px\">\r\n        <el-row :gutter=\"0\">\r\n          <el-col :span=\"12\" :offset=\"0\">\r\n            <el-form-item label=\"触发人员：\" prop=\"SourceName\"> </el-form-item>\r\n          </el-col>\r\n\r\n          <el-col :span=\"12\" :offset=\"0\">\r\n            <el-form-item label=\"触发时间\"> </el-form-item>\r\n          </el-col>\r\n\r\n          <el-col :span=\"12\" :offset=\"0\">\r\n            <el-form-item label=\"触发类型\"> </el-form-item>\r\n          </el-col>\r\n        </el-row>\r\n\r\n        <el-row :gutter=\"20\">\r\n          <el-col :span=\"12\" :offset=\"0\">\r\n            <el-form-item label=\"触发位置\"> </el-form-item>\r\n          </el-col>\r\n          <el-col :span=\"12\" :offset=\"0\">\r\n            <el-form-item label=\"是否处理\"> </el-form-item>\r\n          </el-col>\r\n        </el-row>\r\n\r\n        <el-row :gutter=\"0\">\r\n          <el-col :span=\"24\" :offset=\"0\">\r\n            <el-form-item label=\"内容描述\"> </el-form-item>\r\n          </el-col>\r\n        </el-row>\r\n      </el-form>\r\n\r\n      <template #footer>\r\n        <span> </span>\r\n      </template>\r\n    </el-dialog>\r\n    <!-- 报警详情 end -->\r\n\r\n    <!-- 右键出现的菜单 start -->\r\n    <contextmenu-content\r\n      v-if=\"visibleObj.contextmenu\"\r\n      :type=\"contextmenuTypeRef\"\r\n      :contxtmenu-position=\"contxtmenuPosition\"\r\n      :contextmenu-list=\"contextmenuList\"\r\n      @clicked=\"visibleObj.contextmenu = false\"\r\n      @seeNowVideo=\"seeNowVideo\"\r\n      @seeHistoryVideo=\"seeHistoryVideo\"\r\n      @showDetails=\"showDetails\"\r\n      @trackPlayback=\"handleClickTrackPlayback\"\r\n      @edit=\"detailsEdit\"\r\n    />\r\n    <!-- 右键出现的菜单 end -->\r\n\r\n    <!-- 查看的内容 form start -->\r\n    <form-content\r\n      v-show=\"visibleObj.detailsForm\"\r\n      ref=\"formContentComponentRef\"\r\n      :is-add=\"detailsForm.isAdd\"\r\n      :editable=\"detailsForm.editable\"\r\n      :form-data=\"detailsForm.formData\"\r\n      :form-type=\"contextmenuTypeRef\"\r\n      :map-id=\"mapIdRef\"\r\n      :x=\"detailsForm.x\"\r\n      :y=\"detailsForm.y\"\r\n      @close=\"hideDetails\"\r\n      @cancelForm=\"cancelForm\"\r\n      @changeDirection=\"changeDirection\"\r\n      @updateX=\"updateX\"\r\n      @updateY=\"updateY\"\r\n      @confirm=\"handleDetailConfirm\"\r\n    />\r\n    <!-- 查看的内容 form end -->\r\n    <!-- 监控列表lfq start -->\r\n    <div\r\n      v-drag-dialog=\"`monitor-header,custom-monitor`\"\r\n      v-show=\"visibleObj.monitorListFlag\"\r\n    >\r\n      <div class=\"monitorlist-panel custom-monitor\">\r\n        <header class=\"monitor-header\">\r\n          <div class=\"title\">{{ monitorListInfo.monitorTitle }}</div>\r\n          <button class=\"closebtx\" @click=\"handleCloseAllVideo\">\r\n            <i class=\"el-icon el-icon-close\" />\r\n          </button>\r\n        </header>\r\n        <div\r\n          v-for=\"(value, index) in monitorListInfo.newMonitorList\"\r\n          v-show=\"value.active\"\r\n          :key=\"index\"\r\n          :class=\"monitorListInfo.monitorInner\"\r\n        >\r\n          <monitor-list\r\n            ref=\"monitorListPanelRef\"\r\n            :camera-data=\"value\"\r\n            @changeMonitorListPanelState=\"\r\n              watchMonitorListPanelState(value.camera.id)\r\n            \"\r\n            :cameraData=\"value\"\r\n            :livePlayCount=\"monitorListInfo.livePlayCount\"\r\n          />\r\n        </div>\r\n      </div>\r\n    </div>\r\n    <!-- 监控列表 end -->\r\n    <!--历史监控列表lfq start-->\r\n    <div\r\n      v-drag-dialog=\"`monitor-header,custom-monitor`\"\r\n      v-show=\"visibleObj.historyMonitorListFlag\"\r\n    >\r\n      <div class=\"monitorlist-panel custom-monitor\">\r\n        <header class=\"monitor-header\">\r\n          <div class=\"title\">{{ monitorListInfo.monitorTitle }}</div>\r\n          <button class=\"closebtx\" @click=\"handleCloseAllHistoryVideo\">\r\n            <i class=\"el-icon el-icon-close\" />\r\n          </button>\r\n        </header>\r\n        <div\r\n          v-for=\"(value, index) in monitorListInfo.newHistoryMonitorList\"\r\n          v-show=\"value.active\"\r\n          :key=\"index\"\r\n          :class=\"monitorListInfo.monitorHistoryInner\"\r\n        >\r\n          <history-monitor\r\n            ref=\"hitoryMonitorListPanelRef\"\r\n            :history-camera-data=\"value\"\r\n            @changeHistoryMonitorListPanelState=\"\r\n              watchHistoryMonitorListPanelState(value.camera.id)\r\n            \"\r\n            :historyCameraData=\"value\"\r\n            :historyPlayCount=\"monitorListInfo.historyPlayCount\"\r\n          />\r\n        </div>\r\n      </div>\r\n    </div>\r\n    <!--历史监控列表lfq end-->\r\n    <!-- 轨迹回放选择时间 start -->\r\n    <el-dialog\r\n      title=\"选择轨迹回放时间\"\r\n      v-model=\"trackPlayback.show\"\r\n      width=\"400px\"\r\n      center\r\n      @close=\"handleCloseContextmenu\"\r\n    >\r\n      <el-form\r\n        ref=\"trackPlaybackFormRef\"\r\n        :model=\"trackPlayback.form\"\r\n        :rules=\"trackPlayback.rules\"\r\n        label-width=\"100px\"\r\n        :inline=\"false\"\r\n        size=\"small\"\r\n      >\r\n        <el-form-item label=\"选择日期：\" prop=\"date\">\r\n          <el-date-picker\r\n            v-model=\"trackPlayback.form.date\"\r\n            type=\"date\"\r\n            placeholder=\"选择日期\"\r\n            :picker-options=\"trackPlayback.datePickerOptions\"\r\n          />\r\n        </el-form-item>\r\n\r\n        <el-form-item label=\"开始时间：\" prop=\"startTime\">\r\n          <el-time-select\r\n            v-model=\"trackPlayback.form.startTime\"\r\n            placeholder=\"起始时间\"\r\n            :picker-options=\"{\r\n              start: '08:30',\r\n              step: '00:15',\r\n              end: '18:30'\r\n            }\"\r\n            @change=\"trackPlayback.form.endTime = ''\"\r\n          />\r\n        </el-form-item>\r\n        <el-form-item label=\"结束日期：\" prop=\"endTime\">\r\n          <el-time-select\r\n            v-model=\"trackPlayback.form.endTime\"\r\n            placeholder=\"结束时间\"\r\n            :disabled=\"!trackPlayback.form.startTime\"\r\n            :picker-options=\"{\r\n              start: '08:30',\r\n              step: '00:15',\r\n              end: '18:30',\r\n              minTime: trackPlayback.form.startTime\r\n            }\"\r\n          />\r\n        </el-form-item>\r\n      </el-form>\r\n      <template #footer>\r\n        <span>\r\n          <el-button @click=\"trackPlayback.show = false\">取消</el-button>\r\n          <!-- <el-button\r\n            v-debounce-click=\"handleClickSeeTrackPlayback\"\r\n            type=\"primary\"\r\n            >查看</el-button\r\n          > -->\r\n          <el-button @click=\"handleClickSeeTrackPlayback\" type=\"primary\"\r\n            >查看</el-button\r\n          >\r\n        </span>\r\n      </template>\r\n    </el-dialog>\r\n    <!-- 轨迹回放选择时间 end -->\r\n\r\n    <!-- 设备图形 start-->\r\n    <div v-show=\"status.equipImgFollow\" ref=\"equipImgRef\" class=\"equip-img\" />\r\n    <!-- 设备图形 end-->\r\n\r\n    <!-- 右侧报警 start-->\r\n    <div class=\"warning-container\" :style=\"{ right: warningWidth }\">\r\n      <div class=\"warning-wrap\">\r\n        <div class=\"warning-show-button\" @click=\"showWarningList\">报警列表</div>\r\n        <div class=\"warning-content\">\r\n          <el-form\r\n            :model=\"fenceListInfo.params\"\r\n            label-width=\"80px\"\r\n            :inline=\"true\"\r\n          >\r\n            <el-select\r\n              v-model=\"alarmForm.type\"\r\n              placeholder=\"全部\"\r\n              clearable\r\n              filterable\r\n              style=\"width: 98%\"\r\n              @change=\"() => {}\"\r\n            >\r\n              <el-option\r\n                v-for=\"item in alarmType\"\r\n                :key=\"item.value\"\r\n                :label=\"item.label\"\r\n                :value=\"item.value\"\r\n              >\r\n              </el-option>\r\n            </el-select>\r\n            <br />\r\n            <transition name=\"slide-fade\">\r\n              <handle :alarmType=\"alarmForm.type\"></handle>\r\n            </transition>\r\n          </el-form>\r\n        </div>\r\n      </div>\r\n    </div>\r\n    <!-- 右侧报警 end-->\r\n\r\n    <!-- 人员图层 start -->\r\n    <layer-person-list\r\n      v-if=\"visibleObj.layerPerson\"\r\n      :person-list=\"layerPerson\"\r\n      :mouse-position=\"layerPosition\"\r\n    />\r\n    <!-- 人员图层 end -->\r\n\r\n    <!-- 左侧控制按钮 start -->\r\n    <div\r\n      class=\"control-menu\"\r\n      @click=\"visibleObj.controlPannel = !visibleObj.controlPannel\"\r\n    >\r\n      <i class=\"el-icon-setting\"></i>\r\n    </div>\r\n    <!-- 左侧控制按钮 end -->\r\n\r\n    <!-- 控制面板 start -->\r\n    <div class=\"control-panel\" v-show=\"visibleObj.controlPannel\">\r\n      <div class=\"control-title o-h\">{{ mapNameRef }}</div>\r\n      <el-select\r\n        ref=\"headerSearchSelectRef\"\r\n        v-model=\"leftPannelSearch\"\r\n        :remote-method=\"querySearch\"\r\n        filterable\r\n        default-first-option\r\n        remote\r\n        size=\"small\"\r\n        placeholder=\"全局搜索\"\r\n        class=\"search-select\"\r\n        @change=\"searchChange\"\r\n      >\r\n        <el-option\r\n          v-for=\"item in userSearchRes\"\r\n          :key=\"item.dids\"\r\n          :value=\"item.dids\"\r\n          :label=\"item.dname\"\r\n        />\r\n      </el-select>\r\n      <div class=\"data-display-item\">\r\n        <div class=\"title\">\r\n          <span class=\"icon iconfont\" v-html=\"'&#xe6d8;'\"></span>\r\n          <span>人员信息</span>\r\n        </div>\r\n        <div class=\"display-content\">\r\n          <div class=\"data-item\">\r\n            <div class=\"count\">{{ person.all.length }}</div>\r\n            <div class=\"name\">总上线人数</div>\r\n          </div>\r\n          <div class=\"data-item\">\r\n            <div class=\"count\">{{ person.currentMap.length }}</div>\r\n            <div class=\"name\">当前上线人数</div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n      <div class=\"data-display-item\">\r\n        <div class=\"title\">\r\n          <span class=\"icon iconfont big\" v-html=\"'&#xe69c;'\"></span>\r\n          <span>报警信息</span>\r\n        </div>\r\n        <div class=\"display-content\">\r\n          <div class=\"data-item\">\r\n            <div class=\"count\">{{ person.all.length }}</div>\r\n            <div class=\"name\">报警总数</div>\r\n          </div>\r\n          <div class=\"data-item warn\">\r\n            <div class=\"count\">{{ person.currentMap.length }}</div>\r\n            <div class=\"name\">待处理</div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n      <div class=\"control-buttons-container\">\r\n        <div\r\n          class=\"control-button-item\"\r\n          v-for=\"(item, index) in controlButtonList\"\r\n          :key=\"`button-${index}`\"\r\n        >\r\n          <div class=\"button-label\">{{ item.label }}</div>\r\n          <div class=\"button-switch\">\r\n            <el-switch\r\n              v-model=\"item.show\"\r\n              @change=\"controlButtonChange($event, item.code)\"\r\n              size=\"mini\"\r\n            >\r\n            </el-switch>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n    <!-- 控制面板 end -->\r\n\r\n    <!-- 地图选择 -->\r\n    <mapChoosen\r\n      v-show=\"visibleObj.map\"\r\n      :map-list=\"mapListRef\"\r\n      :mapId=\"mapIdRef\"\r\n      @closed=\"closeMapChoosen\"\r\n      @changeMap=\"changeMap\"\r\n    />\r\n  </main>\r\n</template>\r\n\r\n<script lang=\"ts\">\r\nimport {\r\n  defineComponent,\r\n  onMounted,\r\n  onUnmounted,\r\n  reactive,\r\n  shallowReactive,\r\n  ref,\r\n  shallowRef,\r\n  computed,\r\n  watch,\r\n  nextTick,\r\n} from \"vue\";\r\nimport stageApi from \"@/api/stage\";\r\nimport cameraApi from \"@/api/camera\";\r\nimport alarmApi from \"@/api/alarm\";\r\nimport commonApi from \"@/api/common\";\r\nimport { imgUrl } from \"@/utils/urls\";\r\nimport { IResponseCommon, ISelectOption } from \"@/types/index\";\r\n\r\nimport {\r\n  IMapArrItem,\r\n  IDeviceItem,\r\n  IMapData,\r\n  IListData,\r\n  IImageObj,\r\n  IImageAbout,\r\n  Nullable,\r\n  IPersonArrItem,\r\n  IDrawFenceInfo,\r\n  IActiveTarget,\r\n  IEquipmentInfo,\r\n  IDetailsForm,\r\n  IStyleLeftTop,\r\n  ICanvasState,\r\n  IMessageClose,\r\n  TLayerItem,\r\n  TVectorgraph,\r\n  IBuildItem,\r\n  ISvgToImageConfig,\r\n  IAreaItem,\r\n} from \"./types/index\";\r\nimport { ICacheImage, ICachePerson, ICacheBubble } from \"./types/cacheObj\";\r\nimport { IAlarmType, IAlarmInfo, IAlarmListInfo } from \"./types/alarm\";\r\nimport {\r\n  IAddEditFenceParams,\r\n  ISetDeviceData,\r\n  ISetDeviceDataItem,\r\n  IRuleItem,\r\n  IFenceInfo,\r\n  IFenceListInfo,\r\n  IRuleListInfo,\r\n  IRuleItemDetail,\r\n  IRuleItemDetailRule,\r\n  IUpperPos,\r\n} from \"./types/fence\";\r\n// todo konva 按需引入  https://www.npmjs.com/package/konva Minimal bundle\r\nimport Konva from \"konva\";\r\nimport { Stage } from \"konva/types/Stage\";\r\nimport { ElMessage, ElMessageBox } from \"element-plus\";\r\nimport type { Pane } from \"element-plus/lib/el-tabs/src/tabs.vue\";\r\nimport {\r\n  getOffset,\r\n  screenTocanvas,\r\n  canvasToStage,\r\n  strToPos,\r\n  svgToImage,\r\n  guid,\r\n  generateImageDomByType,\r\n  getWsUrl,\r\n} from \"./utils\";\r\nimport dragDialog from \"./directive/drag-dialog\";\r\nimport { cloneDeep, debounce } from \"lodash\";\r\nimport { KonvaEventObject } from \"konva/types/Node\";\r\n// import { AxiosResponse } from \"axios\";\r\nimport {\r\n  mainNav,\r\n  personList,\r\n  cameraList,\r\n  basestationList,\r\n  fenceBox,\r\n  contextmenuContent,\r\n  formContent,\r\n  monitorList,\r\n  historyMonitor,\r\n  labelList,\r\n  handle,\r\n  layerPersonList,\r\n  mapChoosen,\r\n} from \"./components\";\r\n\r\n// 常量\r\nimport {\r\n  NAV_INFO,\r\n  FENCE,\r\n  ALARM,\r\n  TITLE_HEIGHT as titleHeight,\r\n  TYPES,\r\n  ALL_MENU,\r\n  equipIconConfig,\r\n  areaRulesOption,\r\n  formateRuleType,\r\n  bgImageConfig,\r\n  areaColorConfig,\r\n} from \"./constVariables\";\r\n\r\nimport {\r\n  commonRuleItem,\r\n  customFuncRule,\r\n  checkPositiveInteger,\r\n  getPagination,\r\n  formatTime,\r\n} from \"@/utils\";\r\nimport { Shape } from \"konva/types/Shape\";\r\nimport { IELForm } from \"./types/element\";\r\nimport { Image } from \"konva/types/shapes/Image\";\r\nimport { getLoadSNum, setAllDevice } from \"@/utils/auth\";\r\n// import { Text } from \"konva/types/shapes/Text\";\r\n// import { Layer } from \"konva/types/Layer\";\r\n// 第三方引入\r\nimport dayjs from \"dayjs\";\r\n\r\nconst BG_NAME = \"bg-img\";\r\nconst ADD_EQUIP = \"addEquip\";\r\nconst TRACK_PLAYBACK_PERSON = \"trackPlaybackPerson\";\r\nconst defaultCameraType = 1; // 摄像头默认类\r\n\r\nconst wsUrl = getWsUrl();\r\nconsole.log(wsUrl);\r\n\r\nenum EpauletActionCode {\r\n  HTagInit = 1000, //标签初始化\r\n  HTagOnline = 1001, //单个标签上线\r\n  HTagOffline = 1002, //单个标签下线\r\n  HTagMove = 1003, //单个标签移动\r\n  HLayerGroupStatistics = 1004, //图层统计\r\n  HTagLogOff = 1005, //单个标签注销\r\n}\r\n\r\nconst warningListWidth = \"-350px\";\r\n\r\nexport default defineComponent({\r\n  name: \"Content\",\r\n  directives: {\r\n    dragDialog,\r\n  },\r\n  components: {\r\n    mainNav,\r\n    personList,\r\n    cameraList,\r\n    basestationList,\r\n    fenceBox,\r\n    contextmenuContent,\r\n    formContent,\r\n    monitorList,\r\n    historyMonitor,\r\n    labelList,\r\n    handle,\r\n    layerPersonList,\r\n    mapChoosen,\r\n  },\r\n  setup() {\r\n    const warningWidth = shallowRef<string>(warningListWidth);\r\n    // const warningWidth = shallowRef<string>(\"0px\");\r\n\r\n    const mapObj = reactive<IMapData>({}); // 后端传过来的地图 obj\r\n    const mapListRef = ref<IMapArrItem[]>([]); // 后端传过来的地图 obj\r\n    const mapIdRef = shallowRef<string>(getLoadSNum() || \"S-jb04\");\r\n    const mapNameRef = shallowRef<string>();\r\n\r\n    const cameraImageObjRef = ref<IImageObj>({});\r\n    const personImageObjRef = ref<IImageObj>({});\r\n    const basestationImageObjRef = ref<HTMLImageElement | null>(null);\r\n\r\n    const clickTimerRef = ref<Nullable<number>>(null);\r\n\r\n    const state = reactive<ICanvasState>({\r\n      scale: 0,\r\n      minScale: 0,\r\n      maxScale: 2,\r\n      sx: 0,\r\n      sy: 0,\r\n    });\r\n\r\n    const status = shallowReactive({\r\n      isPlayBack: false, // 是否在轨迹回放\r\n      isfollowing: false, // 是否在实时跟踪\r\n      draggable: false, // 是否能拖拽\r\n      isDrawFence: false, // 是否在绘制电子围栏\r\n      equipImgFollow: false, // 设备图片跟随\r\n    });\r\n\r\n    const contextmenuTypeRef = shallowRef<string>(TYPES.basestation); // 右键查看的类型 TYPES\r\n    const contxtmenuPosition = shallowReactive<IStyleLeftTop>({\r\n      left: 0,\r\n      top: 0,\r\n    }); // 右键 位置\r\n    const currentContextmenuRef = ref<Nullable<Shape>>(null); // 当前右键的那个shape，因为加了激活的shadow需要清除\r\n\r\n    const contextmenuList = computed(() => ALL_MENU[contextmenuTypeRef.value]);\r\n\r\n    const detailsForm = reactive<IDetailsForm>({\r\n      show: false,\r\n      isAdd: false, // 是否是新增状态\r\n      editable: false, // 是否可以编辑\r\n      formData: null, // 需要传给子组件的form数据\r\n      x: 0, // 新增基站的x\r\n      y: 0,\r\n    });\r\n\r\n    const trackPlayback = reactive({\r\n      show: false, // 选择轨迹回放时间的弹窗\r\n      // 选择轨迹回放时间的form\r\n      form: {\r\n        date: new Date() || \"\",\r\n        startTime: \"08:30\" || \"\",\r\n        endTime: \"08:45\" || \"\",\r\n      },\r\n      rules: {\r\n        date: commonRuleItem(\"请选择日期\"),\r\n        startTime: commonRuleItem(\"请选择开始时间\"),\r\n        endTime: commonRuleItem(\"请选择结束时间\"),\r\n      },\r\n      datePickerOptions: {\r\n        disabledDate(time: Date) {\r\n          return time.getTime() > Date.now();\r\n        },\r\n      },\r\n      tween: null,\r\n      steps: [],\r\n      lineNode: null,\r\n      linePos: [], // 存放移动中的点\r\n    });\r\n\r\n    const visibleObj = shallowReactive({\r\n      nav: true, // 底部导航\r\n      waterAlarmPanel: false, // 落水报警面板\r\n      contextmenu: false, // 右键菜单列表\r\n      detailsForm: false, // 详情form\r\n      monitorListFlag: false, // 实时监控列表 lfq\r\n      historyMonitorListFlag: false, // 历史回放列表 lfq\r\n      area: true, // 是否显示电子围栏\r\n      layerPerson: false, // layer 对应的人员\r\n      map: false, // 地图选择\r\n      controlPannel: true, // 左侧显示\r\n    });\r\n\r\n    const monitorListInfo = reactive({\r\n      // 监控摄像头相关 lfq\r\n      monitorTitle: \"\",\r\n      monitorInner: \"monitor-inner-pannel\", // 实时监控动态class控制样式\r\n      monitorHistoryInner: \"monitor-inner-pannel\", // 历史监控动态class控制样式\r\n      newMonitorList: [] as any[], //调取的实时监控列表 lfq\r\n      newHistoryMonitorList: [] as any[], // 调取的历史监控列表 lfq\r\n      cameraCount: 4, // 支持同时播放摄像头数量 lfq\r\n      liveCameraCount: 1, // 实时跟踪单次调用摄像头数量 lfq\r\n      historyCameraCount: 1, // 轨迹回放单次调用摄像头数量 lfq\r\n      livePlayCount: 1, // 实时调用摄像头数量 lfq\r\n      historyPlayCount: 1, // 历史回放调用摄像头数量 lfq\r\n      monitorListFlag: false, //实时视频 lfq\r\n      historyMonitorListFlag: false, //历史视频 lfq\r\n    });\r\n\r\n    const drawerInfo = reactive({\r\n      showList: false, // 是否显示基站、视频、人员列表\r\n      drawerTitle: NAV_INFO[TYPES.basestation].title,\r\n      activeName: TYPES.basestation, // 激活的组件\r\n    });\r\n\r\n    const fenceInfo = reactive<IFenceInfo>({\r\n      visible: false,\r\n      dialogType: 0, // 0 新增  1 编辑\r\n      form: {\r\n        name: \"\",\r\n        chosenCamera: [],\r\n      },\r\n      allMapCamera: [], // 所有可供选择的当前地图的摄像头\r\n      rules: {\r\n        name: commonRuleItem(\"请输入电子围栏名称\"),\r\n      },\r\n    });\r\n\r\n    const fenceListInfo = reactive<IFenceListInfo>({\r\n      tableVisible: false,\r\n      params: {\r\n        curpage: 1,\r\n      },\r\n      loading: false,\r\n      allData: [],\r\n      tableData: [],\r\n      total: 0,\r\n    });\r\n\r\n    const drawFenceInfo = reactive<IDrawFenceInfo>({\r\n      message: null, // 绘制的时候头部的提醒\r\n      points: [], // 绘制的坐标点\r\n      clonePoints: [],\r\n    });\r\n\r\n    // 规则 table\r\n    const ruleListInfo = reactive<IRuleListInfo>({\r\n      visiable: false,\r\n      loading: false,\r\n      allData: [],\r\n      tableData: [],\r\n      total: 0,\r\n      curpage: 1,\r\n    });\r\n    // 规则 详情\r\n    const ruleFormRef = ref();\r\n    const ruleItemDetail = reactive<IRuleItemDetail>({\r\n      visiable: false,\r\n      dialogType: 0, // 0 新增 1 编辑\r\n      form: {\r\n        name: \"\",\r\n        memo: \"\",\r\n        isLoop: false,\r\n        limitedTime: \"\",\r\n        startTime: \"\",\r\n        endTime: \"\",\r\n        permitType: \"\",\r\n      },\r\n    });\r\n\r\n    // 保证结束时间 > 开始时间\r\n    const checkEndTime = (rule: any, value: Date, callback: Function) => {\r\n      // 今天的年月日\r\n      if (!ruleItemDetail.form.isLoop) {\r\n        callback();\r\n      } else {\r\n        const ymd = dayjs(new Date()).format(\"YYYY-MM-DD\");\r\n        // value 的时分秒\r\n        const hms = dayjs(value).format(\"HH:mm:ss\");\r\n        // 开始时间的时分秒\r\n        const start = dayjs(ruleItemDetail.form.startTime).format(\"HH:mm:ss\");\r\n        const startTime = new Date(`${ymd} ${start}`);\r\n        const endTime = new Date(`${ymd} ${hms}`);\r\n        if (startTime.getTime() > endTime.getTime()) {\r\n          return callback(new Error(\"结束时间不能小于开始时间\"));\r\n        } else {\r\n          callback();\r\n        }\r\n      }\r\n    };\r\n\r\n    const ruleItemDetailRule: IRuleItemDetailRule = {\r\n      name: commonRuleItem(\"请输入规则名称\"),\r\n      limitedTime: customFuncRule(checkPositiveInteger),\r\n      permitType: commonRuleItem(\"请选择规则类型\"),\r\n      startTime: commonRuleItem(\"请选择开始时间\"),\r\n      endTime: [commonRuleItem(\"请选择结束时间\"), customFuncRule(checkEndTime)],\r\n    };\r\n\r\n    // 带日期的选择器\r\n    const ruleDisabledDate = computed(() => {\r\n      return function (time: Date) {\r\n        if (ruleItemDetail.form.startTime) {\r\n          return time.getTime() < (ruleItemDetail.form.startTime as Date).getTime();\r\n        }\r\n        return false;\r\n      };\r\n    });\r\n\r\n     const alarmInfo = reactive<IAlarmInfo>({\r\n      visible: false,\r\n      dialogType: 0, // 0 新增  1 编辑\r\n      form: {\r\n        CreateTime: \"\",\r\n        IDS: \"\",\r\n        Id: 0,\r\n        SceneName: \"\",\r\n        ShowSceneNum: \"\",\r\n        SourceDbOrDeviceIdS: \"\",\r\n        SourceName: \"\",\r\n        SourcePointNum: \"\",\r\n        SourceType: \"\",\r\n        alarmContent: \"\",\r\n        alarmLevel: 0,\r\n        alarmProgress: \"\",\r\n        dealAccount: \"\",\r\n        dealMemo: \"\",\r\n        dealTime: \"\",\r\n      }\r\n    });\r\n\r\n    const alarmListInfo = reactive<IAlarmListInfo>({\r\n      tableVisible: false,\r\n      params: {\r\n        curpage: 1,\r\n        size: 8,\r\n      },\r\n      loading: false,\r\n      allData: [],\r\n      tableData: [],\r\n      total: 0,\r\n      ShowSceneNum: \"\",\r\n      SourceType: \"\",\r\n      alarmLevel: \"\",\r\n      sTime: \"\",\r\n      eTime: \"\",\r\n      alarmProgress: \"\"\r\n    });\r\n\r\n    // 时间选择器\r\n    function timerPickerChange() {\r\n      if (ruleItemDetail.form.endTime) {\r\n        ruleItemDetail.form.endTime = \"\";\r\n      }\r\n    }\r\n\r\n    const mousePos = { x: 0, y: 0 };\r\n\r\n    const stage = ref<Stage | null>(null);\r\n\r\n    function batchDraw() {\r\n      (stage.value as Stage).batchDraw();\r\n    }\r\n\r\n    const layer = new Konva.Layer();\r\n    const bgLayer = new Konva.Layer();\r\n    const operationLayer = new Konva.Layer();\r\n\r\n    const allGroup = {\r\n      cameraGroup: new Konva.Group({ name: \"cameraGroup\" }),\r\n      basestationGroup: new Konva.Group({ name: \"basestationGroup\" }),\r\n      personGroup: new Konva.Group({ name: \"personGroup\" }),\r\n      fenceGroup: new Konva.Group({ name: \"fenceGroup\" }),\r\n      locateBubbleGroup: new Konva.Group({ name: \"locateBubbleGroup\" }),\r\n    };\r\n\r\n    const activeTarget = reactive<IActiveTarget>({\r\n      id: 0,\r\n      attrs: { x: 0, y: 0 }, // 存放没更新之前的变量\r\n    });\r\n\r\n    const equipmentInfo = reactive<IEquipmentInfo>({\r\n      basestationData: { x: 0, y: 0 }, // 基站数据\r\n      cameraData: { x: 0, y: 0 }, // 摄像头数据\r\n      checkedNode: null, // 被选中的konva节点，比如在添加设备时选中、编辑时选中\r\n    });\r\n\r\n    watch(monitorListInfo.newMonitorList, (val) => {\r\n      let count = 0;\r\n      val.forEach((item: { active: any }) => {\r\n        const active = item.active;\r\n        if (active) {\r\n          count++;\r\n        }\r\n      });\r\n      if (count === 0) {\r\n        visibleObj.monitorListFlag = false;\r\n      }\r\n      monitorListInfo.livePlayCount = count;\r\n      if (count === 1) {\r\n        monitorListInfo.monitorInner = \"monitor-inner-one\";\r\n      } else {\r\n        monitorListInfo.monitorInner = \"monitor-inner-pannel\";\r\n      }\r\n\r\n      if (val.length > monitorListInfo.cameraCount) {\r\n        if (val.length > monitorListInfo.cameraCount * 1000) {\r\n          val.splice(0, val.length - monitorListInfo.cameraCount);\r\n        }\r\n        val.forEach((item: { active: any }, index: number) => {\r\n          if (index < val.length - monitorListInfo.cameraCount) {\r\n            item.active = false;\r\n          }\r\n        });\r\n      }\r\n    });\r\n    watch(monitorListInfo.newHistoryMonitorList, (val) => {\r\n      let count = 0;\r\n      val.forEach((value: { active: any }) => {\r\n        const active = value.active;\r\n        if (active) {\r\n          count++;\r\n        }\r\n      });\r\n      if (count === 0) {\r\n        visibleObj.historyMonitorListFlag = false;\r\n      }\r\n      monitorListInfo.historyPlayCount = count;\r\n      if (count === 1) {\r\n        monitorListInfo.monitorHistoryInner = \"monitor-inner-one\";\r\n      } else {\r\n        monitorListInfo.monitorHistoryInner = \"monitor-inner-pannel\";\r\n      }\r\n\r\n      if (val.length > monitorListInfo.cameraCount) {\r\n        if (val.length > monitorListInfo.cameraCount * 1000) {\r\n          val.splice(0, val.length - monitorListInfo.cameraCount);\r\n        }\r\n        val.forEach((value: { active: any }, index: number) => {\r\n          if (index < val.length - monitorListInfo.cameraCount) {\r\n            value.active = false;\r\n          }\r\n        });\r\n      }\r\n    });\r\n\r\n    let cacheDrawFence: Nullable<Shape> = null;\r\n    /**\r\n     * @description: 绘制电子围栏\r\n     * @param {boolean} isFinished 是否绘制完成\r\n     * @return {*}\r\n     */\r\n    function handleStartDrawFence(isFinished = false) {\r\n      cacheDrawFence && cacheDrawFence.destroy();\r\n\r\n      const pointsArr = drawFenceInfo.points;\r\n      if (pointsArr.length === 0) {\r\n        batchDraw();\r\n        return;\r\n      }\r\n\r\n      const fenceArea = new Konva.Shape({\r\n        ...areaColorConfig,\r\n        sceneFunc: function (ctx, shape) {\r\n          ctx.beginPath();\r\n          ctx.moveTo(pointsArr[0].x, pointsArr[0].y);\r\n          for (let i = 1; i < pointsArr.length; i++) {\r\n            const { x, y } = pointsArr[i];\r\n            ctx.lineTo(x, y);\r\n          }\r\n\r\n          ctx.stroke();\r\n          if (isFinished) {\r\n            ctx.closePath();\r\n          }\r\n\r\n          ctx.fillStrokeShape(shape);\r\n        },\r\n      });\r\n      cacheDrawFence = fenceArea;\r\n      allGroup.fenceGroup.add(fenceArea);\r\n      batchDraw();\r\n    }\r\n\r\n    // 电子围栏重新绘制\r\n    function handleRedrawFence() {\r\n      drawFenceInfo.points = [];\r\n      handleStartDrawFence();\r\n    }\r\n\r\n    /**\r\n     * @description: 电子围栏撤销\r\n     * @param {*}\r\n     * @return {*}\r\n     */\r\n    function handleRevokeFence() {\r\n      const { points } = drawFenceInfo;\r\n      const len = points.length;\r\n      if (len === 0) {\r\n        ElMessage.info(\"还一个点都没有添加噢！\");\r\n      } else if (len === 1 || len === 2) {\r\n        handleRedrawFence();\r\n      } else {\r\n        points.splice(len - 2, 2);\r\n        handleStartDrawFence();\r\n      }\r\n    }\r\n\r\n    /**\r\n     * @description: 取消绘制电子围栏\r\n     * @param {*}\r\n     * @return {*}\r\n     */\r\n    function handleCancelDrawFence() {\r\n      handleRedrawFence();\r\n\r\n      status.isDrawFence = false;\r\n      (drawFenceInfo.message as IMessageClose).close();\r\n      drawFenceInfo.points = [];\r\n      drawFenceInfo.clonePoints = [];\r\n      fenceInfo.visible = true;\r\n    }\r\n\r\n    /**\r\n     * @description: 完成绘制电子围栏\r\n     * @param {*}\r\n     * @return {*}\r\n     */\r\n    function handleFinishDrawFence() {\r\n      const { points } = drawFenceInfo;\r\n      const len = points.length;\r\n      if (len < 4) {\r\n        ElMessage.info(\"最少三个点才能组成一个面\");\r\n      } else {\r\n        (drawFenceInfo.message as IMessageClose).close();\r\n\r\n        status.isDrawFence = false;\r\n\r\n        points.pop();\r\n\r\n        drawFenceInfo.clonePoints = cloneDeep(points);\r\n        handleStartDrawFence(true);\r\n\r\n        setTimeout(() => {\r\n          fenceInfo.visible = true;\r\n          handleRedrawFence();\r\n        }, 500);\r\n      }\r\n    }\r\n\r\n    /**\r\n     * @description: 编辑还原\r\n     * @param {*}\r\n     * @return {*}\r\n     */\r\n    function editRestore() {\r\n      if (contextmenuTypeRef.value === TYPES.labelList) return;\r\n      const { x, y } = activeTarget.attrs;\r\n      (currentContextmenuRef.value as Shape).to({\r\n        x,\r\n        y,\r\n      });\r\n      if (contextmenuTypeRef.value === TYPES.camera) {\r\n        const { direction } = activeTarget.attrs;\r\n        (currentContextmenuRef.value as Image).image(cameraImageObjRef.value[direction]);\r\n      }\r\n      batchDraw();\r\n    }\r\n\r\n    /**\r\n     * @description: 清除阴影\r\n     * @param {*}\r\n     * @return {*}\r\n     */\r\n    function clearShadowColor() {\r\n      // if (!currentContextmenuRef.value) return;\r\n      // currentContextmenuRef.value.shadowColor(\"rgba(0,0,0,0)\");\r\n      // editRestore();\r\n    }\r\n\r\n    /**\r\n     * @description: 显示右键菜单\r\n     * @param {Event} e window原生e\r\n     * @return {*}\r\n     */\r\n    function showMenuList(e: MouseEvent) {\r\n      const { clientX: x, clientY: y } = e;\r\n\r\n      Object.assign(contxtmenuPosition, {\r\n        left: x,\r\n        top: y - titleHeight,\r\n      });\r\n\r\n      visibleObj.contextmenu = true;\r\n    }\r\n\r\n    /**\r\n     * @description: 隐藏右键菜单\r\n     * @param {*}\r\n     * @return {*}\r\n     */\r\n    function hideMenuList() {\r\n      if (visibleObj.contextmenu) {\r\n        visibleObj.contextmenu = false;\r\n        clearShadowColor();\r\n        currentContextmenuRef.value = null;\r\n      }\r\n    }\r\n\r\n    /**\r\n     * @description: 缓存图片\r\n     * @param {object} imageAbout 图片相关\r\n     * @param {function} func 需要执行的函数\r\n     * @param {string | number} type 地图id || 摄像头方向 || 人员类型\r\n     * @return {void}\r\n     */\r\n    function cacheImage(\r\n      imageAbout: IImageAbout,\r\n      func: Function,\r\n      type: string | number = mapIdRef.value\r\n    ) {\r\n      let { imageObj } = imageAbout;\r\n      const { src } = imageAbout;\r\n\r\n      const isCached = !!(imageObj && (imageObj.src || imageObj[type]));\r\n\r\n      let imageELe: Nullable<HTMLImageElement> = null;\r\n      if (isCached) {\r\n        imageELe = !(imageObj as IImageObj).src\r\n          ? (imageObj as IImageObj)[type]\r\n          : (imageObj as HTMLImageElement);\r\n        func(imageELe);\r\n      } else {\r\n        imageELe = new window.Image() as HTMLImageElement;\r\n        imageELe.src = src;\r\n        (imageELe as HTMLImageElement).onload = () => {\r\n          imageObj === null\r\n            ? (imageObj = imageELe)\r\n            : ((imageObj as IImageObj)[type] = imageELe as HTMLImageElement);\r\n          func(imageELe);\r\n        };\r\n        (imageELe as HTMLImageElement).onerror = () => {\r\n          ElMessage.error(\"加载图片失败\");\r\n        };\r\n      }\r\n    }\r\n\r\n    function handleStageWheel() {\r\n      (stage.value as Stage).on(\"wheel\", (e) => {\r\n        // e = e.evt;\r\n        const ev: WheelEvent = e.evt;\r\n\r\n        // ts 定义的 没有 wheelDelta 属性\r\n        // const wheelDelta = ev.wheelDelta ? ev.wheelDelta : ev.deltaY * -40;\r\n        const wheelDelta = ev.deltaY * -40;\r\n\r\n        const rateX = (ev.clientX - state.sx) / state.scale;\r\n        const rateY = (ev.clientY - state.sy) / state.scale;\r\n\r\n        if (wheelDelta > 0) {\r\n          state.scale += 0.05;\r\n          state.scale = Number((state.scale + 0.05).toFixed(2));\r\n          if (state.scale >= state.maxScale) {\r\n            state.scale = state.maxScale;\r\n          }\r\n        } else {\r\n          state.scale -= 0.05;\r\n          state.scale = Number((state.scale - 0.05).toFixed(2));\r\n          if (state.scale <= state.minScale) {\r\n            state.scale = state.minScale;\r\n          }\r\n        }\r\n\r\n        state.sx = ev.clientX - state.scale * rateX;\r\n        state.sy = ev.clientY - state.scale * rateY;\r\n\r\n        (stage.value as Stage).setAttrs({\r\n          x: state.sx,\r\n          y: state.sy,\r\n          scaleX: state.scale,\r\n          scaleY: state.scale,\r\n        });\r\n\r\n        if (status.isDrawFence) {\r\n          handleStartDrawFence();\r\n        }\r\n\r\n        batchDraw();\r\n      });\r\n    }\r\n\r\n    function handleStageMouseDown() {\r\n      (stage.value as Stage).on(\"mousedown\", (e) => {\r\n        const ev = e.evt;\r\n\r\n        if (status.isDrawFence) {\r\n          clickTimerRef.value = window.setTimeout(() => {\r\n            const pos = screenTocanvas({ x: ev.clientX, y: ev.clientY }, state);\r\n            drawFenceInfo.points.push(pos);\r\n            handleStartDrawFence();\r\n          }, 300);\r\n\r\n          return;\r\n        }\r\n\r\n        status.draggable = true;\r\n\r\n        Object.assign(mousePos, {\r\n          x: ev.clientX,\r\n          y: ev.clientY,\r\n        });\r\n        (stage.value as Stage).container().style.cursor = \"move\";\r\n\r\n        hideMenuList();\r\n      });\r\n    }\r\n\r\n    function handleStageMouseUp() {\r\n      (stage.value as Stage).on(\"mouseup mouseout\", () => {\r\n        if (status.draggable) {\r\n          status.draggable = false;\r\n          (stage.value as Stage).container().style.cursor = \"default\";\r\n        }\r\n      });\r\n    }\r\n\r\n    function handleStageMouseMove() {\r\n      (stage.value as Stage).on(\r\n        \"mousemove\",\r\n        debounce((e) => {\r\n          const mouseMoveFunc = () => {\r\n            const ev: MouseEvent = e.evt;\r\n\r\n            if (status.isDrawFence) {\r\n              const { points } = drawFenceInfo;\r\n\r\n              if (points.length >= 1) {\r\n                if (points.length > 1) {\r\n                  points.pop();\r\n                }\r\n                const pos = screenTocanvas({ x: ev.clientX, y: ev.clientY }, state);\r\n                points.push(pos);\r\n                handleStartDrawFence();\r\n              }\r\n              return;\r\n            }\r\n            if (!status.draggable) return;\r\n\r\n            state.sx += ev.clientX - mousePos.x;\r\n            state.sy += ev.clientY - mousePos.y;\r\n\r\n            const maxSx = getOffset(\r\n              {\r\n                x: (stage.value as Stage).width() * 0.25,\r\n                y: 0,\r\n              },\r\n              {\r\n                x: 0,\r\n                y: 0,\r\n              },\r\n              state.scale\r\n            ).x;\r\n            const minSx = getOffset(\r\n              {\r\n                x: (stage.value as Stage).width() * 0.75,\r\n                y: 0,\r\n              },\r\n              {\r\n                x: bgImageConfig.width,\r\n                y: 0,\r\n              },\r\n              state.scale\r\n            ).x;\r\n            const maxSy = getOffset(\r\n              {\r\n                x: 0,\r\n                y: titleHeight,\r\n              },\r\n              { x: 0, y: 0 },\r\n              state.scale\r\n            ).y;\r\n            const minSy = getOffset(\r\n              {\r\n                x: 0,\r\n                y: (stage.value as Stage).height(),\r\n              },\r\n              { x: 0, y: bgImageConfig.height },\r\n              state.scale\r\n            ).y;\r\n\r\n            const midSy = getOffset(\r\n              {\r\n                x: 0,\r\n                y: (stage.value as Stage).height() / 2,\r\n              },\r\n              {\r\n                x: 0,\r\n                y: bgImageConfig.height / 2,\r\n              },\r\n              state.scale\r\n            ).y;\r\n\r\n            if (maxSx <= minSx) {\r\n              state.sx = maxSx;\r\n            } else if (state.sx > maxSx) {\r\n              state.sx = maxSx;\r\n            } else if (state.sx < minSx) {\r\n              state.sx = minSx;\r\n            }\r\n\r\n            if (maxSy <= minSy) {\r\n              state.sy = maxSy;\r\n            } else if (state.sy > maxSy) {\r\n              state.sy = maxSy;\r\n            } else if (state.sy < minSy) {\r\n              state.sy = minSy;\r\n            }\r\n\r\n            if (state.scale === state.minScale) {\r\n              state.sy = midSy;\r\n            }\r\n\r\n            Object.assign(mousePos, {\r\n              x: ev.clientX,\r\n              y: ev.clientY,\r\n            });\r\n\r\n            (stage.value as Stage).setAttrs({\r\n              x: state.sx,\r\n              y: state.sy,\r\n            });\r\n\r\n            batchDraw();\r\n          };\r\n          mouseMoveFunc();\r\n        }, 10)\r\n      );\r\n    }\r\n\r\n    function handleStageContextMenu() {\r\n      (stage.value as Stage).on(\"contextmenu\", (e) => {\r\n        const ev: MouseEvent = e.evt;\r\n        ev.preventDefault();\r\n        clickTimerRef.value && clearTimeout(clickTimerRef.value);\r\n        if (status.isDrawFence) {\r\n          handleFinishDrawFence();\r\n          return;\r\n        }\r\n      });\r\n    }\r\n\r\n    function stageEventsInit() {\r\n      handleStageWheel();\r\n      handleStageMouseDown();\r\n      handleStageMouseUp();\r\n      handleStageMouseMove();\r\n      handleStageContextMenu();\r\n    }\r\n\r\n    function initStage() {\r\n      stage.value = new Konva.Stage({\r\n        width: window.innerWidth,\r\n        height: window.innerHeight - titleHeight,\r\n        container: \"container\",\r\n        scale: {\r\n          x: state.scale,\r\n          y: state.scale,\r\n        },\r\n      });\r\n    }\r\n\r\n    function hideDetails() {\r\n      clearShadowColor();\r\n      visibleObj.detailsForm = false;\r\n    }\r\n\r\n    // 保存所有设备\r\n    let deviceAll: IDeviceItem[] = [];\r\n\r\n    const basestation: IListData<TVectorgraph> = {\r\n      all: [],\r\n      currentMap: [],\r\n    };\r\n    const bubble: IListData<TVectorgraph> = {\r\n      all: [],\r\n      currentMap: [],\r\n    };\r\n    const camera: IListData<TLayerItem> = {\r\n      all: [],\r\n      currentMap: [],\r\n    };\r\n\r\n    const area: IListData<IAreaItem> = {\r\n      all: [],\r\n      currentMap: [],\r\n    };\r\n\r\n    // todo 类型限制\r\n    const person = reactive<IListData<any>>({\r\n      all: [],\r\n      currentMap: [],\r\n    });\r\n\r\n    // 存放人物图像的宽高\r\n    let personImgObj: null | { width: number; height: number } = null;\r\n\r\n    async function addLayer() {\r\n      (stage.value as Stage).add(layer).add(bgLayer).add(operationLayer);\r\n\r\n      Object.keys(allGroup).forEach((key) => {\r\n        layer.add(allGroup[key]);\r\n      });\r\n\r\n      bgLayer.moveToBottom();\r\n      operationLayer.moveToTop();\r\n    }\r\n\r\n    const cacheBasestationObj: ICacheImage = {};\r\n    async function initBasestation(attrs: TLayerItem) {\r\n      const { x, y, lids } = attrs;\r\n      const imageDom = await generateImageDomByType(attrs);\r\n\r\n      const shape = new Konva.Image({\r\n        x,\r\n        y,\r\n        width: imageDom.width,\r\n        height: imageDom.height,\r\n        image: imageDom,\r\n        shadowColor: \"rgba(0,0,0,0)\",\r\n        shadowBlur: imageDom.width,\r\n        name: lids,\r\n      });\r\n\r\n      shape.on(\"contextmenu\", (e) => {\r\n        console.log(e);\r\n\r\n        if (status.isDrawFence) {\r\n          return false;\r\n        }\r\n\r\n        hideDetails();\r\n\r\n        activeTarget.attrs = cloneDeep(e.target.attrs);\r\n        currentContextmenuRef.value = shape;\r\n\r\n        contextmenuTypeRef.value = TYPES.basestation;\r\n        showMenuList(e.evt);\r\n        visibleObj.contextmenu = true;\r\n\r\n        shape.shadowColor(\"red\");\r\n        batchDraw();\r\n      });\r\n\r\n      allGroup.basestationGroup.add(shape);\r\n      cacheBasestationObj[lids] = shape;\r\n      batchDraw();\r\n    }\r\n\r\n    const cacheCameraObj: ICacheImage = {};\r\n    async function initCamera(attrs: TLayerItem) {\r\n      const { x, y, lids } = attrs;\r\n      const imageDom = await generateImageDomByType(attrs);\r\n\r\n      const shape = new Konva.Image({\r\n        x,\r\n        y,\r\n        width: imageDom.width,\r\n        height: imageDom.height,\r\n        image: imageDom,\r\n        shadowColor: \"rgba(0,0,0,0)\",\r\n        shadowBlur: imageDom.width,\r\n        name: lids,\r\n      });\r\n\r\n      shape.on(\"contextmenu\", (e) => {\r\n        console.log(e);\r\n        if (status.isDrawFence) {\r\n          return false;\r\n        }\r\n\r\n        hideDetails();\r\n\r\n        activeTarget.attrs = cloneDeep(e.target.attrs);\r\n\r\n        contextmenuTypeRef.value = TYPES.camera;\r\n        currentContextmenuRef.value = shape;\r\n\r\n        showMenuList(e.evt);\r\n        visibleObj.contextmenu = true;\r\n\r\n        shape.shadowColor(\"green\");\r\n        batchDraw();\r\n      });\r\n\r\n      allGroup.cameraGroup.add(shape);\r\n      cacheCameraObj[lids] = shape;\r\n\r\n      batchDraw();\r\n    }\r\n\r\n    const layerPerson = ref<any[]>([\r\n      {\r\n        name: \"1\",\r\n        id: \"sdf\",\r\n      },\r\n    ]);\r\n\r\n    const layerPosition = shallowReactive<IStyleLeftTop>({\r\n      left: 0,\r\n      top: 0,\r\n    });\r\n\r\n    const cacheBubbleObj: ICacheBubble = {};\r\n    async function initBubble(attrs: TVectorgraph) {\r\n      const offsetX = 24;\r\n      const offsetY = 16;\r\n      const OffsetX = 2 * offsetX;\r\n      const OffsetY = 2 * offsetY;\r\n      const { x, y, sname, lids } = attrs;\r\n\r\n      const { W, H, layinfo, Color, IsHaveCount, CountItem } = attrs.defdata;\r\n      const w = W - OffsetX;\r\n      const h = H - OffsetY;\r\n      // konva-test-vue\r\n      const group = new Konva.Group({\r\n        x,\r\n        y,\r\n      });\r\n\r\n      const config: ISvgToImageConfig = {\r\n        pathSrc: layinfo,\r\n        width: W,\r\n        height: H,\r\n        color: Color,\r\n      };\r\n\r\n      const imageDom = await svgToImage(config, attrs.ltype === \"标注图层\");\r\n      const image = new Konva.Image({\r\n        image: imageDom,\r\n        stroke: \"rgba(255,0,0,.5)\",\r\n      });\r\n\r\n      if (!IsHaveCount) {\r\n        const label = new Konva.Text({\r\n          x: W / 2 - offsetX,\r\n          y: (h - 10) / 2,\r\n          text: sname,\r\n          fontSize: 14,\r\n          fill: \"#fff\",\r\n        });\r\n        label.offsetX(label.width() / 2);\r\n        label.offsetY(label.height() / 2);\r\n        group.add(image).add(label);\r\n      } else {\r\n        const label = new Konva.Text({\r\n          x: W / 2 - offsetX,\r\n          y: H / 8,\r\n          text: sname,\r\n          fontSize: 14,\r\n          fill: \"#fff\",\r\n        });\r\n        label.offsetX(label.width() / 2);\r\n\r\n        const line = new Konva.Line({\r\n          points: [w * 0.1, h / 2, w * 0.9, h / 2],\r\n          stroke: \"#fff\",\r\n          strokeWidth: 0.5,\r\n        });\r\n\r\n        const bottomGroup = new Konva.Group({\r\n          x: w / 2,\r\n          y: (h - 10) * 0.7,\r\n        });\r\n\r\n        cacheBubbleObj[lids] = [];\r\n\r\n        const len = CountItem.length;\r\n        // const len = 2;\r\n        const gap = 10;\r\n\r\n        CountItem.forEach((item, index) => {\r\n          const cornerGroup = new Konva.Group({\r\n            x: gap * index,\r\n          });\r\n\r\n          const cornerH = ((h - 10) / 2) * 0.5;\r\n          const cornerRect = new Konva.Rect({\r\n            width: w / 3 / len,\r\n            height: cornerH,\r\n            fill: \"rgba(255,255,255,.6)\",\r\n            cornerRadius: cornerH,\r\n          });\r\n          cornerRect.offsetX(cornerRect.width() / 2);\r\n\r\n          const cornerText = new Konva.Text({\r\n            x: 0,\r\n            y: cornerH / 2,\r\n            fill: Color,\r\n            text: \"?\",\r\n            name: item,\r\n          });\r\n\r\n          cornerText.offsetX(cornerText.width() / 2);\r\n          cornerText.offsetY(cornerText.height() / 2);\r\n\r\n          cornerGroup.add(cornerRect).add(cornerText);\r\n\r\n          cacheBubbleObj[lids].push(cornerText);\r\n\r\n          bottomGroup.add(cornerGroup);\r\n        });\r\n\r\n        group.add(image).add(label).add(line).add(bottomGroup);\r\n\r\n        group.on(\"dblclick\", (e) => {\r\n          console.log(e);\r\n          const { clientX, clientY } = e.evt;\r\n          Object.assign(layerPosition, {\r\n            left: clientX,\r\n            top: clientY - titleHeight,\r\n          });\r\n          visibleObj.layerPerson = true;\r\n        });\r\n      }\r\n\r\n      allGroup.locateBubbleGroup.add(group);\r\n    }\r\n\r\n    const cacheAreaObj: ICachePerson = {};\r\n    // 回显电子围栏\r\n    function initArea(attrs: IAreaItem) {\r\n      const { areaids, points, areaname, show } = attrs;\r\n      const posArr = JSON.parse(points) as IUpperPos[];\r\n      const group = new Konva.Group({\r\n        name: areaids,\r\n        visible: show,\r\n      });\r\n      const startPoint = posArr[0];\r\n      const text = new Konva.Text({\r\n        x: startPoint.X + 10,\r\n        y: startPoint.Y + 10,\r\n        text: areaname,\r\n        fill: \"#fff\",\r\n        fontSize: 24,\r\n      });\r\n      const areaItem = new Konva.Shape({\r\n        ...areaColorConfig,\r\n        sceneFunc: function (ctx, shape) {\r\n          ctx.beginPath();\r\n          ctx.moveTo(posArr[0].X, posArr[0].Y);\r\n          for (let i = 1; i < posArr.length; i++) {\r\n            const { X, Y } = posArr[i];\r\n            ctx.lineTo(X, Y);\r\n          }\r\n          ctx.stroke();\r\n          ctx.closePath();\r\n          ctx.fillStrokeShape(shape);\r\n        },\r\n      });\r\n      group.add(areaItem).add(text);\r\n      // 存在就将之前的 销毁 置空\r\n      if (cacheAreaObj[areaids]) {\r\n        cacheAreaObj[areaids].destroy();\r\n        delete cacheAreaObj[areaids];\r\n      }\r\n      allGroup.fenceGroup.add(group);\r\n      cacheAreaObj[areaids] = group;\r\n\r\n      batchDraw();\r\n    }\r\n\r\n    // 修复 右键同一个 shape x y 会变空的问题\r\n    watch(\r\n      () => visibleObj.detailsForm,\r\n      (newVal) => {\r\n        if (newVal === false) {\r\n          detailsForm.formData = {};\r\n          detailsForm.x = 0;\r\n          detailsForm.y = 0;\r\n        }\r\n      }\r\n    );\r\n\r\n    const cachePersonObj: ICachePerson = {};\r\n    async function initPerson(attrs: IPersonArrItem, initType = 0) {\r\n      const { x, y, name, id, type } = attrs;\r\n      const generate = (img: HTMLImageElement) => {\r\n        const group = new Konva.Group({\r\n          name: id + \"\",\r\n          x,\r\n          y,\r\n        });\r\n\r\n        if (!personImgObj) {\r\n          personImgObj = {\r\n            width: img.width,\r\n            height: img.height,\r\n          };\r\n        }\r\n\r\n        const image = new Konva.Image({\r\n          x: 0,\r\n          y: 0,\r\n          width: img.width,\r\n          height: img.height,\r\n          image: img,\r\n          shadowColor: \"rgba(0,0,0,0)\",\r\n          shadowBlur: img.width,\r\n          id: String(id), // 需要绑  右键返回的是当前右键的shape，拿不到group  当然也可以拿parent\r\n        });\r\n\r\n        const fontSize = 14;\r\n        const text = new Konva.Text({\r\n          x: 0,\r\n          y: -fontSize - 5,\r\n          text: name,\r\n          fontSize,\r\n          fill: \"#fff\",\r\n          id: String(id),\r\n        });\r\n\r\n        group.add(image).add(text);\r\n\r\n        cachePersonObj[id] = group;\r\n\r\n        // 普通初始化\r\n        if (allGroup.personGroup.value && initType === 0) {\r\n          allGroup.personGroup.add(group);\r\n        } else if (operationLayer && initType) {\r\n          operationLayer.add(group);\r\n          group.moveToTop();\r\n        }\r\n\r\n        batchDraw();\r\n\r\n        if (initType === 0) {\r\n          group.on(\"contextmenu\", (e) => {\r\n            console.log(e);\r\n            console.log(e.target.attrs.id);\r\n            if (status.isDrawFence) {\r\n              return false;\r\n            }\r\n            activeTarget.id = e.target.attrs.id;\r\n            activeTarget.attrs = cloneDeep(e.target.attrs);\r\n            hideDetails();\r\n\r\n            currentContextmenuRef.value = image;\r\n            contextmenuTypeRef.value = TYPES.labelList;\r\n            showMenuList(e.evt);\r\n            visibleObj.contextmenu = true;\r\n            image.shadowColor(\"#123456\");\r\n            batchDraw();\r\n          });\r\n        } else {\r\n          status.isPlayBack = true;\r\n          // this.trackPlaybackTween(group, this.trackPlayback.steps)\r\n        }\r\n      };\r\n\r\n      cacheImage(\r\n        {\r\n          src: `/images/staff_unchecked${type || 1}.png`,\r\n          imageObj: personImageObjRef.value,\r\n        },\r\n        generate,\r\n        type || 1\r\n      );\r\n    }\r\n\r\n    const transferProps = {\r\n      label: \"dname\",\r\n      key: \"dids\",\r\n    };\r\n    const transferData = ref<any>([]);\r\n    // 获取当前场景下的所有 摄像头\r\n    function getAllMapCamera() {\r\n      return deviceAll\r\n        .filter((item) => item.dtypecode === \"Camera_IP\" && item.snum === mapIdRef.value)\r\n        .slice();\r\n    }\r\n\r\n    async function getAllDevice() {\r\n      const params = {\r\n        act: \"Vd95kIrsbON1Z6H27eM1586422577340\",\r\n        TypeCodeChar: \"\",\r\n      };\r\n      const res: unknown = await stageApi.getAllDevice(params);\r\n\r\n      const { data } = res as IResponseCommon<IDeviceItem[]>;\r\n      console.log(\"getAllDevice\", data);\r\n\r\n      deviceAll = data || [];\r\n      fenceInfo.allMapCamera = getAllMapCamera();\r\n      console.log(fenceInfo.allMapCamera);\r\n\r\n      // 保存所有设备信息到localStorage中\r\n      setAllDevice(deviceAll);\r\n    }\r\n\r\n    async function getCurrentMapCamera(mapId: string) {\r\n      camera.currentMap = camera.all.filter((item) => item.snum === mapId);\r\n      camera.currentMap.forEach((item) => {\r\n        initCamera(item);\r\n      });\r\n    }\r\n\r\n    function getCurrentMapBubble(mapId: string) {\r\n      bubble.currentMap = bubble.all.filter((item) => item.snum === mapId);\r\n      bubble.currentMap.forEach((item) => {\r\n        initBubble(item);\r\n      });\r\n    }\r\n\r\n    function getCurrentMapBasestation(mapId: string) {\r\n      basestation.currentMap = basestation.all.filter((item) => item.snum === mapId);\r\n      basestation.currentMap.forEach((item) => {\r\n        initBasestation(item);\r\n      });\r\n    }\r\n\r\n    const getCurrentMapPerson = (mapId: string) => {\r\n      person.currentMap = person.all.filter(\r\n        (item: any) => item.LocationSceneId === mapId\r\n      );\r\n      person.currentMap.forEach((item) => {\r\n        initPerson(item);\r\n      });\r\n    };\r\n\r\n    async function getAllLayer() {\r\n      const params = {\r\n        act: \"kTM5tsxPxjZPbajPzDQ1586422437860\",\r\n        ProductId: \"99999999-9999-9999-9999-999999999999\",\r\n      };\r\n      const res: unknown = await stageApi.getAllLayer(params);\r\n      const { data } = res as IResponseCommon<TLayerItem[]>;\r\n      console.log(\"getAllLayer=>\", data);\r\n\r\n      // layerTypes : 标注图层  | 摄像头图层 | 基站图层\r\n\r\n      // 标注图层\r\n      bubble.all = data.filter((item) => item.ltype === \"标注图层\") as TVectorgraph[];\r\n      getCurrentMapBubble(mapIdRef.value);\r\n\r\n      // 摄像头图层\r\n      camera.all = data.filter((item) => item.ltype === \"摄像头图层\");\r\n      getCurrentMapCamera(mapIdRef.value);\r\n\r\n      // 基站图层\r\n      basestation.all = data.filter(\r\n        (item) => item.ltype === \"基站图层\"\r\n      ) as TVectorgraph[];\r\n      getCurrentMapBasestation(mapIdRef.value);\r\n\r\n      batchDraw();\r\n    }\r\n\r\n    async function getAllBuild() {\r\n      const params = {\r\n        act: \"cRfPNhii9hVXQ6D8C151586425533740\",\r\n      };\r\n      const res: unknown = await stageApi.getAllBuild(params);\r\n\r\n      const { data } = res as IResponseCommon<IBuildItem[]>;\r\n      console.log(\"getAllBuild\", data);\r\n    }\r\n\r\n    function getCurrentMapArea(mapId: string) {\r\n      area.currentMap = area.all.filter((item) => item.snum === mapId);\r\n      fenceListInfo.allData = area.currentMap;\r\n      fenceListInfo.tableData = getPagination(\r\n        fenceListInfo.allData,\r\n        fenceListInfo.params.curpage\r\n      );\r\n      fenceListInfo.total = fenceListInfo.allData.length;\r\n\r\n      area.currentMap.forEach((item) => {\r\n        initArea(item);\r\n      });\r\n    }\r\n\r\n    // 只展示当前地图 电子围栏\r\n    // 获取自定义区域 - 电子围栏\r\n    async function getAllHArea() {\r\n      const params = {\r\n        act: \"KP9NBmF37ejHCChTUhA1586415869244\",\r\n      };\r\n      const res: unknown = await stageApi.getAllHArea(params);\r\n      const { data } = res as IResponseCommon<IAreaItem[]>;\r\n      console.log(\"getAllHArea\", data);\r\n\r\n      area.all = data.map((item) => {\r\n        return {\r\n          ...item,\r\n          show: visibleObj.area,\r\n        };\r\n      }) as IAreaItem[];\r\n      getCurrentMapArea(mapIdRef.value);\r\n    }\r\n    // 获取所有报警信息\r\n    async function getAllAlarm(){\r\n      const param = {\r\n        act: \"6Z6wTPGkfMVF9eLTOXA1611040899987\",\r\n        curpage: alarmListInfo.params.curpage,\r\n        // eslint-disable-next-line @typescript-eslint/camelcase\r\n        sys_showpagesize: alarmListInfo.params.size,\r\n        ShowSceneNum: alarmListInfo.ShowSceneNum,\r\n        SourceType: alarmListInfo.SourceType,\r\n        alarmLevel: alarmListInfo.alarmLevel,\r\n        sTime: alarmListInfo.sTime,\r\n        eTime: alarmListInfo.eTime,\r\n        alarmProgress: alarmListInfo.alarmProgress\r\n      };\r\n      const res = await alarmApi.getAllAlamList(param);\r\n      const { result, data } = res as any;\r\n\r\n      if (result.success) {\r\n        alarmListInfo.tableData= data.content;\r\n        alarmListInfo.total = data.count;\r\n      }\r\n    }\r\n  function alarmCurrentChange() {\r\n      alarmListInfo.loading = true;\r\n      getAllAlarm();\r\n      alarmListInfo.loading = false;\r\n    }\r\n    function getAlarmListByCondition(){\r\n      alarmListInfo.params.curpage = 1;\r\n      alarmListInfo.loading = true;\r\n      getAllAlarm();\r\n      alarmListInfo.loading = false;\r\n    }\r\n    function handleDetailAlarm(row: any){\r\n      console.log(row)\r\n      alarmInfo.visible = true;\r\n      alarmInfo.form = row;\r\n    }\r\n\r\n    let cacheBgImage: Nullable<Image> = null; //缓存背景图对象\r\n    /**\r\n     * @description: 加载背景图\r\n     * @param {src}\r\n     * @return {*}\r\n     */\r\n    async function initBgImage(\r\n      src: string = imgUrl + mapObj[mapIdRef.value].surl\r\n      // src = '/images/bg/jq_cf.png'\r\n    ) {\r\n      console.log(\"src:\", src);\r\n\r\n      const imageDom = new window.Image();\r\n      imageDom.src = src;\r\n      imageDom.onload = async () => {\r\n        const image = new Konva.Image({\r\n          image: imageDom,\r\n          name: BG_NAME,\r\n          width: imageDom.width,\r\n          height: imageDom.height,\r\n          // https://konvajs.org/docs/performance/All_Performance_Tips.html 13\r\n          listening: false,\r\n        });\r\n\r\n        state.scale = Number((window.innerWidth / image.width()).toFixed(2));\r\n        state.minScale = state.scale;\r\n\r\n        await bgLayer.add(image);\r\n        (stage.value as Stage).setAttrs({\r\n          scale: {\r\n            x: state.scale,\r\n            y: state.scale,\r\n          },\r\n        });\r\n\r\n        cacheBgImage = image;\r\n\r\n        image.moveToBottom();\r\n        await batchDraw();\r\n\r\n        // 图片加载成功 才注册 stage 事件\r\n        stageEventsInit();\r\n\r\n        getAllDevice();\r\n        getAllLayer();\r\n        getAllBuild();\r\n        getAllHArea();\r\n        // 获取所有报警列表\r\n        getAllAlarm();\r\n        // eslint-disable-next-line @typescript-eslint/no-use-before-define\r\n        // initLocationWs()\r\n        // eslint-disable-next-line @typescript-eslint/no-use-before-define\r\n        initAlarmWs();\r\n      };\r\n    }\r\n\r\n    // 背景图更新\r\n    function updataBgImage(mapId: string) {\r\n      const bgImageDom = new window.Image();\r\n      bgImageDom.src = imgUrl + mapObj[mapId].surl;\r\n      bgImageDom.onload = () => {\r\n        (cacheBgImage as Image).image(bgImageDom);\r\n        batchDraw();\r\n      };\r\n    }\r\n\r\n    async function initShape(bgSrc?: string) {\r\n      await initBgImage(bgSrc);\r\n\r\n      // this.initLoacateIcon({ x: 200, y: 300 })\r\n    }\r\n\r\n    async function startInit() {\r\n      initStage();\r\n      addLayer();\r\n      initShape();\r\n    }\r\n\r\n    async function getAllMap() {\r\n      const params = {\r\n        act: \"bPxM1k2cWCeMeEIbWZV1586415800673\",\r\n      };\r\n      const res: unknown = await stageApi.getAllScene(params);\r\n\r\n      const { data } = res as IResponseCommon<IMapArrItem[]>;\r\n      console.log(\"getAllMap=>\", data);\r\n      data &&\r\n        data.forEach((value) => {\r\n          mapObj[value.snum] = value;\r\n        });\r\n\r\n      mapListRef.value = data || [];\r\n      mapNameRef.value = mapObj[mapIdRef.value].sname;\r\n      // 保存所有场景信息到localStorage中\r\n      localStorage.setItem(\"sceneAll\", JSON.stringify(data));\r\n      startInit();\r\n    }\r\n\r\n    // watch(\r\n    //   () => state.scale,\r\n    //   value => {\r\n    //     (stage.value as Stage).setAttrs({\r\n    //       scale: {\r\n    //         x: value,\r\n    //         y: value\r\n    //       }\r\n    //     });\r\n    //     batchDraw()\r\n    //   }\r\n    // );\r\n\r\n    function computedRem() {\r\n      const docEl = document.documentElement;\r\n      let width = document.body.clientWidth || document.documentElement.clientWidth;\r\n      width = width > 2400 ? 2400 : width;\r\n      docEl.style.fontSize = width / 190 + \"px\";\r\n    }\r\n\r\n    // nav\r\n    const mainNavRef = ref();\r\n    function navClick(code: string) {\r\n      console.log(\"navCode=>\", code);\r\n      hideMenuList();\r\n      visibleObj.layerPerson = false;\r\n      for (const key in NAV_INFO) {\r\n        if (NAV_INFO[key].code === code) {\r\n          drawerInfo.showList = true;\r\n          drawerInfo.drawerTitle = NAV_INFO[key].title;\r\n          drawerInfo.activeName = key;\r\n          break;\r\n        }\r\n      }\r\n      // 点击电子围栏\r\n      if (FENCE.code === code) {\r\n        fenceListInfo.tableVisible = true;\r\n      }\r\n\r\n      // 点击报警管理\r\n      if (ALARM.code === code) {\r\n        alarmListInfo.tableVisible = true;\r\n      }\r\n    }\r\n\r\n    function resetNavIndex() {\r\n      mainNavRef.value.resetIndex();\r\n    }\r\n\r\n    // drawer\r\n    /**\r\n     * @description: 设备模块切换设备类型\r\n     * @param {Pane} data\r\n     * @return {*}\r\n     */\r\n    function equipSwitchClick(data: Pane) {\r\n      drawerInfo.showList = true;\r\n      drawerInfo.drawerTitle = NAV_INFO[data.props.name].title;\r\n    }\r\n\r\n    // 电子围栏\r\n    const fenceInfoFormRef = ref();\r\n    // 打开电子围栏 通用\r\n    function openFenceDetail(type = 0) {\r\n      fenceInfo.visible = true;\r\n      fenceInfo.dialogType = type;\r\n      drawFenceInfo.clonePoints = [];\r\n      nextTick(() => {\r\n        (fenceInfoFormRef.value as IELForm).resetFields();\r\n        fenceInfo.form.chosenCamera = [];\r\n      });\r\n    }\r\n    // 点击新增电子围栏\r\n    function handleAddFence() {\r\n      openFenceDetail(0);\r\n    }\r\n    // 点击编辑电子围栏\r\n    let editFenceId = \"\"; // 编辑保存的id\r\n    async function handleEditFence(row: IAreaItem) {\r\n      // console.log(row);\r\n      openFenceDetail(1);\r\n      const { areaids, points, areaname } = row;\r\n      editFenceId = areaids;\r\n\r\n      const params = {\r\n        act: \"WHIHF7U1FtTjZORrI4h1611195385202\",\r\n        LayerIdS: areaids,\r\n        SceneNum: mapIdRef.value,\r\n      };\r\n      const res: unknown = await stageApi.getOnehAreaSetDeivce(params);\r\n      const { data } = res as IResponseCommon<ISetDeviceData>;\r\n      console.log(\"getOnehAreaSetDeivce\", data);\r\n\r\n      const deviceArr = JSON.parse(data.deviceitem) as ISetDeviceDataItem[];\r\n      deviceArr.forEach((item) => {\r\n        fenceInfo.form.chosenCamera.push(item.DeviceIdS);\r\n      });\r\n\r\n      fenceInfo.form.name = areaname;\r\n      drawFenceInfo.clonePoints = JSON.parse(points);\r\n    }\r\n    // 触发绘制电子围栏\r\n    function handleFenceDraw() {\r\n      // 隐藏两个dialog\r\n      fenceInfo.visible = false;\r\n      fenceListInfo.tableVisible = false;\r\n\r\n      // 绘制\r\n      drawFenceInfo.message = ElMessage({\r\n        showClose: true,\r\n        message: \"鼠标单击左键新增点，右键可完成绘制\",\r\n        type: \"warning\",\r\n        duration: 0,\r\n      });\r\n\r\n      drawFenceInfo.points = [];\r\n      status.isDrawFence = true;\r\n    }\r\n\r\n    // 新增/编辑 电子围栏 提交按钮点击事件\r\n    function handleSubmitFence() {\r\n      (fenceInfoFormRef.value as IELForm).validate(async (valid: boolean) => {\r\n        if (valid) {\r\n          const chooseDevice = fenceInfo.form.chosenCamera.map((item: string) => {\r\n            const index = fenceInfo.allMapCamera.findIndex((i: any) => i.dids === item);\r\n            return {\r\n              DeviceIdS: item,\r\n              DeviceType: fenceInfo.allMapCamera[index].dname,\r\n            };\r\n          });\r\n          const params: IAddEditFenceParams = {\r\n            act: \"i9YWieOBzym06JamZtI1586422307190\",\r\n            LayerIdS: fenceInfo.dialogType === 0 ? guid() : editFenceId,\r\n            SceneNum: mapIdRef.value,\r\n            CheckSourceID: JSON.stringify(\r\n              drawFenceInfo.clonePoints.map((item) => ({ X: item.x, Y: item.y }))\r\n            ),\r\n            DevicePointRelation:\r\n              fenceInfo.form.chosenCamera.length === 0\r\n                ? \"\"\r\n                : JSON.stringify(chooseDevice),\r\n            CheckSourceUnitName: fenceInfo.form.name,\r\n          };\r\n          const res: unknown = await stageApi.saveHArea(params);\r\n          const { result } = res as IResponseCommon<string>;\r\n          if (result.msg === \"操作成功\") {\r\n            ElMessage.success(result.msg);\r\n            fenceInfo.visible = false;\r\n            getAllHArea();\r\n          }\r\n        }\r\n      });\r\n    }\r\n\r\n    // 删除 电子围栏\r\n    async function handleDelFence(row: IAreaItem) {\r\n      const { areaids } = row;\r\n      const params = {\r\n        act: \"mYfPMH51aE2FMOzxiFd1586422236651\",\r\n        LayerIdS: areaids,\r\n        SceneNum: mapIdRef.value,\r\n      };\r\n      const res: unknown = await stageApi.delHArea(params);\r\n      console.log(res);\r\n      const { result } = res as IResponseCommon<string>;\r\n      if (result.msg) {\r\n        ElMessage.success(result.msg);\r\n        getAllHArea();\r\n      }\r\n    }\r\n\r\n    async function getRules(id: string) {\r\n      ruleListInfo.loading = true;\r\n      const params = {\r\n        act: \"N71kyUJz3OiP2MOZ6Ea1586415957754\",\r\n        LayerIdS: id,\r\n        SceneNum: mapIdRef.value,\r\n      };\r\n      const res: unknown = await stageApi.getRule(params);\r\n      const { data } = res as IResponseCommon<IRuleItem[]>;\r\n      ruleListInfo.allData =\r\n        data.map((item) => ({ ...item, labelType: formateRuleType(item.ptype) })) || [];\r\n      ruleListInfo.tableData = getPagination(ruleListInfo.allData, ruleListInfo.curpage);\r\n      ruleListInfo.total = data.length || 0;\r\n      console.log(data);\r\n      ruleListInfo.loading = false;\r\n    }\r\n\r\n    function ruleCurrentChange(page: number) {\r\n      ruleListInfo.loading = true;\r\n      ruleListInfo.tableData = getPagination(ruleListInfo.allData, page);\r\n      ruleListInfo.loading = false;\r\n    }\r\n\r\n    let editPoints = \"\";\r\n    let layerId = \"\"; // 区域编号\r\n    let layerName = \"\"; // 区域名称\r\n    async function handleSeeRules(row: IAreaItem) {\r\n      ruleListInfo.visiable = true;\r\n      const { areaids, points, areaname } = row;\r\n      editPoints = points;\r\n      layerId = areaids;\r\n      layerName = areaname;\r\n      getRules(areaids);\r\n    }\r\n\r\n    function fenceCurrentChange(page: number) {\r\n      fenceListInfo.loading = true;\r\n      fenceListInfo.tableData = getPagination(fenceListInfo.allData, page);\r\n      fenceListInfo.loading = false;\r\n    }\r\n\r\n\r\n\r\n    function openRule(type = 0) {\r\n      ruleItemDetail.visiable = true;\r\n      ruleItemDetail.dialogType = type;\r\n      ruleItemDetail.form.name = layerName;\r\n      ruleItemDetail.form.memo = \"\";\r\n      ruleItemDetail.form.isLoop = false;\r\n      ruleItemDetail.form.limitedTime = \"\";\r\n      ruleItemDetail.form.startTime = \"\";\r\n      ruleItemDetail.form.endTime = \"\";\r\n      ruleItemDetail.form.permitType = \"\";\r\n      nextTick(() => {\r\n        // ! 无效\r\n        // (ruleFormRef.value as IELForm).resetFields();\r\n        (ruleFormRef.value as IELForm).clearValidate();\r\n      });\r\n    }\r\n    // 新增规则\r\n    function handleAddRule() {\r\n      openRule(0);\r\n      nextTick(() => {\r\n        console.log(ruleItemDetail.form);\r\n      });\r\n    }\r\n    let ruleId = 0; // 编辑\r\n    async function handleEditRule(row: IRuleItem) {\r\n      openRule(1);\r\n      const { stime, ptype, memo, id, etime, isloop, limtime } = row;\r\n      ruleId = id;\r\n\r\n      const dateTime = (loop: boolean, time1: string, time2: string) => {\r\n        if (loop) {\r\n          // 年月日\r\n          const ymd = dayjs(new Date()).format(\"YYYY-MM-DD\");\r\n          return {\r\n            startTime: new Date(`${ymd} ${time1}`),\r\n            endTime: new Date(`${ymd} ${time2}`),\r\n          };\r\n        } else {\r\n          return {\r\n            startTime: new Date(time1),\r\n            endTime: new Date(time2),\r\n          };\r\n        }\r\n      };\r\n\r\n      const { startTime, endTime } = await dateTime(isloop, stime, etime);\r\n\r\n      ruleItemDetail.form.memo = memo;\r\n      ruleItemDetail.form.isLoop = isloop;\r\n      ruleItemDetail.form.limitedTime = String(limtime);\r\n      ruleItemDetail.form.startTime = startTime;\r\n      ruleItemDetail.form.endTime = endTime;\r\n      ruleItemDetail.form.permitType = String(ptype);\r\n      console.log(ruleItemDetail.form);\r\n\r\n      // ? 有问题\r\n      // const obj = {\r\n      //   memo,\r\n      //   isLoop: isloop,\r\n      //   limitedTime: limtime,\r\n      //   startTime,\r\n      //   endTime,\r\n      //   permitType: String(ptype),\r\n      // };\r\n      // ruleItemDetail.form = Object.assign({}, ruleItemDetail.form, obj);\r\n    }\r\n\r\n    // 新增/编辑 规则 提交按钮点击事件\r\n    function handleSubmitRule() {\r\n      (ruleFormRef.value as IELForm).validate(async (valid: boolean) => {\r\n        if (valid) {\r\n          const {\r\n            memo,\r\n            isLoop,\r\n            limitedTime,\r\n            startTime,\r\n            endTime,\r\n            permitType,\r\n          } = ruleItemDetail.form;\r\n\r\n          const formateTime = (loop: boolean, time1: Date, time2: Date) => {\r\n            const formateStr = loop ? \"HH:mm:ss\" : \"YYYY-MM-DD HH:mm:ss\";\r\n\r\n            return {\r\n              StartTime: dayjs(time1).format(formateStr),\r\n              EndTime: dayjs(time2).format(formateStr),\r\n            };\r\n          };\r\n\r\n          const { StartTime, EndTime } = formateTime(\r\n            isLoop,\r\n            startTime as Date,\r\n            endTime as Date\r\n          );\r\n\r\n          const params = {\r\n            act: \"QRZNk8BItBSJTT0ikWT1586422170736\",\r\n            LayerIdS: layerId,\r\n            SceneNum: mapIdRef.value,\r\n            ID: ruleItemDetail.dialogType === 0 ? 0 : ruleId,\r\n            CheckSourceUnitName: layerName,\r\n            CheckSourceID: editPoints,\r\n            Memo: memo,\r\n            RuleLocateType: 2,\r\n            PermitType: permitType,\r\n            IsLoopEveryDay: isLoop,\r\n            OwnUserType: \"0,2\",\r\n            OwnParam: \"\",\r\n            LimitedTime: limitedTime,\r\n            StartTime,\r\n            EndTime,\r\n          };\r\n          const res: unknown = await stageApi.saveRule(params);\r\n          const { result } = res as IResponseCommon<string>;\r\n          if (result.msg) {\r\n            ElMessage.success(result.msg);\r\n            ruleItemDetail.visiable = false;\r\n            getRules(layerId);\r\n          }\r\n          console.log(params);\r\n        }\r\n      });\r\n    }\r\n\r\n    // 删除某场景某个自定义区域中的某条规则\r\n    async function handleDelRule(row: IRuleItem) {\r\n      const { id } = row;\r\n      const params = {\r\n        act: \"nBpfTKDXs2nDV7y4dT41586415983980\",\r\n        LayerIdS: layerId,\r\n        SceneNum: mapIdRef.value,\r\n        ID: id,\r\n      };\r\n      const res: unknown = await stageApi.delRule(params);\r\n      const { result } = res as IResponseCommon<string>;\r\n      if (result.msg) {\r\n        ElMessage.success(result.msg);\r\n        getRules(layerId);\r\n      }\r\n    }\r\n\r\n    const formContentComponentRef = ref();\r\n\r\n    /**\r\n     * 查看基站/摄像头/标签详情\r\n     */\r\n    function showEquipDetails(data: any, type: string) {\r\n      detailsForm.editable = false;\r\n      visibleObj.detailsForm = false;\r\n      visibleObj.detailsForm = true;\r\n      detailsForm.formData = data;\r\n      (formContentComponentRef.value as IELForm).resetFields();\r\n      contextmenuTypeRef.value = type;\r\n    }\r\n\r\n    function showDetails(type: string = contextmenuTypeRef.value) {\r\n      detailsForm.editable = false;\r\n      visibleObj.detailsForm = false;\r\n      if (!detailsForm.isAdd) {\r\n        const { attrs } = currentContextmenuRef.value as Shape;\r\n        detailsForm.x = attrs.x;\r\n        detailsForm.y = attrs.y;\r\n      }\r\n\r\n      if (type === TYPES.basestation) {\r\n        // 基站\r\n        // todo  发起api请求 显示信息 或者本地读取\r\n      } else if (type === TYPES.labelList) {\r\n        // 标签\r\n        // ? 感觉可以本地读取\r\n      } else if (type === TYPES.person) {\r\n        // 人员\r\n      } else if (type === TYPES.camera) {\r\n        // 摄像头\r\n      }\r\n\r\n      visibleObj.detailsForm = true;\r\n      console.log(\"formContentComponentRef.value\", formContentComponentRef.value);\r\n\r\n      (formContentComponentRef.value as IELForm).resetFields();\r\n    }\r\n    // 右键菜单\r\n    // 右键点击 编辑\r\n    function detailsEdit(type: string = contextmenuTypeRef.value) {\r\n      showDetails(type);\r\n      detailsForm.editable = true;\r\n\r\n      const { attrs } = currentContextmenuRef.value as Shape;\r\n\r\n      detailsForm.formData = attrs;\r\n\r\n      detailsForm.x = attrs.x;\r\n      detailsForm.y = attrs.y;\r\n    }\r\n    /**\r\n     * @description: 调取实时监控 lfq\r\n     * @param {*} id\r\n     * @return {*}\r\n     */\r\n    function popMonitorVideo(id: string | number) {\r\n      id = 404;\r\n      cameraApi\r\n        .getCameraData(id)\r\n        .then((res) => {\r\n          if (res) {\r\n            const active = true;\r\n            monitorListInfo.newMonitorList.push({\r\n              camera: res,\r\n              active: active,\r\n            });\r\n            monitorListInfo.monitorListFlag = true;\r\n          } else {\r\n            ElMessage.error(\"调取监控失败\");\r\n          }\r\n        })\r\n        .catch(() => {\r\n          ElMessage.error(\"调取监控失败\");\r\n        });\r\n    }\r\n\r\n    /**\r\n     * @description: 调取历史监控 lfq\r\n     * @param {*} id\r\n     * @return {*}\r\n     */\r\n    function popHistoryMonitorVideo(id: string | number) {\r\n      id = 404;\r\n      cameraApi\r\n        .getCameraData(id)\r\n        .then((res) => {\r\n          if (res) {\r\n            const active = true;\r\n            monitorListInfo.newHistoryMonitorList.push({\r\n              camera: res,\r\n              active: active,\r\n            });\r\n            monitorListInfo.historyMonitorListFlag = true;\r\n          } else {\r\n            ElMessage.error(\"调取历史监控失败\");\r\n          }\r\n        })\r\n        .catch(() => {\r\n          ElMessage.error(\"调取历史监控失败\");\r\n        });\r\n    }\r\n\r\n    /**\r\n     * @description: 查看实时视频 lfq\r\n     * @param {*}\r\n     * @return {*}\r\n     */\r\n    function seeNowVideo() {\r\n      popMonitorVideo(activeTarget.id);\r\n      visibleObj.monitorListFlag = true;\r\n      monitorListInfo.monitorTitle = \"查看实时视频\";\r\n    }\r\n\r\n    // 关闭所有视频\r\n    function handleCloseAllVideo() {\r\n      monitorListInfo.newMonitorList.splice(0, monitorListInfo.newMonitorList.length);\r\n      visibleObj.monitorListFlag = false;\r\n      clearShadowColor();\r\n    }\r\n\r\n    // 关闭所有历史回放视频\r\n    function handleCloseAllHistoryVideo() {\r\n      monitorListInfo.newHistoryMonitorList.splice(\r\n        0,\r\n        monitorListInfo.newHistoryMonitorList.length\r\n      );\r\n      visibleObj.historyMonitorListFlag = false;\r\n      clearShadowColor();\r\n    }\r\n\r\n    /**\r\n     * @description: 查看历史视频 lfq\r\n     * @param {*}\r\n     * @return {*}\r\n     */\r\n    function seeHistoryVideo() {\r\n      popHistoryMonitorVideo(activeTarget.id);\r\n      visibleObj.historyMonitorListFlag = true;\r\n      monitorListInfo.monitorTitle = \"查看历史视频\";\r\n    }\r\n\r\n    /**\r\n     * @description: 监控列表 lfq\r\n     * @param {*} id\r\n     * @return {*}\r\n     */\r\n    function watchMonitorListPanelState(id: string | number) {\r\n      monitorListInfo.newMonitorList.forEach((value: any) => {\r\n        if (id === value.camera.id) {\r\n          value.active = false;\r\n        }\r\n      });\r\n    }\r\n\r\n    /**\r\n     * @description: 历史监控列表 lfq\r\n     * @param {*} id\r\n     * @return {*}\r\n     */\r\n    function watchHistoryMonitorListPanelState(id: string | number) {\r\n      monitorListInfo.newHistoryMonitorList.forEach((value: any) => {\r\n        if (id === value.camera.id) {\r\n          value.active = false;\r\n        }\r\n      });\r\n    }\r\n    const trackPlaybackFormRef = ref(); // 轨迹回放的选择时间 form\r\n    function handleClickTrackPlayback() {\r\n      trackPlayback.show = true;\r\n    }\r\n    function handleCloseContextmenu() {\r\n      clearShadowColor();\r\n      (trackPlaybackFormRef.value as IELForm).resetFields();\r\n    }\r\n\r\n    function handleClickSeeTrackPlayback() {\r\n      //\r\n    }\r\n\r\n    const equipImgRef = ref<null | HTMLElement>(null);\r\n\r\n    /**\r\n     * @description: 弹出设备,将layer中的节点销毁，html节点展示\r\n     * @param {*}\r\n     * @return {*}\r\n     */\r\n    function popEquipment() {\r\n      (equipmentInfo.checkedNode as Shape).destroy();\r\n      status.equipImgFollow = true;\r\n    }\r\n\r\n    /**\r\n     * @description: 场景中新添加设备\r\n     * @param {object} attrs\r\n     * @return {*}\r\n     */\r\n    function addEquipToScene(attrs: { x: number; y: number; type: string | number }) {\r\n      const { x, y, type } = attrs;\r\n      const images = {\r\n        [TYPES.basestation]: basestationImageObjRef.value,\r\n        [TYPES.camera]: cameraImageObjRef.value[defaultCameraType],\r\n      };\r\n      const imgObj = images[type];\r\n\r\n      const node = new Konva.Image({\r\n        x: x - equipIconConfig.width / 2,\r\n        y: y - equipIconConfig.height,\r\n        width: equipIconConfig.width,\r\n        height: equipIconConfig.height,\r\n        name: ADD_EQUIP,\r\n        image: imgObj as HTMLImageElement,\r\n      });\r\n      node.on(\"click\", popEquipment);\r\n      node.shadowColor(\"blue\");\r\n      node.shadowBlur(20);\r\n\r\n      allGroup[`${contextmenuTypeRef.value}Group`].add(node);\r\n      batchDraw();\r\n      return node;\r\n    }\r\n\r\n    function putEquipment(e: KonvaEventObject<MouseEvent>) {\r\n      const ev = e.evt;\r\n      if (!status.equipImgFollow) return;\r\n      const { x, y } = canvasToStage({\r\n        x: ev.clientX,\r\n        y: ev.clientY,\r\n        ...state,\r\n      });\r\n\r\n      // todo x y 最大值判断\r\n      // ? 好像不用做判断 提交有表单验证：里面做了 < 0 的验证 或者可以在添加到stage中做\r\n      detailsForm.x = x;\r\n      detailsForm.y = y;\r\n\r\n      equipmentInfo.checkedNode = addEquipToScene({\r\n        type: contextmenuTypeRef.value,\r\n        x,\r\n        y,\r\n      });\r\n      status.equipImgFollow = false;\r\n\r\n      batchDraw();\r\n\r\n      const dom = equipImgRef.value as HTMLElement;\r\n      dom?.children?.[0] && dom.removeChild(dom.children[0]);\r\n    }\r\n\r\n    /**\r\n     * @description: 设备图片跟随\r\n     * @param {*}\r\n     * @return {*}\r\n     */\r\n    function equipImgFollow(e: KonvaEventObject<MouseEvent>) {\r\n      const ev = e.evt;\r\n      if (status.equipImgFollow === false) return;\r\n      const { x, y } = canvasToStage({\r\n        x: ev.clientX,\r\n        y: ev.clientY,\r\n        ...state,\r\n      });\r\n\r\n      detailsForm.x = x;\r\n      detailsForm.y = y;\r\n\r\n      const equipImgDom = equipImgRef.value as HTMLElement;\r\n      const { offsetWidth: width, offsetHeight: height } = equipImgDom;\r\n      equipImgDom.style.left = ev.clientX - width / 2 + \"px\";\r\n      equipImgDom.style.top = ev.clientY - height - 2 + \"px\";\r\n    }\r\n    /**\r\n     * @description: 添加设备时，先判断是否正在添加设备，展示信息采集框和html的图片元素，并给stage绑定事件，在取消添加或者添加成功后将事件解除\r\n     * @param {string}  type 根据类型来判断是基站还是摄像头\r\n     * @return {*}\r\n     */\r\n    function addEquip(type: string) {\r\n      if (status.equipImgFollow || equipmentInfo.checkedNode) {\r\n        ElMessage(\"正在添加设备中，请勿重复操作\");\r\n        return;\r\n      }\r\n      drawerInfo.showList = false;\r\n\r\n      status.equipImgFollow = true;\r\n      contextmenuTypeRef.value = type;\r\n\r\n      const imageEle =\r\n        type === TYPES.basestation\r\n          ? basestationImageObjRef.value\r\n          : cameraImageObjRef.value[defaultCameraType];\r\n\r\n      (equipImgRef.value as HTMLElement).appendChild(imageEle as HTMLImageElement);\r\n\r\n      detailsForm.isAdd = true;\r\n      showDetails();\r\n      detailsForm.editable = true;\r\n\r\n      (stage.value as Stage).on(\"mousemove\", equipImgFollow);\r\n\r\n      (stage.value as Stage).on(\"click\", putEquipment);\r\n    }\r\n\r\n    /**\r\n     * @description: 摄像头方向变更\r\n     * @param {*} direction\r\n     * @return {*}\r\n     */\r\n    function changeDirection(direction: string | number) {\r\n      // 判断是否是新增\r\n      if (detailsForm.isAdd) {\r\n        // 判断是否已经添加到stage中\r\n        const node = allGroup[`${contextmenuTypeRef.value}Group`].findOne(\r\n          \".\" + ADD_EQUIP\r\n        );\r\n        if (node) {\r\n          (node as any).image(cameraImageObjRef.value[direction]);\r\n        } else {\r\n          const dom = equipImgRef.value as HTMLElement;\r\n          if (dom && dom.children[0]) {\r\n            dom.replaceChild(cameraImageObjRef.value[direction], dom.children[0]);\r\n          }\r\n        }\r\n      } else {\r\n        // 编辑\r\n        (currentContextmenuRef.value as Image).image(cameraImageObjRef.value[direction]);\r\n        detailsForm.formData.direction = direction;\r\n      }\r\n      batchDraw();\r\n    }\r\n    function updateEquipPos(\r\n      x: undefined | number | string,\r\n      y?: number | string | undefined\r\n    ) {\r\n      let node = null;\r\n      if (detailsForm.isAdd) {\r\n        node = (stage.value as Stage).findOne(\".\" + ADD_EQUIP);\r\n      } else {\r\n        node = currentContextmenuRef.value as Shape;\r\n      }\r\n      if (x !== undefined) {\r\n        node.to({\r\n          x: x as number,\r\n        });\r\n      }\r\n\r\n      if (y !== undefined) {\r\n        node.to({\r\n          y: y as number,\r\n        });\r\n      }\r\n    }\r\n    /**\r\n     * @description: 详情表中输入x、y值更新\r\n     * @param {number} x\r\n     * @return {*}\r\n     */\r\n    function updateX(x: string | number) {\r\n      updateEquipPos(x);\r\n    }\r\n    function updateY(y: string | number) {\r\n      updateEquipPos(undefined, y);\r\n    }\r\n    // 隐藏基站采集面板\r\n    function cancelForm() {\r\n      status.equipImgFollow = false;\r\n      equipmentInfo.checkedNode && equipmentInfo.checkedNode.destroy();\r\n      equipmentInfo.checkedNode = null;\r\n      hideDetails();\r\n\r\n      const dom = equipImgRef.value as HTMLElement;\r\n      dom?.children?.[0] && dom.removeChild(dom.children[0]);\r\n      // stage 中移除 shape\r\n      if (detailsForm.isAdd) {\r\n        const node = (stage.value as Stage).findOne(\".\" + ADD_EQUIP);\r\n        node && node.destroy();\r\n        batchDraw();\r\n        detailsForm.isAdd = false;\r\n      } else {\r\n        // 编辑 要恢复原位置\r\n        editRestore();\r\n      }\r\n      detailsForm.formData = null;\r\n      // img 位置调整\r\n      if (dom) {\r\n        dom.style.left = \"-9999px\";\r\n        dom.style.top = \"-9999px\";\r\n      }\r\n    }\r\n\r\n    // ws 相关\r\n    // 存储 ws 传输过来的 数据\r\n    let wsData: any[] = [];\r\n    let locationWs: Nullable<WebSocket> = null;\r\n    function initLocationWs() {\r\n      // const url = \"WS://192.168.1.248:38559/location\";\r\n      const url = wsUrl.location;\r\n      locationWs = new WebSocket(url);\r\n      locationWs.onmessage = async (event) => {\r\n        const data = JSON.parse(event.data);\r\n        // console.log(data);\r\n\r\n        if (data.ActionCode === EpauletActionCode.HTagInit) {\r\n          person.all =\r\n            data.Data.map((item: any) => {\r\n              const { x, y } = strToPos(item.LocationPoint);\r\n              return {\r\n                ...item,\r\n                x,\r\n                y,\r\n                id: item.TagId,\r\n                name: item.ObjData.BindObjName,\r\n              };\r\n            }) || [];\r\n          // console.log(\"person.all\", person.all);\r\n\r\n          getCurrentMapPerson(mapIdRef.value);\r\n        }\r\n\r\n        if (data.ActionCode === EpauletActionCode.HTagOnline) {\r\n          const { x, y } = strToPos(data.Data.LocationPoint);\r\n          const posItem = {\r\n            ...data.Data,\r\n            x,\r\n            y,\r\n          };\r\n          person.all.push(posItem);\r\n          if (mapIdRef.value === data.Data.LocationSceneId) {\r\n            person.currentMap.push(posItem);\r\n            initPerson(posItem);\r\n          }\r\n          ElMessage.info(`${posItem.ObjData.BindObjName}上线`);\r\n        }\r\n\r\n        if (\r\n          data.ActionCode === EpauletActionCode.HTagOffline ||\r\n          data.ActionCode === EpauletActionCode.HTagLogOff\r\n        ) {\r\n          const index = person.all.findIndex((item) => item.id === data.Data.TagId);\r\n          if (index > -1) {\r\n            person.all.splice(index, 1);\r\n            if (data.Data.mapId === mapIdRef.value) {\r\n              const currntMapIndex = person.currentMap.findIndex(\r\n                (item) => item.id === data.Data.TagId\r\n              );\r\n              if (currntMapIndex > -1) {\r\n                person.currentMap.splice(currntMapIndex, 1);\r\n                const node = cachePersonObj[data.Data.TagId];\r\n                node && node.destroy();\r\n              }\r\n            }\r\n            ElMessage.info(`${data.Data.ObjData.BindObjName}下线`);\r\n          }\r\n        }\r\n\r\n        if (data.ActionCode === EpauletActionCode.HTagMove) {\r\n          // console.log(data.Data);\r\n\r\n          const { x, y } = strToPos(data.Data.LocationPoint);\r\n          const posObj = {\r\n            id: data.Data.TagId,\r\n            x,\r\n            y,\r\n          };\r\n          const fn = () => {\r\n            const index = person.all.findIndex((item) => item.id === posObj.id);\r\n            if (index > -1) {\r\n              Object.assign(person.all[index], posObj);\r\n            }\r\n          };\r\n          fn();\r\n          if (data.Data.LocationSceneId === mapIdRef.value) {\r\n            wsData.push(posObj);\r\n          }\r\n        }\r\n\r\n        if (data.ActionCode === EpauletActionCode.HLayerGroupStatistics) {\r\n          // data.Data.forEach((item:any,index:number)=>{\r\n          //   cacheBubbleObj[item.LayerIdS][index].text(String(item.TagDataList.length));\r\n          //   // todo 人员列表变动\r\n          // })\r\n          batchDraw();\r\n        }\r\n      };\r\n\r\n      // 定时器\r\n      const time = 200;\r\n      const duration = time / 1000;\r\n      const timer = window.setInterval(() => {\r\n        console.log(\"length=>\", wsData.length);\r\n\r\n        wsData.forEach((item) => {\r\n          const index = person.currentMap.findIndex((pos) => pos.id === item.id);\r\n          if (index > -1) {\r\n            const { x, y } = person.currentMap[index];\r\n            if (!(x === item.x && y === item.y)) {\r\n              Object.assign(person.currentMap[index], item);\r\n              const node = cachePersonObj[item.id];\r\n              node &&\r\n                node.to({\r\n                  x: item.x,\r\n                  y: item.y,\r\n                  duration: duration,\r\n                });\r\n              batchDraw();\r\n            }\r\n          }\r\n        });\r\n        wsData = [];\r\n      }, time);\r\n\r\n      locationWs.onclose = () => {\r\n        window.clearInterval(timer);\r\n      };\r\n    }\r\n    let alarmWs: Nullable<WebSocket> = null;\r\n    function initAlarmWs() {\r\n      const url = wsUrl.alarm;\r\n      alarmWs = new WebSocket(url);\r\n      alarmWs.onmessage = async (event) => {\r\n        const data = JSON.parse(event.data);\r\n        console.log(data);\r\n      };\r\n    }\r\n\r\n    function showWarningList() {\r\n      warningWidth.value =\r\n        warningWidth.value !== warningListWidth ? warningListWidth : \"0\";\r\n    }\r\n\r\n    function handleDetailConfirm(formData: any) {\r\n      console.log(\"formData\", formData);\r\n      // todo 新增 编辑 api\r\n    }\r\n\r\n    const alarmType = ref<ISelectOption[]>([]);\r\n    const alarmForm = reactive({\r\n      type: \"\",\r\n    });\r\n\r\n    async function getAllAlarmType() {\r\n      const params = {\r\n        act: \"E83yVQOUUMYKt6jRYRI1586428010174\",\r\n      };\r\n      const res: unknown = await alarmApi.getAllAlarmType(params);\r\n\r\n      const { data } = res as IResponseCommon<IAlarmType[]>;\r\n      alarmType.value = data.map((item) => ({\r\n        label: item.alarmtype,\r\n        value: item.alarmtype,\r\n      })) as ISelectOption[];\r\n    }\r\n\r\n    /**\r\n     * @description: 电子围栏 点击列中 切换 显示\r\n     * @param {*} show 切换后的值\r\n     * @param {*} areaids 区域id\r\n     * @return {*}\r\n     */\r\n    function changeAreaVisible(show: boolean, areaids: string) {\r\n      // 找到当前视图中的 绘制区域\r\n      const group = cacheAreaObj[areaids];\r\n      group.visible(show);\r\n      // 测试了其他的是指向类型 不用手动更新\r\n      batchDraw();\r\n      ElMessage.success(\"操作成功\");\r\n    }\r\n    // 显示 | 隐藏 当前地图电子围栏\r\n    function toggleAllFenceVisible(show: boolean) {\r\n      fenceListInfo.allData.forEach((item) => {\r\n        item.show = show;\r\n        cacheAreaObj[item.areaids].visible(show);\r\n      });\r\n      batchDraw();\r\n      ElMessage.success(\"操作成功\");\r\n    }\r\n\r\n    const controlButtonList = reactive([\r\n      {\r\n        label: \"基站\",\r\n        show: false,\r\n        code: \"basestation\",\r\n      },\r\n      {\r\n        label: \"摄像头\",\r\n        show: true,\r\n        code: \"camera\",\r\n      },\r\n      {\r\n        label: \"地图\",\r\n        show: visibleObj.map,\r\n        code: \"map\",\r\n      },\r\n      {\r\n        label: \"导航栏\",\r\n        show: visibleObj.nav,\r\n        code: \"nav\",\r\n      },\r\n    ]);\r\n\r\n    function controlButtonChange(newVal: boolean, code: string) {\r\n      //\r\n      if (code === \"nav\") {\r\n        visibleObj.nav = newVal;\r\n      }\r\n\r\n      if (code === \"camera\") {\r\n        Object.keys(cacheCameraObj).forEach((key) => {\r\n          cacheCameraObj[key].visible(newVal);\r\n          batchDraw();\r\n        });\r\n      }\r\n\r\n      if (code === \"map\") {\r\n        visibleObj.map = newVal;\r\n      }\r\n    }\r\n\r\n    function closeMapChoosen() {\r\n      visibleObj.map = false;\r\n      const index = controlButtonList.findIndex((item) => item.code === \"map\");\r\n      controlButtonList[index].show = false;\r\n    }\r\n\r\n    function changeMap(mapId: string) {\r\n      mapIdRef.value = mapId;\r\n      mapNameRef.value = mapObj[mapId].sname;\r\n      // 1. 背景图更新\r\n      updataBgImage(mapId);\r\n      // 2. 所有绘制的 shape 销毁，重新绘制新的 getAllLayer() 函数\r\n      // 2.1 摄像头\r\n      // 先销毁之前图层的\r\n      allGroup.cameraGroup.destroyChildren();\r\n      for (const key in cacheCameraObj) {\r\n        // cacheCameraObj[key].destroy();\r\n        delete cacheCameraObj[key];\r\n      }\r\n      getCurrentMapCamera(mapId);\r\n      // 2.2 基站\r\n      allGroup.basestationGroup.destroyChildren();\r\n      for (const key in cacheBasestationObj) {\r\n        delete cacheCameraObj[key];\r\n      }\r\n      // 2.3 气泡\r\n      allGroup.locateBubbleGroup.destroyChildren();\r\n      for (const key in cacheBubbleObj) {\r\n        delete cacheBubbleObj[key];\r\n      }\r\n      getCurrentMapBubble(mapId);\r\n      // 2.4 电子围栏\r\n      allGroup.fenceGroup.destroyChildren();\r\n      for (const key in cacheAreaObj) {\r\n        delete cacheAreaObj[key];\r\n      }\r\n      getCurrentMapArea(mapId);\r\n      // 2.5 人员\r\n      allGroup.personGroup.destroyChildren();\r\n      for (const key in cachePersonObj) {\r\n        delete cachePersonObj[key];\r\n      }\r\n      getCurrentMapPerson(mapId);\r\n      // 2.6 操作图层\r\n      operationLayer.destroyChildren();\r\n    }\r\n\r\n    // 左侧边栏\r\n    const leftPannelSearch = shallowRef<string>(\"\");\r\n    const searchDevice = computed(() => {\r\n      return deviceAll.filter((item) =>\r\n        item.dtype.includes(\"基站\" || item.dtypecode === \"Camera_IP\")\r\n      );\r\n    });\r\n    const userSearchRes = ref<any[]>([]);\r\n    function querySearch(name: string) {\r\n      if (name !== \"\") {\r\n        userSearchRes.value = searchDevice.value.filter((item) =>\r\n          item.dname.includes(name)\r\n        );\r\n      } else {\r\n        userSearchRes.value = cloneDeep(searchDevice.value);\r\n      }\r\n    }\r\n    async function searchChange(e: string) {\r\n      //\r\n      console.log(e);\r\n      if (!e) return;\r\n      const index = searchDevice.value.findIndex((item) => e === item.dids);\r\n      // 防止用户下线的情况\r\n      if (index > -1) {\r\n        const mapNum = searchDevice.value[index].snum;\r\n        if (mapNum === mapIdRef.value) {\r\n          //\r\n          const params = {\r\n            act: \"fCGtP4nXdRZjr6TYeiN1611196242913\",\r\n            DeviceIdS: e,\r\n          };\r\n          const res: unknown = await commonApi.getCommonApi(params);\r\n          const { data } = res as IResponseCommon<any>;\r\n          console.log(data);\r\n          // data[0][0].DeviceObjProperty\r\n        } else {\r\n          ElMessageBox.confirm(\"选中的目标不在当前地图，是否跳转？\", \"提示\", {\r\n            confirmButtonText: \"确定\",\r\n            cancelButtonText: \"取消\",\r\n            type: \"info\",\r\n          })\r\n            .then(() => {\r\n              changeMap(mapNum);\r\n            })\r\n            .catch(() => {\r\n              ElMessage.info(\"已取消跳转\");\r\n              leftPannelSearch.value = \"\";\r\n            });\r\n        }\r\n      }\r\n    }\r\n\r\n    // 最后\r\n    // window resize\r\n    function handleWindowResize() {\r\n      if (!cacheBgImage) return;\r\n      state.scale = Number((window.innerWidth / cacheBgImage.width()).toFixed(2));\r\n      state.minScale = state.scale;\r\n      state.sx = 0;\r\n      state.sy = 0;\r\n      const attrs = {\r\n        x: state.sx,\r\n        y: state.sy,\r\n        width: window.innerWidth,\r\n        height: window.innerHeight - titleHeight,\r\n        scale: {\r\n          x: state.scale,\r\n          y: state.scale,\r\n        },\r\n      };\r\n      (stage.value as Stage).setAttrs(attrs);\r\n      batchDraw();\r\n    }\r\n\r\n    const debounceRem = debounce(computedRem, 100);\r\n    const debounceResize = debounce(handleWindowResize, 100);\r\n\r\n    onMounted(() => {\r\n      getAllMap();\r\n      getAllAlarmType();\r\n      computedRem();\r\n      window.addEventListener(\"resize\", debounceRem);\r\n      window.addEventListener(\"resize\", debounceResize);\r\n    });\r\n\r\n    onUnmounted(() => {\r\n      clickTimerRef.value && clearTimeout(clickTimerRef.value);\r\n      locationWs?.close();\r\n      alarmWs?.close();\r\n      window.removeEventListener(\"resize\", debounceRem);\r\n      document.documentElement.style.fontSize = \"\";\r\n      window.removeEventListener(\"resize\", debounceResize);\r\n    });\r\n\r\n    return {\r\n      warningWidth,\r\n      showWarningList,\r\n      mapIdRef,\r\n      mapNameRef,\r\n      mapListRef,\r\n      showDetails,\r\n      formContentComponentRef,\r\n      mainNavRef,\r\n      visibleObj,\r\n      status,\r\n      drawerInfo,\r\n      // drawerInfo: toRefs(drawerInfo),\r\n      fenceInfo,\r\n      fenceListInfo,\r\n      ruleListInfo,\r\n      ruleFormRef,\r\n\r\n      ruleItemDetail,\r\n      types: TYPES,\r\n      navClick,\r\n      resetNavIndex,\r\n      equipSwitchClick,\r\n      fenceInfoFormRef,\r\n      handleAddFence,\r\n      handleFenceDraw,\r\n      handleEditFence,\r\n      handleSubmitFence,\r\n      handleDelFence,\r\n      fenceCurrentChange,\r\n      drawFenceInfo,\r\n      handleRevokeFence,\r\n      handleRedrawFence,\r\n      handleCancelDrawFence,\r\n      handleFinishDrawFence,\r\n      contextmenuTypeRef,\r\n      contxtmenuPosition,\r\n      contextmenuList,\r\n      detailsForm,\r\n      trackPlayback,\r\n      hideDetails,\r\n      equipImgRef,\r\n      addEquip,\r\n      updateX,\r\n      updateY,\r\n      changeDirection,\r\n      cancelForm,\r\n      handleDetailConfirm,\r\n      detailsEdit,\r\n      handleClickTrackPlayback,\r\n      handleCloseContextmenu,\r\n      handleClickSeeTrackPlayback,\r\n      seeNowVideo,\r\n      seeHistoryVideo,\r\n      handleCloseAllVideo,\r\n      handleCloseAllHistoryVideo,\r\n      popMonitorVideo,\r\n      popHistoryMonitorVideo,\r\n      watchMonitorListPanelState,\r\n      watchHistoryMonitorListPanelState,\r\n      monitorListInfo,\r\n      showEquipDetails,\r\n      alarmType,\r\n      alarmForm,\r\n      transferProps,\r\n      transferData,\r\n      handleSeeRules,\r\n      handleAddRule,\r\n      handleEditRule,\r\n      handleSubmitRule,\r\n      handleDelRule,\r\n      areaRulesOption,\r\n      ruleCurrentChange,\r\n      ruleDisabledDate,\r\n      timerPickerChange,\r\n      ruleItemDetailRule,\r\n      changeAreaVisible,\r\n      toggleAllFenceVisible,\r\n      layerPerson,\r\n      layerPosition,\r\n      controlButtonList,\r\n      controlButtonChange,\r\n      closeMapChoosen,\r\n      changeMap,\r\n      leftPannelSearch,\r\n      querySearch,\r\n      searchChange,\r\n      searchDevice,\r\n      person,\r\n      userSearchRes,\r\n      alarmInfo,\r\n      alarmListInfo,\r\n      formatTime,\r\n      alarmCurrentChange,\r\n      getAlarmListByCondition,\r\n      handleDetailAlarm\r\n    };\r\n  },\r\n});\r\n</script>\r\n\r\n<style lang=\"scss\" src=\"./style/index.scss\" scoped></style>\r\n","/*\r\n * @Description:\r\n * @Author: huxianc\r\n * @Date: 2021-01-20 10:39:06\r\n * @LastEditors: huxianc\r\n * @LastEditTime: 2021-01-25 15:37:43\r\n */\r\n\r\nimport http from \"@/utils/http3\";\r\n\r\nexport default {\r\n  //  获取所有场景数据\r\n  getAllScene(data: any) {\r\n    return http({\r\n      url: \"/tbs/getscene\",\r\n      method: \"post\",\r\n      data\r\n    });\r\n  },\r\n  //  获取所有设备数据\r\n  getAllDevice(data: any) {\r\n    return http({\r\n      url: \"/tbs/getdevice\",\r\n      method: \"post\",\r\n      data\r\n    });\r\n  },\r\n  // 获取所有图层数据\r\n  getAllLayer(data: any) {\r\n    return http({\r\n      url: \"/tbs/getlayer\",\r\n      method: \"post\",\r\n      data\r\n    });\r\n  },\r\n  // 获取所有建筑数据\r\n  getAllBuild(data: any) {\r\n    return http({\r\n      url: \"/tbs/getbuild\",\r\n      method: \"post\",\r\n      data\r\n    });\r\n  },\r\n  // 获取所有自定义数据 - 电子围栏\r\n  getAllHArea(data: any) {\r\n    return http({\r\n      url: \"/tbs/getharea\",\r\n      method: \"post\",\r\n      data\r\n    });\r\n  },\r\n  // 新增 | 修改自定义数据 - 电子围栏\r\n  saveHArea(data: any) {\r\n    return http({\r\n      url: \"/tbs/saveharea\",\r\n      method: \"post\",\r\n      data\r\n    });\r\n  },\r\n  // 获取某自定义区域设置过的设备集合\r\n  getOnehAreaSetDeivce(data: any) {\r\n    return http({\r\n      url: \"/tbs/getonehareasetdeivce\",\r\n      method: \"post\",\r\n      data\r\n    });\r\n  },\r\n  // 删除某自定义区域\r\n  delHArea(data: any) {\r\n    return http({\r\n      url: \"/tbs/delharea\",\r\n      method: \"post\",\r\n      data\r\n    });\r\n  },\r\n  // 新增或修改某场景某个自定义区域中的某条规则\r\n  saveRule(data: any) {\r\n    return http({\r\n      url: \"/tbs/saverule\",\r\n      method: \"post\",\r\n      data\r\n    });\r\n  },\r\n  // 获取某场景某个自定义区域设置过的所有规则\r\n  getRule(data: any) {\r\n    return http({\r\n      url: \"/tbs/getrule\",\r\n      method: \"post\",\r\n      data\r\n    });\r\n  },\r\n  // 删除某场景某个自定义区域中的某条规则\r\n  delRule(data: any) {\r\n    return http({\r\n      url: \"/tbs/delrule\",\r\n      method: \"post\",\r\n      data\r\n    });\r\n  }\r\n};\r\n","/*\r\n * @Description:\r\n * @Author:\r\n * @Date: 2020-11-23 16:12:28\r\n * @LastEditors: liufuqiang\r\n * @LastEditTime: 2021-01-21 17:23:53\r\n */\r\nimport http from \"@/utils/http3\";\r\n\r\nexport default {\r\n  // 增加摄像头\r\n  addCamera(data: any) {\r\n    return http({\r\n      url: \"/equip/camera/\",\r\n      method: \"post\",\r\n      data\r\n    });\r\n  },\r\n  // 删除摄像头\r\n  delCamera(id: string | number) {\r\n    return http({\r\n      url: `/equip/camera/${id}/`,\r\n      method: \"delete\"\r\n    });\r\n  },\r\n  // 获取摄像头详情\r\n  getCameraData(data: any) {\r\n    return http({\r\n      url: `/rcaec/bigwa`,\r\n      method: \"post\",\r\n      data\r\n    });\r\n  },\r\n  // 筛选摄像头\r\n  getCameraList(params: any) {\r\n    return http({\r\n      url: `/equip/camera`,\r\n      params\r\n    });\r\n  }\r\n};\r\n","/*\r\n * @Description:\r\n * @Author: huxianc\r\n * @Date: 2021-01-22 14:08:38\r\n * @LastEditors: huxianc\r\n * @LastEditTime: 2021-01-27 09:45:02\r\n */\r\n\r\nimport http from \"@/utils/http3\";\r\n\r\nexport default {\r\n  // 获取所有报警信息\r\n  getAllAlamList(data: any) {\r\n    return http({\r\n      url: \"/rcaec/bigwa\",\r\n      method: \"post\",\r\n      data\r\n    });\r\n  },\r\n  //  获取所有报警类型\r\n  getAllAlarmType(data: any) {\r\n    return http({\r\n      url: \"/tbs/getalarmtype\",\r\n      method: \"post\",\r\n      data\r\n    });\r\n  },\r\n  // 单个报警处理\r\n  dealAlarmItem(data: any) {\r\n    return http({\r\n      url: \"/alarm/deal\",\r\n      method: \"post\",\r\n      data\r\n    });\r\n  },\r\n  // 批量处理报警\r\n  dealAlarms(data: any) {\r\n    return http({\r\n      url: \"/alarm/dealall\",\r\n      method: \"post\",\r\n      data\r\n    });\r\n  }\r\n};\r\n","/*\r\n * @Description:\r\n * @Author: huxianc\r\n * @Date: 2021-01-28 17:33:46\r\n * @LastEditors: huxianc\r\n * @LastEditTime: 2021-01-28 17:36:41\r\n */\r\n\r\nimport http from \"@/utils/http3\";\r\n\r\nexport default {\r\n  // 获取所有报警信息\r\n  getCommonApi(data: any) {\r\n    return http({\r\n      url: \"/rcaec/bigwa\",\r\n      method: \"post\",\r\n      data\r\n    });\r\n  }\r\n};\r\n","/*\r\n * @Description:定义一些常见的变量\r\n * @Author: huxianc\r\n * @Date: 2020-11-20 16:09:33\r\n * @LastEditors: liufuqiang\r\n * @LastEditTime: 2021-01-28 17:58:08\r\n */\r\nimport { INavBasic, INavObj } from \"../types/mainNav\";\r\n// all type\r\nexport const TYPES = {\r\n  basestation: \"basestation\",\r\n  labelList: \"labelList\",\r\n  person: \"person\",\r\n  camera: \"camera\"\r\n};\r\n\r\nconst List = \"List\";\r\n//  导航信息\r\nexport const NAV_INFO: INavBasic = {\r\n  [TYPES.camera]: {\r\n    name: \"摄像头\",\r\n    code: [TYPES.camera] + List,\r\n    title: \"摄像头列表\"\r\n  },\r\n  [TYPES.basestation]: {\r\n    name: \"设备管理\",\r\n    code: [TYPES.basestation] + List,\r\n    title: \"基站列表\"\r\n  },\r\n  [TYPES.labelList]: {\r\n    name: \"标签信息\",\r\n    code: [TYPES.labelList] + List,\r\n    title: \"标签列表\"\r\n  },\r\n  [TYPES.person]: {\r\n    name: \"人员信息\",\r\n    code: [TYPES.person] + List,\r\n    title: \"人员列表\"\r\n  }\r\n};\r\n\r\nexport const FENCE: INavObj = {\r\n  name: \"电子围栏\",\r\n  code: \"fence\"\r\n};\r\n\r\nexport const ALARM: INavObj = {\r\n  name: \"报警管理\",\r\n  code: \"alarm\"\r\n};\r\n\r\n// 头部高度\r\nexport const TITLE_HEIGHT = 60;\r\n\r\n// 右键菜单列表\r\nexport const ALL_MENU = {\r\n  [TYPES.basestation]: [\r\n    {\r\n      label: \"查看详情\",\r\n      clickCode: \"showDetails\"\r\n    },\r\n    {\r\n      label: \"编辑\",\r\n      clickCode: \"edit\"\r\n    }\r\n  ],\r\n  [TYPES.labelList]: [\r\n    {\r\n      label: \"查看详情\",\r\n      clickCode: \"showDetails\"\r\n    },\r\n    {\r\n      label: \"轨迹回放\",\r\n      clickCode: \"trackPlayback\"\r\n    },\r\n    {\r\n      label: \"实时跟踪\",\r\n      clickCode: \"tracking\"\r\n    }\r\n  ],\r\n  [TYPES.camera]: [\r\n    {\r\n      label: \"查看详情\",\r\n      clickCode: \"showDetails\"\r\n    },\r\n    {\r\n      label: \"查看实时视频\",\r\n      clickCode: \"seeNowVideo\"\r\n    },\r\n    {\r\n      label: \"查看历史视频\",\r\n      clickCode: \"seeHistoryVideo\"\r\n    },\r\n    {\r\n      label: \"编辑\",\r\n      clickCode: \"edit\"\r\n    }\r\n  ]\r\n};\r\n\r\nexport const equipIconConfig = {\r\n  r: 40,\r\n  distance: 20,\r\n  width: 100,\r\n  height: 100,\r\n  basestationIcon: new Image(), // 基站图标\r\n  cameraIcon: new Image() // 摄像头图标\r\n};\r\n\r\nexport const DEFAULT_COLORS = {\r\n  BLUE: \"#4395ff\",\r\n  GREEN: \"#42b983\",\r\n  GREEN_ALPHA_5: \"rgba(0,255,0,0.5)\"\r\n};\r\n\r\nexport const locateIconConfig = {\r\n  r: 40,\r\n  distance: 20\r\n};\r\nconst cameraLabelDirection = [\r\n  \"北\",\r\n  \"东北\",\r\n  \"东\",\r\n  \"东南\",\r\n  \"南\",\r\n  \"西南\",\r\n  \"西\",\r\n  \"西北\"\r\n];\r\nexport const cameraDirection = cameraLabelDirection.map((item, index) => ({\r\n  label: item,\r\n  value: String(index + 1)\r\n}));\r\n\r\nexport const bubblePathObj = {\r\n  top:\r\n    \"M140,12a5,5,0,0,0-5-5H76L70,0,64,7H5a5,5,0,0,0-5,5V62a5,5,0,0,0,5,5H135a5,5,0,0,0,5-5Z\",\r\n  bottom:\r\n    \"M0,55a5,5,0,0,0,5,5H64l6,7,6-7h59a5,5,0,0,0,5-5V5a5,5,0,0,0-5-5H5A5,5,0,0,0,0,5Z\",\r\n  left:\r\n    \"M146,55a5,5,0,0,1-5,5H11a5,5,0,0,1-5-5V36L0,30l6-6V5a5,5,0,0,1,5-5H141a5,5,0,0,1,5,5Z\",\r\n  right:\r\n    \"M0,5A5,5,0,0,1,5,0H135a5,5,0,0,1,5,5V24l6,6-6,6V55a5,5,0,0,1-5,5H5a5,5,0,0,1-5-5Z\"\r\n};\r\n\r\nexport const areaRules = [\r\n  \"禁止进入\",\r\n  \"禁止外出\",\r\n  \"聚集报警\",\r\n  \"允许进入\",\r\n  \"允许外出\",\r\n  \"进入且限制停留时长\",\r\n  \"外出且限制停留时长\"\r\n];\r\n\r\nexport const areaRulesOption = areaRules.map((item, index) => ({\r\n  label: item,\r\n  value: String(index + 1)\r\n}));\r\n\r\nexport const formateRuleType = (type: string | number) => {\r\n  type = String(type);\r\n  const index = areaRulesOption.findIndex(item => item.value === type);\r\n  return areaRulesOption[index].label;\r\n};\r\n\r\n// 背景图宽高\r\nexport const bgImageConfig = {\r\n  width: 6000,\r\n  height: 3000\r\n};\r\n\r\n// 绘制自定义区域 - 电子围栏 颜色 宽度\r\nexport const areaColorConfig = {\r\n  stroke: \"red\",\r\n  fill: \"rgba(0,255,0,0.1)\",\r\n  strokeWidth: 3,\r\n  // https://konvajs.org/docs/performance/All_Performance_Tips.html 12\r\n  perfectDrawEnabled: false\r\n};\r\n","/*\r\n * @Description:\r\n * @Author: huxianc\r\n * @Date: 2020-12-25 10:26:28\r\n * @LastEditors: huxianc\r\n * @LastEditTime: 2021-01-28 15:53:15\r\n */\r\nimport {\r\n  ICanvasState,\r\n  IPos,\r\n  ICanvasToStageConfig,\r\n  ISvgToImageConfig,\r\n  TLayerItem,\r\n  TVectorgraph,\r\n  ILayerCommon\r\n} from \"./../types/index.d\";\r\n\r\nimport { TITLE_HEIGHT as titleHeight, bubblePathObj } from \"../constVariables\";\r\nimport { imgUrl } from \"@/utils/urls\";\r\nimport { getWsArr } from \"@/utils/auth\";\r\n\r\n/**\r\n * @description: 计算偏移量\r\n * @param {objrct} canvasPos canvas的坐标 {x,y}\r\n * @param {object} imgPos 图片的坐标 {x,y}\r\n * @param {number} scale 缩放\r\n * @return {object} {x,y}\r\n */\r\nexport function getOffset(canvasPos: IPos, imgPos: IPos, scale: number) {\r\n  return {\r\n    x: canvasPos.x - imgPos.x * scale,\r\n    y: canvasPos.y - imgPos.y * scale\r\n  };\r\n}\r\n\r\n/**\r\n * @description: 返回正确的位置 右键菜单不会超出屏幕\r\n * @param {*} ele html element\r\n * @param {object} pos 位置 {x,y}\r\n * @return {object} {left,top}\r\n */\r\nexport function getCorrectPx(\r\n  ele: HTMLElement,\r\n  pos: { left: number; top: number }\r\n) {\r\n  const w = ele.offsetWidth;\r\n  const h = ele.offsetHeight;\r\n\r\n  const winWidth = window.innerWidth;\r\n  const winHeight = window.innerHeight;\r\n\r\n  const res = { left: pos.left, top: pos.top };\r\n  // 右判断\r\n  if (pos.left + w > winWidth) {\r\n    res.left = winWidth - w;\r\n  }\r\n  // 底判断\r\n  if (pos.top + h + titleHeight > winHeight) {\r\n    res.top = winHeight - titleHeight - h;\r\n  }\r\n\r\n  return res;\r\n}\r\n\r\n/**\r\n * @description: 鼠标点击坐标转换成konva坐标\r\n * @param {IPos} pos {x,y}\r\n * @param {ICanvasState} state {sx,sy,scale}\r\n * @return {object} {x,y}\r\n */\r\nexport function screenTocanvas(pos: IPos, state: ICanvasState): IPos {\r\n  const { sx, sy, scale } = state;\r\n  return {\r\n    x: (pos.x - sx) / scale,\r\n    y: (pos.y - titleHeight - sy) / scale\r\n  };\r\n}\r\n\r\n/**\r\n * @description: canvas坐标转换到stage上的坐标\r\n * @param {ICanvasToStageConfig} data\r\n * @return {*}\r\n */\r\nexport function canvasToStage(data: ICanvasToStageConfig): IPos {\r\n  const { x, y, sx, sy, scale } = data;\r\n  return {\r\n    x: ~~((x - sx) / scale),\r\n    y: ~~((y - sy - titleHeight) / scale)\r\n  };\r\n}\r\n\r\n/**\r\n * @description: 后端返得坐标字符串转换成 IPos 类型的坐标\r\n * @param {string} str\r\n * @return {*}\r\n */\r\nexport function strToPos(str: string): IPos {\r\n  const [x, y] = str.split(\",\").map(pos => Number(pos));\r\n  return {\r\n    x,\r\n    y\r\n  };\r\n}\r\n\r\nexport function svgToImage(config: ISvgToImageConfig, isBubble = false) {\r\n  const { pathSrc, width, height, color } = config;\r\n  const svg = document.createElementNS(\"http://www.w3.org/2000/svg\", \"svg\");\r\n\r\n  svg.setAttribute(\"width\", `${width}`);\r\n  svg.setAttribute(\"height\", `${height}`);\r\n  svg.setAttribute(\"x\", \"0\");\r\n  svg.setAttribute(\"y\", \"0\");\r\n  svg.setAttribute(\r\n    \"viewBox\",\r\n    `0 0 ${isBubble ? width : \"1024\"} ${isBubble ? height : \"1024\"}`\r\n  );\r\n  const path = document.createElementNS(\"http://www.w3.org/2000/svg\", \"path\");\r\n  path.setAttribute(\"d\", isBubble ? bubblePathObj.bottom : pathSrc);\r\n  path.setAttribute(\"width\", \"100%\");\r\n  path.setAttribute(\"height\", \"100%\");\r\n  path.setAttribute(\"fill\", `${color}`);\r\n  svg.appendChild(path);\r\n\r\n  const svgStr = new XMLSerializer().serializeToString(svg);\r\n  const base64 = window.btoa(svgStr);\r\n  const image = new window.Image();\r\n  image.src = `data:image/svg+xml;base64,${base64}`;\r\n  return image;\r\n}\r\n\r\n//生成随机 GUID 数 xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx\r\nexport function guid() {\r\n  function S4() {\r\n    return (((1 + Math.random()) * 0x10000) | 0).toString(16).substring(1);\r\n  }\r\n  return (\r\n    S4() +\r\n    S4() +\r\n    \"-\" +\r\n    S4() +\r\n    \"-\" +\r\n    S4() +\r\n    \"-\" +\r\n    S4() +\r\n    \"-\" +\r\n    S4() +\r\n    S4() +\r\n    S4()\r\n  );\r\n}\r\n\r\n// 根据类型生成 image DOM\r\nexport async function generateImageDomByType(attrs: TLayerItem) {\r\n  const { layrestype } = attrs.defdata;\r\n  if (layrestype === \"3\") {\r\n    const config = attrs as TVectorgraph;\r\n    const { layinfo, W, H, Color } = config.defdata;\r\n    const svgConfig: ISvgToImageConfig = {\r\n      pathSrc: layinfo,\r\n      width: W,\r\n      height: H,\r\n      color: Color\r\n    };\r\n    const imageDom = await svgToImage(svgConfig);\r\n    return imageDom;\r\n  } else {\r\n    const config = attrs as ILayerCommon;\r\n    const { layinfo } = config.defdata;\r\n    const imageDom = new window.Image();\r\n    imageDom.src = imgUrl + layinfo;\r\n    return imageDom;\r\n  }\r\n}\r\n\r\n// 获得ws url 地址\r\nexport const getWsUrl = () => {\r\n  enum WSType {\r\n    location = 3, // 高精度定位服务\r\n    alarm = 1, // 报警服务\r\n    trans = 199 // 数据中转服务（后续可能会用到）\r\n  }\r\n  const wsUrls = {\r\n    location: \"\",\r\n    alarm: \"\"\r\n  };\r\n  const wsArr = getWsArr();\r\n  wsArr.forEach(item => {\r\n    if (item.servertype === WSType.location) {\r\n      wsUrls.location = `ws://${item.serverip}:${item.serverport}/${WSType[3]}`;\r\n    }\r\n    if (item.servertype === WSType.alarm) {\r\n      wsUrls.alarm = `ws://${item.serverip}:${item.serverport}/${WSType[1]}`;\r\n    }\r\n  });\r\n  return wsUrls;\r\n};\r\n","/*\r\n * @Description:\r\n * @Author: huxianc\r\n * @Date: 2020-11-23 09:45:10\r\n * @LastEditors: huxianc\r\n * @LastEditTime: 2021-01-12 11:07:52\r\n */\r\nimport type { ObjectDirective  } from \"vue\"\r\nimport { TITLE_HEIGHT as titleHeight } from \"../../constVariables\";\r\n//  这里copy的饿了么的drag方案，可以改成自定义的dialog\r\nconst draggableDialog:ObjectDirective<any> = {\r\n  mounted(el,binding) {\r\n    const [header,customForm] = binding.value.split(\",\")\r\n    \r\n    const dialogHeaderEl: HTMLDivElement = el.querySelector(\".\"+header);\r\n    const dragDom = el.querySelector(\".\"+customForm);\r\n    dialogHeaderEl.style.cssText += \";cursor:move;\";\r\n    dragDom.style.cssText += \";top:5rem;\";\r\n\r\n    // 获取原有属性 ie dom元素.currentStyle 火狐谷歌 window.getComputedStyle(dom元素, null);\r\n    // ? ts 好像不支持其他\r\n    // const getStyle = (function() {\r\n    //   if (window.document.currentStyle) {\r\n    //     return (dom, attr) => dom.currentStyle[attr]\r\n    //   } else {\r\n    //     return (dom, attr) => getComputedStyle(dom, false)[attr]\r\n    //   }\r\n    // })()\r\n\r\n    const getStyle = (function() {\r\n      return (dom: HTMLElement, attr: string) =>\r\n        getComputedStyle(dom, null)[attr];\r\n    })();\r\n\r\n    dialogHeaderEl.onmousedown = e => {\r\n      // 鼠标按下，计算当前元素距离可视区的距离\r\n      const disX = e.clientX - dialogHeaderEl.offsetLeft;\r\n      const disY = e.clientY - dialogHeaderEl.offsetTop;\r\n\r\n      const dragDomWidth = dragDom.offsetWidth;\r\n      const dragDomHeight = dragDom.offsetHeight;\r\n\r\n      const screenWidth = document.body.clientWidth;\r\n      const screenHeight = document.body.clientHeight - titleHeight+20;\r\n\r\n      const minDragDomLeft = dragDom.offsetLeft;\r\n      const maxDragDomLeft = screenWidth - dragDom.offsetLeft - dragDomWidth;\r\n\r\n      const minDragDomTop = dragDom.offsetTop;\r\n      const maxDragDomTop = screenHeight - dragDom.offsetTop - dragDomHeight;\r\n\r\n      // 获取到的值带px 正则匹配替换\r\n      let styL: string | number = getStyle(dragDom, \"left\");\r\n      let styT: string | number = getStyle(dragDom, \"top\");\r\n\r\n      if ((styL as string).includes(\"%\")) {\r\n        styL =\r\n          +document.body.clientWidth *\r\n          (+(styL as string).replace(/%/g, \"\") / 100);\r\n        styT =\r\n          +document.body.clientHeight *\r\n          (+(styT as string).replace(/%/g, \"\") / 100);\r\n      } else {\r\n        styL = +(styL as string).replace(/\\px/g, \"\");\r\n        styT = +(styT as string).replace(/\\px/g, \"\");\r\n      }\r\n\r\n      document.onmousemove = function(e) {\r\n        // 通过事件委托，计算移动的距离\r\n        let left = e.clientX - disX;\r\n        let top = e.clientY - disY;\r\n\r\n        // 边界处理\r\n        if (-left > minDragDomLeft) {\r\n          left = -minDragDomLeft;\r\n        } else if (left > maxDragDomLeft) {\r\n          left = maxDragDomLeft;\r\n        }\r\n\r\n        if (-top > minDragDomTop) {\r\n          top = -minDragDomTop;\r\n        } else if (top > maxDragDomTop) {\r\n          top = maxDragDomTop;\r\n        }\r\n\r\n        // 移动当前元素\r\n        dragDom.style.cssText += `;left:${left + (styL as number)}px;top:${top +\r\n          (styT as number)}px;`;\r\n\r\n        // emit onDrag event\r\n        // vnode.child.$emit('dragDialog')\r\n      };\r\n\r\n      document.onmouseup = function() {\r\n        document.onmousemove = null;\r\n        document.onmouseup = null;\r\n      };\r\n    };\r\n  },\r\n};\r\n\r\nexport default draggableDialog;\r\n","/*\r\n * @Description:\r\n * @Author: huxianc\r\n * @Date: 2020-11-23 09:45:03\r\n * @LastEditors: huxianc\r\n * @LastEditTime: 2020-12-25 16:57:32\r\n */\r\nimport drag from \"./drag\";\r\n\r\n// const install = function(Vue) {\r\n//   Vue.directive('drag-dialog', drag)\r\n// }\r\n\r\n// if (window.Vue) {\r\n//   window['drag-dialog'] = drag\r\n//   Vue.use(install); // eslint-disable-line\r\n// }\r\n\r\n// drag.install = install\r\nexport default drag;\r\n","<!--\r\n * @Description:底部导航栏\r\n * @Author: huxianc\r\n * @Date: 2020-11-20 14:03:08\r\n * @LastEditors: liufuqiang\r\n * @LastEditTime: 2021-01-28 17:10:49\r\n-->\r\n\r\n<template>\r\n  <nav>\r\n    <ul>\r\n      <li\r\n        v-for=\"(navItem, index) in navList\"\r\n        :key=\"navItem.name\"\r\n        :class=\"{ active: index === navIndex }\"\r\n        @click=\"handleNavClick(navItem, index)\"\r\n      >\r\n        <span class=\"icon iconfont\" v-html=\"navItem.icon\" />\r\n        <div>{{ navItem.name }}</div>\r\n      </li>\r\n    </ul>\r\n  </nav>\r\n</template>\r\n\r\n<script lang=\"ts\">\r\nimport { defineComponent, shallowRef } from \"vue\";\r\nimport { NAV_INFO, FENCE, TYPES, ALARM } from \"../constVariables\";\r\nimport { INavItem } from \"../types/mainNav\";\r\nexport default defineComponent({\r\n  name: \"MainNav\",\r\n  emits: [\"navClick\"],\r\n  setup(props, { emit }) {\r\n    const navList: INavItem[] = [\r\n      { name: \"主页\", icon: \"&#xe61d;\", code: \"index\" },\r\n      // {\r\n      //   name: '电子考勤',\r\n      //   icon: '&#xe638;',\r\n      //   path: '/home/attendance',\r\n      //   class: ''\r\n      // },\r\n      {\r\n        icon: \"&#xe61a;\",\r\n        ...FENCE\r\n      },\r\n      // {\r\n      //   name: '区域管理',\r\n      //   icon: '&#xe667;',\r\n      //   path: '/home/arealist',\r\n      //   class: ''\r\n      // },\r\n      // 我理解成视频列表\r\n      {\r\n        icon: \"&#xe7e8;\",\r\n        ...NAV_INFO[TYPES.camera]\r\n      },\r\n      // 理解成基站列表\r\n      {\r\n        icon: \"&#xe603;\",\r\n        ...NAV_INFO[TYPES.basestation]\r\n      },\r\n      // {\r\n      //   name: '报警信息',\r\n      //   icon: '&#xe624;',\r\n      //   path: '/home/alarmlist',\r\n      //   class: ''\r\n      // },\r\n      // 标签列表\r\n      {\r\n        icon: \"&#xe6d8;\",\r\n        ...NAV_INFO[TYPES.labelList]\r\n      },\r\n      // 理解成人员列表\r\n      {\r\n        icon: \"&#xe60d;\",\r\n        ...NAV_INFO[TYPES.person]\r\n      },\r\n\r\n      // 报警管理列表\r\n      {\r\n        icon: \"&#xe624;\",\r\n        ...ALARM\r\n      }\r\n      // { name: \"互监组\", icon: \"&#xe60d;\", path: \"/home/hjzlist\", class: \"\" },\r\n      // {name: \"跟踪预警\", icon: \"&#xe619;\", path: \"/home/gzyj\", class: \"\"},\r\n      // {\r\n      //   name: '轨迹回放',\r\n      //   icon: '&#xe61e;',\r\n      //   path: '/home/tracklist',\r\n      //   class: ''\r\n      // },\r\n      // {\r\n      //   name: '工具管理',\r\n      //   icon: '&#xe62b;',\r\n      //   path: '/home/tool',\r\n      //   class: ''\r\n      // },\r\n      // {\r\n      //   name: '车辆管理',\r\n      //   icon: '&#xe629;',\r\n      //   path: '/home/car',\r\n      //   class: ''\r\n      // },\r\n      // {\r\n      //   name: \"数据分析\",\r\n      //   icon: \"&#xe62e;\",\r\n      //   path: \"/home/analysis\",\r\n      //   class: \"\"\r\n      // },\r\n      // {\r\n      //   name: \"报警设置\",\r\n      //   icon: \"&#xe627;\",\r\n      //   code: \"warn\"\r\n      // }\r\n    ];\r\n\r\n    const navIndex = shallowRef(0);\r\n\r\n    function handleNavClick(navItem: INavItem, index: number) {\r\n      if (navIndex.value !== index) {\r\n        navIndex.value = index;\r\n      }\r\n      const { code } = navItem;\r\n      if (!code) return;\r\n      emit(\"navClick\", code);\r\n    }\r\n    function resetIndex() {\r\n      navIndex.value = 0;\r\n    }\r\n    return {\r\n      navList,\r\n      navIndex,\r\n      handleNavClick,\r\n      resetIndex\r\n    };\r\n  }\r\n});\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\nnav {\r\n  width: 84rem;\r\n  position: absolute;\r\n  bottom: 2rem;\r\n  left: 50%;\r\n  transform: translateX(-50%);\r\n  border: 1px solid rgba(51, 119, 233, 0.13);\r\n  border-left: none;\r\n  border-right: none;\r\n  z-index: 1000;\r\n}\r\nul {\r\n  display: flex;\r\n  justify-content: space-evenly;\r\n  padding: 0 4rem;\r\n  color: rgba(91, 169, 233, 0.8);\r\n  background: url(\"../../../../assets/dashboard/nav_bg.png\") repeat center\r\n    center/100% 100%;\r\n  li {\r\n    /* flex: 1; */\r\n    min-width: 8rem;\r\n    padding: 1rem;\r\n    display: flex;\r\n    flex-direction: column;\r\n    justify-content: center;\r\n    align-items: center;\r\n    cursor: pointer;\r\n    transition: all 0.3s ease;\r\n\r\n    &:hover,\r\n    &.active {\r\n      color: #33eaff;\r\n      background: url(\"../../../../assets/dashboard/active.png\") repeat center\r\n        center/100% 100%;\r\n    }\r\n\r\n    span {\r\n      font-size: 2.4rem;\r\n    }\r\n    div {\r\n      margin-top: 1rem;\r\n      font-size: 1.4rem;\r\n    }\r\n  }\r\n}\r\n</style>\r\n","\r\nimport { defineComponent, shallowRef } from \"vue\";\r\nimport { NAV_INFO, FENCE, TYPES, ALARM } from \"../constVariables\";\r\nimport { INavItem } from \"../types/mainNav\";\r\nexport default defineComponent({\r\n  name: \"MainNav\",\r\n  emits: [\"navClick\"],\r\n  setup(props, { emit }) {\r\n    const navList: INavItem[] = [\r\n      { name: \"主页\", icon: \"&#xe61d;\", code: \"index\" },\r\n      // {\r\n      //   name: '电子考勤',\r\n      //   icon: '&#xe638;',\r\n      //   path: '/home/attendance',\r\n      //   class: ''\r\n      // },\r\n      {\r\n        icon: \"&#xe61a;\",\r\n        ...FENCE\r\n      },\r\n      // {\r\n      //   name: '区域管理',\r\n      //   icon: '&#xe667;',\r\n      //   path: '/home/arealist',\r\n      //   class: ''\r\n      // },\r\n      // 我理解成视频列表\r\n      {\r\n        icon: \"&#xe7e8;\",\r\n        ...NAV_INFO[TYPES.camera]\r\n      },\r\n      // 理解成基站列表\r\n      {\r\n        icon: \"&#xe603;\",\r\n        ...NAV_INFO[TYPES.basestation]\r\n      },\r\n      // {\r\n      //   name: '报警信息',\r\n      //   icon: '&#xe624;',\r\n      //   path: '/home/alarmlist',\r\n      //   class: ''\r\n      // },\r\n      // 标签列表\r\n      {\r\n        icon: \"&#xe6d8;\",\r\n        ...NAV_INFO[TYPES.labelList]\r\n      },\r\n      // 理解成人员列表\r\n      {\r\n        icon: \"&#xe60d;\",\r\n        ...NAV_INFO[TYPES.person]\r\n      },\r\n\r\n      // 报警管理列表\r\n      {\r\n        icon: \"&#xe624;\",\r\n        ...ALARM\r\n      }\r\n      // { name: \"互监组\", icon: \"&#xe60d;\", path: \"/home/hjzlist\", class: \"\" },\r\n      // {name: \"跟踪预警\", icon: \"&#xe619;\", path: \"/home/gzyj\", class: \"\"},\r\n      // {\r\n      //   name: '轨迹回放',\r\n      //   icon: '&#xe61e;',\r\n      //   path: '/home/tracklist',\r\n      //   class: ''\r\n      // },\r\n      // {\r\n      //   name: '工具管理',\r\n      //   icon: '&#xe62b;',\r\n      //   path: '/home/tool',\r\n      //   class: ''\r\n      // },\r\n      // {\r\n      //   name: '车辆管理',\r\n      //   icon: '&#xe629;',\r\n      //   path: '/home/car',\r\n      //   class: ''\r\n      // },\r\n      // {\r\n      //   name: \"数据分析\",\r\n      //   icon: \"&#xe62e;\",\r\n      //   path: \"/home/analysis\",\r\n      //   class: \"\"\r\n      // },\r\n      // {\r\n      //   name: \"报警设置\",\r\n      //   icon: \"&#xe627;\",\r\n      //   code: \"warn\"\r\n      // }\r\n    ];\r\n\r\n    const navIndex = shallowRef(0);\r\n\r\n    function handleNavClick(navItem: INavItem, index: number) {\r\n      if (navIndex.value !== index) {\r\n        navIndex.value = index;\r\n      }\r\n      const { code } = navItem;\r\n      if (!code) return;\r\n      emit(\"navClick\", code);\r\n    }\r\n    function resetIndex() {\r\n      navIndex.value = 0;\r\n    }\r\n    return {\r\n      navList,\r\n      navIndex,\r\n      handleNavClick,\r\n      resetIndex\r\n    };\r\n  }\r\n});\r\n","import { render } from \"./mainNav.vue?vue&type=template&id=f0915244&scoped=true\"\nimport script from \"./mainNav.vue?vue&type=script&lang=ts\"\nexport * from \"./mainNav.vue?vue&type=script&lang=ts\"\n\nimport \"./mainNav.vue?vue&type=style&index=0&id=f0915244&lang=scss&scoped=true\"\nscript.render = render\nscript.__scopeId = \"data-v-f0915244\"\n\nexport default script","<!--\r\n * @Author: huxianc\r\n * @Date: 2020-12-01 15:04:25\r\n * @LastEditTime: 2021-01-27 09:52:30\r\n * @LastEditors: huxianc\r\n * @Description: In User Settings Edit\r\n-->\r\n<template>\r\n  <div>\r\n    <el-form :model=\"params\" label-width=\"80px\" :inline=\"true\" size=\"small\">\r\n      <el-form-item label=\"设备编号\">\r\n        <el-input v-model=\"params.search\" clearable @change=\"search\" />\r\n      </el-form-item>\r\n      <el-form-item label=\"\">\r\n        <el-button type=\"primary\" @click=\"search\">搜索</el-button>\r\n      </el-form-item>\r\n    </el-form>\r\n    <el-table :data=\"tableData\" border tooltip-effect=\"dark\">\r\n      <el-table-column\r\n        label=\"设备\"\r\n        prop=\"DeviceName\"\r\n        show-overflow-tooltip\r\n        align=\"center\"\r\n        width=\"110\"\r\n      />\r\n      <el-table-column\r\n        label=\"姓名\"\r\n        prop=\"Username\"\r\n        show-overflow-tooltip\r\n        align=\"center\"\r\n      />\r\n      <el-table-column label=\"位置\" show-overflow-tooltip align=\"center\">\r\n        <template #default=\"{row}\">\r\n          {{ getMap(row.snum) || \"未上线\" }}\r\n        </template>\r\n      </el-table-column>\r\n      <el-table-column width=\"160\" label=\"操作\" align=\"center\">\r\n        <template #default=\"{row}\">\r\n          <el-button size=\"mini\" type=\"primary\" @click=\"handleDetail(row)\"\r\n            >详情</el-button\r\n          >\r\n          <!-- <el-button size=\"mini\" @click=\"handleEdit(row)\">Edit</el-button> -->\r\n          <!-- <el-popconfirm\r\n            :title=\"`确定删除基站 ${row.ip} ？`\"\r\n            @confirm=\"handleDelete(row)\"\r\n          >\r\n            <template #reference>\r\n              <el-button type=\"danger\" size=\"mini\" style=\"margin-left:10px;\"\r\n                >删除</el-button\r\n              >\r\n            </template>\r\n          </el-popconfirm> -->\r\n        </template>\r\n      </el-table-column>\r\n    </el-table>\r\n    <el-pagination\r\n      v-show=\"total && tableData && tableData.length\"\r\n      background\r\n      v-model:current-page=\"params.page\"\r\n      :page-size=\"params.size\"\r\n      layout=\"prev, pager, next\"\r\n      :total=\"total\"\r\n      @current-change=\"changePage\"\r\n    />\r\n  </div>\r\n</template>\r\n\r\n<script lang=\"ts\">\r\nimport { onMounted, reactive, ref, defineComponent } from \"vue\";\r\nimport api from \"@/api/person\";\r\nimport { TYPES } from \"../constVariables\";\r\nimport { ICommonTableParams, IPersonItem } from \"../types\";\r\nimport { getPagination, getPagintionCount, getMap } from \"@/utils\";\r\nconst CLICKED = \"clicked\";\r\n\r\nexport default defineComponent({\r\n  name: \"Label\",\r\n  setup(props, { emit }) {\r\n    const params = reactive<ICommonTableParams>({\r\n      page: 1,\r\n      size: 10,\r\n      prop: \"Epaulet\",\r\n      search: \"\"\r\n    });\r\n\r\n    const tableData = ref<IPersonItem[]>([]);\r\n    const total = ref(0);\r\n\r\n    async function getList() {\r\n      const param = {\r\n        act: \"rYVwSSwhmDcZRL0yQbO1611304770982\"\r\n      };\r\n      const result: unknown = await api.getPersonList(param);\r\n\r\n      const { data } = result as any;\r\n      const personAll: any = data;\r\n      const res =\r\n        params.search === \"\"\r\n          ? getPagination(personAll, params.page)\r\n          : getPagination(personAll, params.page, params.prop, params.search);\r\n      tableData.value = res;\r\n      total.value = getPagintionCount(\r\n        personAll,\r\n        params.prop,\r\n        params.search\r\n      ) as number;\r\n    }\r\n\r\n    async function handleEdit(row: IPersonItem) {\r\n      console.log(row);\r\n    }\r\n    async function getPersonDetail(row: any) {\r\n      emit(\"showEquipDetails\", row, TYPES.person);\r\n      emit(CLICKED);\r\n    }\r\n    function handleDetail(row: IPersonItem) {\r\n      getPersonDetail(row);\r\n    }\r\n    async function handleDelete(row: IPersonItem) {\r\n      console.log(row);\r\n    }\r\n\r\n    async function changePage(page: number) {\r\n      params.page = page;\r\n      getList();\r\n    }\r\n    async function search() {\r\n      params.page = 1;\r\n      getList();\r\n    }\r\n\r\n    onMounted(() => {\r\n      getList();\r\n    });\r\n\r\n    return {\r\n      params,\r\n      tableData,\r\n      total,\r\n      handleEdit,\r\n      handleDelete,\r\n      changePage,\r\n      search,\r\n      getMap,\r\n      handleDetail\r\n    };\r\n  }\r\n});\r\n</script>\r\n","/*\r\n * @Description:\r\n * @Author:\r\n * @Date: 2020-11-23 16:12:28\r\n * @LastEditors: huxianc\r\n * @LastEditTime: 2021-01-27 09:45:37\r\n */\r\nimport http from \"@/utils/http3\";\r\n\r\nexport default {\r\n  // 获取人员详情\r\n  getPersonData(id: string | number) {\r\n    return http({\r\n      url: `/person/criminal/${id}/`\r\n    });\r\n  },\r\n  // 筛选人员\r\n  getPersonList(data: any) {\r\n    return http({\r\n      url: `/rcaec/bigwa`,\r\n      method: \"post\",\r\n      data\r\n    });\r\n  }\r\n};\r\n","\r\nimport { onMounted, reactive, ref, defineComponent } from \"vue\";\r\nimport api from \"@/api/person\";\r\nimport { TYPES } from \"../constVariables\";\r\nimport { ICommonTableParams, IPersonItem } from \"../types\";\r\nimport { getPagination, getPagintionCount, getMap } from \"@/utils\";\r\nconst CLICKED = \"clicked\";\r\n\r\nexport default defineComponent({\r\n  name: \"Label\",\r\n  setup(props, { emit }) {\r\n    const params = reactive<ICommonTableParams>({\r\n      page: 1,\r\n      size: 10,\r\n      prop: \"Epaulet\",\r\n      search: \"\"\r\n    });\r\n\r\n    const tableData = ref<IPersonItem[]>([]);\r\n    const total = ref(0);\r\n\r\n    async function getList() {\r\n      const param = {\r\n        act: \"rYVwSSwhmDcZRL0yQbO1611304770982\"\r\n      };\r\n      const result: unknown = await api.getPersonList(param);\r\n\r\n      const { data } = result as any;\r\n      const personAll: any = data;\r\n      const res =\r\n        params.search === \"\"\r\n          ? getPagination(personAll, params.page)\r\n          : getPagination(personAll, params.page, params.prop, params.search);\r\n      tableData.value = res;\r\n      total.value = getPagintionCount(\r\n        personAll,\r\n        params.prop,\r\n        params.search\r\n      ) as number;\r\n    }\r\n\r\n    async function handleEdit(row: IPersonItem) {\r\n      console.log(row);\r\n    }\r\n    async function getPersonDetail(row: any) {\r\n      emit(\"showEquipDetails\", row, TYPES.person);\r\n      emit(CLICKED);\r\n    }\r\n    function handleDetail(row: IPersonItem) {\r\n      getPersonDetail(row);\r\n    }\r\n    async function handleDelete(row: IPersonItem) {\r\n      console.log(row);\r\n    }\r\n\r\n    async function changePage(page: number) {\r\n      params.page = page;\r\n      getList();\r\n    }\r\n    async function search() {\r\n      params.page = 1;\r\n      getList();\r\n    }\r\n\r\n    onMounted(() => {\r\n      getList();\r\n    });\r\n\r\n    return {\r\n      params,\r\n      tableData,\r\n      total,\r\n      handleEdit,\r\n      handleDelete,\r\n      changePage,\r\n      search,\r\n      getMap,\r\n      handleDetail\r\n    };\r\n  }\r\n});\r\n","import { render } from \"./personList.vue?vue&type=template&id=2a3a9eca\"\nimport script from \"./personList.vue?vue&type=script&lang=ts\"\nexport * from \"./personList.vue?vue&type=script&lang=ts\"\nscript.render = render\n\nexport default script","<!--\r\n * @Author: your name\r\n * @Date: 2020-12-01 15:04:25\r\n * @LastEditTime: 2021-01-27 09:50:01\r\n * @LastEditors: huxianc\r\n * @Description: In User Settings Edit\r\n-->\r\n<template>\r\n  <div>\r\n    <el-form :model=\"params\" label-width=\"80px\" :inline=\"true\" size=\"small\">\r\n      <!-- <el-form-item label=\"\">\r\n        <el-button type=\"primary\" @click=\"addEquip\">新增</el-button>\r\n      </el-form-item> -->\r\n      <el-form-item label=\"摄像头IP\">\r\n        <el-input v-model=\"params.search\" clearable @change=\"search\" />\r\n      </el-form-item>\r\n      <el-form-item label=\"\">\r\n        <el-button type=\"primary\" @click=\"search\">搜索</el-button>\r\n      </el-form-item>\r\n    </el-form>\r\n\r\n    <el-table :data=\"tableData\" border tooltip-effect=\"dark\">\r\n      <el-table-column\r\n        label=\"IP\"\r\n        prop=\"dnum\"\r\n        show-overflow-tooltip\r\n        align=\"center\"\r\n        width=\"110\"\r\n      />\r\n      <el-table-column\r\n        label=\"名称\"\r\n        prop=\"dname\"\r\n        show-overflow-tooltip\r\n        align=\"center\"\r\n      />\r\n      <el-table-column label=\"位置\" show-overflow-tooltip align=\"center\">\r\n        <template #default=\"{row}\">\r\n          {{ getMap(row.snum) }}\r\n        </template>\r\n      </el-table-column>\r\n      <el-table-column width=\"160\" label=\"操作\" align=\"center\">\r\n        <template #default=\"{row}\">\r\n          <el-button size=\"mini\" type=\"primary\" @click=\"handleDetail(row)\"\r\n            >详情</el-button\r\n          >\r\n          <!-- <el-button size=\"mini\" @click=\"handleEdit(row)\">Edit</el-button> -->\r\n          <!-- <el-popconfirm\r\n            :title=\"`确定删除基站 ${row.ip} ？`\"\r\n            @confirm=\"handleDelete(row)\"\r\n          >\r\n            <template #reference>\r\n              <el-button type=\"danger\" size=\"mini\" style=\"margin-left:10px;\"\r\n                >删除</el-button\r\n              >\r\n            </template>\r\n          </el-popconfirm> -->\r\n        </template>\r\n      </el-table-column>\r\n    </el-table>\r\n    <el-pagination\r\n      v-show=\"total && tableData && tableData.length\"\r\n      background\r\n      v-model:current-page=\"params.page\"\r\n      :page-size=\"params.size\"\r\n      layout=\"prev, pager, next\"\r\n      :total=\"total\"\r\n      @current-change=\"changePage\"\r\n    />\r\n  </div>\r\n</template>\r\n\r\n<script lang=\"ts\">\r\nimport { defineComponent, reactive, ref, onMounted, shallowRef } from \"vue\";\r\nimport api from \"@/api/camera\";\r\nimport { TYPES } from \"../constVariables\";\r\nimport { ICommonTableParams, ICameraArrItem } from \"../types\";\r\nimport { getPagination, getPagintionCount, getMap } from \"@/utils\";\r\nimport { ElMessage } from \"element-plus\";\r\n// import { parse } from \"qs\";\r\nimport { getAllDevice } from \"@/utils/auth\";\r\nconst CLICKED = \"clicked\";\r\n\r\nexport default defineComponent({\r\n  name: \"Camera\",\r\n  setup(props, { emit }) {\r\n    const params = reactive<ICommonTableParams>({\r\n      page: 1,\r\n      size: 10,\r\n      prop: \"dnum\",\r\n      search: \"\"\r\n    });\r\n    const tableData = ref<ICameraArrItem[]>([]);\r\n    const total = shallowRef(0);\r\n\r\n    async function getList() {\r\n      // const res: unknown = await api.getCameraList(params);\r\n      // 从localStorage取所有设备信息\r\n      const deviceAll: any = getAllDevice();\r\n      const cameraAll: any = [];\r\n      deviceAll.filter((item: any) => {\r\n        if (item.dtypecode === \"Camera_IP\") {\r\n          cameraAll.push(item);\r\n        }\r\n      });\r\n      const res =\r\n        params.search === \"\"\r\n          ? getPagination(cameraAll, params.page)\r\n          : getPagination(cameraAll, params.page, params.prop, params.search);\r\n      tableData.value = res;\r\n      total.value = getPagintionCount(\r\n        cameraAll,\r\n        params.prop,\r\n        params.search\r\n      ) as number;\r\n    }\r\n\r\n    async function handleEdit(row: ICameraArrItem) {\r\n      console.log(row);\r\n    }\r\n\r\n    async function getCameraDetail(id: string) {\r\n      const params = {\r\n        act: \"fCGtP4nXdRZjr6TYeiN1611196242913\",\r\n        DeviceIdS: id\r\n      };\r\n\r\n      const res: unknown = await api.getCameraData(params);\r\n      const { data } = res as any;\r\n      emit(\"showEquipDetails\", data[0][0], TYPES.camera);\r\n      emit(CLICKED);\r\n    }\r\n    function handleDetail(row: ICameraArrItem) {\r\n      getCameraDetail(row.dids);\r\n    }\r\n\r\n    function handleDelete(index: number, row: ICameraArrItem) {\r\n      api\r\n        .delCamera(row.dids)\r\n        .then(() => {\r\n          ElMessage.success(\"删除成功\");\r\n        })\r\n        .catch(err => {\r\n          ElMessage.error(err);\r\n        });\r\n    }\r\n\r\n    async function changePage(page: number) {\r\n      params.page = page;\r\n      getList();\r\n    }\r\n\r\n    async function search() {\r\n      params.page = 1;\r\n      getList();\r\n    }\r\n\r\n    function addEquip() {\r\n      emit(\"addEquip\", TYPES.camera);\r\n    }\r\n\r\n    onMounted(() => {\r\n      getList();\r\n    });\r\n\r\n    return {\r\n      params,\r\n      tableData,\r\n      total,\r\n      handleEdit,\r\n      handleDelete,\r\n      changePage,\r\n      search,\r\n      addEquip,\r\n      getMap,\r\n      handleDetail\r\n    };\r\n  }\r\n});\r\n</script>\r\n","\r\nimport { defineComponent, reactive, ref, onMounted, shallowRef } from \"vue\";\r\nimport api from \"@/api/camera\";\r\nimport { TYPES } from \"../constVariables\";\r\nimport { ICommonTableParams, ICameraArrItem } from \"../types\";\r\nimport { getPagination, getPagintionCount, getMap } from \"@/utils\";\r\nimport { ElMessage } from \"element-plus\";\r\n// import { parse } from \"qs\";\r\nimport { getAllDevice } from \"@/utils/auth\";\r\nconst CLICKED = \"clicked\";\r\n\r\nexport default defineComponent({\r\n  name: \"Camera\",\r\n  setup(props, { emit }) {\r\n    const params = reactive<ICommonTableParams>({\r\n      page: 1,\r\n      size: 10,\r\n      prop: \"dnum\",\r\n      search: \"\"\r\n    });\r\n    const tableData = ref<ICameraArrItem[]>([]);\r\n    const total = shallowRef(0);\r\n\r\n    async function getList() {\r\n      // const res: unknown = await api.getCameraList(params);\r\n      // 从localStorage取所有设备信息\r\n      const deviceAll: any = getAllDevice();\r\n      const cameraAll: any = [];\r\n      deviceAll.filter((item: any) => {\r\n        if (item.dtypecode === \"Camera_IP\") {\r\n          cameraAll.push(item);\r\n        }\r\n      });\r\n      const res =\r\n        params.search === \"\"\r\n          ? getPagination(cameraAll, params.page)\r\n          : getPagination(cameraAll, params.page, params.prop, params.search);\r\n      tableData.value = res;\r\n      total.value = getPagintionCount(\r\n        cameraAll,\r\n        params.prop,\r\n        params.search\r\n      ) as number;\r\n    }\r\n\r\n    async function handleEdit(row: ICameraArrItem) {\r\n      console.log(row);\r\n    }\r\n\r\n    async function getCameraDetail(id: string) {\r\n      const params = {\r\n        act: \"fCGtP4nXdRZjr6TYeiN1611196242913\",\r\n        DeviceIdS: id\r\n      };\r\n\r\n      const res: unknown = await api.getCameraData(params);\r\n      const { data } = res as any;\r\n      emit(\"showEquipDetails\", data[0][0], TYPES.camera);\r\n      emit(CLICKED);\r\n    }\r\n    function handleDetail(row: ICameraArrItem) {\r\n      getCameraDetail(row.dids);\r\n    }\r\n\r\n    function handleDelete(index: number, row: ICameraArrItem) {\r\n      api\r\n        .delCamera(row.dids)\r\n        .then(() => {\r\n          ElMessage.success(\"删除成功\");\r\n        })\r\n        .catch(err => {\r\n          ElMessage.error(err);\r\n        });\r\n    }\r\n\r\n    async function changePage(page: number) {\r\n      params.page = page;\r\n      getList();\r\n    }\r\n\r\n    async function search() {\r\n      params.page = 1;\r\n      getList();\r\n    }\r\n\r\n    function addEquip() {\r\n      emit(\"addEquip\", TYPES.camera);\r\n    }\r\n\r\n    onMounted(() => {\r\n      getList();\r\n    });\r\n\r\n    return {\r\n      params,\r\n      tableData,\r\n      total,\r\n      handleEdit,\r\n      handleDelete,\r\n      changePage,\r\n      search,\r\n      addEquip,\r\n      getMap,\r\n      handleDetail\r\n    };\r\n  }\r\n});\r\n","import { render } from \"./cameraList.vue?vue&type=template&id=52accb3a\"\nimport script from \"./cameraList.vue?vue&type=script&lang=ts\"\nexport * from \"./cameraList.vue?vue&type=script&lang=ts\"\nscript.render = render\n\nexport default script","<!--\r\n * @Author: your name\r\n * @Date: 2020-12-01 15:04:25\r\n * @LastEditTime: 2021-01-27 09:49:26\r\n * @LastEditors: huxianc\r\n * @Description: In User Settings Edit\r\n-->\r\n<template>\r\n  <div>\r\n    <el-form :model=\"params\" label-width=\"80px\" :inline=\"true\" size=\"small\">\r\n      <!-- <el-form-item label=\"\">\r\n        <el-button type=\"primary\" @click=\"addEquip\">新增</el-button>\r\n      </el-form-item> -->\r\n      <el-form-item label=\"基站编号\">\r\n        <el-input v-model=\"params.search\" clearable @change=\"search\" />\r\n      </el-form-item>\r\n      <el-form-item label=\"\">\r\n        <el-button type=\"primary\" @click=\"search\">搜索</el-button>\r\n      </el-form-item>\r\n    </el-form>\r\n\r\n    <el-table :data=\"tableData\" border tooltip-effect=\"dark\">\r\n      <el-table-column\r\n        label=\"编号\"\r\n        prop=\"dnum\"\r\n        show-overflow-tooltip\r\n        align=\"center\"\r\n        width=\"110\"\r\n      />\r\n      <el-table-column\r\n        label=\"名称\"\r\n        prop=\"dname\"\r\n        show-overflow-tooltip\r\n        align=\"center\"\r\n      />\r\n      <el-table-column label=\"位置\" show-overflow-tooltip align=\"center\">\r\n        <template #default=\"{row}\">\r\n          {{ getMap(row.snum) }}\r\n        </template>\r\n      </el-table-column>\r\n      <!-- <el-table-column label=\"状态\" align=\"center\" prop=\"status\" width=\"90\">\r\n        <template #default=\"{row}\">\r\n          <el-tag :type=\"`${row.status === '异常' ? 'danger' : 'success'}`\">{{\r\n            row.status\r\n          }}</el-tag>\r\n        </template>\r\n      </el-table-column> -->\r\n      <el-table-column width=\"160\" label=\"操作\" align=\"center\">\r\n        <template #default=\"{row}\">\r\n          <el-button size=\"mini\" type=\"primary\" @click=\"handleDetail(row)\"\r\n            >详情</el-button\r\n          >\r\n          <!-- <el-button size=\"mini\" @click=\"handleEdit(row)\">Edit</el-button> -->\r\n          <!-- <el-popconfirm\r\n            :title=\"`确定删除基站 ${row.ip} ？`\"\r\n            @confirm=\"handleDelete(row)\"\r\n          >\r\n            <template #reference>\r\n              <el-button type=\"danger\" size=\"mini\" style=\"margin-left:10px;\"\r\n                >删除</el-button\r\n              >\r\n            </template>\r\n          </el-popconfirm> -->\r\n        </template>\r\n      </el-table-column>\r\n    </el-table>\r\n    <el-pagination\r\n      v-show=\"total && tableData && tableData.length\"\r\n      background\r\n      v-model:current-page=\"params.page\"\r\n      :page-size=\"params.size\"\r\n      layout=\"prev, pager, next\"\r\n      :total=\"total\"\r\n      @current-change=\"changePage\"\r\n    />\r\n  </div>\r\n</template>\r\n\r\n<script lang=\"ts\">\r\nimport { defineComponent, reactive, ref, onMounted } from \"vue\";\r\nimport api from \"@/api/basestation\";\r\nimport { TYPES } from \"../constVariables\";\r\nimport { ICommonTableParams, IBasestaionArrItem } from \"../types\";\r\nimport { getPagination, getMap, getPagintionCount } from \"@/utils\";\r\nimport { getAllDevice } from \"@/utils/auth\";\r\nimport { ElMessage } from \"element-plus\";\r\nconst CLICKED = \"clicked\";\r\n\r\nexport default defineComponent({\r\n  name: \"Basestation\",\r\n  setup(props, { emit }) {\r\n    const params = reactive<ICommonTableParams>({\r\n      page: 1,\r\n      size: 10,\r\n      prop: \"dnum\",\r\n      search: \"\"\r\n    });\r\n    const tableData = ref<IBasestaionArrItem[]>([]);\r\n    const total = ref(0);\r\n\r\n    async function getList() {\r\n      // const res: unknown = await api.getStationList(params);\r\n      const deviceAll: any = getAllDevice();\r\n      const stationAll: any = [];\r\n      deviceAll.filter((item: any) => {\r\n        if (item.dtypecode === \"LocateStation\") {\r\n          stationAll.push(item);\r\n        }\r\n      });\r\n      const res =\r\n        params.search === \"\"\r\n          ? getPagination(stationAll, params.page)\r\n          : getPagination(stationAll, params.page, params.prop, params.search);\r\n      tableData.value = res;\r\n      // tableData.value.forEach(value => {\r\n      //   value.status =\r\n      //     +new Date() - value.last_heart_time > 3600000 ? \"异常\" : \"正常\";\r\n      // });\r\n      total.value = getPagintionCount(\r\n        stationAll,\r\n        params.prop,\r\n        params.search\r\n      ) as number;\r\n    }\r\n\r\n    function handleEdit(row: IBasestaionArrItem) {\r\n      console.log(row);\r\n    }\r\n    async function getBaseStaionDetail(id: string) {\r\n      const params = {\r\n        act: \"fCGtP4nXdRZjr6TYeiN1611196242913\",\r\n        DeviceIdS: id\r\n      };\r\n\r\n      const res: unknown = await api.getStationData(params);\r\n      const { data } = res as any;\r\n      emit(\"showEquipDetails\", data[0][0], TYPES.basestation);\r\n      emit(CLICKED);\r\n    }\r\n    function handleDetail(row: IBasestaionArrItem) {\r\n      getBaseStaionDetail(row.dids);\r\n    }\r\n\r\n    function handleDelete(row: IBasestaionArrItem) {\r\n      api\r\n        .delStation(row.dids)\r\n        .then(() => {\r\n          ElMessage.success(\"删除成功\");\r\n        })\r\n        .catch(err => {\r\n          ElMessage.error(err);\r\n        });\r\n    }\r\n\r\n    function addEquip() {\r\n      emit(\"addEquip\", TYPES.camera);\r\n    }\r\n\r\n    async function changePage(page: number) {\r\n      params.page = page;\r\n      getList();\r\n    }\r\n\r\n    async function search() {\r\n      params.page = 1;\r\n      getList();\r\n    }\r\n\r\n    onMounted(() => {\r\n      getList();\r\n    });\r\n\r\n    return {\r\n      params,\r\n      tableData,\r\n      total,\r\n      handleEdit,\r\n      handleDetail,\r\n      handleDelete,\r\n      changePage,\r\n      search,\r\n      addEquip,\r\n      getMap\r\n    };\r\n  }\r\n});\r\n</script>\r\n","/*\r\n * @Description:\r\n * @Author: huxianc\r\n * @Date: 2020-12-25 15:29:27\r\n * @LastEditors: liufuqiang\r\n * @LastEditTime: 2021-01-21 16:24:31\r\n */\r\n\r\nimport http from \"@/utils/http3\";\r\n\r\nexport default {\r\n  // 增加基站\r\n  addStation(data: any) {\r\n    return http({\r\n      url: \"/equip/baseStation/\",\r\n      method: \"post\",\r\n      data\r\n    });\r\n  },\r\n  // 删除基站\r\n  delStation(id: string | number) {\r\n    return http({\r\n      url: `/equip/baseStation/${id}/`,\r\n      method: \"delete\"\r\n    });\r\n  },\r\n  // 获取基站详情\r\n  getStationData(data: any) {\r\n    return http({\r\n      url: `/rcaec/bigwa`,\r\n      method: \"post\",\r\n      data\r\n    });\r\n  },\r\n  // 筛选基站\r\n  getStationList(data: any) {\r\n    const { page, size } = data;\r\n    return http({\r\n      url: `/equip/baseStation/?page=${page}&size=${size}`\r\n    });\r\n  }\r\n};\r\n","\r\nimport { defineComponent, reactive, ref, onMounted } from \"vue\";\r\nimport api from \"@/api/basestation\";\r\nimport { TYPES } from \"../constVariables\";\r\nimport { ICommonTableParams, IBasestaionArrItem } from \"../types\";\r\nimport { getPagination, getMap, getPagintionCount } from \"@/utils\";\r\nimport { getAllDevice } from \"@/utils/auth\";\r\nimport { ElMessage } from \"element-plus\";\r\nconst CLICKED = \"clicked\";\r\n\r\nexport default defineComponent({\r\n  name: \"Basestation\",\r\n  setup(props, { emit }) {\r\n    const params = reactive<ICommonTableParams>({\r\n      page: 1,\r\n      size: 10,\r\n      prop: \"dnum\",\r\n      search: \"\"\r\n    });\r\n    const tableData = ref<IBasestaionArrItem[]>([]);\r\n    const total = ref(0);\r\n\r\n    async function getList() {\r\n      // const res: unknown = await api.getStationList(params);\r\n      const deviceAll: any = getAllDevice();\r\n      const stationAll: any = [];\r\n      deviceAll.filter((item: any) => {\r\n        if (item.dtypecode === \"LocateStation\") {\r\n          stationAll.push(item);\r\n        }\r\n      });\r\n      const res =\r\n        params.search === \"\"\r\n          ? getPagination(stationAll, params.page)\r\n          : getPagination(stationAll, params.page, params.prop, params.search);\r\n      tableData.value = res;\r\n      // tableData.value.forEach(value => {\r\n      //   value.status =\r\n      //     +new Date() - value.last_heart_time > 3600000 ? \"异常\" : \"正常\";\r\n      // });\r\n      total.value = getPagintionCount(\r\n        stationAll,\r\n        params.prop,\r\n        params.search\r\n      ) as number;\r\n    }\r\n\r\n    function handleEdit(row: IBasestaionArrItem) {\r\n      console.log(row);\r\n    }\r\n    async function getBaseStaionDetail(id: string) {\r\n      const params = {\r\n        act: \"fCGtP4nXdRZjr6TYeiN1611196242913\",\r\n        DeviceIdS: id\r\n      };\r\n\r\n      const res: unknown = await api.getStationData(params);\r\n      const { data } = res as any;\r\n      emit(\"showEquipDetails\", data[0][0], TYPES.basestation);\r\n      emit(CLICKED);\r\n    }\r\n    function handleDetail(row: IBasestaionArrItem) {\r\n      getBaseStaionDetail(row.dids);\r\n    }\r\n\r\n    function handleDelete(row: IBasestaionArrItem) {\r\n      api\r\n        .delStation(row.dids)\r\n        .then(() => {\r\n          ElMessage.success(\"删除成功\");\r\n        })\r\n        .catch(err => {\r\n          ElMessage.error(err);\r\n        });\r\n    }\r\n\r\n    function addEquip() {\r\n      emit(\"addEquip\", TYPES.camera);\r\n    }\r\n\r\n    async function changePage(page: number) {\r\n      params.page = page;\r\n      getList();\r\n    }\r\n\r\n    async function search() {\r\n      params.page = 1;\r\n      getList();\r\n    }\r\n\r\n    onMounted(() => {\r\n      getList();\r\n    });\r\n\r\n    return {\r\n      params,\r\n      tableData,\r\n      total,\r\n      handleEdit,\r\n      handleDetail,\r\n      handleDelete,\r\n      changePage,\r\n      search,\r\n      addEquip,\r\n      getMap\r\n    };\r\n  }\r\n});\r\n","import { render } from \"./basestationList.vue?vue&type=template&id=2c8f8d63\"\nimport script from \"./basestationList.vue?vue&type=script&lang=ts\"\nexport * from \"./basestationList.vue?vue&type=script&lang=ts\"\nscript.render = render\n\nexport default script","<!--\r\n * @Description:\r\n * @Author: huxianc\r\n * @Date: 2020-11-30 10:05:06\r\n * @LastEditors: huxianc\r\n * @LastEditTime: 2020-12-28 16:57:54\r\n-->\r\n<template>\r\n  <ul class=\"fence-box\">\r\n    <li\r\n      v-for=\"(item, index) in list\"\r\n      :key=\"index\"\r\n      :class=\"{ active: index === 0 }\"\r\n      @click=\"handleClick(item, index)\"\r\n    >\r\n      {{ item.label }}\r\n    </li>\r\n  </ul>\r\n</template>\r\n\r\n<script lang=\"ts\">\r\ninterface ILabel {\r\n  label: string;\r\n}\r\n\r\nconst emitObj = {\r\n  1: \"revoke\",\r\n  2: \"redraw\",\r\n  3: \"cancel\",\r\n  4: \"finish\"\r\n};\r\n\r\nimport { defineComponent } from \"vue\";\r\nexport default defineComponent({\r\n  name: \"FenceBox\",\r\n  emits: Object.keys(emitObj).map(key => emitObj[key]),\r\n  setup(props, { emit }) {\r\n    const list: ILabel[] = [\r\n      {\r\n        label: \"绘制\"\r\n      },\r\n      {\r\n        label: \"撤销\"\r\n      },\r\n      {\r\n        label: \"重新绘制\"\r\n      },\r\n      {\r\n        label: \"取消\"\r\n      },\r\n      {\r\n        label: \"完成\"\r\n      }\r\n    ];\r\n    function handleClick(item: ILabel, index: number) {\r\n      emit(emitObj[index]);\r\n    }\r\n    return {\r\n      list,\r\n      handleClick\r\n    };\r\n  }\r\n});\r\n</script>\r\n","\r\ninterface ILabel {\r\n  label: string;\r\n}\r\n\r\nconst emitObj = {\r\n  1: \"revoke\",\r\n  2: \"redraw\",\r\n  3: \"cancel\",\r\n  4: \"finish\"\r\n};\r\n\r\nimport { defineComponent } from \"vue\";\r\nexport default defineComponent({\r\n  name: \"FenceBox\",\r\n  emits: Object.keys(emitObj).map(key => emitObj[key]),\r\n  setup(props, { emit }) {\r\n    const list: ILabel[] = [\r\n      {\r\n        label: \"绘制\"\r\n      },\r\n      {\r\n        label: \"撤销\"\r\n      },\r\n      {\r\n        label: \"重新绘制\"\r\n      },\r\n      {\r\n        label: \"取消\"\r\n      },\r\n      {\r\n        label: \"完成\"\r\n      }\r\n    ];\r\n    function handleClick(item: ILabel, index: number) {\r\n      emit(emitObj[index]);\r\n    }\r\n    return {\r\n      list,\r\n      handleClick\r\n    };\r\n  }\r\n});\r\n","import { render } from \"./fenceBox.vue?vue&type=template&id=5c8de6d3\"\nimport script from \"./fenceBox.vue?vue&type=script&lang=ts\"\nexport * from \"./fenceBox.vue?vue&type=script&lang=ts\"\nscript.render = render\n\nexport default script","<!--\r\n * @Description:\r\n * @Author: huxianc\r\n * @Date: 2020-12-02 09:48:05\r\n * @LastEditors: liufuqiang\r\n * @LastEditTime: 2021-01-07 10:28:15\r\n * @LastEditors: huxianc\r\n * @LastEditTime: 2020-12-31 10:47:26\r\n-->\r\n<template>\r\n  <div\r\n    v-show=\"contextmenuList.length\"\r\n    ref=\"contextMenuRef\"\r\n    class=\"context-menu\"\r\n    :style=\"styleAttrs ? styleAttrs : {}\"\r\n    :class=\"{ hidden: hiddenRef }\"\r\n  >\r\n    <div\r\n      v-for=\"menuItem in contextmenuList\"\r\n      :key=\"menuItem.label\"\r\n      class=\"menu-item\"\r\n      @click=\"handleClickContentmenu(menuItem.clickCode)\"\r\n    >\r\n      {{ menuItem.label }}\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script lang=\"ts\">\r\nimport {\r\n  defineComponent,\r\n  nextTick,\r\n  onMounted,\r\n  PropType,\r\n  ref,\r\n  shallowReactive,\r\n  shallowRef,\r\n  watch\r\n} from \"vue\";\r\nimport { getCorrectPx } from \"../utils\";\r\nimport { TYPES } from \"../constVariables\";\r\nimport { IPos, IStyleLeftTop, TShapeType } from \"../types\";\r\n\r\nconst SHOW_DETAILS = \"showDetails\";\r\nconst TRACK_PLAYBACK = \"trackPlayback\";\r\nconst EDIT = \"edit\";\r\nconst CLICKED = \"clicked\";\r\nconst SEE_NOWVIDEO = \"seeNowVideo\";\r\nconst SEE_HISTORYVIDEO = \"seeHistoryVideo\";\r\n\r\nconst emits = [\r\n  SHOW_DETAILS,\r\n  TRACK_PLAYBACK,\r\n  EDIT,\r\n  CLICKED,\r\n  SEE_NOWVIDEO,\r\n  SEE_HISTORYVIDEO\r\n];\r\n\r\nexport default defineComponent({\r\n  props: {\r\n    type: {\r\n      type: String as PropType<TShapeType>,\r\n      default: TYPES.basestation\r\n    },\r\n    // 右键菜单列表\r\n    contextmenuList: {\r\n      type: Array,\r\n      default: () => []\r\n    },\r\n    // 传过来的鼠标位置\r\n    contxtmenuPosition: {\r\n      type: Object as PropType<IStyleLeftTop>,\r\n      default: () => ({})\r\n    }\r\n  },\r\n  emits,\r\n  setup(props, { emit }) {\r\n    const styleAttrs = shallowReactive<IPos>({ x: 0, y: 0 });\r\n    const hiddenRef = shallowRef<boolean>(true);\r\n\r\n    const contextMenuRef = ref();\r\n\r\n    function handleClickContentmenu(clickCode: string) {\r\n      if (emits.includes(clickCode)) {\r\n        emit(clickCode, props.type);\r\n      }\r\n      emit(CLICKED);\r\n    }\r\n\r\n    function getPx() {\r\n      nextTick(() => {\r\n        const res = getCorrectPx(\r\n          contextMenuRef.value as HTMLElement,\r\n          props.contxtmenuPosition\r\n        );\r\n\r\n        const positions = {};\r\n        for (const key in res) {\r\n          positions[key] = res[key] + \"px\";\r\n        }\r\n\r\n        Object.assign(styleAttrs, positions);\r\n        hiddenRef.value = false;\r\n      });\r\n    }\r\n\r\n    watch(\r\n      () => props.contxtmenuPosition,\r\n      () => {\r\n        getPx();\r\n      }\r\n    );\r\n\r\n    onMounted(() => {\r\n      getPx();\r\n    });\r\n\r\n    return {\r\n      contextMenuRef,\r\n      styleAttrs,\r\n      hiddenRef,\r\n      handleClickContentmenu,\r\n      getPx\r\n    };\r\n  }\r\n});\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n.context-menu {\r\n  padding: 10px 0;\r\n  position: absolute;\r\n  z-index: 999999;\r\n  background: #fff;\r\n  border-radius: 4px;\r\n  border: 1px solid #ebeef5;\r\n  box-shadow: 0 2px 12px 0 rgba(0, 0, 0, 0.1);\r\n  left: 0px;\r\n  top: 30px;\r\n\r\n  &.hidden {\r\n    visibility: hidden;\r\n  }\r\n\r\n  .menu-item {\r\n    padding: 0 20px;\r\n    font-size: 14px;\r\n    color: #606266;\r\n    line-height: 36px;\r\n    outline: none;\r\n    cursor: pointer;\r\n    white-space: nowrap;\r\n\r\n    &:hover {\r\n      background: #ecf5ff;\r\n      color: #66b1ff;\r\n    }\r\n  }\r\n}\r\n</style>\r\n","\r\nimport {\r\n  defineComponent,\r\n  nextTick,\r\n  onMounted,\r\n  PropType,\r\n  ref,\r\n  shallowReactive,\r\n  shallowRef,\r\n  watch\r\n} from \"vue\";\r\nimport { getCorrectPx } from \"../utils\";\r\nimport { TYPES } from \"../constVariables\";\r\nimport { IPos, IStyleLeftTop, TShapeType } from \"../types\";\r\n\r\nconst SHOW_DETAILS = \"showDetails\";\r\nconst TRACK_PLAYBACK = \"trackPlayback\";\r\nconst EDIT = \"edit\";\r\nconst CLICKED = \"clicked\";\r\nconst SEE_NOWVIDEO = \"seeNowVideo\";\r\nconst SEE_HISTORYVIDEO = \"seeHistoryVideo\";\r\n\r\nconst emits = [\r\n  SHOW_DETAILS,\r\n  TRACK_PLAYBACK,\r\n  EDIT,\r\n  CLICKED,\r\n  SEE_NOWVIDEO,\r\n  SEE_HISTORYVIDEO\r\n];\r\n\r\nexport default defineComponent({\r\n  props: {\r\n    type: {\r\n      type: String as PropType<TShapeType>,\r\n      default: TYPES.basestation\r\n    },\r\n    // 右键菜单列表\r\n    contextmenuList: {\r\n      type: Array,\r\n      default: () => []\r\n    },\r\n    // 传过来的鼠标位置\r\n    contxtmenuPosition: {\r\n      type: Object as PropType<IStyleLeftTop>,\r\n      default: () => ({})\r\n    }\r\n  },\r\n  emits,\r\n  setup(props, { emit }) {\r\n    const styleAttrs = shallowReactive<IPos>({ x: 0, y: 0 });\r\n    const hiddenRef = shallowRef<boolean>(true);\r\n\r\n    const contextMenuRef = ref();\r\n\r\n    function handleClickContentmenu(clickCode: string) {\r\n      if (emits.includes(clickCode)) {\r\n        emit(clickCode, props.type);\r\n      }\r\n      emit(CLICKED);\r\n    }\r\n\r\n    function getPx() {\r\n      nextTick(() => {\r\n        const res = getCorrectPx(\r\n          contextMenuRef.value as HTMLElement,\r\n          props.contxtmenuPosition\r\n        );\r\n\r\n        const positions = {};\r\n        for (const key in res) {\r\n          positions[key] = res[key] + \"px\";\r\n        }\r\n\r\n        Object.assign(styleAttrs, positions);\r\n        hiddenRef.value = false;\r\n      });\r\n    }\r\n\r\n    watch(\r\n      () => props.contxtmenuPosition,\r\n      () => {\r\n        getPx();\r\n      }\r\n    );\r\n\r\n    onMounted(() => {\r\n      getPx();\r\n    });\r\n\r\n    return {\r\n      contextMenuRef,\r\n      styleAttrs,\r\n      hiddenRef,\r\n      handleClickContentmenu,\r\n      getPx\r\n    };\r\n  }\r\n});\r\n","import { render } from \"./contextmenuContent.vue?vue&type=template&id=6e671808&scoped=true\"\nimport script from \"./contextmenuContent.vue?vue&type=script&lang=ts\"\nexport * from \"./contextmenuContent.vue?vue&type=script&lang=ts\"\n\nimport \"./contextmenuContent.vue?vue&type=style&index=0&id=6e671808&lang=scss&scoped=true\"\nscript.render = render\nscript.__scopeId = \"data-v-6e671808\"\n\nexport default script","<!--\r\n * @Description:\r\n * @Author: huxianc\r\n * @Date: 2020-12-03 17:03:54\r\n * @LastEditors: huxianc\r\n * @LastEditTime: 2021-01-27 15:45:15\r\n-->\r\n\r\n<template>\r\n  <div v-drag-dialog=\"`form-header,custom-form`\">\r\n    <div class=\"custom-form\">\r\n      <div class=\"form-header\">\r\n        <div class=\"title\">{{ formTitle }}</div>\r\n        <button class=\"closebtx\" @click=\"handleClickHeaderClose\">\r\n          <i class=\"el-icon el-icon-close\" />\r\n        </button>\r\n      </div>\r\n      <div class=\"form-body\">\r\n        <el-form\r\n          ref=\"formContentRef\"\r\n          :model=\"form\"\r\n          :rules=\"rules\"\r\n          label-width=\"110px\"\r\n          :inline=\"false\"\r\n          size=\"small\"\r\n        >\r\n          <!-- 标签 -->\r\n          <el-row v-if=\"formType === types.labelList\" :gutter=\"10\">\r\n            <el-col :span=\"12\" :offset=\"0\">\r\n              <el-form-item label=\"名称：\" prop=\"shapeName\">\r\n                {{ form.DeviceName }}\r\n              </el-form-item>\r\n            </el-col>\r\n            <el-col :span=\"12\" :offset=\"0\"\r\n              ><el-form-item label=\"编号：\" prop=\"roomNum\">\r\n                {{ form.DeviceNum }}\r\n              </el-form-item></el-col\r\n            >\r\n            <el-col :span=\"12\" :offset=\"0\">\r\n              <el-form-item label=\"类型：\">\r\n                {{ form.DeviceType }}\r\n              </el-form-item>\r\n            </el-col>\r\n            <el-col :span=\"12\" :offset=\"0\">\r\n              <el-form-item label=\"位置：\">\r\n                {{ form.SceneName || \"未上线\" }}\r\n              </el-form-item>\r\n            </el-col>\r\n            <el-col :span=\"12\" :offset=\"0\">\r\n              <el-form-item label=\"状态：\">\r\n                {{ form.IsUse ? \"正常\" : \"异常\" }}\r\n              </el-form-item>\r\n            </el-col>\r\n            <el-col :span=\"12\" :offset=\"0\">\r\n              <el-form-item label=\"电量：\">\r\n                {{ form.shapeName }}\r\n              </el-form-item>\r\n            </el-col>\r\n          </el-row>\r\n          <!-- 人员 -->\r\n          <el-row v-else-if=\"formType === types.person\" :gutter=\"10\">\r\n            <el-col :span=\"12\" :offset=\"0\">\r\n              <el-form-item label=\"姓名：\" prop=\"shapeName\">\r\n                {{ form.Username }}\r\n              </el-form-item>\r\n            </el-col>\r\n            <el-col :span=\"12\" :offset=\"0\"\r\n              ><el-form-item label=\"标签：\" prop=\"roomNum\">\r\n                {{ form.DeviceName ? form.DeviceName : \"未绑定\" }}\r\n              </el-form-item></el-col\r\n            >\r\n            <el-col :span=\"24\" :offset=\"0\"\r\n              ><el-form-item label=\"照片：\">\r\n                <el-image\r\n                  :src=\"form.Photo ? form.Photo : form.src\"\r\n                /> </el-form-item\r\n            ></el-col>\r\n            <el-col :span=\"12\" :offset=\"0\">\r\n              <el-form-item label=\"类型：\">\r\n                {{ form.Personnel_category }}\r\n              </el-form-item>\r\n            </el-col>\r\n            <el-col :span=\"12\" :offset=\"0\">\r\n              <el-form-item label=\"职位：\">\r\n                {{ form.Position }}\r\n              </el-form-item>\r\n            </el-col>\r\n            <el-col :span=\"12\" :offset=\"0\">\r\n              <el-form-item label=\"状态：\">\r\n                {{ form.Fettle === 0 ? \"上船\" : \"离船\" }}\r\n              </el-form-item>\r\n            </el-col>\r\n            <el-col :span=\"12\" :offset=\"0\">\r\n              <el-form-item label=\"电量：\">\r\n                {{ form.BraceletVoltage }}\r\n              </el-form-item>\r\n            </el-col>\r\n          </el-row>\r\n          <!-- 基站 -->\r\n          <el-row v-else-if=\"formType === types.basestation\" :gutter=\"10\">\r\n            <el-col :span=\"24\" :offset=\"0\">\r\n              <el-form-item label=\"基站名称：\" prop=\"shapeName\">\r\n                <el-input\r\n                  v-if=\"editable\"\r\n                  v-model.trim=\"form.DeviceName\"\r\n                  placeholder=\"请输入基站名称\"\r\n                  clearable\r\n                />\r\n                <template v-else>{{ form.DeviceName }}</template>\r\n              </el-form-item>\r\n            </el-col>\r\n            <el-col :span=\"24\" :offset=\"0\">\r\n              <el-form-item label=\"基站编号：\" prop=\"ip\">\r\n                <el-input\r\n                  v-if=\"editable\"\r\n                  v-model.trim=\"form.DeviceNum\"\r\n                  placeholder=\"请输入基站编号\"\r\n                  clearable\r\n                />\r\n                <template v-else>{{ form.DeviceNum }}</template>\r\n              </el-form-item>\r\n            </el-col>\r\n            <el-col :span=\"12\" :offset=\"0\">\r\n              <el-form-item label=\"基站x：\" prop=\"x\">\r\n                <el-input\r\n                  v-if=\"editable\"\r\n                  v-model.trim=\"form.x\"\r\n                  placeholder=\"x\"\r\n                  clearable\r\n                />\r\n                <template v-else>{{ form.x }}</template>\r\n              </el-form-item>\r\n            </el-col>\r\n            <el-col :span=\"12\" :offset=\"0\">\r\n              <el-form-item label=\"基站y：\" prop=\"y\">\r\n                <el-input\r\n                  v-if=\"editable\"\r\n                  v-model.trim=\"form.y\"\r\n                  placeholder=\"y\"\r\n                  clearable\r\n                />\r\n                <template v-else>{{ form.y }}</template>\r\n              </el-form-item>\r\n            </el-col>\r\n            <el-col :span=\"24\" :offset=\"0\">\r\n              <el-form-item label=\"基站类型：\" prop=\"type\">\r\n                <el-select\r\n                  v-if=\"editable\"\r\n                  v-model=\"form.DeviceType\"\r\n                  clearable\r\n                  placeholder=\"请选择基站类型\"\r\n                >\r\n                  <el-option label=\"零维基站\" value=\"0\" />\r\n                  <el-option label=\"一维基站\" value=\"1\" />\r\n                </el-select>\r\n                <template v-else>{{ form.DeviceType }}</template>\r\n              </el-form-item>\r\n            </el-col>\r\n          </el-row>\r\n          <!-- 摄像头 -->\r\n          <el-row v-else :gutter=\"10\">\r\n            <el-col :span=\"24\" :offset=\"0\">\r\n              <el-form-item label=\"摄像头名称：\" prop=\"shapeName\">\r\n                <el-input\r\n                  v-if=\"editable\"\r\n                  v-model.trim=\"form.DeviceName\"\r\n                  placeholder=\"请输入摄像头名称\"\r\n                  clearable\r\n                />\r\n                <template v-else>{{ form.DeviceName }}</template>\r\n              </el-form-item>\r\n            </el-col>\r\n            <!-- <el-col :span=\"24\" :offset=\"0\">\r\n              <el-form-item label=\"摄像头方向：\" prop=\"direction\">\r\n                <el-select\r\n                  v-if=\"editable\"\r\n                  v-model=\"form.direction\"\r\n                  placeholder=\"\"\r\n                  @change=\"changeDirection\"\r\n                >\r\n                  <el-option\r\n                    v-for=\"item in cameraDirection\"\r\n                    :key=\"item.value\"\r\n                    :label=\"item.label\"\r\n                    :value=\"item.value\"\r\n                  />\r\n                </el-select>\r\n\r\n                <template v-else>{{\r\n                  cameraDirectionFormate(form.direction)\r\n                }}</template>\r\n              </el-form-item>\r\n            </el-col> -->\r\n            <el-col :span=\"24\" :offset=\"0\">\r\n              <el-form-item label=\"摄像头ip：\" prop=\"DeviceNum\">\r\n                <el-input\r\n                  v-if=\"editable\"\r\n                  v-model.trim=\"form.DeviceNum\"\r\n                  placeholder=\"请输入摄像头ip\"\r\n                  clearable\r\n                />\r\n                <template v-else>\r\n                  {{ form.DeviceNum }}\r\n                </template>\r\n              </el-form-item>\r\n            </el-col>\r\n            <el-col :span=\"12\" :offset=\"0\">\r\n              <el-form-item label=\"摄像头x：\" prop=\"x\">\r\n                <el-input\r\n                  v-if=\"editable\"\r\n                  v-model.trim=\"form.x\"\r\n                  placeholder=\"x\"\r\n                  clearable\r\n                />\r\n                <template v-else>{{ form.x }}</template>\r\n              </el-form-item>\r\n            </el-col>\r\n            <el-col :span=\"12\" :offset=\"0\">\r\n              <el-form-item label=\"摄像头y：\" prop=\"y\">\r\n                <el-input\r\n                  v-if=\"editable\"\r\n                  v-model.trim=\"form.y\"\r\n                  placeholder=\"y\"\r\n                  clearable\r\n                />\r\n                <template v-else>{{ form.y }}</template>\r\n              </el-form-item>\r\n            </el-col>\r\n            <el-col :span=\"12\" :offset=\"0\" />\r\n          </el-row>\r\n\r\n          <!-- 通用的备注 -->\r\n          <el-row :gutter=\"0\">\r\n            <el-col :span=\"24\" :offset=\"0\">\r\n              <el-form-item label=\"备注：\" prop=\"desc\">\r\n                <el-input v-if=\"editable\" v-model=\"form.desc\" type=\"textarea\" />\r\n                <template v-else>{{ form.desc }}</template>\r\n              </el-form-item>\r\n            </el-col>\r\n          </el-row>\r\n\r\n          <el-form-item>\r\n            <!-- <el-button v-if=\"editable\" type=\"primary\" @click=\"handleClick\"\r\n              >提交</el-button\r\n            > -->\r\n            <!-- 隐藏form的 取消 -->\r\n            <!-- <el-button v-if=\"!editable\" @click=\"$emit('close')\">取消</el-button> -->\r\n            <!-- 新增 编辑的 取消 -->\r\n            <!-- <el-button v-else @click=\"$emit('cancelForm')\">取消</el-button> -->\r\n          </el-form-item>\r\n        </el-form>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script lang=\"ts\">\r\nimport dragDialog from \"../directive/drag-dialog\";\r\nimport { cameraDirectionFormate } from \"../filter\";\r\nimport { TYPES, cameraDirection } from \"../constVariables\";\r\nimport { commonRuleItem, customFuncRule } from \"@/utils\";\r\nimport {\r\n  computed,\r\n  defineComponent,\r\n  nextTick,\r\n  PropType,\r\n  reactive,\r\n  ref,\r\n  watch\r\n} from \"vue\";\r\nimport { bgImageConfig } from \"../constVariables\";\r\nimport { TShapeType } from \"../types\";\r\nimport { IELForm } from \"../types/element\";\r\n\r\nconst UPDATE_X = \"updateX\";\r\nconst UPDATE_Y = \"updateY\";\r\nconst CONFIRM = \"confirm\";\r\nconst CHANGE_DIRECTION = \"changeDirection\";\r\nconst CANCEL_FORM = \"cancelForm\";\r\nconst CLOSE = \"close\";\r\n\r\nexport default defineComponent({\r\n  name: \"FormContent\",\r\n  directives: { \"drag-dialog\": dragDialog },\r\n  props: {\r\n    // 是否是新增类型\r\n    isAdd: {\r\n      type: Boolean,\r\n      default: false\r\n    },\r\n    formType: {\r\n      type: String as PropType<TShapeType>,\r\n      default: TYPES.person\r\n    },\r\n    editable: {\r\n      type: Boolean,\r\n      default: false\r\n    },\r\n    x: { type: Number, default: 0 },\r\n    y: { type: Number, default: 0 },\r\n    formData: {\r\n      type: Object,\r\n      default: () => ({})\r\n    },\r\n    mapId: {\r\n      type: [String, Number],\r\n      required: true\r\n    }\r\n  },\r\n  emits: [UPDATE_X, UPDATE_Y, CONFIRM, CHANGE_DIRECTION, CANCEL_FORM, CLOSE],\r\n  setup(props, { emit }) {\r\n    const formContentRef = ref();\r\n\r\n    const form = reactive({\r\n      // 人员\r\n      roomNum: \"1\",\r\n      src: \"/images/staff_big.png\",\r\n      // 基站\r\n      ip: \"10.1.200.16\",\r\n      x: \"\",\r\n      y: \"\",\r\n      type: \"\",\r\n\r\n      AlarmMappingLayerIdS: \"\",\r\n      BrandCode: \"\",\r\n      BrandName: \"\",\r\n      BuildingName: \"\",\r\n      BuildingNum: \"\",\r\n      CreateTime: \"\",\r\n      DeviceName: \"\",\r\n      DeviceNum: \"\",\r\n      DeviceObjProperty: \"\",\r\n      DeviceSelfPointRelation: \"\",\r\n      DeviceType: \"\",\r\n      DeviceTypeCode: \"\",\r\n      InstallSceneNum: \"\",\r\n      IsUse: true,\r\n      OwnAlarmSourceCode: \"\",\r\n      PDeviceIds: \"\",\r\n      SceneName: \"\",\r\n\r\n      // 摄像头\r\n      direction: \"1\",\r\n      // 公共\r\n      shapeName: \"\",\r\n      desc: \"\"\r\n    });\r\n\r\n    const checkIp = (rule: any, value: string, callback: Function) => {\r\n      if (!value) {\r\n        return callback(new Error(\"ip不能为空\"));\r\n      }\r\n      const pattern = /((2(5[0-5]|[0-4]\\d))|[0-1]?\\d{1,2})(\\.((2(5[0-5]|[0-4]\\d))|[0-1]?\\d{1,2})){3}/g;\r\n      if (pattern.test(value)) {\r\n        callback();\r\n      } else {\r\n        return callback(new Error(\"请输入正确的ip地址\"));\r\n      }\r\n    };\r\n\r\n    const checkPos = (\r\n      rule: any,\r\n      value: string | number,\r\n      callback: Function\r\n    ) => {\r\n      if (!value) {\r\n        return callback(new Error(\"不能为空\"));\r\n      }\r\n      value = Number(value);\r\n      if (!Number.isInteger(value)) {\r\n        callback(new Error(\"请输入数字值\"));\r\n      } else {\r\n        callback();\r\n      }\r\n    };\r\n\r\n    const checkPosX = (\r\n      rule: any,\r\n      value: string | number,\r\n      callback: Function\r\n    ) => {\r\n      const w = bgImageConfig.width;\r\n      if (value >= w) {\r\n        callback(new Error(`超出最大值${w - 1}`));\r\n      } else if (value < 0) {\r\n        callback(new Error(`x坐标不能小于0`));\r\n      } else {\r\n        emit(UPDATE_X, value);\r\n        callback();\r\n      }\r\n    };\r\n    const checkPosY = (\r\n      rule: any,\r\n      value: string | number,\r\n      callback: Function\r\n    ) => {\r\n      const h = bgImageConfig.height;\r\n      if (value >= h) {\r\n        callback(new Error(`超出最大值${h - 1}`));\r\n      } else if (value < 0) {\r\n        callback(new Error(`y坐标不能小于0`));\r\n      } else {\r\n        emit(UPDATE_Y, value);\r\n        callback();\r\n      }\r\n    };\r\n\r\n    const rules = {\r\n      shapeName: [commonRuleItem(\"请输入名称\")],\r\n      ip: [customFuncRule(checkIp)],\r\n      x: [customFuncRule(checkPos), customFuncRule(checkPosX)],\r\n      y: [customFuncRule(checkPos), customFuncRule(checkPosY)],\r\n      type: [commonRuleItem(\"请选择基站类型\")],\r\n      direction: [commonRuleItem(\"请选择摄像头方向\")],\r\n      DeviceNum: [commonRuleItem(\"请输入摄像头ip\")]\r\n    };\r\n    const types = TYPES;\r\n\r\n    const formTitle = computed(() => {\r\n      const title = {\r\n        [TYPES.camera]: \"摄像头\",\r\n        [TYPES.basestation]: \"基站\",\r\n        [TYPES.labelList]: \"标签\",\r\n        [TYPES.person]: \"人员\"\r\n      };\r\n      return title[props.formType];\r\n    });\r\n\r\n    /**\r\n     * @description: 摄像头方向变更\r\n     * @param {*} direction\r\n     * @return {*}\r\n     */\r\n    function changeDirection(direction: string) {\r\n      emit(CHANGE_DIRECTION, direction);\r\n    }\r\n    function handleClickHeaderClose() {\r\n      const emitName = props.editable ? CANCEL_FORM : CLOSE;\r\n      emit(emitName);\r\n    }\r\n\r\n    function resetFields() {\r\n      (formContentRef.value as IELForm).resetFields();\r\n    }\r\n\r\n    function handleClick() {\r\n      (formContentRef.value as IELForm).validate((valid: boolean) => {\r\n        if (valid) {\r\n          // 提交事件 数据就是form\r\n          emit(CONFIRM, form);\r\n        }\r\n      });\r\n    }\r\n\r\n    watch(\r\n      () => props.formData,\r\n      newVal => {\r\n        nextTick(() => {\r\n          if (newVal) {\r\n            console.log(\"newVal\", newVal);\r\n            Object.assign(form, newVal);\r\n            form.x = String(props.x);\r\n            form.y = String(props.y);\r\n          }\r\n        });\r\n      }\r\n    );\r\n\r\n    watch(\r\n      () => props.x,\r\n      newX => {\r\n        console.log(\"x\", newX);\r\n        if (!isNaN(newX)) {\r\n          form.x = String(newX);\r\n        }\r\n      }\r\n    );\r\n    watch(\r\n      () => props.y,\r\n      newY => {\r\n        if (!isNaN(newY)) {\r\n          form.y = String(newY);\r\n        }\r\n      }\r\n    );\r\n\r\n    // ? 不知道为啥 这样第一次拿到的y是0\r\n    // watch([() => props.x, () => props.y], ([newX], [newY]) => {\r\n    //   console.log(newX);\r\n    //   console.log(newY);\r\n\r\n    //   if (!isNaN(newX)) {\r\n    //     form.x = String(newX);\r\n    //   }\r\n    //   if (!isNaN(newY)) {\r\n    //     form.y = String(newY);\r\n    //   }\r\n    // });\r\n\r\n    return {\r\n      formContentRef,\r\n      cameraDirectionFormate,\r\n      formTitle,\r\n      form,\r\n      rules,\r\n      cameraDirection,\r\n      changeDirection,\r\n      handleClickHeaderClose,\r\n      types,\r\n      resetFields,\r\n      handleClick\r\n    };\r\n  }\r\n});\r\n</script>\r\n","/*\r\n * @Description:\r\n * @Author: huxianc\r\n * @Date: 2020-12-18 17:16:38\r\n * @LastEditors: huxianc\r\n * @LastEditTime: 2020-12-25 14:43:35\r\n */\r\nimport { cameraDirection } from \"../constVariables\";\r\n\r\n// 摄像头方向\r\nexport const cameraDirectionFormate = (direction: string | number) => {\r\n  const filters = {};\r\n  cameraDirection.forEach(item => {\r\n    filters[item.value] = item.label;\r\n  });\r\n  return filters[direction] || direction;\r\n};\r\n","\r\nimport dragDialog from \"../directive/drag-dialog\";\r\nimport { cameraDirectionFormate } from \"../filter\";\r\nimport { TYPES, cameraDirection } from \"../constVariables\";\r\nimport { commonRuleItem, customFuncRule } from \"@/utils\";\r\nimport {\r\n  computed,\r\n  defineComponent,\r\n  nextTick,\r\n  PropType,\r\n  reactive,\r\n  ref,\r\n  watch\r\n} from \"vue\";\r\nimport { bgImageConfig } from \"../constVariables\";\r\nimport { TShapeType } from \"../types\";\r\nimport { IELForm } from \"../types/element\";\r\n\r\nconst UPDATE_X = \"updateX\";\r\nconst UPDATE_Y = \"updateY\";\r\nconst CONFIRM = \"confirm\";\r\nconst CHANGE_DIRECTION = \"changeDirection\";\r\nconst CANCEL_FORM = \"cancelForm\";\r\nconst CLOSE = \"close\";\r\n\r\nexport default defineComponent({\r\n  name: \"FormContent\",\r\n  directives: { \"drag-dialog\": dragDialog },\r\n  props: {\r\n    // 是否是新增类型\r\n    isAdd: {\r\n      type: Boolean,\r\n      default: false\r\n    },\r\n    formType: {\r\n      type: String as PropType<TShapeType>,\r\n      default: TYPES.person\r\n    },\r\n    editable: {\r\n      type: Boolean,\r\n      default: false\r\n    },\r\n    x: { type: Number, default: 0 },\r\n    y: { type: Number, default: 0 },\r\n    formData: {\r\n      type: Object,\r\n      default: () => ({})\r\n    },\r\n    mapId: {\r\n      type: [String, Number],\r\n      required: true\r\n    }\r\n  },\r\n  emits: [UPDATE_X, UPDATE_Y, CONFIRM, CHANGE_DIRECTION, CANCEL_FORM, CLOSE],\r\n  setup(props, { emit }) {\r\n    const formContentRef = ref();\r\n\r\n    const form = reactive({\r\n      // 人员\r\n      roomNum: \"1\",\r\n      src: \"/images/staff_big.png\",\r\n      // 基站\r\n      ip: \"10.1.200.16\",\r\n      x: \"\",\r\n      y: \"\",\r\n      type: \"\",\r\n\r\n      AlarmMappingLayerIdS: \"\",\r\n      BrandCode: \"\",\r\n      BrandName: \"\",\r\n      BuildingName: \"\",\r\n      BuildingNum: \"\",\r\n      CreateTime: \"\",\r\n      DeviceName: \"\",\r\n      DeviceNum: \"\",\r\n      DeviceObjProperty: \"\",\r\n      DeviceSelfPointRelation: \"\",\r\n      DeviceType: \"\",\r\n      DeviceTypeCode: \"\",\r\n      InstallSceneNum: \"\",\r\n      IsUse: true,\r\n      OwnAlarmSourceCode: \"\",\r\n      PDeviceIds: \"\",\r\n      SceneName: \"\",\r\n\r\n      // 摄像头\r\n      direction: \"1\",\r\n      // 公共\r\n      shapeName: \"\",\r\n      desc: \"\"\r\n    });\r\n\r\n    const checkIp = (rule: any, value: string, callback: Function) => {\r\n      if (!value) {\r\n        return callback(new Error(\"ip不能为空\"));\r\n      }\r\n      const pattern = /((2(5[0-5]|[0-4]\\d))|[0-1]?\\d{1,2})(\\.((2(5[0-5]|[0-4]\\d))|[0-1]?\\d{1,2})){3}/g;\r\n      if (pattern.test(value)) {\r\n        callback();\r\n      } else {\r\n        return callback(new Error(\"请输入正确的ip地址\"));\r\n      }\r\n    };\r\n\r\n    const checkPos = (\r\n      rule: any,\r\n      value: string | number,\r\n      callback: Function\r\n    ) => {\r\n      if (!value) {\r\n        return callback(new Error(\"不能为空\"));\r\n      }\r\n      value = Number(value);\r\n      if (!Number.isInteger(value)) {\r\n        callback(new Error(\"请输入数字值\"));\r\n      } else {\r\n        callback();\r\n      }\r\n    };\r\n\r\n    const checkPosX = (\r\n      rule: any,\r\n      value: string | number,\r\n      callback: Function\r\n    ) => {\r\n      const w = bgImageConfig.width;\r\n      if (value >= w) {\r\n        callback(new Error(`超出最大值${w - 1}`));\r\n      } else if (value < 0) {\r\n        callback(new Error(`x坐标不能小于0`));\r\n      } else {\r\n        emit(UPDATE_X, value);\r\n        callback();\r\n      }\r\n    };\r\n    const checkPosY = (\r\n      rule: any,\r\n      value: string | number,\r\n      callback: Function\r\n    ) => {\r\n      const h = bgImageConfig.height;\r\n      if (value >= h) {\r\n        callback(new Error(`超出最大值${h - 1}`));\r\n      } else if (value < 0) {\r\n        callback(new Error(`y坐标不能小于0`));\r\n      } else {\r\n        emit(UPDATE_Y, value);\r\n        callback();\r\n      }\r\n    };\r\n\r\n    const rules = {\r\n      shapeName: [commonRuleItem(\"请输入名称\")],\r\n      ip: [customFuncRule(checkIp)],\r\n      x: [customFuncRule(checkPos), customFuncRule(checkPosX)],\r\n      y: [customFuncRule(checkPos), customFuncRule(checkPosY)],\r\n      type: [commonRuleItem(\"请选择基站类型\")],\r\n      direction: [commonRuleItem(\"请选择摄像头方向\")],\r\n      DeviceNum: [commonRuleItem(\"请输入摄像头ip\")]\r\n    };\r\n    const types = TYPES;\r\n\r\n    const formTitle = computed(() => {\r\n      const title = {\r\n        [TYPES.camera]: \"摄像头\",\r\n        [TYPES.basestation]: \"基站\",\r\n        [TYPES.labelList]: \"标签\",\r\n        [TYPES.person]: \"人员\"\r\n      };\r\n      return title[props.formType];\r\n    });\r\n\r\n    /**\r\n     * @description: 摄像头方向变更\r\n     * @param {*} direction\r\n     * @return {*}\r\n     */\r\n    function changeDirection(direction: string) {\r\n      emit(CHANGE_DIRECTION, direction);\r\n    }\r\n    function handleClickHeaderClose() {\r\n      const emitName = props.editable ? CANCEL_FORM : CLOSE;\r\n      emit(emitName);\r\n    }\r\n\r\n    function resetFields() {\r\n      (formContentRef.value as IELForm).resetFields();\r\n    }\r\n\r\n    function handleClick() {\r\n      (formContentRef.value as IELForm).validate((valid: boolean) => {\r\n        if (valid) {\r\n          // 提交事件 数据就是form\r\n          emit(CONFIRM, form);\r\n        }\r\n      });\r\n    }\r\n\r\n    watch(\r\n      () => props.formData,\r\n      newVal => {\r\n        nextTick(() => {\r\n          if (newVal) {\r\n            console.log(\"newVal\", newVal);\r\n            Object.assign(form, newVal);\r\n            form.x = String(props.x);\r\n            form.y = String(props.y);\r\n          }\r\n        });\r\n      }\r\n    );\r\n\r\n    watch(\r\n      () => props.x,\r\n      newX => {\r\n        console.log(\"x\", newX);\r\n        if (!isNaN(newX)) {\r\n          form.x = String(newX);\r\n        }\r\n      }\r\n    );\r\n    watch(\r\n      () => props.y,\r\n      newY => {\r\n        if (!isNaN(newY)) {\r\n          form.y = String(newY);\r\n        }\r\n      }\r\n    );\r\n\r\n    // ? 不知道为啥 这样第一次拿到的y是0\r\n    // watch([() => props.x, () => props.y], ([newX], [newY]) => {\r\n    //   console.log(newX);\r\n    //   console.log(newY);\r\n\r\n    //   if (!isNaN(newX)) {\r\n    //     form.x = String(newX);\r\n    //   }\r\n    //   if (!isNaN(newY)) {\r\n    //     form.y = String(newY);\r\n    //   }\r\n    // });\r\n\r\n    return {\r\n      formContentRef,\r\n      cameraDirectionFormate,\r\n      formTitle,\r\n      form,\r\n      rules,\r\n      cameraDirection,\r\n      changeDirection,\r\n      handleClickHeaderClose,\r\n      types,\r\n      resetFields,\r\n      handleClick\r\n    };\r\n  }\r\n});\r\n","import { render } from \"./formContent.vue?vue&type=template&id=2034be8a\"\nimport script from \"./formContent.vue?vue&type=script&lang=ts\"\nexport * from \"./formContent.vue?vue&type=script&lang=ts\"\nscript.render = render\n\nexport default script","<!--\r\n * @Description:\r\n * @Author: huxianc\r\n * @Date: 2020-12-07 14:44:21\r\n * @LastEditors: huxianc\r\n * @LastEditTime: 2020-12-07 14:52:41\r\n-->\r\n<template>\r\n  <ul class=\"fence-box\">\r\n    <li\r\n      v-for=\"(item, index) in list\"\r\n      :key=\"index\"\r\n      @click=\"handleClick(item, index)\"\r\n    >\r\n      {{ item.label }}\r\n    </li>\r\n  </ul>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  name: \"FenceBox\",\r\n  data() {\r\n    return {\r\n      list: [\r\n        {\r\n          label: \"取消\"\r\n        },\r\n        {\r\n          label: \"完成\"\r\n        }\r\n      ]\r\n    };\r\n  },\r\n  methods: {\r\n    handleClick(item, index) {\r\n      const emitObj = {\r\n        0: \"cancel\",\r\n        1: \"finish\"\r\n      };\r\n\r\n      this.$emit(emitObj[index]);\r\n    }\r\n  }\r\n};\r\n</script>\r\n","import { render } from \"./trackPlaybackMenu.vue?vue&type=template&id=2f3fb5d9\"\nimport script from \"./trackPlaybackMenu.vue?vue&type=script&lang=js\"\nexport * from \"./trackPlaybackMenu.vue?vue&type=script&lang=js\"\nscript.render = render\n\nexport default script","<!--\r\n * @Author: your name\r\n * @Date: 2020-11-30 15:11:38\r\n * @LastEditTime: 2020-12-25 17:48:46\r\n * @LastEditors: huxianc\r\n * @Description: In User Settings Edit\r\n * @FilePath: \\watercraft-front\\src\\views\\home\\components\\waterAlarm.vue\r\n-->\r\n<template>\r\n  <div v-if=\"visible\" class=\"canvas-container\">\r\n    <canvas\r\n      id=\"water-alarm-canvas\"\r\n      ref=\"waterAlarmCanvas\"\r\n      @click=\"clickHandler\"\r\n    />\r\n    <i class=\"el-icon-close hidden-icon\" @click=\"hiddenBox\" />\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  name: \"WaterAlarm\",\r\n  props: {\r\n    visible: {\r\n      type: Boolean,\r\n      default: false\r\n    }\r\n  },\r\n  data() {\r\n    return {\r\n      ctx: null,\r\n      radarR: 60, // 雷达扩散范围\r\n      radarR1: 150, // 雷达扩散范围1\r\n      shipImg: null, // 船的图\r\n      shipDeg: 0, // 船方向\r\n      alpha: 0.1, // 人员透明度\r\n      personPosArr: [\r\n        [100, 100],\r\n        [400, 100]\r\n      ] // 落水人员canvas上的坐标\r\n    };\r\n  },\r\n  mounted() {\r\n    this.visible && this.init();\r\n  },\r\n  methods: {\r\n    init() {\r\n      const { clientWidth, clientHeight } = this.$el;\r\n      this.$refs.waterAlarmCanvas.width = clientWidth;\r\n      this.$refs.waterAlarmCanvas.height = clientHeight;\r\n      this.ctx = this.$refs.waterAlarmCanvas.getContext(\"2d\");\r\n      this.shipImg = new Image();\r\n      this.shipImg.src = \"/images/car.png\";\r\n      this.shipImg.onload = () => {\r\n        const data = {\r\n          ctx: this.ctx,\r\n          shipImg: this.shipImg,\r\n          shipWidth: 60,\r\n          shipHeight: 60,\r\n          shipDeg: this.shipDeg,\r\n          radarR: this.radarR,\r\n          radarR1: this.radarR1,\r\n          alpha: this.alpha,\r\n          personPosArr: this.personPosArr\r\n        };\r\n        this.drawScene(data);\r\n        this.animate();\r\n      };\r\n    },\r\n    // animate(shipImg) {\r\n    animate() {\r\n      if (!this.visible) {\r\n        return;\r\n      }\r\n      requestAnimationFrame(this.animate);\r\n      // const timer = requestAnimationFrame(this.animate);\r\n      // this.$once(\"hook:beforeDestroy\", () => {\r\n      //   cancelAnimationFrame(timer);\r\n      // });\r\n      const data = {\r\n        ctx: this.ctx,\r\n        shipImg: this.shipImg,\r\n        shipWidth: 60,\r\n        shipHeight: 60,\r\n        shipDeg: this.shipDeg,\r\n        radarR: this.radarR,\r\n        radarR1: this.radarR1,\r\n        alpha: this.alpha,\r\n        personPosArr: this.personPosArr\r\n      };\r\n      this.drawScene(data);\r\n      // 调整参数\r\n      this.shipDeg = Math.random() * Math.PI * 2;\r\n      this.radarR = this.radarR > 300 ? 0 : ++this.radarR;\r\n      this.radarR1 = this.radarR1 > 300 ? 0 : ++this.radarR1;\r\n      this.alpha += 0.01;\r\n      this.alpha = this.alpha > 1 ? 0.1 : this.alpha;\r\n    },\r\n    drawScene(data) {\r\n      const {\r\n        ctx,\r\n        shipImg,\r\n        shipWidth,\r\n        shipHeight,\r\n        shipDeg,\r\n        radarR,\r\n        radarR1,\r\n        alpha,\r\n        personPosArr\r\n      } = data;\r\n      const { width, height } = this.$refs.waterAlarmCanvas;\r\n      ctx.clearRect(0, 0, width, height);\r\n      // 绘制基础元素\r\n      this.drawBasicIcon(ctx, width, height);\r\n      // 绘制雷达扩散\r\n      this.drawRadar({ ctx: ctx, pos: [width / 2, height / 2], r: radarR });\r\n      this.drawRadar({ ctx: ctx, pos: [width / 2, height / 2], r: radarR1 });\r\n      // 绘制落水人员\r\n      this.drawPerson(ctx, personPosArr, alpha);\r\n      // 绘制船\r\n      ctx.save();\r\n      ctx.translate(width / 2, height / 2);\r\n      ctx.rotate(shipDeg);\r\n      ctx.drawImage(\r\n        shipImg,\r\n        -shipWidth / 2,\r\n        -shipHeight / 2,\r\n        shipWidth,\r\n        shipHeight\r\n      );\r\n      ctx.restore();\r\n    },\r\n    /**\r\n     * @description: 绘制基础元素\r\n     * @param {*}\r\n     * @return {*}\r\n     */\r\n    drawBasicIcon(ctx, canvasWidth, canvasHeight) {\r\n      // 绘制定位范围圈\r\n      ctx.beginPath();\r\n      ctx.fillStyle = \"#2CA3FF\";\r\n      ctx.arc(\r\n        canvasWidth / 2,\r\n        canvasHeight / 2,\r\n        canvasWidth / 2,\r\n        0,\r\n        Math.PI * 2\r\n      );\r\n      ctx.fill();\r\n      ctx.closePath();\r\n      // 绘制十字线\r\n      ctx.beginPath();\r\n      ctx.lineCap = \"round\";\r\n      ctx.strokeStyle = \"#fff\";\r\n      ctx.lineWidth = 4;\r\n      ctx.moveTo(0, canvasHeight / 2);\r\n      ctx.lineTo(canvasWidth, canvasHeight / 2);\r\n      ctx.moveTo(canvasWidth / 2, 0);\r\n      ctx.lineTo(canvasWidth / 2, canvasHeight);\r\n      ctx.stroke();\r\n      ctx.closePath();\r\n      // 绘制距离范围\r\n      ctx.beginPath();\r\n      ctx.strokeStyle = \"#ffffff\";\r\n      for (let i = 0; i < 6; i++) {\r\n        ctx.arc(canvasWidth / 2, canvasHeight / 2, 50 * i, 0, Math.PI * 2);\r\n      }\r\n      ctx.lineWidth = 2;\r\n      ctx.stroke();\r\n      ctx.closePath();\r\n    },\r\n    /**\r\n     * @description: 绘制雷达扩散图\r\n     * @param {*}\r\n     * @return {*}\r\n     */\r\n    drawRadar(data) {\r\n      const { ctx, pos, r } = data;\r\n      ctx.beginPath();\r\n      const grd = ctx.createRadialGradient(\r\n        pos[0],\r\n        pos[1],\r\n        0,\r\n        pos[0],\r\n        pos[1],\r\n        r\r\n      );\r\n      grd.addColorStop(0, \"rgba(200,0,0,1.0)\");\r\n      grd.addColorStop(1, \"rgba(200,0,0,0.1)\");\r\n      ctx.fillStyle = grd;\r\n      ctx.arc(pos[0], pos[1], r, 0, Math.PI * 2);\r\n      ctx.fill();\r\n      ctx.closePath();\r\n    },\r\n    /**\r\n     * @description: 绘制落水人员\r\n     * @param {*}\r\n     * @return {*}\r\n     */\r\n    drawPerson(ctx, posArr, alpha) {\r\n      ctx.beginPath();\r\n      ctx.fillStyle = `rgba(255,0,0,${alpha})`;\r\n      posArr.forEach(value => {\r\n        ctx.arc(value[0], value[1], 4, 0, Math.PI * 2);\r\n      });\r\n      ctx.fill();\r\n      ctx.closePath();\r\n    },\r\n    hiddenBox() {\r\n      this.$emit(\"update:visible\", false);\r\n    },\r\n    /**\r\n     * @description: 点击canvas\r\n     * @param {*}\r\n     * @return {*}\r\n     */\r\n    clickHandler(e) {\r\n      console.log(e);\r\n      const arr = this.personPosArr;\r\n      const x = e.offsetX;\r\n      const y = e.offsetY;\r\n      for (let i = 0, length = arr.length; i < length; i++) {\r\n        if (\r\n          x > arr[i][0] - 4 &&\r\n          x < arr[i][0] + 4 &&\r\n          y > arr[i][1] - 4 &&\r\n          y < arr[i][1] + 4\r\n        ) {\r\n          this.$message(\"落水人员被点击了\");\r\n          return;\r\n        }\r\n      }\r\n    }\r\n  }\r\n};\r\n</script>\r\n<style lang=\"scss\" scoped>\r\n.canvas-container {\r\n  width: 100%;\r\n  height: 100%;\r\n  background: #fff;\r\n  position: relative;\r\n  & > #water-alarm-canvas {\r\n    width: 100%;\r\n    height: 100%;\r\n  }\r\n  .hidden-icon {\r\n    position: absolute;\r\n    top: 0;\r\n    right: 0;\r\n    font-size: 20px;\r\n    color: #000;\r\n    cursor: pointer;\r\n    &:hover {\r\n      background-color: rgba(0, 0, 0, 0.4);\r\n      color: #fff;\r\n    }\r\n  }\r\n}\r\n</style>\r\n","import { render } from \"./waterAlarm.vue?vue&type=template&id=297d393a&scoped=true\"\nimport script from \"./waterAlarm.vue?vue&type=script&lang=js\"\nexport * from \"./waterAlarm.vue?vue&type=script&lang=js\"\n\nimport \"./waterAlarm.vue?vue&type=style&index=0&id=297d393a&lang=scss&scoped=true\"\nscript.render = render\nscript.__scopeId = \"data-v-297d393a\"\n\nexport default script","<template>\r\n  <div>\r\n    <div ref=\"monitorListPanelRef\" class=\"historical-mon\">\r\n      <div class=\"top-title\">\r\n        <span>{{ cameraName }}</span>\r\n        <div style=\"width:10%\">\r\n          <el-switch\r\n            v-model=\"cameraHigh\"\r\n            class=\"switchStyle\"\r\n            active-text=\"高清\"\r\n            inactive-text=\"清晰\"\r\n            :active-value=\"true\"\r\n            :inactive-value=\"false\"\r\n            active-color=\"#13ce66\"\r\n            inactive-color=\"rgba(67, 67, 122, 1)\"\r\n            @change=\"changSwitch($event, cameraHigh)\"\r\n            >></el-switch\r\n          >\r\n        </div>\r\n        <button @click=\"hidden\" @touchstart.stop.prevent=\"hidden\" />\r\n      </div>\r\n      <!-- 视频 -->\r\n      <div class=\"h5videowrapper h5container\" :style=\"getStyle()\">\r\n        <span v-show=\"isLoading\">视频加载中...</span>\r\n        <video\r\n          ref=\"playerRef\"\r\n          class=\"live-video\"\r\n          muted\r\n          autoplay\r\n          controls=\"true\"\r\n          style=\"object-fit: fill\"\r\n        />\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n<script>\r\nimport flvjs from \"hd-flv\";\r\nimport { httpFlvServer } from \"@/utils/urls\";\r\nimport dragDialog from \"../directive/drag-dialog\";\r\nimport {\r\n  defineComponent,\r\n  onUnmounted,\r\n  ref,\r\n  nextTick,\r\n  reactive,\r\n  toRefs,\r\n  onMounted\r\n} from \"vue\";\r\nimport { ElMessage } from \"element-plus\";\r\nconst CHANGE_MONITORLISTPANEL_STATE = \"changeMonitorListPanelState\";\r\nexport default defineComponent({\r\n  name: \"MonitorList\",\r\n  directives: { dragDialog },\r\n  props: {\r\n    cameraData: {\r\n      type: Object,\r\n      required: true\r\n    },\r\n    livePlayCount: {\r\n      type: Number,\r\n      required: true\r\n    }\r\n  },\r\n  emits: [CHANGE_MONITORLISTPANEL_STATE],\r\n  setup(props, { emit }) {\r\n    const players = ref(); // player值\r\n    const data = reactive({\r\n      playList: {}, // 当前播放列表，最多同时4个\r\n      monitorPanelState: false, // 视频播放器弹框显示标识\r\n      serverHost: \"\", // Http_flv服务地址\r\n      cameraId: 0,\r\n      cameraName: \"\",\r\n      cameraHigh: false,\r\n      subtype: 2,\r\n      isLoading: false\r\n    });\r\n    const dataRef = toRefs(data);\r\n    const playerRef = ref();\r\n    function initPlayer(playList, subtype) {\r\n      // 初始化直播\r\n      if (flvjs.isSupported()) {\r\n        console.log(\"playerRef\", playerRef);\r\n        const video = playerRef.value; //video\r\n        if (video) {\r\n          data.isLoading = true;\r\n          const id = playList.camera.id; // 唯一id\r\n          data.cameraId = id;\r\n          data.cameraName = playList.camera.name;\r\n          let rtsp = `rtsp://${playList.camera.username}:${playList.camera.password}@${playList.camera.ip}?channel=1&subtype=${subtype}`; // rtsp地址\r\n          if (\r\n            playList.camera.brand === \"海康\" ||\r\n            playList.camera.brand === \"海康威视\"\r\n          ) {\r\n            rtsp = `rtsp://${playList.camera.username}:${playList.camera.password}@${playList.camera.ip}/Streaming/Channels/10${subtype}`; // rtsp地址\r\n          } else if (playList.camera.brand === \"大华\") {\r\n            rtsp = `rtsp://${playList.camera.username}:${playList.camera.password}@${playList.camera.ip}?channel=1&subtype=${subtype}`; // rtsp地址\r\n          }\r\n          console.log(\"rtsp\", rtsp);\r\n          players.value = playList.camera.player; // player\r\n          const Url = `${httpFlvServer}/${id}/?url=${encodeURIComponent(\r\n            rtsp\r\n          )}}&brand=${playList.camera.brand}`;\r\n          players.value = flvjs.createPlayer({\r\n            type: \"flv\",\r\n            isLive: true, // 支持直播流（通过isLive:true来设置）,false是点播\r\n            enableStashBuffer: false,\r\n            autoCleanupMaxBackwardDuration: 60,\r\n            autoCleanupMinBackwardDuration: 30,\r\n            statisticsInfoReportInterval: 2000,\r\n            stashInitialSize: 128 * 1024,\r\n            // 如果是Android浏览器，建议enableDurationMonitor设置为false\r\n            enableDurationMonitor: true, // true表示监测当前直播流延时，当发现延时过大时，主动追赶\r\n            enableVideoFrozenMonitor: true, // 监测视频解码是否停滞（画面卡停），当因为某些原因导致无法解码时，将上报VIDEO_FROZEN事件，收到后建议重拉流\r\n            // 如果是Safari浏览器，enableConstVideoViewSize建议设置为false\r\n            enableConstVideoViewSize: true,\r\n            url: Url\r\n          });\r\n          const player = players.value;\r\n          player.on(flvjs.Events.METADATA_ARRIVED, () => {\r\n            // console.log('--== meta data arrived ==--')\r\n            data.isLoading = false;\r\n            console.log(\"--== 视频资源到达 ==--\");\r\n          });\r\n          player.enableVideoStateMonitor(true); // 如果需要，可以动态开关{视频延时 + 解码停滞}监测\r\n\r\n          player.on(flvjs.Events.VIDEO_RESOLUTION_CHANGED, () => {\r\n            // ElMessage.error('视频分辨率发生变化')\r\n            // 更新播放列表\r\n            initPlayer(data.playList, data.subtype);\r\n            // console.log('--== video resolution changed, reload ==--')\r\n            console.log(\"视频分辨率发生变化\");\r\n          });\r\n          player.on(flvjs.Events.MEDIA_SOURCE_ENDED, () => {\r\n            // ElMessage.error('视频流已停止')\r\n            // 更新播放列表\r\n            initPlayer(data.playList, data.subtype);\r\n            // console.log('--== media source ended, normally means server stop push stream ==--')\r\n            console.log(\"视频流已停止\");\r\n          });\r\n          player.on(flvjs.Events.MEDIA_SOURCE_CLOSE, () => {\r\n            // ElMessage.error('视频源已关闭')\r\n            // console.log('--== media source close, show no source view ==--')\r\n            console.log(\"视频源已关闭\");\r\n          });\r\n\r\n          let paused = false;\r\n          video.addEventListener(\"pause\", function() {\r\n            // 暂停开始执行的函数\r\n            paused = true;\r\n          });\r\n          video.addEventListener(\"play\", function() {\r\n            // 播放开始执行的函数\r\n            paused = false;\r\n          });\r\n          player.on(flvjs.Events.NETWORK_ERROR, () => {\r\n            ElMessage.error(\"网络异常，无法加载该视频\");\r\n          });\r\n          player.on(flvjs.Events.MEDIA_ERROR, () => {\r\n            // ElMessage.error('视频源异常')\r\n            console.log(\"视频源异常\");\r\n          });\r\n\r\n          player.on(flvjs.Events.VIDEO_FROZEN, () => {\r\n            // console.log('--== video frozen ==--')\r\n            if (!paused) {\r\n              // 更新播放列表\r\n              initPlayer(data.playList, data.subtype);\r\n            }\r\n          });\r\n\r\n          player.on(flvjs.Events.ERROR, (errType, errDetail) => {\r\n            // ElMessage.error('视频加载失败，重新加载中...')\r\n            if (!paused) {\r\n              // 更新播放列表\r\n              initPlayer(data.playList, data.subtype);\r\n            }\r\n            console.log(\r\n              \"--== flvjs error, type:\" +\r\n                errType +\r\n                \", detail:\" +\r\n                errDetail +\r\n                \" ==--\"\r\n            );\r\n            console.log(\r\n              \"--== should set a timer(for example, 3 seconds) to reload current flv ==--\"\r\n            );\r\n          });\r\n\r\n          players.value.attachMediaElement(video);\r\n          try {\r\n            players.value.load();\r\n            players.value.play();\r\n          } catch (error) {\r\n            console.log(error);\r\n          }\r\n        }\r\n      }\r\n    }\r\n    //页面销毁\r\n    onUnmounted(() => {\r\n      // 关闭视频流\r\n      if (typeof players.value !== \"undefined\" && players.value.e != null) {\r\n        if (players.value != null) {\r\n          players.value.pause();\r\n          players.value.unload();\r\n          players.value.detachMediaElement();\r\n          players.value.destroy();\r\n        }\r\n      }\r\n    });\r\n    //动态样式\r\n    function getStyle() {\r\n      if (props.livePlayCount === 1) {\r\n        return \"width:100%; height:100%\";\r\n      } else {\r\n        return \"width:100%; height:26rem\";\r\n      }\r\n    }\r\n\r\n    // 关闭全部视频\r\n    function hidden() {\r\n      if (typeof players.value !== \"undefined\" && players.value.e != null) {\r\n        if (players.value != null) {\r\n          players.value.pause();\r\n          players.value.unload();\r\n          players.value.detachMediaElement();\r\n          players.value.destroy();\r\n        }\r\n      }\r\n      // 关闭\r\n      emit(CHANGE_MONITORLISTPANEL_STATE, data.cameraId);\r\n    }\r\n\r\n    // 切换清晰度\r\n    function changSwitch($event, value) {\r\n      data.cameraHigh = value;\r\n      if (data.cameraHigh) {\r\n        data.subtype = 1;\r\n      } else {\r\n        data.subtype = 2;\r\n      }\r\n      // 关闭视频流\r\n      if (typeof players.value !== \"undefined\" && players.value.e != null) {\r\n        if (players.value != null) {\r\n          players.value.pause();\r\n          players.value.unload();\r\n          players.value.detachMediaElement();\r\n          players.value.destroy();\r\n        }\r\n      }\r\n      nextTick(() => {\r\n        console.log(data.playList);\r\n        initPlayer(data.playList, data.subtype);\r\n      });\r\n    }\r\n\r\n    function initCameraData(newValue) {\r\n      if (newValue) {\r\n        console.log(\"playList\", data.playList);\r\n        console.log(\"newValue\", newValue);\r\n        data.playList = newValue;\r\n        nextTick(() => {\r\n          if (!newValue.active) {\r\n            // 隐藏后关闭流\r\n            // 关闭视频流\r\n            if (\r\n              typeof players.value !== \"undefined\" &&\r\n              players.value.e != null\r\n            ) {\r\n              if (players.value != null) {\r\n                players.value.pause();\r\n                players.value.unload();\r\n                players.value.detachMediaElement();\r\n                players.value.destroy();\r\n              }\r\n            }\r\n          } else {\r\n            // 更新播放列表\r\n            initPlayer(newValue, data.subtype);\r\n          }\r\n        });\r\n      }\r\n    }\r\n    onMounted(() => {\r\n      initCameraData(props.cameraData);\r\n    });\r\n    return {\r\n      ...dataRef,\r\n      getStyle,\r\n      hidden,\r\n      changSwitch,\r\n      playerRef\r\n    };\r\n  }\r\n});\r\n</script>\r\n<style lang=\"scss\">\r\n.live-video {\r\n  width: 100%;\r\n  height: 100%;\r\n  background: black;\r\n  background-repeat: no-repeat;\r\n  background-size: 100% 100%;\r\n  -moz-background-size: 100% 100%;\r\n  background-image: url(\"/images/connecting.jpg\");\r\n}\r\n.historical-mon {\r\n  /* background: rgba(30, 42, 66, 0.88); */\r\n  width: 100%;\r\n  height: 100%;\r\n  color: #ffffff;\r\n}\r\n.historical-mon .top-title {\r\n  width: 100%;\r\n  line-height: 30px;\r\n  color: #ffffff;\r\n  border-bottom: 1px solid rgba(178, 223, 255, 0.2);\r\n  /* background: #274a7f; */\r\n  display: flex;\r\n  justify-content: space-between;\r\n  align-items: center;\r\n  z-index: 1;\r\n}\r\n.historical-mon .top-title span {\r\n  margin-left: 10px;\r\n}\r\n.historical-mon .top-title button {\r\n  width: 20px;\r\n  height: 20px;\r\n  border: 0;\r\n  cursor: pointer;\r\n  background: url(\"/images/x.png\") no-repeat;\r\n  background-size: 100% 100%;\r\n  background-position: center;\r\n}\r\n.historical-mon ::-webkit-scrollbar {\r\n  /*滚动条整体样式*/\r\n  width: 6px; /*高宽分别对应横竖滚动条的尺寸*/\r\n}\r\n.historical-mon ::-webkit-scrollbar-thumb {\r\n  /*滚动条里面小方块*/\r\n  border-radius: 3px;\r\n  background: rgba(67, 97, 122, 1);\r\n}\r\n.switchStyle {\r\n  font-size: 8px !important;\r\n}\r\n.el-switch__label * {\r\n  line-height: 1;\r\n  font-size: 10px;\r\n  display: inline-block;\r\n}\r\n.switchStyle .el-switch__label {\r\n  position: absolute;\r\n  display: none;\r\n  color: #fff;\r\n}\r\n/*打开时文字位置设置*/\r\n.switchStyle .el-switch__label--right {\r\n  z-index: 1;\r\n  right: 5px;\r\n}\r\n/*关闭时文字位置设置*/\r\n.switchStyle .el-switch__label--left {\r\n  z-index: 1;\r\n  left: 8px;\r\n}\r\n/*显示文字*/\r\n.switchStyle .el-switch__label.is-active {\r\n  display: block;\r\n}\r\n.switchStyle.el-switch .el-switch__core,\r\n.el-switch .el-switch__label {\r\n  width: 48px !important;\r\n  height: 18px !important;\r\n}\r\n</style>\r\n","import { render } from \"./monitorList.vue?vue&type=template&id=90514850\"\nimport script from \"./monitorList.vue?vue&type=script&lang=js\"\nexport * from \"./monitorList.vue?vue&type=script&lang=js\"\n\nimport \"./monitorList.vue?vue&type=style&index=0&id=90514850&lang=scss\"\nscript.render = render\n\nexport default script","<template>\r\n  <div ref=\"hsitoryMonitorListPanelRef\" class=\"historical-mon\">\r\n    <div class=\"top-title\">\r\n      <span>{{ cameraName }}</span>\r\n      <button @click=\"hidden\" @touchstart.stop.prevent=\"hidden\" />\r\n    </div>\r\n    <!-- 视频列表 -->\r\n    <div class=\"h5videowrapper h5container\" :style=\"getStyle()\">\r\n      <span v-show=\"isLoading\">视频加载中...</span>\r\n      <video\r\n        ref=\"playerRef\"\r\n        class=\"history-video\"\r\n        autoplay\r\n        controls=\"true\"\r\n        style=\"width:100%; height:100%;object-fit: fill\"\r\n        @timeupdate=\"handleVideoProgress\"\r\n      />\r\n    </div>\r\n    <div v-show=\"players\" class=\"video-controls\">\r\n      <div class>\r\n        <span\r\n          v-show=\"!playStatus\"\r\n          class=\"icon iconfont\"\r\n          @click=\"changePlayStatus(true)\"\r\n          >&#xe635;</span\r\n        >\r\n        <span\r\n          v-show=\"playStatus\"\r\n          class=\"icon iconfont\"\r\n          @click=\"changePlayStatus(false)\"\r\n          >&#xe644;</span\r\n        >\r\n      </div>\r\n      <span class=\"time\">{{ currentTime != 0 ? currentTime : \"\" }}</span>\r\n      <div ref=\"progressBarRef\" class=\"progress\" @click=\"handleProgress\">\r\n        <div ref=\"innerBarRef\" class=\"inner-bar\"></div>\r\n      </div>\r\n      <span class=\"time\">{{ eTime }}</span>\r\n      <div class=\"rate\">\r\n        <span>×{{ currentRate }}</span>\r\n        <ul class=\"rate-list\">\r\n          <li @click=\"changeRate(5.0)\">5.0</li>\r\n          <li @click=\"changeRate(4.0)\">4.0</li>\r\n          <li @click=\"changeRate(3.0)\">3.0</li>\r\n          <li @click=\"changeRate(2.0)\">2.0</li>\r\n          <li @click=\"changeRate(1.5)\">1.5</li>\r\n          <li @click=\"changeRate(1.2)\">1.2</li>\r\n          <li @click=\"changeRate(1.0)\">1.0</li>\r\n          <li @click=\"changeRate(0.5)\">0.5</li>\r\n          <li @click=\"changeRate(0.2)\">0.2</li>\r\n        </ul>\r\n      </div>\r\n    </div>\r\n    <div v-if=\"timePicker\" class=\"block\" style=\"width:100%;\">\r\n      <div style=\"width:38%; float: left;\">\r\n        <el-date-picker\r\n          v-model=\"day\"\r\n          type=\"date\"\r\n          value-format=\"timestamp\"\r\n          placeholder=\"选择日期\"\r\n        >\r\n        </el-date-picker>\r\n      </div>\r\n      <div style=\"width:30%; float: left;\">\r\n        <el-time-picker\r\n          v-model=\"sTime\"\r\n          value-format=\"HH:mm:ss\"\r\n          style=\"width:100%\"\r\n          placeholder=\"开始时间\"\r\n        >\r\n        </el-time-picker>\r\n      </div>\r\n      <div style=\"width:30%; padding-left: 10px; float: left;\">\r\n        <el-time-picker\r\n          v-model=\"eTime\"\r\n          value-format=\"HH:mm:ss\"\r\n          style=\"width:100%\"\r\n          placeholder=\"结束时间\"\r\n        >\r\n        </el-time-picker>\r\n      </div>\r\n      <button\r\n        class=\"el-button el-button--medium el-button--info\"\r\n        style=\"width:100%;background-color: #02163a\"\r\n        @click=\"searchVideo\"\r\n      >\r\n        查询回放\r\n      </button>\r\n    </div>\r\n  </div>\r\n</template>\r\n<script lang=\"ts\">\r\nimport flvjs from \"hd-flv\";\r\nimport { httpFlvServer } from \"@/utils/urls\";\r\nimport {\r\n  defineComponent,\r\n  onUnmounted,\r\n  ref,\r\n  computed,\r\n  watch,\r\n  nextTick,\r\n  reactive,\r\n  toRefs\r\n} from \"vue\";\r\nimport { ElMessage } from \"element-plus\";\r\n\r\nconst CHANGE_HISTORYMONITORLISTPANEL_STATE =\r\n  \"changeHistoryMonitorListPanelState\";\r\nexport default defineComponent({\r\n  name: \"HistpryMonitor\",\r\n  props: {\r\n    historyCameraData: {\r\n      type: Object,\r\n      required: true\r\n    },\r\n    historyPlayCount: {\r\n      type: Number,\r\n      required: true\r\n    }\r\n  },\r\n  emits: [CHANGE_HISTORYMONITORLISTPANEL_STATE],\r\n  setup(props, { emit }) {\r\n    const innerBarRef = ref();\r\n    const progressBarRef = ref();\r\n    const playerRef = ref();\r\n    const players = ref(); // player值\r\n\r\n    const data = reactive({\r\n      playList: {} as Record<string, any>, // 当前播放列表，最多同时4个\r\n      day: \"\",\r\n      sTime: 0,\r\n      eTime: 0,\r\n      startTime: 0,\r\n      endTime: 0,\r\n      playStatus: false,\r\n      timePicker: true,\r\n      currentTime: 0,\r\n      overTime: 0,\r\n      currentRate: 1.0,\r\n      currentId: \"\",\r\n      cameraId: 0,\r\n      cameraName: \"\",\r\n      isLoading: false\r\n    });\r\n    const dataRef = toRefs(data);\r\n\r\n    const allDuration: any = computed(() => {\r\n      const time1: any = data.sTime.toString().split(\":\");\r\n      const time2: any = data.eTime.toString().split(\":\");\r\n      const time =\r\n        (time2[0] - time1[0]) * 3600000 +\r\n        (time2[1] - time1[1]) * 60000 +\r\n        (time2[2] - time1[2]) * 1000;\r\n      return time;\r\n    });\r\n    const progressLength: any = computed(() => {\r\n      return progressBarRef.value[0].clientWidth;\r\n    });\r\n\r\n    const originTime: any = computed(() => {\r\n      const time: any = data.sTime.toString().split(\":\");\r\n      return data.day + time[0] * 3600000 + time[1] * 60000 + time[2] * 1000;\r\n    });\r\n\r\n    onUnmounted(() => {\r\n      // 关闭视频流\r\n      if (typeof players.value !== \"undefined\" && players.value.e != null) {\r\n        if (players.value != null) {\r\n          players.value.pause();\r\n          players.value.unload();\r\n          players.value.detachMediaElement();\r\n          players.value.destroy();\r\n        }\r\n      }\r\n    });\r\n\r\n    // NVR 海康时间格式\r\n    function formatHaiKangTime(timestamps: string) {\r\n      const timestamp = parseFloat(timestamps);\r\n      const year = new Date(timestamp).getFullYear();\r\n      const month = new Date(timestamp).getMonth() + 1;\r\n      const day = new Date(timestamp).getDate();\r\n      const hour = new Date(timestamp).getHours();\r\n      const minute = new Date(timestamp).getMinutes();\r\n      const second = new Date(timestamp).getSeconds();\r\n      return `${year}${month > 9 ? month : \"0\" + month}${\r\n        day > 9 ? day : \"0\" + day\r\n      }T${hour > 9 ? hour : \"0\" + hour}${minute > 9 ? minute : \"0\" + minute}${\r\n        second > 9 ? second : \"0\" + second\r\n      }Z`;\r\n    }\r\n\r\n    // NVR 大华时间格式\r\n    function formatDahuaTime(timestamps: string) {\r\n      const timestamp = parseFloat(timestamps);\r\n      const year = new Date(timestamp).getFullYear();\r\n      const month = new Date(timestamp).getMonth() + 1;\r\n      const day = new Date(timestamp).getDate();\r\n      const hour = new Date(timestamp).getHours();\r\n      const minute = new Date(timestamp).getMinutes();\r\n      const second = new Date(timestamp).getSeconds();\r\n      return `${year}_${month > 9 ? month : \"0\" + month}_${\r\n        day > 9 ? day : \"0\" + day\r\n      }_${hour > 9 ? hour : \"0\" + hour}_${minute > 9 ? minute : \"0\" + minute}_${\r\n        second > 9 ? second : \"0\" + second\r\n      }`;\r\n    }\r\n\r\n    function initPlayer(playList: any) {\r\n      // 初始化直播\r\n      if (flvjs.isSupported()) {\r\n        const player = ref();\r\n        const video = player.value; // video\r\n        if (\r\n          !data.startTime &&\r\n          !data.endTime &&\r\n          !playList.startTime &&\r\n          !playList.endTime\r\n        ) {\r\n          return;\r\n        }\r\n        data.startTime = playList.startTime\r\n          ? playList.startTime\r\n          : data.startTime;\r\n        data.endTime = playList.endTime ? playList.endTime : data.endTime;\r\n        if (playList.startTime && playList.endTime) {\r\n          data.timePicker = false;\r\n        } else {\r\n          data.timePicker = true;\r\n        }\r\n        if (video) {\r\n          data.isLoading = true;\r\n          const id = playList.camera.id; // 唯一id\r\n          data.cameraId = id;\r\n          data.cameraName = playList.camera.name;\r\n          let rtsp = \"\";\r\n          if (\r\n            \"海康\" == playList.camera.brand ||\r\n            \"海康威视\" == playList.camera.brand\r\n          ) {\r\n            const sTime = formatHaiKangTime(data.startTime.toString());\r\n            const eTime = formatHaiKangTime(data.endTime.toString());\r\n            rtsp = `rtsp://${playList.camera.nvr_username} : ${playList.camera.nvr_password}@${playList.camera.nvr_ip}/Streaming/tracks/${playList.camera.nvr_channel}01/?starttime=${sTime}&endtime=\" +\r\n              ${eTime}&codecType=h264&subtype=1`;\r\n          } else if (\"大华\" == playList.camera.brand) {\r\n            const sTime = formatDahuaTime(data.startTime.toString())\r\n              .replace(/-/g, \"_\")\r\n              .replace(/:/g, \"_\")\r\n              .replace(/ /g, \"_\");\r\n            const eTime = formatDahuaTime(data.endTime.toString())\r\n              .replace(/-/g, \"_\")\r\n              .replace(/:/g, \"_\")\r\n              .replace(/ /g, \"_\");\r\n\r\n            rtsp = `rtsp://${playList.camera.nvr_username} : ${playList.camera.nvr_password}@${playList.camera.nvr_ip}/cam/playback?channel=${playList.camera.nvr_channel}&subtype=1&starttime=${sTime}&endtime=\" +\r\n              ${eTime}`;\r\n          }\r\n\r\n          players.value = playList.camera.player; //player\r\n          if (playList.camera.id != data.currentId) {\r\n            data.currentTime = 0;\r\n            data.eTime = 0;\r\n            data.currentRate = 1.0;\r\n          }\r\n          data.currentId = playList.camera.id;\r\n          const Url = `${httpFlvServer}/${id}/?url=${encodeURIComponent(\r\n            rtsp\r\n          )}}&brand=${playList.camera.brand}`;\r\n          players.value = flvjs.createPlayer({\r\n            type: \"flv\",\r\n            isLive: false, // 支持直播流（通过isLive:true来设置）,false是点播\r\n            hasVideo: true,\r\n            url: Url\r\n          });\r\n\r\n          const player = players.value;\r\n          player.on(flvjs.Events.METADATA_ARRIVED, () => {\r\n            console.log(\"--== meta data arrived ==--\");\r\n            data.isLoading = false;\r\n            data.playStatus = true;\r\n          });\r\n\r\n          video.addEventListener(\"pause\", function() {\r\n            // 暂停开始执行的函数\r\n            data.playStatus = true;\r\n          });\r\n          video.addEventListener(\"play\", function() {\r\n            // 播放开始执行的函数\r\n            data.playStatus = false;\r\n          });\r\n\r\n          players.value.attachMediaElement(video);\r\n          try {\r\n            players.value.load();\r\n            players.value.play();\r\n          } catch (error) {\r\n            console.log(error);\r\n          }\r\n        }\r\n      }\r\n    }\r\n\r\n    watch(props.historyCameraData, newValue => {\r\n      if (newValue) {\r\n        data.playList = newValue;\r\n        nextTick(() => {\r\n          if (!newValue.active) {\r\n            // 隐藏后关闭流\r\n            // 关闭视频流\r\n            if (\r\n              typeof players.value !== \"undefined\" &&\r\n              players.value.e != null\r\n            ) {\r\n              if (players.value != null) {\r\n                players.value.pause();\r\n                players.value.unload();\r\n                players.value.detachMediaElement();\r\n                players.value.destroy();\r\n              }\r\n            }\r\n          } else {\r\n            // 更新播放列表\r\n            initPlayer(newValue);\r\n          }\r\n        });\r\n      }\r\n    });\r\n\r\n    function getStyle() {\r\n      if (props.historyPlayCount === 1) {\r\n        return \"width:100%; height:100%\";\r\n      } else {\r\n        return \"width:100%; height:26rem\";\r\n      }\r\n    }\r\n\r\n    // 关闭全部视频\r\n    function hidden() {\r\n      if (typeof players.value !== \"undefined\" && players.value.e != null) {\r\n        if (players.value != null) {\r\n          players.value.pause();\r\n          players.value.unload();\r\n          players.value.detachMediaElement();\r\n          players.value.destroy();\r\n        }\r\n      }\r\n      // 关闭\r\n      emit(CHANGE_HISTORYMONITORLISTPANEL_STATE, data.cameraId);\r\n    }\r\n\r\n    function formatDay(timestamps: string) {\r\n      const timestamp = parseFloat(timestamps);\r\n      const year = new Date(timestamp).getFullYear();\r\n      const month = new Date(timestamp).getMonth() + 1;\r\n      const day = new Date(timestamp).getDate();\r\n      return `${year}-${month > 9 ? month : \"0\" + month}-${\r\n        day > 9 ? day : \"0\" + day\r\n      }`;\r\n    }\r\n\r\n    // 查询历史视频\r\n    function searchVideo() {\r\n      if (!data.sTime || !data.eTime || !data.day) {\r\n        ElMessage.error(\"请选择时间段查询\");\r\n        return;\r\n      }\r\n      data.startTime = new Date(\r\n        Date.parse(formatDay(data.day) + \" \" + data.sTime)\r\n      ).getTime();\r\n      data.endTime = new Date(\r\n        Date.parse(formatDay(data.day) + \" \" + data.eTime)\r\n      ).getTime();\r\n\r\n      // 更新播放列表\r\n      initPlayer(data.playList);\r\n    }\r\n\r\n    function changePlayStatus(flag: boolean) {\r\n      const player = ref();\r\n      if (flag) {\r\n        player.value[0].play();\r\n      } else {\r\n        player.value[0].pause();\r\n      }\r\n      data.playStatus = flag;\r\n    }\r\n\r\n    function formatTimes(timestamps: string) {\r\n      const timestamp = parseFloat(timestamps);\r\n      const hour = new Date(timestamp).getHours();\r\n      const minute = new Date(timestamp).getMinutes();\r\n      const second = new Date(timestamp).getSeconds();\r\n      return `${hour > 9 ? hour : \"0\" + hour}:${\r\n        minute > 9 ? minute : \"0\" + minute\r\n      }:${second > 9 ? second : \"0\" + second}`;\r\n    }\r\n\r\n    function handleProgress(e: any) {\r\n      if (!data.sTime || !data.eTime || !data.day) {\r\n        ElMessage.error(\"请选择时间段查询\");\r\n        return;\r\n      }\r\n\r\n      innerBarRef.value[0].style.width = e.offsetX + \"px\";\r\n      const duration = Math.floor(\r\n        (e.offsetX / progressBarRef.value[0].offsetWidth) * allDuration.value\r\n      );\r\n      const time = data.sTime.toString().split(\":\");\r\n      data.startTime = Number(\r\n        data.day +\r\n          Number(time[0]) * 3600000 +\r\n          Number(time[1]) * 60000 +\r\n          Number(time[2]) * 1000 +\r\n          duration\r\n      );\r\n      initPlayer(data.playList);\r\n    }\r\n\r\n    function handleVideoProgress(e: any) {\r\n      data.currentTime = Number(\r\n        formatTimes(e.target.currentTime * 1000 + data.startTime + \"\")\r\n      );\r\n      innerBarRef.value[0].style.width =\r\n        ((e.target.currentTime * 1000 + data.startTime - originTime.value) /\r\n          (data.endTime - data.startTime)) *\r\n          progressLength.value +\r\n        \"px\";\r\n    }\r\n\r\n    function changeRate(rate: number) {\r\n      data.currentRate = rate;\r\n      playerRef.value[0].playbackRate = rate;\r\n    }\r\n\r\n    return {\r\n      ...dataRef,\r\n      handleProgress,\r\n      getStyle,\r\n      hidden,\r\n      searchVideo,\r\n      changePlayStatus,\r\n      handleVideoProgress,\r\n      changeRate\r\n    };\r\n  }\r\n});\r\n</script>\r\n<style lang=\"scss\" scoped>\r\n.monitorPlayer-panel {\r\n  position: fixed;\r\n  /*right: -10px;*/\r\n  /*top: 150px;*/\r\n  z-index: 1;\r\n}\r\n.history-video {\r\n  width: 100%;\r\n  height: 100%;\r\n  background: black;\r\n  background-repeat: no-repeat;\r\n  background-size: 100% 100%;\r\n  -moz-background-size: 100% 100%;\r\n  background-image: url(\"/images/connecting.jpg\");\r\n}\r\n\r\n.historical-mon {\r\n  /* background: rgba(30, 42, 66, 0.88); */\r\n  width: 100%;\r\n  height: 100%;\r\n  color: #ffffff;\r\n}\r\n\r\n.historical-mon .top-title {\r\n  width: 100%;\r\n  line-height: 30px;\r\n  color: #fff;\r\n  border-bottom: 1px solid rgba(178, 223, 255, 0.2);\r\n  /* background: #274a7f; */\r\n  display: flex;\r\n  justify-content: space-between;\r\n  align-items: center;\r\n  z-index: 1;\r\n}\r\n\r\n.historical-mon .top-title span {\r\n  margin-left: 10px;\r\n}\r\n\r\n.historical-mon .top-title button {\r\n  width: 20px;\r\n  height: 20px;\r\n  border: 0;\r\n  cursor: pointer;\r\n  background: url(/images/x.png) no-repeat;\r\n  background-size: 100% 100%;\r\n  background-position: center;\r\n}\r\n\r\n.historical-mon ::-webkit-scrollbar {\r\n  /*滚动条整体样式*/\r\n  width: 6px; /*高宽分别对应横竖滚动条的尺寸*/\r\n}\r\n\r\n.historical-mon ::-webkit-scrollbar-thumb {\r\n  /*滚动条里面小方块*/\r\n  border-radius: 3px;\r\n  background: rgba(67, 97, 122, 1);\r\n}\r\n\r\n.video-controls {\r\n  width: 100%;\r\n  height: 3rem;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n\r\n  .icon {\r\n    font-size: 1.8rem;\r\n  }\r\n\r\n  .progress {\r\n    width: 70%;\r\n    height: 1rem;\r\n    border-radius: 0.5rem;\r\n    margin: 0 0.5rem;\r\n    background: rgba(0, 0, 0, 0.6);\r\n\r\n    .inner-bar {\r\n      width: 0px;\r\n      height: 100%;\r\n      border-radius: 0.5rem;\r\n      background: rgba(48, 163, 204, 0.5);\r\n    }\r\n  }\r\n  .rate {\r\n    margin-left: 1rem;\r\n    position: relative;\r\n    color: #fff;\r\n    font-size: 1.8rem;\r\n    width: 5rem;\r\n    height: 100%;\r\n    line-height: 3rem;\r\n    text-align: center;\r\n\r\n    &:hover > .rate-list {\r\n      display: block;\r\n    }\r\n\r\n    .rate-list {\r\n      position: absolute;\r\n      bottom: 2rem;\r\n      background: rgba(0, 0, 0, 0.5);\r\n      border-radius: 0.4rem;\r\n      display: none;\r\n\r\n      li {\r\n        height: 2rem;\r\n        line-height: 2rem;\r\n        width: 4rem;\r\n        text-align: center;\r\n\r\n        &:hover {\r\n          background: rgba(0, 0, 0, 0.2);\r\n        }\r\n      }\r\n    }\r\n  }\r\n  .time {\r\n    margin: 0 0.5rem;\r\n  }\r\n}\r\n\r\n.historical-mon .el-input__icon {\r\n  padding-bottom: 1.3rem;\r\n}\r\n\r\n.historical-mon .check-bar > li .el-range-editor {\r\n  display: flex;\r\n  align-items: center;\r\n}\r\n\r\n.historical-mon.check-bar > li .el-range-editor i {\r\n  display: inline-block;\r\n  height: 3.2rem !important;\r\n  line-height: 3.2rem;\r\n  padding-bottom: 1.3rem;\r\n  box-sizing: border-box;\r\n}\r\n\r\n.historical-mon.check-bar > li .el-range-editor span {\r\n  height: 3.4rem;\r\n  line-height: 3.4rem;\r\n  box-sizing: border-box;\r\n}\r\n\r\n.historical-mon .el-pagination__total {\r\n  color: #fff;\r\n}\r\n\r\n.historical-mon .el-checkbox__label {\r\n  font-size: 1.4rem;\r\n}\r\n\r\n.historical-mon .el-date-editor .el-range-input {\r\n  background-color: transparent;\r\n  color: #eee;\r\n  text-align: center;\r\n  font-size: 1.2rem;\r\n  padding-bottom: 0.2rem;\r\n}\r\n\r\n.historical-mon .el-date-editor .el-range-separator {\r\n  color: #eee;\r\n  font-size: 1.2rem;\r\n  padding-bottom: 1.5rem;\r\n}\r\n\r\n.historical-mon .el-range-separator {\r\n  padding-bottom: 1.4rem;\r\n  font-size: 1.2rem;\r\n  color: #eee;\r\n}\r\n\r\n.historical-mon .el-date-editor {\r\n  border-color: #5789ff;\r\n  background-color: #02163a;\r\n  color: #eee;\r\n  text-align: center;\r\n  font-size: 1.2rem;\r\n}\r\n</style>\r\n","\r\nimport flvjs from \"hd-flv\";\r\nimport { httpFlvServer } from \"@/utils/urls\";\r\nimport {\r\n  defineComponent,\r\n  onUnmounted,\r\n  ref,\r\n  computed,\r\n  watch,\r\n  nextTick,\r\n  reactive,\r\n  toRefs\r\n} from \"vue\";\r\nimport { ElMessage } from \"element-plus\";\r\n\r\nconst CHANGE_HISTORYMONITORLISTPANEL_STATE =\r\n  \"changeHistoryMonitorListPanelState\";\r\nexport default defineComponent({\r\n  name: \"HistpryMonitor\",\r\n  props: {\r\n    historyCameraData: {\r\n      type: Object,\r\n      required: true\r\n    },\r\n    historyPlayCount: {\r\n      type: Number,\r\n      required: true\r\n    }\r\n  },\r\n  emits: [CHANGE_HISTORYMONITORLISTPANEL_STATE],\r\n  setup(props, { emit }) {\r\n    const innerBarRef = ref();\r\n    const progressBarRef = ref();\r\n    const playerRef = ref();\r\n    const players = ref(); // player值\r\n\r\n    const data = reactive({\r\n      playList: {} as Record<string, any>, // 当前播放列表，最多同时4个\r\n      day: \"\",\r\n      sTime: 0,\r\n      eTime: 0,\r\n      startTime: 0,\r\n      endTime: 0,\r\n      playStatus: false,\r\n      timePicker: true,\r\n      currentTime: 0,\r\n      overTime: 0,\r\n      currentRate: 1.0,\r\n      currentId: \"\",\r\n      cameraId: 0,\r\n      cameraName: \"\",\r\n      isLoading: false\r\n    });\r\n    const dataRef = toRefs(data);\r\n\r\n    const allDuration: any = computed(() => {\r\n      const time1: any = data.sTime.toString().split(\":\");\r\n      const time2: any = data.eTime.toString().split(\":\");\r\n      const time =\r\n        (time2[0] - time1[0]) * 3600000 +\r\n        (time2[1] - time1[1]) * 60000 +\r\n        (time2[2] - time1[2]) * 1000;\r\n      return time;\r\n    });\r\n    const progressLength: any = computed(() => {\r\n      return progressBarRef.value[0].clientWidth;\r\n    });\r\n\r\n    const originTime: any = computed(() => {\r\n      const time: any = data.sTime.toString().split(\":\");\r\n      return data.day + time[0] * 3600000 + time[1] * 60000 + time[2] * 1000;\r\n    });\r\n\r\n    onUnmounted(() => {\r\n      // 关闭视频流\r\n      if (typeof players.value !== \"undefined\" && players.value.e != null) {\r\n        if (players.value != null) {\r\n          players.value.pause();\r\n          players.value.unload();\r\n          players.value.detachMediaElement();\r\n          players.value.destroy();\r\n        }\r\n      }\r\n    });\r\n\r\n    // NVR 海康时间格式\r\n    function formatHaiKangTime(timestamps: string) {\r\n      const timestamp = parseFloat(timestamps);\r\n      const year = new Date(timestamp).getFullYear();\r\n      const month = new Date(timestamp).getMonth() + 1;\r\n      const day = new Date(timestamp).getDate();\r\n      const hour = new Date(timestamp).getHours();\r\n      const minute = new Date(timestamp).getMinutes();\r\n      const second = new Date(timestamp).getSeconds();\r\n      return `${year}${month > 9 ? month : \"0\" + month}${\r\n        day > 9 ? day : \"0\" + day\r\n      }T${hour > 9 ? hour : \"0\" + hour}${minute > 9 ? minute : \"0\" + minute}${\r\n        second > 9 ? second : \"0\" + second\r\n      }Z`;\r\n    }\r\n\r\n    // NVR 大华时间格式\r\n    function formatDahuaTime(timestamps: string) {\r\n      const timestamp = parseFloat(timestamps);\r\n      const year = new Date(timestamp).getFullYear();\r\n      const month = new Date(timestamp).getMonth() + 1;\r\n      const day = new Date(timestamp).getDate();\r\n      const hour = new Date(timestamp).getHours();\r\n      const minute = new Date(timestamp).getMinutes();\r\n      const second = new Date(timestamp).getSeconds();\r\n      return `${year}_${month > 9 ? month : \"0\" + month}_${\r\n        day > 9 ? day : \"0\" + day\r\n      }_${hour > 9 ? hour : \"0\" + hour}_${minute > 9 ? minute : \"0\" + minute}_${\r\n        second > 9 ? second : \"0\" + second\r\n      }`;\r\n    }\r\n\r\n    function initPlayer(playList: any) {\r\n      // 初始化直播\r\n      if (flvjs.isSupported()) {\r\n        const player = ref();\r\n        const video = player.value; // video\r\n        if (\r\n          !data.startTime &&\r\n          !data.endTime &&\r\n          !playList.startTime &&\r\n          !playList.endTime\r\n        ) {\r\n          return;\r\n        }\r\n        data.startTime = playList.startTime\r\n          ? playList.startTime\r\n          : data.startTime;\r\n        data.endTime = playList.endTime ? playList.endTime : data.endTime;\r\n        if (playList.startTime && playList.endTime) {\r\n          data.timePicker = false;\r\n        } else {\r\n          data.timePicker = true;\r\n        }\r\n        if (video) {\r\n          data.isLoading = true;\r\n          const id = playList.camera.id; // 唯一id\r\n          data.cameraId = id;\r\n          data.cameraName = playList.camera.name;\r\n          let rtsp = \"\";\r\n          if (\r\n            \"海康\" == playList.camera.brand ||\r\n            \"海康威视\" == playList.camera.brand\r\n          ) {\r\n            const sTime = formatHaiKangTime(data.startTime.toString());\r\n            const eTime = formatHaiKangTime(data.endTime.toString());\r\n            rtsp = `rtsp://${playList.camera.nvr_username} : ${playList.camera.nvr_password}@${playList.camera.nvr_ip}/Streaming/tracks/${playList.camera.nvr_channel}01/?starttime=${sTime}&endtime=\" +\r\n              ${eTime}&codecType=h264&subtype=1`;\r\n          } else if (\"大华\" == playList.camera.brand) {\r\n            const sTime = formatDahuaTime(data.startTime.toString())\r\n              .replace(/-/g, \"_\")\r\n              .replace(/:/g, \"_\")\r\n              .replace(/ /g, \"_\");\r\n            const eTime = formatDahuaTime(data.endTime.toString())\r\n              .replace(/-/g, \"_\")\r\n              .replace(/:/g, \"_\")\r\n              .replace(/ /g, \"_\");\r\n\r\n            rtsp = `rtsp://${playList.camera.nvr_username} : ${playList.camera.nvr_password}@${playList.camera.nvr_ip}/cam/playback?channel=${playList.camera.nvr_channel}&subtype=1&starttime=${sTime}&endtime=\" +\r\n              ${eTime}`;\r\n          }\r\n\r\n          players.value = playList.camera.player; //player\r\n          if (playList.camera.id != data.currentId) {\r\n            data.currentTime = 0;\r\n            data.eTime = 0;\r\n            data.currentRate = 1.0;\r\n          }\r\n          data.currentId = playList.camera.id;\r\n          const Url = `${httpFlvServer}/${id}/?url=${encodeURIComponent(\r\n            rtsp\r\n          )}}&brand=${playList.camera.brand}`;\r\n          players.value = flvjs.createPlayer({\r\n            type: \"flv\",\r\n            isLive: false, // 支持直播流（通过isLive:true来设置）,false是点播\r\n            hasVideo: true,\r\n            url: Url\r\n          });\r\n\r\n          const player = players.value;\r\n          player.on(flvjs.Events.METADATA_ARRIVED, () => {\r\n            console.log(\"--== meta data arrived ==--\");\r\n            data.isLoading = false;\r\n            data.playStatus = true;\r\n          });\r\n\r\n          video.addEventListener(\"pause\", function() {\r\n            // 暂停开始执行的函数\r\n            data.playStatus = true;\r\n          });\r\n          video.addEventListener(\"play\", function() {\r\n            // 播放开始执行的函数\r\n            data.playStatus = false;\r\n          });\r\n\r\n          players.value.attachMediaElement(video);\r\n          try {\r\n            players.value.load();\r\n            players.value.play();\r\n          } catch (error) {\r\n            console.log(error);\r\n          }\r\n        }\r\n      }\r\n    }\r\n\r\n    watch(props.historyCameraData, newValue => {\r\n      if (newValue) {\r\n        data.playList = newValue;\r\n        nextTick(() => {\r\n          if (!newValue.active) {\r\n            // 隐藏后关闭流\r\n            // 关闭视频流\r\n            if (\r\n              typeof players.value !== \"undefined\" &&\r\n              players.value.e != null\r\n            ) {\r\n              if (players.value != null) {\r\n                players.value.pause();\r\n                players.value.unload();\r\n                players.value.detachMediaElement();\r\n                players.value.destroy();\r\n              }\r\n            }\r\n          } else {\r\n            // 更新播放列表\r\n            initPlayer(newValue);\r\n          }\r\n        });\r\n      }\r\n    });\r\n\r\n    function getStyle() {\r\n      if (props.historyPlayCount === 1) {\r\n        return \"width:100%; height:100%\";\r\n      } else {\r\n        return \"width:100%; height:26rem\";\r\n      }\r\n    }\r\n\r\n    // 关闭全部视频\r\n    function hidden() {\r\n      if (typeof players.value !== \"undefined\" && players.value.e != null) {\r\n        if (players.value != null) {\r\n          players.value.pause();\r\n          players.value.unload();\r\n          players.value.detachMediaElement();\r\n          players.value.destroy();\r\n        }\r\n      }\r\n      // 关闭\r\n      emit(CHANGE_HISTORYMONITORLISTPANEL_STATE, data.cameraId);\r\n    }\r\n\r\n    function formatDay(timestamps: string) {\r\n      const timestamp = parseFloat(timestamps);\r\n      const year = new Date(timestamp).getFullYear();\r\n      const month = new Date(timestamp).getMonth() + 1;\r\n      const day = new Date(timestamp).getDate();\r\n      return `${year}-${month > 9 ? month : \"0\" + month}-${\r\n        day > 9 ? day : \"0\" + day\r\n      }`;\r\n    }\r\n\r\n    // 查询历史视频\r\n    function searchVideo() {\r\n      if (!data.sTime || !data.eTime || !data.day) {\r\n        ElMessage.error(\"请选择时间段查询\");\r\n        return;\r\n      }\r\n      data.startTime = new Date(\r\n        Date.parse(formatDay(data.day) + \" \" + data.sTime)\r\n      ).getTime();\r\n      data.endTime = new Date(\r\n        Date.parse(formatDay(data.day) + \" \" + data.eTime)\r\n      ).getTime();\r\n\r\n      // 更新播放列表\r\n      initPlayer(data.playList);\r\n    }\r\n\r\n    function changePlayStatus(flag: boolean) {\r\n      const player = ref();\r\n      if (flag) {\r\n        player.value[0].play();\r\n      } else {\r\n        player.value[0].pause();\r\n      }\r\n      data.playStatus = flag;\r\n    }\r\n\r\n    function formatTimes(timestamps: string) {\r\n      const timestamp = parseFloat(timestamps);\r\n      const hour = new Date(timestamp).getHours();\r\n      const minute = new Date(timestamp).getMinutes();\r\n      const second = new Date(timestamp).getSeconds();\r\n      return `${hour > 9 ? hour : \"0\" + hour}:${\r\n        minute > 9 ? minute : \"0\" + minute\r\n      }:${second > 9 ? second : \"0\" + second}`;\r\n    }\r\n\r\n    function handleProgress(e: any) {\r\n      if (!data.sTime || !data.eTime || !data.day) {\r\n        ElMessage.error(\"请选择时间段查询\");\r\n        return;\r\n      }\r\n\r\n      innerBarRef.value[0].style.width = e.offsetX + \"px\";\r\n      const duration = Math.floor(\r\n        (e.offsetX / progressBarRef.value[0].offsetWidth) * allDuration.value\r\n      );\r\n      const time = data.sTime.toString().split(\":\");\r\n      data.startTime = Number(\r\n        data.day +\r\n          Number(time[0]) * 3600000 +\r\n          Number(time[1]) * 60000 +\r\n          Number(time[2]) * 1000 +\r\n          duration\r\n      );\r\n      initPlayer(data.playList);\r\n    }\r\n\r\n    function handleVideoProgress(e: any) {\r\n      data.currentTime = Number(\r\n        formatTimes(e.target.currentTime * 1000 + data.startTime + \"\")\r\n      );\r\n      innerBarRef.value[0].style.width =\r\n        ((e.target.currentTime * 1000 + data.startTime - originTime.value) /\r\n          (data.endTime - data.startTime)) *\r\n          progressLength.value +\r\n        \"px\";\r\n    }\r\n\r\n    function changeRate(rate: number) {\r\n      data.currentRate = rate;\r\n      playerRef.value[0].playbackRate = rate;\r\n    }\r\n\r\n    return {\r\n      ...dataRef,\r\n      handleProgress,\r\n      getStyle,\r\n      hidden,\r\n      searchVideo,\r\n      changePlayStatus,\r\n      handleVideoProgress,\r\n      changeRate\r\n    };\r\n  }\r\n});\r\n","import { render } from \"./historyMonitor.vue?vue&type=template&id=64dc0cc8&scoped=true\"\nimport script from \"./historyMonitor.vue?vue&type=script&lang=ts\"\nexport * from \"./historyMonitor.vue?vue&type=script&lang=ts\"\n\nimport \"./historyMonitor.vue?vue&type=style&index=0&id=64dc0cc8&lang=scss&scoped=true\"\nscript.render = render\nscript.__scopeId = \"data-v-64dc0cc8\"\n\nexport default script","<!--\r\n * @Description: \r\n * @Author: huxianc\r\n * @Date: 2021-01-20 09:56:51\r\n * @LastEditors: huxianc\r\n * @LastEditTime: 2021-01-20 09:57:17\r\n-->\r\n<template>\r\n  <div>\r\n    1\r\n  </div>\r\n</template>\r\n","import { render } from \"./warningList.vue?vue&type=template&id=43160a10\"\nconst script = {}\nscript.render = render\n\nexport default script","<!--\r\n * @Description: 标签信息\r\n * @Author: liufuqiang\r\n * @Date: 2021-01-22 14:36:16\r\n * @LastEditors: liufuqiang\r\n * @LastEditTime: 2021-01-27 17:45:05\r\n-->\r\n<template>\r\n  <div>\r\n    <el-form :model=\"params\" label-width=\"80px\" :inline=\"true\" size=\"small\">\r\n      <el-form-item label=\"标签编号\">\r\n        <el-input v-model=\"params.search\" clearable @change=\"search\" />\r\n      </el-form-item>\r\n      <el-form-item label=\"\">\r\n        <el-button type=\"primary\" @click=\"search\">搜索</el-button>\r\n      </el-form-item>\r\n    </el-form>\r\n    <el-table :data=\"tableData\" border tooltip-effect=\"dark\">\r\n      <el-table-column\r\n        label=\"编号\"\r\n        prop=\"dnum\"\r\n        show-overflow-tooltip\r\n        align=\"center\"\r\n        width=\"110\"\r\n      />\r\n      <el-table-column\r\n        label=\"名称\"\r\n        prop=\"dname\"\r\n        show-overflow-tooltip\r\n        align=\"center\"\r\n      />\r\n      <el-table-column\r\n        label=\"类型\"\r\n        prop=\"dtype\"\r\n        show-overflow-tooltip\r\n        align=\"center\"\r\n      />\r\n\r\n      <el-table-column label=\"位置\" show-overflow-tooltip align=\"center\">\r\n        <template #default=\"{row}\">\r\n          {{ getMap(row.snum) || \"未上线\" }}\r\n        </template>\r\n      </el-table-column>\r\n      <el-table-column width=\"160\" label=\"操作\" align=\"center\">\r\n        <template #default=\"{row}\">\r\n          <el-button size=\"mini\" type=\"primary\" @click=\"handleDetail(row)\"\r\n            >详情</el-button\r\n          >\r\n          <!-- <el-button size=\"mini\" @click=\"handleEdit(row)\">Edit</el-button> -->\r\n          <!-- <el-popconfirm\r\n            :title=\"`确定删除基站 ${row.ip} ？`\"\r\n            @confirm=\"handleDelete(row)\"\r\n          >\r\n            <template #reference>\r\n              <el-button type=\"danger\" size=\"mini\" style=\"margin-left:10px;\"\r\n                >删除</el-button\r\n              >\r\n            </template>\r\n          </el-popconfirm> -->\r\n        </template>\r\n      </el-table-column>\r\n    </el-table>\r\n    <el-pagination\r\n      v-show=\"total && tableData && tableData.length\"\r\n      background\r\n      v-model:current-page=\"params.page\"\r\n      :page-size=\"params.size\"\r\n      layout=\"prev, pager, next\"\r\n      :total=\"total\"\r\n      @current-change=\"changePage\"\r\n    />\r\n  </div>\r\n</template>\r\n\r\n<script lang=\"ts\">\r\nimport { onMounted, reactive, ref, defineComponent } from \"vue\";\r\nimport api from \"@/api/label\";\r\nimport { TYPES } from \"../constVariables\";\r\nimport { ICommonTableParams, ILabelItem } from \"../types\";\r\nimport { getPagination, getPagintionCount, getMap } from \"@/utils\";\r\nimport { getAllDevice } from \"@/utils/auth\";\r\nconst CLICKED = \"clicked\";\r\n\r\nexport default defineComponent({\r\n  name: \"Label\",\r\n  setup(props, { emit }) {\r\n    const params = reactive<ICommonTableParams>({\r\n      page: 1,\r\n      size: 10,\r\n      prop: \"dnum\",\r\n      search: \"\"\r\n    });\r\n\r\n    const tableData = ref<ILabelItem[]>([]);\r\n    const total = ref(0);\r\n\r\n    async function getList() {\r\n      // const res: unknown = await api.getLabelList(params);\r\n      const deviceAll: any = getAllDevice();\r\n      const labelAll: any = [];\r\n      deviceAll.filter((item: any) => {\r\n        if (item.dtypecode === \"Epaulet\") {\r\n          labelAll.push(item);\r\n        }\r\n      });\r\n      const res =\r\n        params.search === \"\"\r\n          ? getPagination(labelAll, params.page)\r\n          : getPagination(labelAll, params.page, params.prop, params.search);\r\n      tableData.value = res;\r\n      console.log(\"label\", res);\r\n      total.value = getPagintionCount(\r\n        labelAll,\r\n        params.prop,\r\n        params.search\r\n      ) as number;\r\n    }\r\n\r\n    async function handleEdit(row: ILabelItem) {\r\n      console.log(row);\r\n    }\r\n    async function getPersonDetail(id: string) {\r\n      const params = {\r\n        act: \"fCGtP4nXdRZjr6TYeiN1611196242913\",\r\n        DeviceIdS: id\r\n      };\r\n\r\n      const res: unknown = await api.getLabelData(params);\r\n      const { data } = res as any;\r\n      emit(\"showEquipDetails\", data[0][0], TYPES.labelList);\r\n      emit(CLICKED);\r\n    }\r\n    function handleDetail(row: ILabelItem) {\r\n      getPersonDetail(row.dids);\r\n    }\r\n    async function handleDelete(row: ILabelItem) {\r\n      console.log(row);\r\n    }\r\n\r\n    async function changePage(page: number) {\r\n      params.page = page;\r\n      getList();\r\n    }\r\n    async function search() {\r\n      params.page = 1;\r\n      getList();\r\n    }\r\n\r\n    onMounted(() => {\r\n      getList();\r\n    });\r\n\r\n    return {\r\n      params,\r\n      tableData,\r\n      total,\r\n      handleEdit,\r\n      handleDelete,\r\n      changePage,\r\n      search,\r\n      getMap,\r\n      handleDetail\r\n    };\r\n  }\r\n});\r\n</script>\r\n","/*\r\n * @Description:\r\n * @Author:\r\n * @Date: 2020-11-23 16:12:28\r\n * @LastEditors: liufuqiang\r\n * @LastEditTime: 2021-01-22 11:07:35\r\n */\r\nimport http from \"@/utils/http3\";\r\n\r\nexport default {\r\n  // 获取摄像头详情\r\n  getLabelData(data: any) {\r\n    return http({\r\n      url: `/rcaec/bigwa`,\r\n      method: \"post\",\r\n      data\r\n    });\r\n  },\r\n  // 筛选摄像头\r\n  getLabelList(params: any) {\r\n    return http({\r\n      url: `/rcaec/bigwa`,\r\n      method: \"post\",\r\n      params\r\n    });\r\n  }\r\n};\r\n","\r\nimport { onMounted, reactive, ref, defineComponent } from \"vue\";\r\nimport api from \"@/api/label\";\r\nimport { TYPES } from \"../constVariables\";\r\nimport { ICommonTableParams, ILabelItem } from \"../types\";\r\nimport { getPagination, getPagintionCount, getMap } from \"@/utils\";\r\nimport { getAllDevice } from \"@/utils/auth\";\r\nconst CLICKED = \"clicked\";\r\n\r\nexport default defineComponent({\r\n  name: \"Label\",\r\n  setup(props, { emit }) {\r\n    const params = reactive<ICommonTableParams>({\r\n      page: 1,\r\n      size: 10,\r\n      prop: \"dnum\",\r\n      search: \"\"\r\n    });\r\n\r\n    const tableData = ref<ILabelItem[]>([]);\r\n    const total = ref(0);\r\n\r\n    async function getList() {\r\n      // const res: unknown = await api.getLabelList(params);\r\n      const deviceAll: any = getAllDevice();\r\n      const labelAll: any = [];\r\n      deviceAll.filter((item: any) => {\r\n        if (item.dtypecode === \"Epaulet\") {\r\n          labelAll.push(item);\r\n        }\r\n      });\r\n      const res =\r\n        params.search === \"\"\r\n          ? getPagination(labelAll, params.page)\r\n          : getPagination(labelAll, params.page, params.prop, params.search);\r\n      tableData.value = res;\r\n      console.log(\"label\", res);\r\n      total.value = getPagintionCount(\r\n        labelAll,\r\n        params.prop,\r\n        params.search\r\n      ) as number;\r\n    }\r\n\r\n    async function handleEdit(row: ILabelItem) {\r\n      console.log(row);\r\n    }\r\n    async function getPersonDetail(id: string) {\r\n      const params = {\r\n        act: \"fCGtP4nXdRZjr6TYeiN1611196242913\",\r\n        DeviceIdS: id\r\n      };\r\n\r\n      const res: unknown = await api.getLabelData(params);\r\n      const { data } = res as any;\r\n      emit(\"showEquipDetails\", data[0][0], TYPES.labelList);\r\n      emit(CLICKED);\r\n    }\r\n    function handleDetail(row: ILabelItem) {\r\n      getPersonDetail(row.dids);\r\n    }\r\n    async function handleDelete(row: ILabelItem) {\r\n      console.log(row);\r\n    }\r\n\r\n    async function changePage(page: number) {\r\n      params.page = page;\r\n      getList();\r\n    }\r\n    async function search() {\r\n      params.page = 1;\r\n      getList();\r\n    }\r\n\r\n    onMounted(() => {\r\n      getList();\r\n    });\r\n\r\n    return {\r\n      params,\r\n      tableData,\r\n      total,\r\n      handleEdit,\r\n      handleDelete,\r\n      changePage,\r\n      search,\r\n      getMap,\r\n      handleDetail\r\n    };\r\n  }\r\n});\r\n","import { render } from \"./labelList.vue?vue&type=template&id=5b757334\"\nimport script from \"./labelList.vue?vue&type=script&lang=ts\"\nexport * from \"./labelList.vue?vue&type=script&lang=ts\"\nscript.render = render\n\nexport default script","<!--\r\n * @Description: 警报处理\r\n * @Author: liufuqiang\r\n * @Date: 2021-01-25 13:50:04\r\n * @LastEditors: liufuqiang\r\n * @LastEditTime: 2021-01-28 15:45:51\r\n-->\r\n<template>\r\n  <div class=\"handle\" @scroll.capture=\"lazyLoad($event)\">\r\n    <div class=\"handle-class\">\r\n      <button\r\n        :class=\"flag == '未处理' ? 'active' : ''\"\r\n        @click=\"handleStatus('未处理')\"\r\n        @touchstart.stop.prevent=\"handleStatus(0)\"\r\n      >\r\n        未处理\r\n      </button>\r\n      <button\r\n        :class=\"flag == '已处理' ? 'active' : ''\"\r\n        @click=\"handleStatus('已处理')\"\r\n        @touchstart.stop.prevent=\"handleStatus(2)\"\r\n      >\r\n        已处理\r\n      </button>\r\n    </div>\r\n    <div class=\"danger-level\">\r\n      <button\r\n        :class=\"status[3]\"\r\n        @click=\"handleLevel(3)\"\r\n        @touchstart.stop.prevent=\"handleLevel(3)\"\r\n      >\r\n        全部\r\n      </button>\r\n      <button\r\n        :class=\"status[2]\"\r\n        @click=\"handleLevel(2)\"\r\n        @touchstart.stop.prevent=\"handleLevel(2)\"\r\n      >\r\n        危急\r\n      </button>\r\n      <button\r\n        :class=\"status[1]\"\r\n        @click=\"handleLevel(1)\"\r\n        @touchstart.stop.prevent=\"handleLevel(1)\"\r\n      >\r\n        严重\r\n      </button>\r\n      <button\r\n        :class=\"status[0]\"\r\n        @click=\"handleLevel(0)\"\r\n        @touchstart.stop.prevent=\"handleLevel(0)\"\r\n      >\r\n        普通\r\n      </button>\r\n    </div>\r\n\r\n    <ul ref=\"alarmBarRef\" name=\"warn-items\" @touchmove=\"scrollAlarms\">\r\n      <li\r\n        v-for=\"(item, index) in showAlarms\"\r\n        :key=\"item.Id\"\r\n        ref=\"itemsRef\"\r\n        class=\"active\"\r\n      >\r\n        <div\r\n          class=\"top-bar\"\r\n          :style=\"item.status == true ? 'filter:grayscale(0.5)' : ''\"\r\n        >\r\n          <span :style=\"styleArr[item.alarmLevel]\" class=\"alarm-level\">{{\r\n            alarmLevel(item.alarmLevel)\r\n          }}</span>\r\n          <p>\r\n            <span style=\"line-height:2.6rem\">\r\n              {{ formatTime(item.CreateTime) }}\r\n            </span>\r\n            &nbsp;-\r\n            <span>\r\n              {{ item.SourceType }}\r\n            </span>\r\n            <br />\r\n            <span :style=\"colorStyleArr[item.alarmLevel]\">{{\r\n              item.alarmContent\r\n            }}</span>\r\n          </p>\r\n        </div>\r\n        <div class=\"bot-bar\">\r\n          <el-button\r\n            size=\"mini\"\r\n            v-show=\"item.map\"\r\n            @click=\"viewToAlarm(item)\"\r\n            @touchstart.stop.prevent=\"viewToAlarm(item)\"\r\n          >\r\n            查看报警位置\r\n          </el-button>\r\n          <el-button\r\n            size=\"mini\"\r\n            @click=\"alarmDetail(item.id)\"\r\n            @touchstart.stop.prevent=\"alarmDetail(item.id)\"\r\n          >\r\n            查看详情\r\n          </el-button>\r\n          <el-popconfirm\r\n            title=\"确定处理选中的报警 ？\"\r\n            @confirm=\"handleAlarm(item.id, index, item.dispose_status)\"\r\n          >\r\n            <template #reference>\r\n              <el-button size=\"mini\" v-show=\"item.dispose_status !== 2\">\r\n                {{ item.dispose_status === 0 ? \"处理\" : \"处理\" }}\r\n              </el-button>\r\n            </template>\r\n          </el-popconfirm>\r\n        </div>\r\n      </li>\r\n      <li v-show=\"!loading\" class=\"tips\"><p>已经到底啦！</p></li>\r\n    </ul>\r\n    <div class=\"set-bar\">\r\n      <el-popconfirm title=\"确定一键处理所有报警 ？\" @confirm=\"handleAll\">\r\n        <template #reference>\r\n          <el-button size=\"mini\" v-show=\"flag != '已处理'\" class=\"single-line\">\r\n            一键处理\r\n          </el-button>\r\n        </template>\r\n      </el-popconfirm>\r\n      <span>共{{ total }}条</span>\r\n      <!-- 加载条--------------- -->\r\n      <div>\r\n        <span v-show=\"loading\" class=\"loader loader--style2\" title=\"1\">\r\n          <svg\r\n            version=\"1.1\"\r\n            id=\"loader-1\"\r\n            xmlns=\"http://www.w3.org/2000/svg\"\r\n            xmlns:xlink=\"http://www.w3.org/1999/xlink\"\r\n            x=\"0px\"\r\n            y=\"0px\"\r\n            width=\"40px\"\r\n            height=\"40px\"\r\n            viewBox=\"0 0 50 50\"\r\n            style=\"enable-background:new 0 0 50 50;\"\r\n            xml:space=\"preserve\"\r\n          >\r\n            <path\r\n              fill=\"#000\"\r\n              d=\"M25.251,6.461c-10.318,0-18.683,8.365-18.683,18.683h4.068c0-8.071,6.543-14.615,14.615-14.615V6.461z\"\r\n            >\r\n              <animateTransform\r\n                attributeType=\"xml\"\r\n                attributeName=\"transform\"\r\n                type=\"rotate\"\r\n                from=\"0 25 25\"\r\n                to=\"360 25 25\"\r\n                dur=\"0.6s\"\r\n                repeatCount=\"indefinite\"\r\n              />\r\n            </path>\r\n          </svg>\r\n        </span>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script lang=\"ts\">\r\nimport {\r\n  defineComponent,\r\n  reactive,\r\n  ref,\r\n  toRefs,\r\n  onMounted,\r\n  watch,\r\n  nextTick\r\n} from \"vue\";\r\nimport api from \"@/api/alarm\";\r\nimport { formatTime } from \"@/utils\";\r\nimport { ElMessage } from \"element-plus\";\r\n// import { ElMessage } from \"element-plus\";\r\n\r\nexport default defineComponent({\r\n  name: \"Handle\",\r\n  props: {\r\n    alarmType: {\r\n      required: false,\r\n      default: \"\"\r\n    }\r\n  },\r\n  setup(props) {\r\n    const params = reactive({\r\n      status: [\"\", \"\", \"\", \"active\"],\r\n      showAlarms: [] as any,\r\n      alarms: [],\r\n      styleArr: [\r\n        { background: \"#00A67B\" },\r\n        { background: \"#FF7352\" },\r\n        { background: \"#D9354E\" }\r\n      ],\r\n      colorStyleArr: [\r\n        { color: \"#00A67B\" },\r\n        { color: \"#FF7352\" },\r\n        { color: \"#D9354E\" }\r\n      ],\r\n      flag: \"未处理\",\r\n      size: 10,\r\n      page: 1,\r\n      loading: false,\r\n      oldY: undefined,\r\n      disposeStatus: \"未处理\", // 处理状态\r\n      typeid: \"\", // 报警类型id\r\n      alarmLevel: \"\" as string | number,\r\n      alarmTypeArr: [], // 报警类型\r\n      alarmTypeName: \"全部类型\",\r\n      total: 0,\r\n      contentVisiable: false // 详情弹框\r\n    });\r\n\r\n    const itemsRef = ref();\r\n    const alarmBarRef = ref();\r\n    const dataRef = toRefs(params);\r\n    async function getAlarmList() {\r\n      const param = {\r\n        act: \"6Z6wTPGkfMVF9eLTOXA1611040899987\",\r\n        curpage: params.page,\r\n        // eslint-disable-next-line @typescript-eslint/camelcase\r\n        sys_showpagesize: params.size,\r\n        ShowSceneNum: \"\",\r\n        SourceType: props.alarmType,\r\n        alarmLevel: params.alarmLevel,\r\n        sTime: \"\",\r\n        eTime: \"\",\r\n        alarmProgress: params.disposeStatus\r\n      };\r\n      const res = await api.getAllAlamList(param);\r\n      const { result, data } = res as any;\r\n\r\n      if (result.success) {\r\n        params.showAlarms = [...params.showAlarms, ...data.content];\r\n        params.total = data.count;\r\n      }\r\n      params.loading = false;\r\n    }\r\n\r\n    // 报警等级\r\n    function alarmLevel(n: number) {\r\n      const arr = [\"普通\", \"严重\", \"危急\"];\r\n      return arr[n];\r\n    }\r\n\r\n    function scrollAlarms(e: any) {\r\n      const newY = e.targetTouches[0].pageX;\r\n      if (params.oldY === undefined) {\r\n        params.oldY = newY;\r\n      }\r\n      const y = params.oldY === undefined ? newY : params.oldY;\r\n      alarmBarRef.value.scrollTop -= newY - y;\r\n      params.oldY = newY;\r\n    }\r\n    // 选择处理状态筛选\r\n    function handleStatus(count: string) {\r\n      params.loading = true;\r\n      if (params.disposeStatus == count) {\r\n        params.loading = false;\r\n        return;\r\n      }\r\n      params.page = 1;\r\n      params.flag = count;\r\n      params.disposeStatus = count;\r\n      params.showAlarms = [];\r\n      getAlarmList();\r\n    }\r\n    // 滚动按需加载\r\n    function lazyLoad(e: any) {\r\n      const itemLength = itemsRef.value && itemsRef.value.offsetHeight;\r\n      const ulLength = alarmBarRef.value.offsetHeight;\r\n      if (\r\n        e.target.scrollTop >\r\n        itemLength * params.page * params.size - ulLength\r\n      ) {\r\n        if (params.showAlarms.length < params.page * params.size) {\r\n          return;\r\n        }\r\n\r\n        params.page += 1;\r\n        params.loading = true;\r\n        getAlarmList();\r\n      }\r\n    }\r\n    // 选择报警等级筛选\r\n    function handleLevel(count: number) {\r\n      params.loading = true;\r\n      if (\r\n        params.alarmLevel === count ||\r\n        (params.alarmLevel === \"\" && count === 3)\r\n      ) {\r\n        params.loading = false;\r\n        return;\r\n      }\r\n      params.status = [\"\", \"\", \"\", \"\"];\r\n      params.status[count] = \"active\";\r\n      if (count === 3) {\r\n        params.alarmLevel = \"\";\r\n      } else {\r\n        params.alarmLevel = count;\r\n      }\r\n      params.page = 1;\r\n      params.showAlarms = [];\r\n      getAlarmList();\r\n    }\r\n\r\n    // 报警详情\r\n    function alarmDetail(id: string | number) {\r\n      console.log(id);\r\n      params.contentVisiable = true;\r\n    }\r\n\r\n    // 处理报警信息\r\n    function handleAlarm(id: string | number, index: number) {\r\n      // const res = api.handleAlarmData;\r\n      // const { data } = res as any;\r\n      // getAlarmList();\r\n      params.showAlarms.splice(index, 1);\r\n      params.total = params.total - 1;\r\n      ElMessage.success(\"处理成功!\");\r\n    }\r\n\r\n    //一键处理\r\n    function handleAll() {\r\n      params.showAlarms = [];\r\n      // const res = api.dealAlarms;\r\n      // const { data } = res as any;\r\n      // getAlarmList();\r\n      ElMessage.success(\"处理成功!\");\r\n    }\r\n\r\n    onMounted(() => {\r\n      getAlarmList();\r\n    });\r\n\r\n    watch(\r\n      () => props.alarmType,\r\n      val => {\r\n        nextTick(() => {\r\n          params.page = 1;\r\n          params.showAlarms = [];\r\n          getAlarmList();\r\n        });\r\n      }\r\n    );\r\n    return {\r\n      ...dataRef,\r\n      itemsRef,\r\n      alarmBarRef,\r\n      formatTime,\r\n      alarmLevel,\r\n      scrollAlarms,\r\n      handleStatus,\r\n      lazyLoad,\r\n      handleLevel,\r\n      alarmDetail,\r\n      handleAll,\r\n      handleAlarm\r\n    };\r\n  }\r\n});\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\nbutton {\r\n  border: 0;\r\n  background: 0;\r\n  cursor: pointer;\r\n  outline: none;\r\n}\r\n.handle {\r\n  width: 98%;\r\n  min-width: 220px;\r\n  height: 100vh;\r\n  color: #fff;\r\n  position: relative;\r\n  background: rgb(9, 29, 75, 0.5);\r\n  opacity: 0.95;\r\n  .handle-class {\r\n    display: flex;\r\n    justify-content: space-around;\r\n    button {\r\n      flex-grow: 1;\r\n      line-height: 4rem;\r\n      font-size: 1.6rem;\r\n      background: #23406f;\r\n      color: #fff;\r\n      padding: 0 0.6rem;\r\n      cursor: pointer;\r\n      border-radius: 0;\r\n      width: 100%;\r\n    }\r\n    .active {\r\n      background: 0;\r\n      font-size: 1.6rem;\r\n      font-family: Microsoft YaHei;\r\n      font-weight: 400;\r\n      color: rgba(61, 209, 255, 1);\r\n      line-height: 2rem;\r\n    }\r\n  }\r\n  .danger-level {\r\n    display: flex;\r\n    justify-content: space-between;\r\n    padding: 0rem 0rem 0rem 1rem;\r\n    /* width: 98%; */\r\n    button {\r\n      line-height: 3rem;\r\n      margin: 1rem 0;\r\n      color: #ffffff;\r\n      background: #3672c3;\r\n      border-radius: 0.3rem;\r\n      padding: 0 1.9rem;\r\n      font-size: 1.4rem;\r\n      font-family: Microsoft YaHei;\r\n      font-weight: 400;\r\n      color: rgba(255, 255, 255, 1);\r\n      span {\r\n        margin-left: 1.5rem;\r\n      }\r\n    }\r\n    .active {\r\n      background: #3dd1ff;\r\n    }\r\n  }\r\n  .alarm-type {\r\n    display: flex;\r\n    font-size: 1.4rem;\r\n    align-items: center;\r\n    padding-left: 1rem;\r\n    padding-bottom: 1rem;\r\n    .spinner-item {\r\n      width: 17rem;\r\n      min-width: 120px;\r\n    }\r\n  }\r\n  ul {\r\n    // border-bottom: 1px solid rgba(134, 208, 255, 0.2);\r\n    height: 70%;\r\n    overflow: auto;\r\n    &::-webkit-scrollbar {\r\n      /*滚动条整体样式*/\r\n      width: 0.7rem; /*高宽分别对应横竖滚动条的尺寸*/\r\n    }\r\n    &::-webkit-scrollbar-thumb {\r\n      /*滚动条里面小方块*/\r\n      border-radius: 0.3rem;\r\n      background: rgba(134, 208, 255, 0.3);\r\n    }\r\n    li.tips {\r\n      p {\r\n        margin: 0 auto;\r\n        text-align: center;\r\n        width: 100px;\r\n      }\r\n    }\r\n    li.active {\r\n      margin: 0 1rem 0.6rem 1rem;\r\n      color: rgba(255, 255, 255, 1);\r\n      font-size: 1.4rem;\r\n      height: 11rem;\r\n      min-height: 70px;\r\n      background: rgba(39, 74, 127, 1);\r\n      border: 1px solid rgba(51, 119, 233, 1);\r\n      border-radius: 0.3rem;\r\n      box-sizing: border-box;\r\n      .top-bar {\r\n        display: flex;\r\n        justify-content: space-between;\r\n        align-items: center;\r\n        .alarm-level {\r\n          display: inline-block;\r\n          width: 5rem;\r\n          min-width: 20px;\r\n          min-height: 35px;\r\n          line-height: 5rem;\r\n          font-size: 1.6rem;\r\n          text-align: center;\r\n          margin: 0.5rem;\r\n          border-radius: 0.4rem;\r\n        }\r\n        p {\r\n          margin: 0;\r\n          width: 80%;\r\n          min-width: 150px;\r\n          padding-right: 0.6rem;\r\n          font-size: 1.3rem;\r\n          line-height: 1.6rem;\r\n        }\r\n      }\r\n      .bot-bar {\r\n        text-align: right;\r\n        line-height: 2.6rem;\r\n        margin-top: 0.6rem;\r\n        button {\r\n          font-size: 1.2rem;\r\n          color: #fff;\r\n          background: rgba(54, 114, 195, 1);\r\n          border-radius: 0.3rem;\r\n          margin-right: 1rem;\r\n        }\r\n        :hover {\r\n          background: rgba(61, 209, 255, 1);\r\n          color: rgba(28, 46, 86, 1);\r\n        }\r\n      }\r\n    }\r\n  }\r\n  .set-bar {\r\n    width: 100%;\r\n    padding: 0.6rem 2rem;\r\n    text-align: center;\r\n    font-size: 1.2rem;\r\n    bottom: 1rem;\r\n    button {\r\n      color: #fff;\r\n      width: 10rem;\r\n      background: rgba(54, 114, 195, 1);\r\n      margin-right: 1rem;\r\n      border-radius: 0.3rem;\r\n      &:hover {\r\n        background: rgba(61, 209, 255, 1);\r\n        color: rgba(28, 46, 86, 1);\r\n      }\r\n    }\r\n  }\r\n}\r\n</style>\r\n","\r\nimport {\r\n  defineComponent,\r\n  reactive,\r\n  ref,\r\n  toRefs,\r\n  onMounted,\r\n  watch,\r\n  nextTick\r\n} from \"vue\";\r\nimport api from \"@/api/alarm\";\r\nimport { formatTime } from \"@/utils\";\r\nimport { ElMessage } from \"element-plus\";\r\n// import { ElMessage } from \"element-plus\";\r\n\r\nexport default defineComponent({\r\n  name: \"Handle\",\r\n  props: {\r\n    alarmType: {\r\n      required: false,\r\n      default: \"\"\r\n    }\r\n  },\r\n  setup(props) {\r\n    const params = reactive({\r\n      status: [\"\", \"\", \"\", \"active\"],\r\n      showAlarms: [] as any,\r\n      alarms: [],\r\n      styleArr: [\r\n        { background: \"#00A67B\" },\r\n        { background: \"#FF7352\" },\r\n        { background: \"#D9354E\" }\r\n      ],\r\n      colorStyleArr: [\r\n        { color: \"#00A67B\" },\r\n        { color: \"#FF7352\" },\r\n        { color: \"#D9354E\" }\r\n      ],\r\n      flag: \"未处理\",\r\n      size: 10,\r\n      page: 1,\r\n      loading: false,\r\n      oldY: undefined,\r\n      disposeStatus: \"未处理\", // 处理状态\r\n      typeid: \"\", // 报警类型id\r\n      alarmLevel: \"\" as string | number,\r\n      alarmTypeArr: [], // 报警类型\r\n      alarmTypeName: \"全部类型\",\r\n      total: 0,\r\n      contentVisiable: false // 详情弹框\r\n    });\r\n\r\n    const itemsRef = ref();\r\n    const alarmBarRef = ref();\r\n    const dataRef = toRefs(params);\r\n    async function getAlarmList() {\r\n      const param = {\r\n        act: \"6Z6wTPGkfMVF9eLTOXA1611040899987\",\r\n        curpage: params.page,\r\n        // eslint-disable-next-line @typescript-eslint/camelcase\r\n        sys_showpagesize: params.size,\r\n        ShowSceneNum: \"\",\r\n        SourceType: props.alarmType,\r\n        alarmLevel: params.alarmLevel,\r\n        sTime: \"\",\r\n        eTime: \"\",\r\n        alarmProgress: params.disposeStatus\r\n      };\r\n      const res = await api.getAllAlamList(param);\r\n      const { result, data } = res as any;\r\n\r\n      if (result.success) {\r\n        params.showAlarms = [...params.showAlarms, ...data.content];\r\n        params.total = data.count;\r\n      }\r\n      params.loading = false;\r\n    }\r\n\r\n    // 报警等级\r\n    function alarmLevel(n: number) {\r\n      const arr = [\"普通\", \"严重\", \"危急\"];\r\n      return arr[n];\r\n    }\r\n\r\n    function scrollAlarms(e: any) {\r\n      const newY = e.targetTouches[0].pageX;\r\n      if (params.oldY === undefined) {\r\n        params.oldY = newY;\r\n      }\r\n      const y = params.oldY === undefined ? newY : params.oldY;\r\n      alarmBarRef.value.scrollTop -= newY - y;\r\n      params.oldY = newY;\r\n    }\r\n    // 选择处理状态筛选\r\n    function handleStatus(count: string) {\r\n      params.loading = true;\r\n      if (params.disposeStatus == count) {\r\n        params.loading = false;\r\n        return;\r\n      }\r\n      params.page = 1;\r\n      params.flag = count;\r\n      params.disposeStatus = count;\r\n      params.showAlarms = [];\r\n      getAlarmList();\r\n    }\r\n    // 滚动按需加载\r\n    function lazyLoad(e: any) {\r\n      const itemLength = itemsRef.value && itemsRef.value.offsetHeight;\r\n      const ulLength = alarmBarRef.value.offsetHeight;\r\n      if (\r\n        e.target.scrollTop >\r\n        itemLength * params.page * params.size - ulLength\r\n      ) {\r\n        if (params.showAlarms.length < params.page * params.size) {\r\n          return;\r\n        }\r\n\r\n        params.page += 1;\r\n        params.loading = true;\r\n        getAlarmList();\r\n      }\r\n    }\r\n    // 选择报警等级筛选\r\n    function handleLevel(count: number) {\r\n      params.loading = true;\r\n      if (\r\n        params.alarmLevel === count ||\r\n        (params.alarmLevel === \"\" && count === 3)\r\n      ) {\r\n        params.loading = false;\r\n        return;\r\n      }\r\n      params.status = [\"\", \"\", \"\", \"\"];\r\n      params.status[count] = \"active\";\r\n      if (count === 3) {\r\n        params.alarmLevel = \"\";\r\n      } else {\r\n        params.alarmLevel = count;\r\n      }\r\n      params.page = 1;\r\n      params.showAlarms = [];\r\n      getAlarmList();\r\n    }\r\n\r\n    // 报警详情\r\n    function alarmDetail(id: string | number) {\r\n      console.log(id);\r\n      params.contentVisiable = true;\r\n    }\r\n\r\n    // 处理报警信息\r\n    function handleAlarm(id: string | number, index: number) {\r\n      // const res = api.handleAlarmData;\r\n      // const { data } = res as any;\r\n      // getAlarmList();\r\n      params.showAlarms.splice(index, 1);\r\n      params.total = params.total - 1;\r\n      ElMessage.success(\"处理成功!\");\r\n    }\r\n\r\n    //一键处理\r\n    function handleAll() {\r\n      params.showAlarms = [];\r\n      // const res = api.dealAlarms;\r\n      // const { data } = res as any;\r\n      // getAlarmList();\r\n      ElMessage.success(\"处理成功!\");\r\n    }\r\n\r\n    onMounted(() => {\r\n      getAlarmList();\r\n    });\r\n\r\n    watch(\r\n      () => props.alarmType,\r\n      val => {\r\n        nextTick(() => {\r\n          params.page = 1;\r\n          params.showAlarms = [];\r\n          getAlarmList();\r\n        });\r\n      }\r\n    );\r\n    return {\r\n      ...dataRef,\r\n      itemsRef,\r\n      alarmBarRef,\r\n      formatTime,\r\n      alarmLevel,\r\n      scrollAlarms,\r\n      handleStatus,\r\n      lazyLoad,\r\n      handleLevel,\r\n      alarmDetail,\r\n      handleAll,\r\n      handleAlarm\r\n    };\r\n  }\r\n});\r\n","import { render } from \"./handle.vue?vue&type=template&id=8316ca22&scoped=true\"\nimport script from \"./handle.vue?vue&type=script&lang=ts\"\nexport * from \"./handle.vue?vue&type=script&lang=ts\"\n\nimport \"./handle.vue?vue&type=style&index=0&id=8316ca22&lang=scss&scoped=true\"\nscript.render = render\nscript.__scopeId = \"data-v-8316ca22\"\n\nexport default script","<!--\r\n * @Description: \r\n * @Author: huxianc\r\n * @Date: 2021-01-26 15:53:38\r\n * @LastEditors: huxianc\r\n * @LastEditTime: 2021-01-26 17:01:23\r\n-->\r\n<template>\r\n  <div\r\n    v-show=\"personList.length\"\r\n    ref=\"listRef\"\r\n    class=\"person-list-container\"\r\n    :style=\"styleAttrs ? styleAttrs : {}\"\r\n    :class=\"{ hidden: hiddenRef }\"\r\n  >\r\n    <el-scrollbar style=\"max-height: 400px\">\r\n      <div\r\n        v-for=\"item in personList\"\r\n        :key=\"item.name\"\r\n        class=\"person-item\"\r\n        @click=\"handleClick(item)\"\r\n      >\r\n        {{ item.name }}\r\n      </div>\r\n    </el-scrollbar>\r\n  </div>\r\n</template>\r\n\r\n<script lang=\"ts\">\r\nimport {\r\n  defineComponent,\r\n  nextTick,\r\n  onMounted,\r\n  PropType,\r\n  ref,\r\n  shallowReactive,\r\n  shallowRef,\r\n  watch\r\n} from \"vue\";\r\nimport { getCorrectPx } from \"../utils\";\r\nimport { IPos, IStyleLeftTop } from \"../types\";\r\n\r\nconst CLICKED = \"clicked\";\r\n\r\nexport default defineComponent({\r\n  props: {\r\n    // 右键菜单列表\r\n    personList: {\r\n      type: Array,\r\n      default: () => []\r\n    },\r\n    // 传过来的鼠标位置\r\n    mousePosition: {\r\n      type: Object as PropType<IStyleLeftTop>,\r\n      default: () => ({})\r\n    }\r\n  },\r\n  emits: [CLICKED],\r\n  setup(props, { emit }) {\r\n    const styleAttrs = shallowReactive<IPos>({ x: 0, y: 0 });\r\n    const hiddenRef = shallowRef<boolean>(true);\r\n\r\n    const listRef = ref();\r\n\r\n    function getPx() {\r\n      nextTick(() => {\r\n        const res = getCorrectPx(\r\n          listRef.value as HTMLElement,\r\n          props.mousePosition\r\n        );\r\n\r\n        const positions = {};\r\n        for (const key in res) {\r\n          positions[key] = res[key] + \"px\";\r\n        }\r\n\r\n        Object.assign(styleAttrs, positions);\r\n        hiddenRef.value = false;\r\n      });\r\n    }\r\n\r\n    watch(\r\n      () => props.mousePosition,\r\n      () => {\r\n        getPx();\r\n      }\r\n    );\r\n\r\n    onMounted(() => {\r\n      getPx();\r\n    });\r\n\r\n    function handleClick(item: any) {\r\n      emit(CLICKED, item);\r\n    }\r\n\r\n    return { styleAttrs, hiddenRef, listRef, handleClick };\r\n  }\r\n});\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n.person-list-container {\r\n  position: absolute;\r\n  padding: 10px 0;\r\n  background: #fff;\r\n  color: #333;\r\n  top: 0;\r\n  z-index: 99999;\r\n  border-radius: 4px;\r\n  box-shadow: 0 2px 12px 0 rgb(0 0 0 / 10%);\r\n  border: 1px solid #ebeef5;\r\n  &.hidden {\r\n    visibility: hidden;\r\n  }\r\n}\r\n.person-item {\r\n  padding: 0 20px;\r\n  font-size: 14px;\r\n  color: #606266;\r\n  line-height: 36px;\r\n  outline: none;\r\n  cursor: pointer;\r\n  white-space: nowrap;\r\n  &:hover {\r\n    background: #ecf5ff;\r\n    color: #66b1ff;\r\n  }\r\n}\r\n</style>\r\n","\r\nimport {\r\n  defineComponent,\r\n  nextTick,\r\n  onMounted,\r\n  PropType,\r\n  ref,\r\n  shallowReactive,\r\n  shallowRef,\r\n  watch\r\n} from \"vue\";\r\nimport { getCorrectPx } from \"../utils\";\r\nimport { IPos, IStyleLeftTop } from \"../types\";\r\n\r\nconst CLICKED = \"clicked\";\r\n\r\nexport default defineComponent({\r\n  props: {\r\n    // 右键菜单列表\r\n    personList: {\r\n      type: Array,\r\n      default: () => []\r\n    },\r\n    // 传过来的鼠标位置\r\n    mousePosition: {\r\n      type: Object as PropType<IStyleLeftTop>,\r\n      default: () => ({})\r\n    }\r\n  },\r\n  emits: [CLICKED],\r\n  setup(props, { emit }) {\r\n    const styleAttrs = shallowReactive<IPos>({ x: 0, y: 0 });\r\n    const hiddenRef = shallowRef<boolean>(true);\r\n\r\n    const listRef = ref();\r\n\r\n    function getPx() {\r\n      nextTick(() => {\r\n        const res = getCorrectPx(\r\n          listRef.value as HTMLElement,\r\n          props.mousePosition\r\n        );\r\n\r\n        const positions = {};\r\n        for (const key in res) {\r\n          positions[key] = res[key] + \"px\";\r\n        }\r\n\r\n        Object.assign(styleAttrs, positions);\r\n        hiddenRef.value = false;\r\n      });\r\n    }\r\n\r\n    watch(\r\n      () => props.mousePosition,\r\n      () => {\r\n        getPx();\r\n      }\r\n    );\r\n\r\n    onMounted(() => {\r\n      getPx();\r\n    });\r\n\r\n    function handleClick(item: any) {\r\n      emit(CLICKED, item);\r\n    }\r\n\r\n    return { styleAttrs, hiddenRef, listRef, handleClick };\r\n  }\r\n});\r\n","import { render } from \"./layerPersonList.vue?vue&type=template&id=556b882e&scoped=true\"\nimport script from \"./layerPersonList.vue?vue&type=script&lang=ts\"\nexport * from \"./layerPersonList.vue?vue&type=script&lang=ts\"\n\nimport \"./layerPersonList.vue?vue&type=style&index=0&id=556b882e&lang=scss&scoped=true\"\nscript.render = render\nscript.__scopeId = \"data-v-556b882e\"\n\nexport default script","<!--\r\n * @Description: \r\n * @Author: huxianc\r\n * @Date: 2021-01-27 13:42:57\r\n * @LastEditors: huxianc\r\n * @LastEditTime: 2021-01-28 10:55:37\r\n-->\r\n<template>\r\n  <div v-drag-dialog=\"`form-header,custom-form`\">\r\n    <div class=\"custom-form map-container\">\r\n      <div class=\"form-header\">\r\n        <div class=\"title\">选择地图</div>\r\n        <button class=\"closebtx\" @click=\"handleClickHeaderClose\">\r\n          <i class=\"el-icon el-icon-close\" />\r\n        </button>\r\n      </div>\r\n      <div class=\"form-body\">\r\n        <div class=\"map-content\">\r\n          <div\r\n            class=\"map-item\"\r\n            v-for=\"mapItem in mapList\"\r\n            :key=\"mapItem.snum\"\r\n            :class=\"{ active: mapItem.snum === mapId }\"\r\n            @click=\"changeMap(mapItem.snum)\"\r\n          >\r\n            <img :src=\"imgUrl + mapItem.surl\" alt=\"\" />\r\n            <span>\r\n              {{ mapItem.sname }}\r\n            </span>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script lang=\"ts\">\r\nimport dragDialog from \"../directive/drag-dialog\";\r\nimport { imgUrl } from \"@/utils/urls\";\r\n\r\nimport { defineComponent, PropType } from \"vue\";\r\nimport { IMapArrItem } from \"../types\";\r\n\r\nconst CLOSED = \"closed\";\r\nconst ChangeMap = \"changeMap\";\r\n\r\nexport default defineComponent({\r\n  name: \"mapChoosen\",\r\n  directives: { \"drag-dialog\": dragDialog },\r\n  props: {\r\n    mapId: {\r\n      type: String,\r\n      required: true\r\n    },\r\n    mapList: {\r\n      type: Object as PropType<IMapArrItem[]>,\r\n      default: () => []\r\n    }\r\n  },\r\n  emits: [CLOSED, ChangeMap],\r\n  setup(props, { emit }) {\r\n    function handleClickHeaderClose() {\r\n      emit(CLOSED);\r\n    }\r\n    function changeMap(mapId: string) {\r\n      if (mapId === props.mapId) return;\r\n      emit(ChangeMap, mapId);\r\n    }\r\n    return {\r\n      imgUrl,\r\n      handleClickHeaderClose,\r\n      changeMap\r\n    };\r\n  }\r\n});\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n.map-container {\r\n  /* top: 50%;\r\n  left: 50%;\r\n  transform: translate(-50%, 0); */\r\n}\r\n.map-content {\r\n  display: flex;\r\n  align-items: center;\r\n  flex-wrap: wrap;\r\n  max-height: 600px;\r\n  overflow-y: scroll;\r\n}\r\n.map-item {\r\n  width: 45%;\r\n  margin: 2.5%;\r\n  display: flex;\r\n  flex-direction: column;\r\n  max-height: 126px;\r\n  padding: 2%;\r\n  justify-content: center;\r\n  align-items: center;\r\n  background: url(\"../../../../assets/dashboard/equip_unchecked.png\") repeat\r\n    center center/100% 100%;\r\n  overflow: hidden;\r\n  transition: color 0.3s ease-in-out;\r\n  cursor: pointer;\r\n  img {\r\n    width: 96%;\r\n  }\r\n  span {\r\n    display: inline-block;\r\n    margin-top: 10px;\r\n    font-size: 14px;\r\n  }\r\n  &.active,\r\n  &:hover {\r\n    background-image: url(\"../../../../assets/dashboard/important_monitor.png\");\r\n    color: #3ed2ff;\r\n  }\r\n}\r\n</style>\r\n","\r\nimport dragDialog from \"../directive/drag-dialog\";\r\nimport { imgUrl } from \"@/utils/urls\";\r\n\r\nimport { defineComponent, PropType } from \"vue\";\r\nimport { IMapArrItem } from \"../types\";\r\n\r\nconst CLOSED = \"closed\";\r\nconst ChangeMap = \"changeMap\";\r\n\r\nexport default defineComponent({\r\n  name: \"mapChoosen\",\r\n  directives: { \"drag-dialog\": dragDialog },\r\n  props: {\r\n    mapId: {\r\n      type: String,\r\n      required: true\r\n    },\r\n    mapList: {\r\n      type: Object as PropType<IMapArrItem[]>,\r\n      default: () => []\r\n    }\r\n  },\r\n  emits: [CLOSED, ChangeMap],\r\n  setup(props, { emit }) {\r\n    function handleClickHeaderClose() {\r\n      emit(CLOSED);\r\n    }\r\n    function changeMap(mapId: string) {\r\n      if (mapId === props.mapId) return;\r\n      emit(ChangeMap, mapId);\r\n    }\r\n    return {\r\n      imgUrl,\r\n      handleClickHeaderClose,\r\n      changeMap\r\n    };\r\n  }\r\n});\r\n","import { render } from \"./mapChoosen.vue?vue&type=template&id=7ff0bed1&scoped=true\"\nimport script from \"./mapChoosen.vue?vue&type=script&lang=ts\"\nexport * from \"./mapChoosen.vue?vue&type=script&lang=ts\"\n\nimport \"./mapChoosen.vue?vue&type=style&index=0&id=7ff0bed1&lang=scss&scoped=true\"\nscript.render = render\nscript.__scopeId = \"data-v-7ff0bed1\"\n\nexport default script","<!--\r\n * @Description: \r\n * @Author: liufuqiang\r\n * @Date: 2021-01-28 10:33:15\r\n * @LastEditors: liufuqiang\r\n * @LastEditTime: 2021-01-28 11:20:16\r\n-->\r\n<template>\r\n  <ul class=\"fence-box\">\r\n    <li\r\n      v-for=\"(item, index) in list\"\r\n      :key=\"index\"\r\n      :class=\"{ active: index === 0 }\"\r\n      @click=\"handleClick(item, index)\"\r\n    >\r\n      {{ item.label }}\r\n    </li>\r\n  </ul>\r\n</template>\r\n\r\n<script lang=\"ts\">\r\ninterface ILabel {\r\n  label: string;\r\n}\r\n\r\nconst emitObj = {\r\n  1: \"revoke\",\r\n  2: \"redraw\",\r\n  3: \"cancel\",\r\n  4: \"finish\"\r\n};\r\n\r\nimport { defineComponent } from \"vue\";\r\nexport default defineComponent({\r\n  name: \"AlarmContent\",\r\n  emits: Object.keys(emitObj).map(key => emitObj[key]),\r\n  setup(props, { emit }) {\r\n    const list: ILabel[] = [\r\n      {\r\n        label: \"绘制\"\r\n      },\r\n      {\r\n        label: \"撤销\"\r\n      },\r\n      {\r\n        label: \"重新绘制\"\r\n      },\r\n      {\r\n        label: \"取消\"\r\n      },\r\n      {\r\n        label: \"完成\"\r\n      }\r\n    ];\r\n    function handleClick(item: ILabel, index: number) {\r\n      emit(emitObj[index]);\r\n    }\r\n    return {\r\n      list,\r\n      handleClick\r\n    };\r\n  }\r\n});\r\n</script>\r\n","\r\ninterface ILabel {\r\n  label: string;\r\n}\r\n\r\nconst emitObj = {\r\n  1: \"revoke\",\r\n  2: \"redraw\",\r\n  3: \"cancel\",\r\n  4: \"finish\"\r\n};\r\n\r\nimport { defineComponent } from \"vue\";\r\nexport default defineComponent({\r\n  name: \"AlarmContent\",\r\n  emits: Object.keys(emitObj).map(key => emitObj[key]),\r\n  setup(props, { emit }) {\r\n    const list: ILabel[] = [\r\n      {\r\n        label: \"绘制\"\r\n      },\r\n      {\r\n        label: \"撤销\"\r\n      },\r\n      {\r\n        label: \"重新绘制\"\r\n      },\r\n      {\r\n        label: \"取消\"\r\n      },\r\n      {\r\n        label: \"完成\"\r\n      }\r\n    ];\r\n    function handleClick(item: ILabel, index: number) {\r\n      emit(emitObj[index]);\r\n    }\r\n    return {\r\n      list,\r\n      handleClick\r\n    };\r\n  }\r\n});\r\n","import { render } from \"./alarmContent.vue?vue&type=template&id=a60d22ee\"\nimport script from \"./alarmContent.vue?vue&type=script&lang=ts\"\nexport * from \"./alarmContent.vue?vue&type=script&lang=ts\"\nscript.render = render\n\nexport default script","\r\nimport {\r\n  defineComponent,\r\n  onMounted,\r\n  onUnmounted,\r\n  reactive,\r\n  shallowReactive,\r\n  ref,\r\n  shallowRef,\r\n  computed,\r\n  watch,\r\n  nextTick,\r\n} from \"vue\";\r\nimport stageApi from \"@/api/stage\";\r\nimport cameraApi from \"@/api/camera\";\r\nimport alarmApi from \"@/api/alarm\";\r\nimport commonApi from \"@/api/common\";\r\nimport { imgUrl } from \"@/utils/urls\";\r\nimport { IResponseCommon, ISelectOption } from \"@/types/index\";\r\n\r\nimport {\r\n  IMapArrItem,\r\n  IDeviceItem,\r\n  IMapData,\r\n  IListData,\r\n  IImageObj,\r\n  IImageAbout,\r\n  Nullable,\r\n  IPersonArrItem,\r\n  IDrawFenceInfo,\r\n  IActiveTarget,\r\n  IEquipmentInfo,\r\n  IDetailsForm,\r\n  IStyleLeftTop,\r\n  ICanvasState,\r\n  IMessageClose,\r\n  TLayerItem,\r\n  TVectorgraph,\r\n  IBuildItem,\r\n  ISvgToImageConfig,\r\n  IAreaItem,\r\n} from \"./types/index\";\r\nimport { ICacheImage, ICachePerson, ICacheBubble } from \"./types/cacheObj\";\r\nimport { IAlarmType, IAlarmInfo, IAlarmListInfo } from \"./types/alarm\";\r\nimport {\r\n  IAddEditFenceParams,\r\n  ISetDeviceData,\r\n  ISetDeviceDataItem,\r\n  IRuleItem,\r\n  IFenceInfo,\r\n  IFenceListInfo,\r\n  IRuleListInfo,\r\n  IRuleItemDetail,\r\n  IRuleItemDetailRule,\r\n  IUpperPos,\r\n} from \"./types/fence\";\r\n// todo konva 按需引入  https://www.npmjs.com/package/konva Minimal bundle\r\nimport Konva from \"konva\";\r\nimport { Stage } from \"konva/types/Stage\";\r\nimport { ElMessage, ElMessageBox } from \"element-plus\";\r\nimport type { Pane } from \"element-plus/lib/el-tabs/src/tabs.vue\";\r\nimport {\r\n  getOffset,\r\n  screenTocanvas,\r\n  canvasToStage,\r\n  strToPos,\r\n  svgToImage,\r\n  guid,\r\n  generateImageDomByType,\r\n  getWsUrl,\r\n} from \"./utils\";\r\nimport dragDialog from \"./directive/drag-dialog\";\r\nimport { cloneDeep, debounce } from \"lodash\";\r\nimport { KonvaEventObject } from \"konva/types/Node\";\r\n// import { AxiosResponse } from \"axios\";\r\nimport {\r\n  mainNav,\r\n  personList,\r\n  cameraList,\r\n  basestationList,\r\n  fenceBox,\r\n  contextmenuContent,\r\n  formContent,\r\n  monitorList,\r\n  historyMonitor,\r\n  labelList,\r\n  handle,\r\n  layerPersonList,\r\n  mapChoosen,\r\n} from \"./components\";\r\n\r\n// 常量\r\nimport {\r\n  NAV_INFO,\r\n  FENCE,\r\n  ALARM,\r\n  TITLE_HEIGHT as titleHeight,\r\n  TYPES,\r\n  ALL_MENU,\r\n  equipIconConfig,\r\n  areaRulesOption,\r\n  formateRuleType,\r\n  bgImageConfig,\r\n  areaColorConfig,\r\n} from \"./constVariables\";\r\n\r\nimport {\r\n  commonRuleItem,\r\n  customFuncRule,\r\n  checkPositiveInteger,\r\n  getPagination,\r\n  formatTime,\r\n} from \"@/utils\";\r\nimport { Shape } from \"konva/types/Shape\";\r\nimport { IELForm } from \"./types/element\";\r\nimport { Image } from \"konva/types/shapes/Image\";\r\nimport { getLoadSNum, setAllDevice } from \"@/utils/auth\";\r\n// import { Text } from \"konva/types/shapes/Text\";\r\n// import { Layer } from \"konva/types/Layer\";\r\n// 第三方引入\r\nimport dayjs from \"dayjs\";\r\n\r\nconst BG_NAME = \"bg-img\";\r\nconst ADD_EQUIP = \"addEquip\";\r\nconst TRACK_PLAYBACK_PERSON = \"trackPlaybackPerson\";\r\nconst defaultCameraType = 1; // 摄像头默认类\r\n\r\nconst wsUrl = getWsUrl();\r\nconsole.log(wsUrl);\r\n\r\nenum EpauletActionCode {\r\n  HTagInit = 1000, //标签初始化\r\n  HTagOnline = 1001, //单个标签上线\r\n  HTagOffline = 1002, //单个标签下线\r\n  HTagMove = 1003, //单个标签移动\r\n  HLayerGroupStatistics = 1004, //图层统计\r\n  HTagLogOff = 1005, //单个标签注销\r\n}\r\n\r\nconst warningListWidth = \"-350px\";\r\n\r\nexport default defineComponent({\r\n  name: \"Content\",\r\n  directives: {\r\n    dragDialog,\r\n  },\r\n  components: {\r\n    mainNav,\r\n    personList,\r\n    cameraList,\r\n    basestationList,\r\n    fenceBox,\r\n    contextmenuContent,\r\n    formContent,\r\n    monitorList,\r\n    historyMonitor,\r\n    labelList,\r\n    handle,\r\n    layerPersonList,\r\n    mapChoosen,\r\n  },\r\n  setup() {\r\n    const warningWidth = shallowRef<string>(warningListWidth);\r\n    // const warningWidth = shallowRef<string>(\"0px\");\r\n\r\n    const mapObj = reactive<IMapData>({}); // 后端传过来的地图 obj\r\n    const mapListRef = ref<IMapArrItem[]>([]); // 后端传过来的地图 obj\r\n    const mapIdRef = shallowRef<string>(getLoadSNum() || \"S-jb04\");\r\n    const mapNameRef = shallowRef<string>();\r\n\r\n    const cameraImageObjRef = ref<IImageObj>({});\r\n    const personImageObjRef = ref<IImageObj>({});\r\n    const basestationImageObjRef = ref<HTMLImageElement | null>(null);\r\n\r\n    const clickTimerRef = ref<Nullable<number>>(null);\r\n\r\n    const state = reactive<ICanvasState>({\r\n      scale: 0,\r\n      minScale: 0,\r\n      maxScale: 2,\r\n      sx: 0,\r\n      sy: 0,\r\n    });\r\n\r\n    const status = shallowReactive({\r\n      isPlayBack: false, // 是否在轨迹回放\r\n      isfollowing: false, // 是否在实时跟踪\r\n      draggable: false, // 是否能拖拽\r\n      isDrawFence: false, // 是否在绘制电子围栏\r\n      equipImgFollow: false, // 设备图片跟随\r\n    });\r\n\r\n    const contextmenuTypeRef = shallowRef<string>(TYPES.basestation); // 右键查看的类型 TYPES\r\n    const contxtmenuPosition = shallowReactive<IStyleLeftTop>({\r\n      left: 0,\r\n      top: 0,\r\n    }); // 右键 位置\r\n    const currentContextmenuRef = ref<Nullable<Shape>>(null); // 当前右键的那个shape，因为加了激活的shadow需要清除\r\n\r\n    const contextmenuList = computed(() => ALL_MENU[contextmenuTypeRef.value]);\r\n\r\n    const detailsForm = reactive<IDetailsForm>({\r\n      show: false,\r\n      isAdd: false, // 是否是新增状态\r\n      editable: false, // 是否可以编辑\r\n      formData: null, // 需要传给子组件的form数据\r\n      x: 0, // 新增基站的x\r\n      y: 0,\r\n    });\r\n\r\n    const trackPlayback = reactive({\r\n      show: false, // 选择轨迹回放时间的弹窗\r\n      // 选择轨迹回放时间的form\r\n      form: {\r\n        date: new Date() || \"\",\r\n        startTime: \"08:30\" || \"\",\r\n        endTime: \"08:45\" || \"\",\r\n      },\r\n      rules: {\r\n        date: commonRuleItem(\"请选择日期\"),\r\n        startTime: commonRuleItem(\"请选择开始时间\"),\r\n        endTime: commonRuleItem(\"请选择结束时间\"),\r\n      },\r\n      datePickerOptions: {\r\n        disabledDate(time: Date) {\r\n          return time.getTime() > Date.now();\r\n        },\r\n      },\r\n      tween: null,\r\n      steps: [],\r\n      lineNode: null,\r\n      linePos: [], // 存放移动中的点\r\n    });\r\n\r\n    const visibleObj = shallowReactive({\r\n      nav: true, // 底部导航\r\n      waterAlarmPanel: false, // 落水报警面板\r\n      contextmenu: false, // 右键菜单列表\r\n      detailsForm: false, // 详情form\r\n      monitorListFlag: false, // 实时监控列表 lfq\r\n      historyMonitorListFlag: false, // 历史回放列表 lfq\r\n      area: true, // 是否显示电子围栏\r\n      layerPerson: false, // layer 对应的人员\r\n      map: false, // 地图选择\r\n      controlPannel: true, // 左侧显示\r\n    });\r\n\r\n    const monitorListInfo = reactive({\r\n      // 监控摄像头相关 lfq\r\n      monitorTitle: \"\",\r\n      monitorInner: \"monitor-inner-pannel\", // 实时监控动态class控制样式\r\n      monitorHistoryInner: \"monitor-inner-pannel\", // 历史监控动态class控制样式\r\n      newMonitorList: [] as any[], //调取的实时监控列表 lfq\r\n      newHistoryMonitorList: [] as any[], // 调取的历史监控列表 lfq\r\n      cameraCount: 4, // 支持同时播放摄像头数量 lfq\r\n      liveCameraCount: 1, // 实时跟踪单次调用摄像头数量 lfq\r\n      historyCameraCount: 1, // 轨迹回放单次调用摄像头数量 lfq\r\n      livePlayCount: 1, // 实时调用摄像头数量 lfq\r\n      historyPlayCount: 1, // 历史回放调用摄像头数量 lfq\r\n      monitorListFlag: false, //实时视频 lfq\r\n      historyMonitorListFlag: false, //历史视频 lfq\r\n    });\r\n\r\n    const drawerInfo = reactive({\r\n      showList: false, // 是否显示基站、视频、人员列表\r\n      drawerTitle: NAV_INFO[TYPES.basestation].title,\r\n      activeName: TYPES.basestation, // 激活的组件\r\n    });\r\n\r\n    const fenceInfo = reactive<IFenceInfo>({\r\n      visible: false,\r\n      dialogType: 0, // 0 新增  1 编辑\r\n      form: {\r\n        name: \"\",\r\n        chosenCamera: [],\r\n      },\r\n      allMapCamera: [], // 所有可供选择的当前地图的摄像头\r\n      rules: {\r\n        name: commonRuleItem(\"请输入电子围栏名称\"),\r\n      },\r\n    });\r\n\r\n    const fenceListInfo = reactive<IFenceListInfo>({\r\n      tableVisible: false,\r\n      params: {\r\n        curpage: 1,\r\n      },\r\n      loading: false,\r\n      allData: [],\r\n      tableData: [],\r\n      total: 0,\r\n    });\r\n\r\n    const drawFenceInfo = reactive<IDrawFenceInfo>({\r\n      message: null, // 绘制的时候头部的提醒\r\n      points: [], // 绘制的坐标点\r\n      clonePoints: [],\r\n    });\r\n\r\n    // 规则 table\r\n    const ruleListInfo = reactive<IRuleListInfo>({\r\n      visiable: false,\r\n      loading: false,\r\n      allData: [],\r\n      tableData: [],\r\n      total: 0,\r\n      curpage: 1,\r\n    });\r\n    // 规则 详情\r\n    const ruleFormRef = ref();\r\n    const ruleItemDetail = reactive<IRuleItemDetail>({\r\n      visiable: false,\r\n      dialogType: 0, // 0 新增 1 编辑\r\n      form: {\r\n        name: \"\",\r\n        memo: \"\",\r\n        isLoop: false,\r\n        limitedTime: \"\",\r\n        startTime: \"\",\r\n        endTime: \"\",\r\n        permitType: \"\",\r\n      },\r\n    });\r\n\r\n    // 保证结束时间 > 开始时间\r\n    const checkEndTime = (rule: any, value: Date, callback: Function) => {\r\n      // 今天的年月日\r\n      if (!ruleItemDetail.form.isLoop) {\r\n        callback();\r\n      } else {\r\n        const ymd = dayjs(new Date()).format(\"YYYY-MM-DD\");\r\n        // value 的时分秒\r\n        const hms = dayjs(value).format(\"HH:mm:ss\");\r\n        // 开始时间的时分秒\r\n        const start = dayjs(ruleItemDetail.form.startTime).format(\"HH:mm:ss\");\r\n        const startTime = new Date(`${ymd} ${start}`);\r\n        const endTime = new Date(`${ymd} ${hms}`);\r\n        if (startTime.getTime() > endTime.getTime()) {\r\n          return callback(new Error(\"结束时间不能小于开始时间\"));\r\n        } else {\r\n          callback();\r\n        }\r\n      }\r\n    };\r\n\r\n    const ruleItemDetailRule: IRuleItemDetailRule = {\r\n      name: commonRuleItem(\"请输入规则名称\"),\r\n      limitedTime: customFuncRule(checkPositiveInteger),\r\n      permitType: commonRuleItem(\"请选择规则类型\"),\r\n      startTime: commonRuleItem(\"请选择开始时间\"),\r\n      endTime: [commonRuleItem(\"请选择结束时间\"), customFuncRule(checkEndTime)],\r\n    };\r\n\r\n    // 带日期的选择器\r\n    const ruleDisabledDate = computed(() => {\r\n      return function (time: Date) {\r\n        if (ruleItemDetail.form.startTime) {\r\n          return time.getTime() < (ruleItemDetail.form.startTime as Date).getTime();\r\n        }\r\n        return false;\r\n      };\r\n    });\r\n\r\n     const alarmInfo = reactive<IAlarmInfo>({\r\n      visible: false,\r\n      dialogType: 0, // 0 新增  1 编辑\r\n      form: {\r\n        CreateTime: \"\",\r\n        IDS: \"\",\r\n        Id: 0,\r\n        SceneName: \"\",\r\n        ShowSceneNum: \"\",\r\n        SourceDbOrDeviceIdS: \"\",\r\n        SourceName: \"\",\r\n        SourcePointNum: \"\",\r\n        SourceType: \"\",\r\n        alarmContent: \"\",\r\n        alarmLevel: 0,\r\n        alarmProgress: \"\",\r\n        dealAccount: \"\",\r\n        dealMemo: \"\",\r\n        dealTime: \"\",\r\n      }\r\n    });\r\n\r\n    const alarmListInfo = reactive<IAlarmListInfo>({\r\n      tableVisible: false,\r\n      params: {\r\n        curpage: 1,\r\n        size: 8,\r\n      },\r\n      loading: false,\r\n      allData: [],\r\n      tableData: [],\r\n      total: 0,\r\n      ShowSceneNum: \"\",\r\n      SourceType: \"\",\r\n      alarmLevel: \"\",\r\n      sTime: \"\",\r\n      eTime: \"\",\r\n      alarmProgress: \"\"\r\n    });\r\n\r\n    // 时间选择器\r\n    function timerPickerChange() {\r\n      if (ruleItemDetail.form.endTime) {\r\n        ruleItemDetail.form.endTime = \"\";\r\n      }\r\n    }\r\n\r\n    const mousePos = { x: 0, y: 0 };\r\n\r\n    const stage = ref<Stage | null>(null);\r\n\r\n    function batchDraw() {\r\n      (stage.value as Stage).batchDraw();\r\n    }\r\n\r\n    const layer = new Konva.Layer();\r\n    const bgLayer = new Konva.Layer();\r\n    const operationLayer = new Konva.Layer();\r\n\r\n    const allGroup = {\r\n      cameraGroup: new Konva.Group({ name: \"cameraGroup\" }),\r\n      basestationGroup: new Konva.Group({ name: \"basestationGroup\" }),\r\n      personGroup: new Konva.Group({ name: \"personGroup\" }),\r\n      fenceGroup: new Konva.Group({ name: \"fenceGroup\" }),\r\n      locateBubbleGroup: new Konva.Group({ name: \"locateBubbleGroup\" }),\r\n    };\r\n\r\n    const activeTarget = reactive<IActiveTarget>({\r\n      id: 0,\r\n      attrs: { x: 0, y: 0 }, // 存放没更新之前的变量\r\n    });\r\n\r\n    const equipmentInfo = reactive<IEquipmentInfo>({\r\n      basestationData: { x: 0, y: 0 }, // 基站数据\r\n      cameraData: { x: 0, y: 0 }, // 摄像头数据\r\n      checkedNode: null, // 被选中的konva节点，比如在添加设备时选中、编辑时选中\r\n    });\r\n\r\n    watch(monitorListInfo.newMonitorList, (val) => {\r\n      let count = 0;\r\n      val.forEach((item: { active: any }) => {\r\n        const active = item.active;\r\n        if (active) {\r\n          count++;\r\n        }\r\n      });\r\n      if (count === 0) {\r\n        visibleObj.monitorListFlag = false;\r\n      }\r\n      monitorListInfo.livePlayCount = count;\r\n      if (count === 1) {\r\n        monitorListInfo.monitorInner = \"monitor-inner-one\";\r\n      } else {\r\n        monitorListInfo.monitorInner = \"monitor-inner-pannel\";\r\n      }\r\n\r\n      if (val.length > monitorListInfo.cameraCount) {\r\n        if (val.length > monitorListInfo.cameraCount * 1000) {\r\n          val.splice(0, val.length - monitorListInfo.cameraCount);\r\n        }\r\n        val.forEach((item: { active: any }, index: number) => {\r\n          if (index < val.length - monitorListInfo.cameraCount) {\r\n            item.active = false;\r\n          }\r\n        });\r\n      }\r\n    });\r\n    watch(monitorListInfo.newHistoryMonitorList, (val) => {\r\n      let count = 0;\r\n      val.forEach((value: { active: any }) => {\r\n        const active = value.active;\r\n        if (active) {\r\n          count++;\r\n        }\r\n      });\r\n      if (count === 0) {\r\n        visibleObj.historyMonitorListFlag = false;\r\n      }\r\n      monitorListInfo.historyPlayCount = count;\r\n      if (count === 1) {\r\n        monitorListInfo.monitorHistoryInner = \"monitor-inner-one\";\r\n      } else {\r\n        monitorListInfo.monitorHistoryInner = \"monitor-inner-pannel\";\r\n      }\r\n\r\n      if (val.length > monitorListInfo.cameraCount) {\r\n        if (val.length > monitorListInfo.cameraCount * 1000) {\r\n          val.splice(0, val.length - monitorListInfo.cameraCount);\r\n        }\r\n        val.forEach((value: { active: any }, index: number) => {\r\n          if (index < val.length - monitorListInfo.cameraCount) {\r\n            value.active = false;\r\n          }\r\n        });\r\n      }\r\n    });\r\n\r\n    let cacheDrawFence: Nullable<Shape> = null;\r\n    /**\r\n     * @description: 绘制电子围栏\r\n     * @param {boolean} isFinished 是否绘制完成\r\n     * @return {*}\r\n     */\r\n    function handleStartDrawFence(isFinished = false) {\r\n      cacheDrawFence && cacheDrawFence.destroy();\r\n\r\n      const pointsArr = drawFenceInfo.points;\r\n      if (pointsArr.length === 0) {\r\n        batchDraw();\r\n        return;\r\n      }\r\n\r\n      const fenceArea = new Konva.Shape({\r\n        ...areaColorConfig,\r\n        sceneFunc: function (ctx, shape) {\r\n          ctx.beginPath();\r\n          ctx.moveTo(pointsArr[0].x, pointsArr[0].y);\r\n          for (let i = 1; i < pointsArr.length; i++) {\r\n            const { x, y } = pointsArr[i];\r\n            ctx.lineTo(x, y);\r\n          }\r\n\r\n          ctx.stroke();\r\n          if (isFinished) {\r\n            ctx.closePath();\r\n          }\r\n\r\n          ctx.fillStrokeShape(shape);\r\n        },\r\n      });\r\n      cacheDrawFence = fenceArea;\r\n      allGroup.fenceGroup.add(fenceArea);\r\n      batchDraw();\r\n    }\r\n\r\n    // 电子围栏重新绘制\r\n    function handleRedrawFence() {\r\n      drawFenceInfo.points = [];\r\n      handleStartDrawFence();\r\n    }\r\n\r\n    /**\r\n     * @description: 电子围栏撤销\r\n     * @param {*}\r\n     * @return {*}\r\n     */\r\n    function handleRevokeFence() {\r\n      const { points } = drawFenceInfo;\r\n      const len = points.length;\r\n      if (len === 0) {\r\n        ElMessage.info(\"还一个点都没有添加噢！\");\r\n      } else if (len === 1 || len === 2) {\r\n        handleRedrawFence();\r\n      } else {\r\n        points.splice(len - 2, 2);\r\n        handleStartDrawFence();\r\n      }\r\n    }\r\n\r\n    /**\r\n     * @description: 取消绘制电子围栏\r\n     * @param {*}\r\n     * @return {*}\r\n     */\r\n    function handleCancelDrawFence() {\r\n      handleRedrawFence();\r\n\r\n      status.isDrawFence = false;\r\n      (drawFenceInfo.message as IMessageClose).close();\r\n      drawFenceInfo.points = [];\r\n      drawFenceInfo.clonePoints = [];\r\n      fenceInfo.visible = true;\r\n    }\r\n\r\n    /**\r\n     * @description: 完成绘制电子围栏\r\n     * @param {*}\r\n     * @return {*}\r\n     */\r\n    function handleFinishDrawFence() {\r\n      const { points } = drawFenceInfo;\r\n      const len = points.length;\r\n      if (len < 4) {\r\n        ElMessage.info(\"最少三个点才能组成一个面\");\r\n      } else {\r\n        (drawFenceInfo.message as IMessageClose).close();\r\n\r\n        status.isDrawFence = false;\r\n\r\n        points.pop();\r\n\r\n        drawFenceInfo.clonePoints = cloneDeep(points);\r\n        handleStartDrawFence(true);\r\n\r\n        setTimeout(() => {\r\n          fenceInfo.visible = true;\r\n          handleRedrawFence();\r\n        }, 500);\r\n      }\r\n    }\r\n\r\n    /**\r\n     * @description: 编辑还原\r\n     * @param {*}\r\n     * @return {*}\r\n     */\r\n    function editRestore() {\r\n      if (contextmenuTypeRef.value === TYPES.labelList) return;\r\n      const { x, y } = activeTarget.attrs;\r\n      (currentContextmenuRef.value as Shape).to({\r\n        x,\r\n        y,\r\n      });\r\n      if (contextmenuTypeRef.value === TYPES.camera) {\r\n        const { direction } = activeTarget.attrs;\r\n        (currentContextmenuRef.value as Image).image(cameraImageObjRef.value[direction]);\r\n      }\r\n      batchDraw();\r\n    }\r\n\r\n    /**\r\n     * @description: 清除阴影\r\n     * @param {*}\r\n     * @return {*}\r\n     */\r\n    function clearShadowColor() {\r\n      // if (!currentContextmenuRef.value) return;\r\n      // currentContextmenuRef.value.shadowColor(\"rgba(0,0,0,0)\");\r\n      // editRestore();\r\n    }\r\n\r\n    /**\r\n     * @description: 显示右键菜单\r\n     * @param {Event} e window原生e\r\n     * @return {*}\r\n     */\r\n    function showMenuList(e: MouseEvent) {\r\n      const { clientX: x, clientY: y } = e;\r\n\r\n      Object.assign(contxtmenuPosition, {\r\n        left: x,\r\n        top: y - titleHeight,\r\n      });\r\n\r\n      visibleObj.contextmenu = true;\r\n    }\r\n\r\n    /**\r\n     * @description: 隐藏右键菜单\r\n     * @param {*}\r\n     * @return {*}\r\n     */\r\n    function hideMenuList() {\r\n      if (visibleObj.contextmenu) {\r\n        visibleObj.contextmenu = false;\r\n        clearShadowColor();\r\n        currentContextmenuRef.value = null;\r\n      }\r\n    }\r\n\r\n    /**\r\n     * @description: 缓存图片\r\n     * @param {object} imageAbout 图片相关\r\n     * @param {function} func 需要执行的函数\r\n     * @param {string | number} type 地图id || 摄像头方向 || 人员类型\r\n     * @return {void}\r\n     */\r\n    function cacheImage(\r\n      imageAbout: IImageAbout,\r\n      func: Function,\r\n      type: string | number = mapIdRef.value\r\n    ) {\r\n      let { imageObj } = imageAbout;\r\n      const { src } = imageAbout;\r\n\r\n      const isCached = !!(imageObj && (imageObj.src || imageObj[type]));\r\n\r\n      let imageELe: Nullable<HTMLImageElement> = null;\r\n      if (isCached) {\r\n        imageELe = !(imageObj as IImageObj).src\r\n          ? (imageObj as IImageObj)[type]\r\n          : (imageObj as HTMLImageElement);\r\n        func(imageELe);\r\n      } else {\r\n        imageELe = new window.Image() as HTMLImageElement;\r\n        imageELe.src = src;\r\n        (imageELe as HTMLImageElement).onload = () => {\r\n          imageObj === null\r\n            ? (imageObj = imageELe)\r\n            : ((imageObj as IImageObj)[type] = imageELe as HTMLImageElement);\r\n          func(imageELe);\r\n        };\r\n        (imageELe as HTMLImageElement).onerror = () => {\r\n          ElMessage.error(\"加载图片失败\");\r\n        };\r\n      }\r\n    }\r\n\r\n    function handleStageWheel() {\r\n      (stage.value as Stage).on(\"wheel\", (e) => {\r\n        // e = e.evt;\r\n        const ev: WheelEvent = e.evt;\r\n\r\n        // ts 定义的 没有 wheelDelta 属性\r\n        // const wheelDelta = ev.wheelDelta ? ev.wheelDelta : ev.deltaY * -40;\r\n        const wheelDelta = ev.deltaY * -40;\r\n\r\n        const rateX = (ev.clientX - state.sx) / state.scale;\r\n        const rateY = (ev.clientY - state.sy) / state.scale;\r\n\r\n        if (wheelDelta > 0) {\r\n          state.scale += 0.05;\r\n          state.scale = Number((state.scale + 0.05).toFixed(2));\r\n          if (state.scale >= state.maxScale) {\r\n            state.scale = state.maxScale;\r\n          }\r\n        } else {\r\n          state.scale -= 0.05;\r\n          state.scale = Number((state.scale - 0.05).toFixed(2));\r\n          if (state.scale <= state.minScale) {\r\n            state.scale = state.minScale;\r\n          }\r\n        }\r\n\r\n        state.sx = ev.clientX - state.scale * rateX;\r\n        state.sy = ev.clientY - state.scale * rateY;\r\n\r\n        (stage.value as Stage).setAttrs({\r\n          x: state.sx,\r\n          y: state.sy,\r\n          scaleX: state.scale,\r\n          scaleY: state.scale,\r\n        });\r\n\r\n        if (status.isDrawFence) {\r\n          handleStartDrawFence();\r\n        }\r\n\r\n        batchDraw();\r\n      });\r\n    }\r\n\r\n    function handleStageMouseDown() {\r\n      (stage.value as Stage).on(\"mousedown\", (e) => {\r\n        const ev = e.evt;\r\n\r\n        if (status.isDrawFence) {\r\n          clickTimerRef.value = window.setTimeout(() => {\r\n            const pos = screenTocanvas({ x: ev.clientX, y: ev.clientY }, state);\r\n            drawFenceInfo.points.push(pos);\r\n            handleStartDrawFence();\r\n          }, 300);\r\n\r\n          return;\r\n        }\r\n\r\n        status.draggable = true;\r\n\r\n        Object.assign(mousePos, {\r\n          x: ev.clientX,\r\n          y: ev.clientY,\r\n        });\r\n        (stage.value as Stage).container().style.cursor = \"move\";\r\n\r\n        hideMenuList();\r\n      });\r\n    }\r\n\r\n    function handleStageMouseUp() {\r\n      (stage.value as Stage).on(\"mouseup mouseout\", () => {\r\n        if (status.draggable) {\r\n          status.draggable = false;\r\n          (stage.value as Stage).container().style.cursor = \"default\";\r\n        }\r\n      });\r\n    }\r\n\r\n    function handleStageMouseMove() {\r\n      (stage.value as Stage).on(\r\n        \"mousemove\",\r\n        debounce((e) => {\r\n          const mouseMoveFunc = () => {\r\n            const ev: MouseEvent = e.evt;\r\n\r\n            if (status.isDrawFence) {\r\n              const { points } = drawFenceInfo;\r\n\r\n              if (points.length >= 1) {\r\n                if (points.length > 1) {\r\n                  points.pop();\r\n                }\r\n                const pos = screenTocanvas({ x: ev.clientX, y: ev.clientY }, state);\r\n                points.push(pos);\r\n                handleStartDrawFence();\r\n              }\r\n              return;\r\n            }\r\n            if (!status.draggable) return;\r\n\r\n            state.sx += ev.clientX - mousePos.x;\r\n            state.sy += ev.clientY - mousePos.y;\r\n\r\n            const maxSx = getOffset(\r\n              {\r\n                x: (stage.value as Stage).width() * 0.25,\r\n                y: 0,\r\n              },\r\n              {\r\n                x: 0,\r\n                y: 0,\r\n              },\r\n              state.scale\r\n            ).x;\r\n            const minSx = getOffset(\r\n              {\r\n                x: (stage.value as Stage).width() * 0.75,\r\n                y: 0,\r\n              },\r\n              {\r\n                x: bgImageConfig.width,\r\n                y: 0,\r\n              },\r\n              state.scale\r\n            ).x;\r\n            const maxSy = getOffset(\r\n              {\r\n                x: 0,\r\n                y: titleHeight,\r\n              },\r\n              { x: 0, y: 0 },\r\n              state.scale\r\n            ).y;\r\n            const minSy = getOffset(\r\n              {\r\n                x: 0,\r\n                y: (stage.value as Stage).height(),\r\n              },\r\n              { x: 0, y: bgImageConfig.height },\r\n              state.scale\r\n            ).y;\r\n\r\n            const midSy = getOffset(\r\n              {\r\n                x: 0,\r\n                y: (stage.value as Stage).height() / 2,\r\n              },\r\n              {\r\n                x: 0,\r\n                y: bgImageConfig.height / 2,\r\n              },\r\n              state.scale\r\n            ).y;\r\n\r\n            if (maxSx <= minSx) {\r\n              state.sx = maxSx;\r\n            } else if (state.sx > maxSx) {\r\n              state.sx = maxSx;\r\n            } else if (state.sx < minSx) {\r\n              state.sx = minSx;\r\n            }\r\n\r\n            if (maxSy <= minSy) {\r\n              state.sy = maxSy;\r\n            } else if (state.sy > maxSy) {\r\n              state.sy = maxSy;\r\n            } else if (state.sy < minSy) {\r\n              state.sy = minSy;\r\n            }\r\n\r\n            if (state.scale === state.minScale) {\r\n              state.sy = midSy;\r\n            }\r\n\r\n            Object.assign(mousePos, {\r\n              x: ev.clientX,\r\n              y: ev.clientY,\r\n            });\r\n\r\n            (stage.value as Stage).setAttrs({\r\n              x: state.sx,\r\n              y: state.sy,\r\n            });\r\n\r\n            batchDraw();\r\n          };\r\n          mouseMoveFunc();\r\n        }, 10)\r\n      );\r\n    }\r\n\r\n    function handleStageContextMenu() {\r\n      (stage.value as Stage).on(\"contextmenu\", (e) => {\r\n        const ev: MouseEvent = e.evt;\r\n        ev.preventDefault();\r\n        clickTimerRef.value && clearTimeout(clickTimerRef.value);\r\n        if (status.isDrawFence) {\r\n          handleFinishDrawFence();\r\n          return;\r\n        }\r\n      });\r\n    }\r\n\r\n    function stageEventsInit() {\r\n      handleStageWheel();\r\n      handleStageMouseDown();\r\n      handleStageMouseUp();\r\n      handleStageMouseMove();\r\n      handleStageContextMenu();\r\n    }\r\n\r\n    function initStage() {\r\n      stage.value = new Konva.Stage({\r\n        width: window.innerWidth,\r\n        height: window.innerHeight - titleHeight,\r\n        container: \"container\",\r\n        scale: {\r\n          x: state.scale,\r\n          y: state.scale,\r\n        },\r\n      });\r\n    }\r\n\r\n    function hideDetails() {\r\n      clearShadowColor();\r\n      visibleObj.detailsForm = false;\r\n    }\r\n\r\n    // 保存所有设备\r\n    let deviceAll: IDeviceItem[] = [];\r\n\r\n    const basestation: IListData<TVectorgraph> = {\r\n      all: [],\r\n      currentMap: [],\r\n    };\r\n    const bubble: IListData<TVectorgraph> = {\r\n      all: [],\r\n      currentMap: [],\r\n    };\r\n    const camera: IListData<TLayerItem> = {\r\n      all: [],\r\n      currentMap: [],\r\n    };\r\n\r\n    const area: IListData<IAreaItem> = {\r\n      all: [],\r\n      currentMap: [],\r\n    };\r\n\r\n    // todo 类型限制\r\n    const person = reactive<IListData<any>>({\r\n      all: [],\r\n      currentMap: [],\r\n    });\r\n\r\n    // 存放人物图像的宽高\r\n    let personImgObj: null | { width: number; height: number } = null;\r\n\r\n    async function addLayer() {\r\n      (stage.value as Stage).add(layer).add(bgLayer).add(operationLayer);\r\n\r\n      Object.keys(allGroup).forEach((key) => {\r\n        layer.add(allGroup[key]);\r\n      });\r\n\r\n      bgLayer.moveToBottom();\r\n      operationLayer.moveToTop();\r\n    }\r\n\r\n    const cacheBasestationObj: ICacheImage = {};\r\n    async function initBasestation(attrs: TLayerItem) {\r\n      const { x, y, lids } = attrs;\r\n      const imageDom = await generateImageDomByType(attrs);\r\n\r\n      const shape = new Konva.Image({\r\n        x,\r\n        y,\r\n        width: imageDom.width,\r\n        height: imageDom.height,\r\n        image: imageDom,\r\n        shadowColor: \"rgba(0,0,0,0)\",\r\n        shadowBlur: imageDom.width,\r\n        name: lids,\r\n      });\r\n\r\n      shape.on(\"contextmenu\", (e) => {\r\n        console.log(e);\r\n\r\n        if (status.isDrawFence) {\r\n          return false;\r\n        }\r\n\r\n        hideDetails();\r\n\r\n        activeTarget.attrs = cloneDeep(e.target.attrs);\r\n        currentContextmenuRef.value = shape;\r\n\r\n        contextmenuTypeRef.value = TYPES.basestation;\r\n        showMenuList(e.evt);\r\n        visibleObj.contextmenu = true;\r\n\r\n        shape.shadowColor(\"red\");\r\n        batchDraw();\r\n      });\r\n\r\n      allGroup.basestationGroup.add(shape);\r\n      cacheBasestationObj[lids] = shape;\r\n      batchDraw();\r\n    }\r\n\r\n    const cacheCameraObj: ICacheImage = {};\r\n    async function initCamera(attrs: TLayerItem) {\r\n      const { x, y, lids } = attrs;\r\n      const imageDom = await generateImageDomByType(attrs);\r\n\r\n      const shape = new Konva.Image({\r\n        x,\r\n        y,\r\n        width: imageDom.width,\r\n        height: imageDom.height,\r\n        image: imageDom,\r\n        shadowColor: \"rgba(0,0,0,0)\",\r\n        shadowBlur: imageDom.width,\r\n        name: lids,\r\n      });\r\n\r\n      shape.on(\"contextmenu\", (e) => {\r\n        console.log(e);\r\n        if (status.isDrawFence) {\r\n          return false;\r\n        }\r\n\r\n        hideDetails();\r\n\r\n        activeTarget.attrs = cloneDeep(e.target.attrs);\r\n\r\n        contextmenuTypeRef.value = TYPES.camera;\r\n        currentContextmenuRef.value = shape;\r\n\r\n        showMenuList(e.evt);\r\n        visibleObj.contextmenu = true;\r\n\r\n        shape.shadowColor(\"green\");\r\n        batchDraw();\r\n      });\r\n\r\n      allGroup.cameraGroup.add(shape);\r\n      cacheCameraObj[lids] = shape;\r\n\r\n      batchDraw();\r\n    }\r\n\r\n    const layerPerson = ref<any[]>([\r\n      {\r\n        name: \"1\",\r\n        id: \"sdf\",\r\n      },\r\n    ]);\r\n\r\n    const layerPosition = shallowReactive<IStyleLeftTop>({\r\n      left: 0,\r\n      top: 0,\r\n    });\r\n\r\n    const cacheBubbleObj: ICacheBubble = {};\r\n    async function initBubble(attrs: TVectorgraph) {\r\n      const offsetX = 24;\r\n      const offsetY = 16;\r\n      const OffsetX = 2 * offsetX;\r\n      const OffsetY = 2 * offsetY;\r\n      const { x, y, sname, lids } = attrs;\r\n\r\n      const { W, H, layinfo, Color, IsHaveCount, CountItem } = attrs.defdata;\r\n      const w = W - OffsetX;\r\n      const h = H - OffsetY;\r\n      // konva-test-vue\r\n      const group = new Konva.Group({\r\n        x,\r\n        y,\r\n      });\r\n\r\n      const config: ISvgToImageConfig = {\r\n        pathSrc: layinfo,\r\n        width: W,\r\n        height: H,\r\n        color: Color,\r\n      };\r\n\r\n      const imageDom = await svgToImage(config, attrs.ltype === \"标注图层\");\r\n      const image = new Konva.Image({\r\n        image: imageDom,\r\n        stroke: \"rgba(255,0,0,.5)\",\r\n      });\r\n\r\n      if (!IsHaveCount) {\r\n        const label = new Konva.Text({\r\n          x: W / 2 - offsetX,\r\n          y: (h - 10) / 2,\r\n          text: sname,\r\n          fontSize: 14,\r\n          fill: \"#fff\",\r\n        });\r\n        label.offsetX(label.width() / 2);\r\n        label.offsetY(label.height() / 2);\r\n        group.add(image).add(label);\r\n      } else {\r\n        const label = new Konva.Text({\r\n          x: W / 2 - offsetX,\r\n          y: H / 8,\r\n          text: sname,\r\n          fontSize: 14,\r\n          fill: \"#fff\",\r\n        });\r\n        label.offsetX(label.width() / 2);\r\n\r\n        const line = new Konva.Line({\r\n          points: [w * 0.1, h / 2, w * 0.9, h / 2],\r\n          stroke: \"#fff\",\r\n          strokeWidth: 0.5,\r\n        });\r\n\r\n        const bottomGroup = new Konva.Group({\r\n          x: w / 2,\r\n          y: (h - 10) * 0.7,\r\n        });\r\n\r\n        cacheBubbleObj[lids] = [];\r\n\r\n        const len = CountItem.length;\r\n        // const len = 2;\r\n        const gap = 10;\r\n\r\n        CountItem.forEach((item, index) => {\r\n          const cornerGroup = new Konva.Group({\r\n            x: gap * index,\r\n          });\r\n\r\n          const cornerH = ((h - 10) / 2) * 0.5;\r\n          const cornerRect = new Konva.Rect({\r\n            width: w / 3 / len,\r\n            height: cornerH,\r\n            fill: \"rgba(255,255,255,.6)\",\r\n            cornerRadius: cornerH,\r\n          });\r\n          cornerRect.offsetX(cornerRect.width() / 2);\r\n\r\n          const cornerText = new Konva.Text({\r\n            x: 0,\r\n            y: cornerH / 2,\r\n            fill: Color,\r\n            text: \"?\",\r\n            name: item,\r\n          });\r\n\r\n          cornerText.offsetX(cornerText.width() / 2);\r\n          cornerText.offsetY(cornerText.height() / 2);\r\n\r\n          cornerGroup.add(cornerRect).add(cornerText);\r\n\r\n          cacheBubbleObj[lids].push(cornerText);\r\n\r\n          bottomGroup.add(cornerGroup);\r\n        });\r\n\r\n        group.add(image).add(label).add(line).add(bottomGroup);\r\n\r\n        group.on(\"dblclick\", (e) => {\r\n          console.log(e);\r\n          const { clientX, clientY } = e.evt;\r\n          Object.assign(layerPosition, {\r\n            left: clientX,\r\n            top: clientY - titleHeight,\r\n          });\r\n          visibleObj.layerPerson = true;\r\n        });\r\n      }\r\n\r\n      allGroup.locateBubbleGroup.add(group);\r\n    }\r\n\r\n    const cacheAreaObj: ICachePerson = {};\r\n    // 回显电子围栏\r\n    function initArea(attrs: IAreaItem) {\r\n      const { areaids, points, areaname, show } = attrs;\r\n      const posArr = JSON.parse(points) as IUpperPos[];\r\n      const group = new Konva.Group({\r\n        name: areaids,\r\n        visible: show,\r\n      });\r\n      const startPoint = posArr[0];\r\n      const text = new Konva.Text({\r\n        x: startPoint.X + 10,\r\n        y: startPoint.Y + 10,\r\n        text: areaname,\r\n        fill: \"#fff\",\r\n        fontSize: 24,\r\n      });\r\n      const areaItem = new Konva.Shape({\r\n        ...areaColorConfig,\r\n        sceneFunc: function (ctx, shape) {\r\n          ctx.beginPath();\r\n          ctx.moveTo(posArr[0].X, posArr[0].Y);\r\n          for (let i = 1; i < posArr.length; i++) {\r\n            const { X, Y } = posArr[i];\r\n            ctx.lineTo(X, Y);\r\n          }\r\n          ctx.stroke();\r\n          ctx.closePath();\r\n          ctx.fillStrokeShape(shape);\r\n        },\r\n      });\r\n      group.add(areaItem).add(text);\r\n      // 存在就将之前的 销毁 置空\r\n      if (cacheAreaObj[areaids]) {\r\n        cacheAreaObj[areaids].destroy();\r\n        delete cacheAreaObj[areaids];\r\n      }\r\n      allGroup.fenceGroup.add(group);\r\n      cacheAreaObj[areaids] = group;\r\n\r\n      batchDraw();\r\n    }\r\n\r\n    // 修复 右键同一个 shape x y 会变空的问题\r\n    watch(\r\n      () => visibleObj.detailsForm,\r\n      (newVal) => {\r\n        if (newVal === false) {\r\n          detailsForm.formData = {};\r\n          detailsForm.x = 0;\r\n          detailsForm.y = 0;\r\n        }\r\n      }\r\n    );\r\n\r\n    const cachePersonObj: ICachePerson = {};\r\n    async function initPerson(attrs: IPersonArrItem, initType = 0) {\r\n      const { x, y, name, id, type } = attrs;\r\n      const generate = (img: HTMLImageElement) => {\r\n        const group = new Konva.Group({\r\n          name: id + \"\",\r\n          x,\r\n          y,\r\n        });\r\n\r\n        if (!personImgObj) {\r\n          personImgObj = {\r\n            width: img.width,\r\n            height: img.height,\r\n          };\r\n        }\r\n\r\n        const image = new Konva.Image({\r\n          x: 0,\r\n          y: 0,\r\n          width: img.width,\r\n          height: img.height,\r\n          image: img,\r\n          shadowColor: \"rgba(0,0,0,0)\",\r\n          shadowBlur: img.width,\r\n          id: String(id), // 需要绑  右键返回的是当前右键的shape，拿不到group  当然也可以拿parent\r\n        });\r\n\r\n        const fontSize = 14;\r\n        const text = new Konva.Text({\r\n          x: 0,\r\n          y: -fontSize - 5,\r\n          text: name,\r\n          fontSize,\r\n          fill: \"#fff\",\r\n          id: String(id),\r\n        });\r\n\r\n        group.add(image).add(text);\r\n\r\n        cachePersonObj[id] = group;\r\n\r\n        // 普通初始化\r\n        if (allGroup.personGroup.value && initType === 0) {\r\n          allGroup.personGroup.add(group);\r\n        } else if (operationLayer && initType) {\r\n          operationLayer.add(group);\r\n          group.moveToTop();\r\n        }\r\n\r\n        batchDraw();\r\n\r\n        if (initType === 0) {\r\n          group.on(\"contextmenu\", (e) => {\r\n            console.log(e);\r\n            console.log(e.target.attrs.id);\r\n            if (status.isDrawFence) {\r\n              return false;\r\n            }\r\n            activeTarget.id = e.target.attrs.id;\r\n            activeTarget.attrs = cloneDeep(e.target.attrs);\r\n            hideDetails();\r\n\r\n            currentContextmenuRef.value = image;\r\n            contextmenuTypeRef.value = TYPES.labelList;\r\n            showMenuList(e.evt);\r\n            visibleObj.contextmenu = true;\r\n            image.shadowColor(\"#123456\");\r\n            batchDraw();\r\n          });\r\n        } else {\r\n          status.isPlayBack = true;\r\n          // this.trackPlaybackTween(group, this.trackPlayback.steps)\r\n        }\r\n      };\r\n\r\n      cacheImage(\r\n        {\r\n          src: `/images/staff_unchecked${type || 1}.png`,\r\n          imageObj: personImageObjRef.value,\r\n        },\r\n        generate,\r\n        type || 1\r\n      );\r\n    }\r\n\r\n    const transferProps = {\r\n      label: \"dname\",\r\n      key: \"dids\",\r\n    };\r\n    const transferData = ref<any>([]);\r\n    // 获取当前场景下的所有 摄像头\r\n    function getAllMapCamera() {\r\n      return deviceAll\r\n        .filter((item) => item.dtypecode === \"Camera_IP\" && item.snum === mapIdRef.value)\r\n        .slice();\r\n    }\r\n\r\n    async function getAllDevice() {\r\n      const params = {\r\n        act: \"Vd95kIrsbON1Z6H27eM1586422577340\",\r\n        TypeCodeChar: \"\",\r\n      };\r\n      const res: unknown = await stageApi.getAllDevice(params);\r\n\r\n      const { data } = res as IResponseCommon<IDeviceItem[]>;\r\n      console.log(\"getAllDevice\", data);\r\n\r\n      deviceAll = data || [];\r\n      fenceInfo.allMapCamera = getAllMapCamera();\r\n      console.log(fenceInfo.allMapCamera);\r\n\r\n      // 保存所有设备信息到localStorage中\r\n      setAllDevice(deviceAll);\r\n    }\r\n\r\n    async function getCurrentMapCamera(mapId: string) {\r\n      camera.currentMap = camera.all.filter((item) => item.snum === mapId);\r\n      camera.currentMap.forEach((item) => {\r\n        initCamera(item);\r\n      });\r\n    }\r\n\r\n    function getCurrentMapBubble(mapId: string) {\r\n      bubble.currentMap = bubble.all.filter((item) => item.snum === mapId);\r\n      bubble.currentMap.forEach((item) => {\r\n        initBubble(item);\r\n      });\r\n    }\r\n\r\n    function getCurrentMapBasestation(mapId: string) {\r\n      basestation.currentMap = basestation.all.filter((item) => item.snum === mapId);\r\n      basestation.currentMap.forEach((item) => {\r\n        initBasestation(item);\r\n      });\r\n    }\r\n\r\n    const getCurrentMapPerson = (mapId: string) => {\r\n      person.currentMap = person.all.filter(\r\n        (item: any) => item.LocationSceneId === mapId\r\n      );\r\n      person.currentMap.forEach((item) => {\r\n        initPerson(item);\r\n      });\r\n    };\r\n\r\n    async function getAllLayer() {\r\n      const params = {\r\n        act: \"kTM5tsxPxjZPbajPzDQ1586422437860\",\r\n        ProductId: \"99999999-9999-9999-9999-999999999999\",\r\n      };\r\n      const res: unknown = await stageApi.getAllLayer(params);\r\n      const { data } = res as IResponseCommon<TLayerItem[]>;\r\n      console.log(\"getAllLayer=>\", data);\r\n\r\n      // layerTypes : 标注图层  | 摄像头图层 | 基站图层\r\n\r\n      // 标注图层\r\n      bubble.all = data.filter((item) => item.ltype === \"标注图层\") as TVectorgraph[];\r\n      getCurrentMapBubble(mapIdRef.value);\r\n\r\n      // 摄像头图层\r\n      camera.all = data.filter((item) => item.ltype === \"摄像头图层\");\r\n      getCurrentMapCamera(mapIdRef.value);\r\n\r\n      // 基站图层\r\n      basestation.all = data.filter(\r\n        (item) => item.ltype === \"基站图层\"\r\n      ) as TVectorgraph[];\r\n      getCurrentMapBasestation(mapIdRef.value);\r\n\r\n      batchDraw();\r\n    }\r\n\r\n    async function getAllBuild() {\r\n      const params = {\r\n        act: \"cRfPNhii9hVXQ6D8C151586425533740\",\r\n      };\r\n      const res: unknown = await stageApi.getAllBuild(params);\r\n\r\n      const { data } = res as IResponseCommon<IBuildItem[]>;\r\n      console.log(\"getAllBuild\", data);\r\n    }\r\n\r\n    function getCurrentMapArea(mapId: string) {\r\n      area.currentMap = area.all.filter((item) => item.snum === mapId);\r\n      fenceListInfo.allData = area.currentMap;\r\n      fenceListInfo.tableData = getPagination(\r\n        fenceListInfo.allData,\r\n        fenceListInfo.params.curpage\r\n      );\r\n      fenceListInfo.total = fenceListInfo.allData.length;\r\n\r\n      area.currentMap.forEach((item) => {\r\n        initArea(item);\r\n      });\r\n    }\r\n\r\n    // 只展示当前地图 电子围栏\r\n    // 获取自定义区域 - 电子围栏\r\n    async function getAllHArea() {\r\n      const params = {\r\n        act: \"KP9NBmF37ejHCChTUhA1586415869244\",\r\n      };\r\n      const res: unknown = await stageApi.getAllHArea(params);\r\n      const { data } = res as IResponseCommon<IAreaItem[]>;\r\n      console.log(\"getAllHArea\", data);\r\n\r\n      area.all = data.map((item) => {\r\n        return {\r\n          ...item,\r\n          show: visibleObj.area,\r\n        };\r\n      }) as IAreaItem[];\r\n      getCurrentMapArea(mapIdRef.value);\r\n    }\r\n    // 获取所有报警信息\r\n    async function getAllAlarm(){\r\n      const param = {\r\n        act: \"6Z6wTPGkfMVF9eLTOXA1611040899987\",\r\n        curpage: alarmListInfo.params.curpage,\r\n        // eslint-disable-next-line @typescript-eslint/camelcase\r\n        sys_showpagesize: alarmListInfo.params.size,\r\n        ShowSceneNum: alarmListInfo.ShowSceneNum,\r\n        SourceType: alarmListInfo.SourceType,\r\n        alarmLevel: alarmListInfo.alarmLevel,\r\n        sTime: alarmListInfo.sTime,\r\n        eTime: alarmListInfo.eTime,\r\n        alarmProgress: alarmListInfo.alarmProgress\r\n      };\r\n      const res = await alarmApi.getAllAlamList(param);\r\n      const { result, data } = res as any;\r\n\r\n      if (result.success) {\r\n        alarmListInfo.tableData= data.content;\r\n        alarmListInfo.total = data.count;\r\n      }\r\n    }\r\n  function alarmCurrentChange() {\r\n      alarmListInfo.loading = true;\r\n      getAllAlarm();\r\n      alarmListInfo.loading = false;\r\n    }\r\n    function getAlarmListByCondition(){\r\n      alarmListInfo.params.curpage = 1;\r\n      alarmListInfo.loading = true;\r\n      getAllAlarm();\r\n      alarmListInfo.loading = false;\r\n    }\r\n    function handleDetailAlarm(row: any){\r\n      console.log(row)\r\n      alarmInfo.visible = true;\r\n      alarmInfo.form = row;\r\n    }\r\n\r\n    let cacheBgImage: Nullable<Image> = null; //缓存背景图对象\r\n    /**\r\n     * @description: 加载背景图\r\n     * @param {src}\r\n     * @return {*}\r\n     */\r\n    async function initBgImage(\r\n      src: string = imgUrl + mapObj[mapIdRef.value].surl\r\n      // src = '/images/bg/jq_cf.png'\r\n    ) {\r\n      console.log(\"src:\", src);\r\n\r\n      const imageDom = new window.Image();\r\n      imageDom.src = src;\r\n      imageDom.onload = async () => {\r\n        const image = new Konva.Image({\r\n          image: imageDom,\r\n          name: BG_NAME,\r\n          width: imageDom.width,\r\n          height: imageDom.height,\r\n          // https://konvajs.org/docs/performance/All_Performance_Tips.html 13\r\n          listening: false,\r\n        });\r\n\r\n        state.scale = Number((window.innerWidth / image.width()).toFixed(2));\r\n        state.minScale = state.scale;\r\n\r\n        await bgLayer.add(image);\r\n        (stage.value as Stage).setAttrs({\r\n          scale: {\r\n            x: state.scale,\r\n            y: state.scale,\r\n          },\r\n        });\r\n\r\n        cacheBgImage = image;\r\n\r\n        image.moveToBottom();\r\n        await batchDraw();\r\n\r\n        // 图片加载成功 才注册 stage 事件\r\n        stageEventsInit();\r\n\r\n        getAllDevice();\r\n        getAllLayer();\r\n        getAllBuild();\r\n        getAllHArea();\r\n        // 获取所有报警列表\r\n        getAllAlarm();\r\n        // eslint-disable-next-line @typescript-eslint/no-use-before-define\r\n        // initLocationWs()\r\n        // eslint-disable-next-line @typescript-eslint/no-use-before-define\r\n        initAlarmWs();\r\n      };\r\n    }\r\n\r\n    // 背景图更新\r\n    function updataBgImage(mapId: string) {\r\n      const bgImageDom = new window.Image();\r\n      bgImageDom.src = imgUrl + mapObj[mapId].surl;\r\n      bgImageDom.onload = () => {\r\n        (cacheBgImage as Image).image(bgImageDom);\r\n        batchDraw();\r\n      };\r\n    }\r\n\r\n    async function initShape(bgSrc?: string) {\r\n      await initBgImage(bgSrc);\r\n\r\n      // this.initLoacateIcon({ x: 200, y: 300 })\r\n    }\r\n\r\n    async function startInit() {\r\n      initStage();\r\n      addLayer();\r\n      initShape();\r\n    }\r\n\r\n    async function getAllMap() {\r\n      const params = {\r\n        act: \"bPxM1k2cWCeMeEIbWZV1586415800673\",\r\n      };\r\n      const res: unknown = await stageApi.getAllScene(params);\r\n\r\n      const { data } = res as IResponseCommon<IMapArrItem[]>;\r\n      console.log(\"getAllMap=>\", data);\r\n      data &&\r\n        data.forEach((value) => {\r\n          mapObj[value.snum] = value;\r\n        });\r\n\r\n      mapListRef.value = data || [];\r\n      mapNameRef.value = mapObj[mapIdRef.value].sname;\r\n      // 保存所有场景信息到localStorage中\r\n      localStorage.setItem(\"sceneAll\", JSON.stringify(data));\r\n      startInit();\r\n    }\r\n\r\n    // watch(\r\n    //   () => state.scale,\r\n    //   value => {\r\n    //     (stage.value as Stage).setAttrs({\r\n    //       scale: {\r\n    //         x: value,\r\n    //         y: value\r\n    //       }\r\n    //     });\r\n    //     batchDraw()\r\n    //   }\r\n    // );\r\n\r\n    function computedRem() {\r\n      const docEl = document.documentElement;\r\n      let width = document.body.clientWidth || document.documentElement.clientWidth;\r\n      width = width > 2400 ? 2400 : width;\r\n      docEl.style.fontSize = width / 190 + \"px\";\r\n    }\r\n\r\n    // nav\r\n    const mainNavRef = ref();\r\n    function navClick(code: string) {\r\n      console.log(\"navCode=>\", code);\r\n      hideMenuList();\r\n      visibleObj.layerPerson = false;\r\n      for (const key in NAV_INFO) {\r\n        if (NAV_INFO[key].code === code) {\r\n          drawerInfo.showList = true;\r\n          drawerInfo.drawerTitle = NAV_INFO[key].title;\r\n          drawerInfo.activeName = key;\r\n          break;\r\n        }\r\n      }\r\n      // 点击电子围栏\r\n      if (FENCE.code === code) {\r\n        fenceListInfo.tableVisible = true;\r\n      }\r\n\r\n      // 点击报警管理\r\n      if (ALARM.code === code) {\r\n        alarmListInfo.tableVisible = true;\r\n      }\r\n    }\r\n\r\n    function resetNavIndex() {\r\n      mainNavRef.value.resetIndex();\r\n    }\r\n\r\n    // drawer\r\n    /**\r\n     * @description: 设备模块切换设备类型\r\n     * @param {Pane} data\r\n     * @return {*}\r\n     */\r\n    function equipSwitchClick(data: Pane) {\r\n      drawerInfo.showList = true;\r\n      drawerInfo.drawerTitle = NAV_INFO[data.props.name].title;\r\n    }\r\n\r\n    // 电子围栏\r\n    const fenceInfoFormRef = ref();\r\n    // 打开电子围栏 通用\r\n    function openFenceDetail(type = 0) {\r\n      fenceInfo.visible = true;\r\n      fenceInfo.dialogType = type;\r\n      drawFenceInfo.clonePoints = [];\r\n      nextTick(() => {\r\n        (fenceInfoFormRef.value as IELForm).resetFields();\r\n        fenceInfo.form.chosenCamera = [];\r\n      });\r\n    }\r\n    // 点击新增电子围栏\r\n    function handleAddFence() {\r\n      openFenceDetail(0);\r\n    }\r\n    // 点击编辑电子围栏\r\n    let editFenceId = \"\"; // 编辑保存的id\r\n    async function handleEditFence(row: IAreaItem) {\r\n      // console.log(row);\r\n      openFenceDetail(1);\r\n      const { areaids, points, areaname } = row;\r\n      editFenceId = areaids;\r\n\r\n      const params = {\r\n        act: \"WHIHF7U1FtTjZORrI4h1611195385202\",\r\n        LayerIdS: areaids,\r\n        SceneNum: mapIdRef.value,\r\n      };\r\n      const res: unknown = await stageApi.getOnehAreaSetDeivce(params);\r\n      const { data } = res as IResponseCommon<ISetDeviceData>;\r\n      console.log(\"getOnehAreaSetDeivce\", data);\r\n\r\n      const deviceArr = JSON.parse(data.deviceitem) as ISetDeviceDataItem[];\r\n      deviceArr.forEach((item) => {\r\n        fenceInfo.form.chosenCamera.push(item.DeviceIdS);\r\n      });\r\n\r\n      fenceInfo.form.name = areaname;\r\n      drawFenceInfo.clonePoints = JSON.parse(points);\r\n    }\r\n    // 触发绘制电子围栏\r\n    function handleFenceDraw() {\r\n      // 隐藏两个dialog\r\n      fenceInfo.visible = false;\r\n      fenceListInfo.tableVisible = false;\r\n\r\n      // 绘制\r\n      drawFenceInfo.message = ElMessage({\r\n        showClose: true,\r\n        message: \"鼠标单击左键新增点，右键可完成绘制\",\r\n        type: \"warning\",\r\n        duration: 0,\r\n      });\r\n\r\n      drawFenceInfo.points = [];\r\n      status.isDrawFence = true;\r\n    }\r\n\r\n    // 新增/编辑 电子围栏 提交按钮点击事件\r\n    function handleSubmitFence() {\r\n      (fenceInfoFormRef.value as IELForm).validate(async (valid: boolean) => {\r\n        if (valid) {\r\n          const chooseDevice = fenceInfo.form.chosenCamera.map((item: string) => {\r\n            const index = fenceInfo.allMapCamera.findIndex((i: any) => i.dids === item);\r\n            return {\r\n              DeviceIdS: item,\r\n              DeviceType: fenceInfo.allMapCamera[index].dname,\r\n            };\r\n          });\r\n          const params: IAddEditFenceParams = {\r\n            act: \"i9YWieOBzym06JamZtI1586422307190\",\r\n            LayerIdS: fenceInfo.dialogType === 0 ? guid() : editFenceId,\r\n            SceneNum: mapIdRef.value,\r\n            CheckSourceID: JSON.stringify(\r\n              drawFenceInfo.clonePoints.map((item) => ({ X: item.x, Y: item.y }))\r\n            ),\r\n            DevicePointRelation:\r\n              fenceInfo.form.chosenCamera.length === 0\r\n                ? \"\"\r\n                : JSON.stringify(chooseDevice),\r\n            CheckSourceUnitName: fenceInfo.form.name,\r\n          };\r\n          const res: unknown = await stageApi.saveHArea(params);\r\n          const { result } = res as IResponseCommon<string>;\r\n          if (result.msg === \"操作成功\") {\r\n            ElMessage.success(result.msg);\r\n            fenceInfo.visible = false;\r\n            getAllHArea();\r\n          }\r\n        }\r\n      });\r\n    }\r\n\r\n    // 删除 电子围栏\r\n    async function handleDelFence(row: IAreaItem) {\r\n      const { areaids } = row;\r\n      const params = {\r\n        act: \"mYfPMH51aE2FMOzxiFd1586422236651\",\r\n        LayerIdS: areaids,\r\n        SceneNum: mapIdRef.value,\r\n      };\r\n      const res: unknown = await stageApi.delHArea(params);\r\n      console.log(res);\r\n      const { result } = res as IResponseCommon<string>;\r\n      if (result.msg) {\r\n        ElMessage.success(result.msg);\r\n        getAllHArea();\r\n      }\r\n    }\r\n\r\n    async function getRules(id: string) {\r\n      ruleListInfo.loading = true;\r\n      const params = {\r\n        act: \"N71kyUJz3OiP2MOZ6Ea1586415957754\",\r\n        LayerIdS: id,\r\n        SceneNum: mapIdRef.value,\r\n      };\r\n      const res: unknown = await stageApi.getRule(params);\r\n      const { data } = res as IResponseCommon<IRuleItem[]>;\r\n      ruleListInfo.allData =\r\n        data.map((item) => ({ ...item, labelType: formateRuleType(item.ptype) })) || [];\r\n      ruleListInfo.tableData = getPagination(ruleListInfo.allData, ruleListInfo.curpage);\r\n      ruleListInfo.total = data.length || 0;\r\n      console.log(data);\r\n      ruleListInfo.loading = false;\r\n    }\r\n\r\n    function ruleCurrentChange(page: number) {\r\n      ruleListInfo.loading = true;\r\n      ruleListInfo.tableData = getPagination(ruleListInfo.allData, page);\r\n      ruleListInfo.loading = false;\r\n    }\r\n\r\n    let editPoints = \"\";\r\n    let layerId = \"\"; // 区域编号\r\n    let layerName = \"\"; // 区域名称\r\n    async function handleSeeRules(row: IAreaItem) {\r\n      ruleListInfo.visiable = true;\r\n      const { areaids, points, areaname } = row;\r\n      editPoints = points;\r\n      layerId = areaids;\r\n      layerName = areaname;\r\n      getRules(areaids);\r\n    }\r\n\r\n    function fenceCurrentChange(page: number) {\r\n      fenceListInfo.loading = true;\r\n      fenceListInfo.tableData = getPagination(fenceListInfo.allData, page);\r\n      fenceListInfo.loading = false;\r\n    }\r\n\r\n\r\n\r\n    function openRule(type = 0) {\r\n      ruleItemDetail.visiable = true;\r\n      ruleItemDetail.dialogType = type;\r\n      ruleItemDetail.form.name = layerName;\r\n      ruleItemDetail.form.memo = \"\";\r\n      ruleItemDetail.form.isLoop = false;\r\n      ruleItemDetail.form.limitedTime = \"\";\r\n      ruleItemDetail.form.startTime = \"\";\r\n      ruleItemDetail.form.endTime = \"\";\r\n      ruleItemDetail.form.permitType = \"\";\r\n      nextTick(() => {\r\n        // ! 无效\r\n        // (ruleFormRef.value as IELForm).resetFields();\r\n        (ruleFormRef.value as IELForm).clearValidate();\r\n      });\r\n    }\r\n    // 新增规则\r\n    function handleAddRule() {\r\n      openRule(0);\r\n      nextTick(() => {\r\n        console.log(ruleItemDetail.form);\r\n      });\r\n    }\r\n    let ruleId = 0; // 编辑\r\n    async function handleEditRule(row: IRuleItem) {\r\n      openRule(1);\r\n      const { stime, ptype, memo, id, etime, isloop, limtime } = row;\r\n      ruleId = id;\r\n\r\n      const dateTime = (loop: boolean, time1: string, time2: string) => {\r\n        if (loop) {\r\n          // 年月日\r\n          const ymd = dayjs(new Date()).format(\"YYYY-MM-DD\");\r\n          return {\r\n            startTime: new Date(`${ymd} ${time1}`),\r\n            endTime: new Date(`${ymd} ${time2}`),\r\n          };\r\n        } else {\r\n          return {\r\n            startTime: new Date(time1),\r\n            endTime: new Date(time2),\r\n          };\r\n        }\r\n      };\r\n\r\n      const { startTime, endTime } = await dateTime(isloop, stime, etime);\r\n\r\n      ruleItemDetail.form.memo = memo;\r\n      ruleItemDetail.form.isLoop = isloop;\r\n      ruleItemDetail.form.limitedTime = String(limtime);\r\n      ruleItemDetail.form.startTime = startTime;\r\n      ruleItemDetail.form.endTime = endTime;\r\n      ruleItemDetail.form.permitType = String(ptype);\r\n      console.log(ruleItemDetail.form);\r\n\r\n      // ? 有问题\r\n      // const obj = {\r\n      //   memo,\r\n      //   isLoop: isloop,\r\n      //   limitedTime: limtime,\r\n      //   startTime,\r\n      //   endTime,\r\n      //   permitType: String(ptype),\r\n      // };\r\n      // ruleItemDetail.form = Object.assign({}, ruleItemDetail.form, obj);\r\n    }\r\n\r\n    // 新增/编辑 规则 提交按钮点击事件\r\n    function handleSubmitRule() {\r\n      (ruleFormRef.value as IELForm).validate(async (valid: boolean) => {\r\n        if (valid) {\r\n          const {\r\n            memo,\r\n            isLoop,\r\n            limitedTime,\r\n            startTime,\r\n            endTime,\r\n            permitType,\r\n          } = ruleItemDetail.form;\r\n\r\n          const formateTime = (loop: boolean, time1: Date, time2: Date) => {\r\n            const formateStr = loop ? \"HH:mm:ss\" : \"YYYY-MM-DD HH:mm:ss\";\r\n\r\n            return {\r\n              StartTime: dayjs(time1).format(formateStr),\r\n              EndTime: dayjs(time2).format(formateStr),\r\n            };\r\n          };\r\n\r\n          const { StartTime, EndTime } = formateTime(\r\n            isLoop,\r\n            startTime as Date,\r\n            endTime as Date\r\n          );\r\n\r\n          const params = {\r\n            act: \"QRZNk8BItBSJTT0ikWT1586422170736\",\r\n            LayerIdS: layerId,\r\n            SceneNum: mapIdRef.value,\r\n            ID: ruleItemDetail.dialogType === 0 ? 0 : ruleId,\r\n            CheckSourceUnitName: layerName,\r\n            CheckSourceID: editPoints,\r\n            Memo: memo,\r\n            RuleLocateType: 2,\r\n            PermitType: permitType,\r\n            IsLoopEveryDay: isLoop,\r\n            OwnUserType: \"0,2\",\r\n            OwnParam: \"\",\r\n            LimitedTime: limitedTime,\r\n            StartTime,\r\n            EndTime,\r\n          };\r\n          const res: unknown = await stageApi.saveRule(params);\r\n          const { result } = res as IResponseCommon<string>;\r\n          if (result.msg) {\r\n            ElMessage.success(result.msg);\r\n            ruleItemDetail.visiable = false;\r\n            getRules(layerId);\r\n          }\r\n          console.log(params);\r\n        }\r\n      });\r\n    }\r\n\r\n    // 删除某场景某个自定义区域中的某条规则\r\n    async function handleDelRule(row: IRuleItem) {\r\n      const { id } = row;\r\n      const params = {\r\n        act: \"nBpfTKDXs2nDV7y4dT41586415983980\",\r\n        LayerIdS: layerId,\r\n        SceneNum: mapIdRef.value,\r\n        ID: id,\r\n      };\r\n      const res: unknown = await stageApi.delRule(params);\r\n      const { result } = res as IResponseCommon<string>;\r\n      if (result.msg) {\r\n        ElMessage.success(result.msg);\r\n        getRules(layerId);\r\n      }\r\n    }\r\n\r\n    const formContentComponentRef = ref();\r\n\r\n    /**\r\n     * 查看基站/摄像头/标签详情\r\n     */\r\n    function showEquipDetails(data: any, type: string) {\r\n      detailsForm.editable = false;\r\n      visibleObj.detailsForm = false;\r\n      visibleObj.detailsForm = true;\r\n      detailsForm.formData = data;\r\n      (formContentComponentRef.value as IELForm).resetFields();\r\n      contextmenuTypeRef.value = type;\r\n    }\r\n\r\n    function showDetails(type: string = contextmenuTypeRef.value) {\r\n      detailsForm.editable = false;\r\n      visibleObj.detailsForm = false;\r\n      if (!detailsForm.isAdd) {\r\n        const { attrs } = currentContextmenuRef.value as Shape;\r\n        detailsForm.x = attrs.x;\r\n        detailsForm.y = attrs.y;\r\n      }\r\n\r\n      if (type === TYPES.basestation) {\r\n        // 基站\r\n        // todo  发起api请求 显示信息 或者本地读取\r\n      } else if (type === TYPES.labelList) {\r\n        // 标签\r\n        // ? 感觉可以本地读取\r\n      } else if (type === TYPES.person) {\r\n        // 人员\r\n      } else if (type === TYPES.camera) {\r\n        // 摄像头\r\n      }\r\n\r\n      visibleObj.detailsForm = true;\r\n      console.log(\"formContentComponentRef.value\", formContentComponentRef.value);\r\n\r\n      (formContentComponentRef.value as IELForm).resetFields();\r\n    }\r\n    // 右键菜单\r\n    // 右键点击 编辑\r\n    function detailsEdit(type: string = contextmenuTypeRef.value) {\r\n      showDetails(type);\r\n      detailsForm.editable = true;\r\n\r\n      const { attrs } = currentContextmenuRef.value as Shape;\r\n\r\n      detailsForm.formData = attrs;\r\n\r\n      detailsForm.x = attrs.x;\r\n      detailsForm.y = attrs.y;\r\n    }\r\n    /**\r\n     * @description: 调取实时监控 lfq\r\n     * @param {*} id\r\n     * @return {*}\r\n     */\r\n    function popMonitorVideo(id: string | number) {\r\n      id = 404;\r\n      cameraApi\r\n        .getCameraData(id)\r\n        .then((res) => {\r\n          if (res) {\r\n            const active = true;\r\n            monitorListInfo.newMonitorList.push({\r\n              camera: res,\r\n              active: active,\r\n            });\r\n            monitorListInfo.monitorListFlag = true;\r\n          } else {\r\n            ElMessage.error(\"调取监控失败\");\r\n          }\r\n        })\r\n        .catch(() => {\r\n          ElMessage.error(\"调取监控失败\");\r\n        });\r\n    }\r\n\r\n    /**\r\n     * @description: 调取历史监控 lfq\r\n     * @param {*} id\r\n     * @return {*}\r\n     */\r\n    function popHistoryMonitorVideo(id: string | number) {\r\n      id = 404;\r\n      cameraApi\r\n        .getCameraData(id)\r\n        .then((res) => {\r\n          if (res) {\r\n            const active = true;\r\n            monitorListInfo.newHistoryMonitorList.push({\r\n              camera: res,\r\n              active: active,\r\n            });\r\n            monitorListInfo.historyMonitorListFlag = true;\r\n          } else {\r\n            ElMessage.error(\"调取历史监控失败\");\r\n          }\r\n        })\r\n        .catch(() => {\r\n          ElMessage.error(\"调取历史监控失败\");\r\n        });\r\n    }\r\n\r\n    /**\r\n     * @description: 查看实时视频 lfq\r\n     * @param {*}\r\n     * @return {*}\r\n     */\r\n    function seeNowVideo() {\r\n      popMonitorVideo(activeTarget.id);\r\n      visibleObj.monitorListFlag = true;\r\n      monitorListInfo.monitorTitle = \"查看实时视频\";\r\n    }\r\n\r\n    // 关闭所有视频\r\n    function handleCloseAllVideo() {\r\n      monitorListInfo.newMonitorList.splice(0, monitorListInfo.newMonitorList.length);\r\n      visibleObj.monitorListFlag = false;\r\n      clearShadowColor();\r\n    }\r\n\r\n    // 关闭所有历史回放视频\r\n    function handleCloseAllHistoryVideo() {\r\n      monitorListInfo.newHistoryMonitorList.splice(\r\n        0,\r\n        monitorListInfo.newHistoryMonitorList.length\r\n      );\r\n      visibleObj.historyMonitorListFlag = false;\r\n      clearShadowColor();\r\n    }\r\n\r\n    /**\r\n     * @description: 查看历史视频 lfq\r\n     * @param {*}\r\n     * @return {*}\r\n     */\r\n    function seeHistoryVideo() {\r\n      popHistoryMonitorVideo(activeTarget.id);\r\n      visibleObj.historyMonitorListFlag = true;\r\n      monitorListInfo.monitorTitle = \"查看历史视频\";\r\n    }\r\n\r\n    /**\r\n     * @description: 监控列表 lfq\r\n     * @param {*} id\r\n     * @return {*}\r\n     */\r\n    function watchMonitorListPanelState(id: string | number) {\r\n      monitorListInfo.newMonitorList.forEach((value: any) => {\r\n        if (id === value.camera.id) {\r\n          value.active = false;\r\n        }\r\n      });\r\n    }\r\n\r\n    /**\r\n     * @description: 历史监控列表 lfq\r\n     * @param {*} id\r\n     * @return {*}\r\n     */\r\n    function watchHistoryMonitorListPanelState(id: string | number) {\r\n      monitorListInfo.newHistoryMonitorList.forEach((value: any) => {\r\n        if (id === value.camera.id) {\r\n          value.active = false;\r\n        }\r\n      });\r\n    }\r\n    const trackPlaybackFormRef = ref(); // 轨迹回放的选择时间 form\r\n    function handleClickTrackPlayback() {\r\n      trackPlayback.show = true;\r\n    }\r\n    function handleCloseContextmenu() {\r\n      clearShadowColor();\r\n      (trackPlaybackFormRef.value as IELForm).resetFields();\r\n    }\r\n\r\n    function handleClickSeeTrackPlayback() {\r\n      //\r\n    }\r\n\r\n    const equipImgRef = ref<null | HTMLElement>(null);\r\n\r\n    /**\r\n     * @description: 弹出设备,将layer中的节点销毁，html节点展示\r\n     * @param {*}\r\n     * @return {*}\r\n     */\r\n    function popEquipment() {\r\n      (equipmentInfo.checkedNode as Shape).destroy();\r\n      status.equipImgFollow = true;\r\n    }\r\n\r\n    /**\r\n     * @description: 场景中新添加设备\r\n     * @param {object} attrs\r\n     * @return {*}\r\n     */\r\n    function addEquipToScene(attrs: { x: number; y: number; type: string | number }) {\r\n      const { x, y, type } = attrs;\r\n      const images = {\r\n        [TYPES.basestation]: basestationImageObjRef.value,\r\n        [TYPES.camera]: cameraImageObjRef.value[defaultCameraType],\r\n      };\r\n      const imgObj = images[type];\r\n\r\n      const node = new Konva.Image({\r\n        x: x - equipIconConfig.width / 2,\r\n        y: y - equipIconConfig.height,\r\n        width: equipIconConfig.width,\r\n        height: equipIconConfig.height,\r\n        name: ADD_EQUIP,\r\n        image: imgObj as HTMLImageElement,\r\n      });\r\n      node.on(\"click\", popEquipment);\r\n      node.shadowColor(\"blue\");\r\n      node.shadowBlur(20);\r\n\r\n      allGroup[`${contextmenuTypeRef.value}Group`].add(node);\r\n      batchDraw();\r\n      return node;\r\n    }\r\n\r\n    function putEquipment(e: KonvaEventObject<MouseEvent>) {\r\n      const ev = e.evt;\r\n      if (!status.equipImgFollow) return;\r\n      const { x, y } = canvasToStage({\r\n        x: ev.clientX,\r\n        y: ev.clientY,\r\n        ...state,\r\n      });\r\n\r\n      // todo x y 最大值判断\r\n      // ? 好像不用做判断 提交有表单验证：里面做了 < 0 的验证 或者可以在添加到stage中做\r\n      detailsForm.x = x;\r\n      detailsForm.y = y;\r\n\r\n      equipmentInfo.checkedNode = addEquipToScene({\r\n        type: contextmenuTypeRef.value,\r\n        x,\r\n        y,\r\n      });\r\n      status.equipImgFollow = false;\r\n\r\n      batchDraw();\r\n\r\n      const dom = equipImgRef.value as HTMLElement;\r\n      dom?.children?.[0] && dom.removeChild(dom.children[0]);\r\n    }\r\n\r\n    /**\r\n     * @description: 设备图片跟随\r\n     * @param {*}\r\n     * @return {*}\r\n     */\r\n    function equipImgFollow(e: KonvaEventObject<MouseEvent>) {\r\n      const ev = e.evt;\r\n      if (status.equipImgFollow === false) return;\r\n      const { x, y } = canvasToStage({\r\n        x: ev.clientX,\r\n        y: ev.clientY,\r\n        ...state,\r\n      });\r\n\r\n      detailsForm.x = x;\r\n      detailsForm.y = y;\r\n\r\n      const equipImgDom = equipImgRef.value as HTMLElement;\r\n      const { offsetWidth: width, offsetHeight: height } = equipImgDom;\r\n      equipImgDom.style.left = ev.clientX - width / 2 + \"px\";\r\n      equipImgDom.style.top = ev.clientY - height - 2 + \"px\";\r\n    }\r\n    /**\r\n     * @description: 添加设备时，先判断是否正在添加设备，展示信息采集框和html的图片元素，并给stage绑定事件，在取消添加或者添加成功后将事件解除\r\n     * @param {string}  type 根据类型来判断是基站还是摄像头\r\n     * @return {*}\r\n     */\r\n    function addEquip(type: string) {\r\n      if (status.equipImgFollow || equipmentInfo.checkedNode) {\r\n        ElMessage(\"正在添加设备中，请勿重复操作\");\r\n        return;\r\n      }\r\n      drawerInfo.showList = false;\r\n\r\n      status.equipImgFollow = true;\r\n      contextmenuTypeRef.value = type;\r\n\r\n      const imageEle =\r\n        type === TYPES.basestation\r\n          ? basestationImageObjRef.value\r\n          : cameraImageObjRef.value[defaultCameraType];\r\n\r\n      (equipImgRef.value as HTMLElement).appendChild(imageEle as HTMLImageElement);\r\n\r\n      detailsForm.isAdd = true;\r\n      showDetails();\r\n      detailsForm.editable = true;\r\n\r\n      (stage.value as Stage).on(\"mousemove\", equipImgFollow);\r\n\r\n      (stage.value as Stage).on(\"click\", putEquipment);\r\n    }\r\n\r\n    /**\r\n     * @description: 摄像头方向变更\r\n     * @param {*} direction\r\n     * @return {*}\r\n     */\r\n    function changeDirection(direction: string | number) {\r\n      // 判断是否是新增\r\n      if (detailsForm.isAdd) {\r\n        // 判断是否已经添加到stage中\r\n        const node = allGroup[`${contextmenuTypeRef.value}Group`].findOne(\r\n          \".\" + ADD_EQUIP\r\n        );\r\n        if (node) {\r\n          (node as any).image(cameraImageObjRef.value[direction]);\r\n        } else {\r\n          const dom = equipImgRef.value as HTMLElement;\r\n          if (dom && dom.children[0]) {\r\n            dom.replaceChild(cameraImageObjRef.value[direction], dom.children[0]);\r\n          }\r\n        }\r\n      } else {\r\n        // 编辑\r\n        (currentContextmenuRef.value as Image).image(cameraImageObjRef.value[direction]);\r\n        detailsForm.formData.direction = direction;\r\n      }\r\n      batchDraw();\r\n    }\r\n    function updateEquipPos(\r\n      x: undefined | number | string,\r\n      y?: number | string | undefined\r\n    ) {\r\n      let node = null;\r\n      if (detailsForm.isAdd) {\r\n        node = (stage.value as Stage).findOne(\".\" + ADD_EQUIP);\r\n      } else {\r\n        node = currentContextmenuRef.value as Shape;\r\n      }\r\n      if (x !== undefined) {\r\n        node.to({\r\n          x: x as number,\r\n        });\r\n      }\r\n\r\n      if (y !== undefined) {\r\n        node.to({\r\n          y: y as number,\r\n        });\r\n      }\r\n    }\r\n    /**\r\n     * @description: 详情表中输入x、y值更新\r\n     * @param {number} x\r\n     * @return {*}\r\n     */\r\n    function updateX(x: string | number) {\r\n      updateEquipPos(x);\r\n    }\r\n    function updateY(y: string | number) {\r\n      updateEquipPos(undefined, y);\r\n    }\r\n    // 隐藏基站采集面板\r\n    function cancelForm() {\r\n      status.equipImgFollow = false;\r\n      equipmentInfo.checkedNode && equipmentInfo.checkedNode.destroy();\r\n      equipmentInfo.checkedNode = null;\r\n      hideDetails();\r\n\r\n      const dom = equipImgRef.value as HTMLElement;\r\n      dom?.children?.[0] && dom.removeChild(dom.children[0]);\r\n      // stage 中移除 shape\r\n      if (detailsForm.isAdd) {\r\n        const node = (stage.value as Stage).findOne(\".\" + ADD_EQUIP);\r\n        node && node.destroy();\r\n        batchDraw();\r\n        detailsForm.isAdd = false;\r\n      } else {\r\n        // 编辑 要恢复原位置\r\n        editRestore();\r\n      }\r\n      detailsForm.formData = null;\r\n      // img 位置调整\r\n      if (dom) {\r\n        dom.style.left = \"-9999px\";\r\n        dom.style.top = \"-9999px\";\r\n      }\r\n    }\r\n\r\n    // ws 相关\r\n    // 存储 ws 传输过来的 数据\r\n    let wsData: any[] = [];\r\n    let locationWs: Nullable<WebSocket> = null;\r\n    function initLocationWs() {\r\n      // const url = \"WS://192.168.1.248:38559/location\";\r\n      const url = wsUrl.location;\r\n      locationWs = new WebSocket(url);\r\n      locationWs.onmessage = async (event) => {\r\n        const data = JSON.parse(event.data);\r\n        // console.log(data);\r\n\r\n        if (data.ActionCode === EpauletActionCode.HTagInit) {\r\n          person.all =\r\n            data.Data.map((item: any) => {\r\n              const { x, y } = strToPos(item.LocationPoint);\r\n              return {\r\n                ...item,\r\n                x,\r\n                y,\r\n                id: item.TagId,\r\n                name: item.ObjData.BindObjName,\r\n              };\r\n            }) || [];\r\n          // console.log(\"person.all\", person.all);\r\n\r\n          getCurrentMapPerson(mapIdRef.value);\r\n        }\r\n\r\n        if (data.ActionCode === EpauletActionCode.HTagOnline) {\r\n          const { x, y } = strToPos(data.Data.LocationPoint);\r\n          const posItem = {\r\n            ...data.Data,\r\n            x,\r\n            y,\r\n          };\r\n          person.all.push(posItem);\r\n          if (mapIdRef.value === data.Data.LocationSceneId) {\r\n            person.currentMap.push(posItem);\r\n            initPerson(posItem);\r\n          }\r\n          ElMessage.info(`${posItem.ObjData.BindObjName}上线`);\r\n        }\r\n\r\n        if (\r\n          data.ActionCode === EpauletActionCode.HTagOffline ||\r\n          data.ActionCode === EpauletActionCode.HTagLogOff\r\n        ) {\r\n          const index = person.all.findIndex((item) => item.id === data.Data.TagId);\r\n          if (index > -1) {\r\n            person.all.splice(index, 1);\r\n            if (data.Data.mapId === mapIdRef.value) {\r\n              const currntMapIndex = person.currentMap.findIndex(\r\n                (item) => item.id === data.Data.TagId\r\n              );\r\n              if (currntMapIndex > -1) {\r\n                person.currentMap.splice(currntMapIndex, 1);\r\n                const node = cachePersonObj[data.Data.TagId];\r\n                node && node.destroy();\r\n              }\r\n            }\r\n            ElMessage.info(`${data.Data.ObjData.BindObjName}下线`);\r\n          }\r\n        }\r\n\r\n        if (data.ActionCode === EpauletActionCode.HTagMove) {\r\n          // console.log(data.Data);\r\n\r\n          const { x, y } = strToPos(data.Data.LocationPoint);\r\n          const posObj = {\r\n            id: data.Data.TagId,\r\n            x,\r\n            y,\r\n          };\r\n          const fn = () => {\r\n            const index = person.all.findIndex((item) => item.id === posObj.id);\r\n            if (index > -1) {\r\n              Object.assign(person.all[index], posObj);\r\n            }\r\n          };\r\n          fn();\r\n          if (data.Data.LocationSceneId === mapIdRef.value) {\r\n            wsData.push(posObj);\r\n          }\r\n        }\r\n\r\n        if (data.ActionCode === EpauletActionCode.HLayerGroupStatistics) {\r\n          // data.Data.forEach((item:any,index:number)=>{\r\n          //   cacheBubbleObj[item.LayerIdS][index].text(String(item.TagDataList.length));\r\n          //   // todo 人员列表变动\r\n          // })\r\n          batchDraw();\r\n        }\r\n      };\r\n\r\n      // 定时器\r\n      const time = 200;\r\n      const duration = time / 1000;\r\n      const timer = window.setInterval(() => {\r\n        console.log(\"length=>\", wsData.length);\r\n\r\n        wsData.forEach((item) => {\r\n          const index = person.currentMap.findIndex((pos) => pos.id === item.id);\r\n          if (index > -1) {\r\n            const { x, y } = person.currentMap[index];\r\n            if (!(x === item.x && y === item.y)) {\r\n              Object.assign(person.currentMap[index], item);\r\n              const node = cachePersonObj[item.id];\r\n              node &&\r\n                node.to({\r\n                  x: item.x,\r\n                  y: item.y,\r\n                  duration: duration,\r\n                });\r\n              batchDraw();\r\n            }\r\n          }\r\n        });\r\n        wsData = [];\r\n      }, time);\r\n\r\n      locationWs.onclose = () => {\r\n        window.clearInterval(timer);\r\n      };\r\n    }\r\n    let alarmWs: Nullable<WebSocket> = null;\r\n    function initAlarmWs() {\r\n      const url = wsUrl.alarm;\r\n      alarmWs = new WebSocket(url);\r\n      alarmWs.onmessage = async (event) => {\r\n        const data = JSON.parse(event.data);\r\n        console.log(data);\r\n      };\r\n    }\r\n\r\n    function showWarningList() {\r\n      warningWidth.value =\r\n        warningWidth.value !== warningListWidth ? warningListWidth : \"0\";\r\n    }\r\n\r\n    function handleDetailConfirm(formData: any) {\r\n      console.log(\"formData\", formData);\r\n      // todo 新增 编辑 api\r\n    }\r\n\r\n    const alarmType = ref<ISelectOption[]>([]);\r\n    const alarmForm = reactive({\r\n      type: \"\",\r\n    });\r\n\r\n    async function getAllAlarmType() {\r\n      const params = {\r\n        act: \"E83yVQOUUMYKt6jRYRI1586428010174\",\r\n      };\r\n      const res: unknown = await alarmApi.getAllAlarmType(params);\r\n\r\n      const { data } = res as IResponseCommon<IAlarmType[]>;\r\n      alarmType.value = data.map((item) => ({\r\n        label: item.alarmtype,\r\n        value: item.alarmtype,\r\n      })) as ISelectOption[];\r\n    }\r\n\r\n    /**\r\n     * @description: 电子围栏 点击列中 切换 显示\r\n     * @param {*} show 切换后的值\r\n     * @param {*} areaids 区域id\r\n     * @return {*}\r\n     */\r\n    function changeAreaVisible(show: boolean, areaids: string) {\r\n      // 找到当前视图中的 绘制区域\r\n      const group = cacheAreaObj[areaids];\r\n      group.visible(show);\r\n      // 测试了其他的是指向类型 不用手动更新\r\n      batchDraw();\r\n      ElMessage.success(\"操作成功\");\r\n    }\r\n    // 显示 | 隐藏 当前地图电子围栏\r\n    function toggleAllFenceVisible(show: boolean) {\r\n      fenceListInfo.allData.forEach((item) => {\r\n        item.show = show;\r\n        cacheAreaObj[item.areaids].visible(show);\r\n      });\r\n      batchDraw();\r\n      ElMessage.success(\"操作成功\");\r\n    }\r\n\r\n    const controlButtonList = reactive([\r\n      {\r\n        label: \"基站\",\r\n        show: false,\r\n        code: \"basestation\",\r\n      },\r\n      {\r\n        label: \"摄像头\",\r\n        show: true,\r\n        code: \"camera\",\r\n      },\r\n      {\r\n        label: \"地图\",\r\n        show: visibleObj.map,\r\n        code: \"map\",\r\n      },\r\n      {\r\n        label: \"导航栏\",\r\n        show: visibleObj.nav,\r\n        code: \"nav\",\r\n      },\r\n    ]);\r\n\r\n    function controlButtonChange(newVal: boolean, code: string) {\r\n      //\r\n      if (code === \"nav\") {\r\n        visibleObj.nav = newVal;\r\n      }\r\n\r\n      if (code === \"camera\") {\r\n        Object.keys(cacheCameraObj).forEach((key) => {\r\n          cacheCameraObj[key].visible(newVal);\r\n          batchDraw();\r\n        });\r\n      }\r\n\r\n      if (code === \"map\") {\r\n        visibleObj.map = newVal;\r\n      }\r\n    }\r\n\r\n    function closeMapChoosen() {\r\n      visibleObj.map = false;\r\n      const index = controlButtonList.findIndex((item) => item.code === \"map\");\r\n      controlButtonList[index].show = false;\r\n    }\r\n\r\n    function changeMap(mapId: string) {\r\n      mapIdRef.value = mapId;\r\n      mapNameRef.value = mapObj[mapId].sname;\r\n      // 1. 背景图更新\r\n      updataBgImage(mapId);\r\n      // 2. 所有绘制的 shape 销毁，重新绘制新的 getAllLayer() 函数\r\n      // 2.1 摄像头\r\n      // 先销毁之前图层的\r\n      allGroup.cameraGroup.destroyChildren();\r\n      for (const key in cacheCameraObj) {\r\n        // cacheCameraObj[key].destroy();\r\n        delete cacheCameraObj[key];\r\n      }\r\n      getCurrentMapCamera(mapId);\r\n      // 2.2 基站\r\n      allGroup.basestationGroup.destroyChildren();\r\n      for (const key in cacheBasestationObj) {\r\n        delete cacheCameraObj[key];\r\n      }\r\n      // 2.3 气泡\r\n      allGroup.locateBubbleGroup.destroyChildren();\r\n      for (const key in cacheBubbleObj) {\r\n        delete cacheBubbleObj[key];\r\n      }\r\n      getCurrentMapBubble(mapId);\r\n      // 2.4 电子围栏\r\n      allGroup.fenceGroup.destroyChildren();\r\n      for (const key in cacheAreaObj) {\r\n        delete cacheAreaObj[key];\r\n      }\r\n      getCurrentMapArea(mapId);\r\n      // 2.5 人员\r\n      allGroup.personGroup.destroyChildren();\r\n      for (const key in cachePersonObj) {\r\n        delete cachePersonObj[key];\r\n      }\r\n      getCurrentMapPerson(mapId);\r\n      // 2.6 操作图层\r\n      operationLayer.destroyChildren();\r\n    }\r\n\r\n    // 左侧边栏\r\n    const leftPannelSearch = shallowRef<string>(\"\");\r\n    const searchDevice = computed(() => {\r\n      return deviceAll.filter((item) =>\r\n        item.dtype.includes(\"基站\" || item.dtypecode === \"Camera_IP\")\r\n      );\r\n    });\r\n    const userSearchRes = ref<any[]>([]);\r\n    function querySearch(name: string) {\r\n      if (name !== \"\") {\r\n        userSearchRes.value = searchDevice.value.filter((item) =>\r\n          item.dname.includes(name)\r\n        );\r\n      } else {\r\n        userSearchRes.value = cloneDeep(searchDevice.value);\r\n      }\r\n    }\r\n    async function searchChange(e: string) {\r\n      //\r\n      console.log(e);\r\n      if (!e) return;\r\n      const index = searchDevice.value.findIndex((item) => e === item.dids);\r\n      // 防止用户下线的情况\r\n      if (index > -1) {\r\n        const mapNum = searchDevice.value[index].snum;\r\n        if (mapNum === mapIdRef.value) {\r\n          //\r\n          const params = {\r\n            act: \"fCGtP4nXdRZjr6TYeiN1611196242913\",\r\n            DeviceIdS: e,\r\n          };\r\n          const res: unknown = await commonApi.getCommonApi(params);\r\n          const { data } = res as IResponseCommon<any>;\r\n          console.log(data);\r\n          // data[0][0].DeviceObjProperty\r\n        } else {\r\n          ElMessageBox.confirm(\"选中的目标不在当前地图，是否跳转？\", \"提示\", {\r\n            confirmButtonText: \"确定\",\r\n            cancelButtonText: \"取消\",\r\n            type: \"info\",\r\n          })\r\n            .then(() => {\r\n              changeMap(mapNum);\r\n            })\r\n            .catch(() => {\r\n              ElMessage.info(\"已取消跳转\");\r\n              leftPannelSearch.value = \"\";\r\n            });\r\n        }\r\n      }\r\n    }\r\n\r\n    // 最后\r\n    // window resize\r\n    function handleWindowResize() {\r\n      if (!cacheBgImage) return;\r\n      state.scale = Number((window.innerWidth / cacheBgImage.width()).toFixed(2));\r\n      state.minScale = state.scale;\r\n      state.sx = 0;\r\n      state.sy = 0;\r\n      const attrs = {\r\n        x: state.sx,\r\n        y: state.sy,\r\n        width: window.innerWidth,\r\n        height: window.innerHeight - titleHeight,\r\n        scale: {\r\n          x: state.scale,\r\n          y: state.scale,\r\n        },\r\n      };\r\n      (stage.value as Stage).setAttrs(attrs);\r\n      batchDraw();\r\n    }\r\n\r\n    const debounceRem = debounce(computedRem, 100);\r\n    const debounceResize = debounce(handleWindowResize, 100);\r\n\r\n    onMounted(() => {\r\n      getAllMap();\r\n      getAllAlarmType();\r\n      computedRem();\r\n      window.addEventListener(\"resize\", debounceRem);\r\n      window.addEventListener(\"resize\", debounceResize);\r\n    });\r\n\r\n    onUnmounted(() => {\r\n      clickTimerRef.value && clearTimeout(clickTimerRef.value);\r\n      locationWs?.close();\r\n      alarmWs?.close();\r\n      window.removeEventListener(\"resize\", debounceRem);\r\n      document.documentElement.style.fontSize = \"\";\r\n      window.removeEventListener(\"resize\", debounceResize);\r\n    });\r\n\r\n    return {\r\n      warningWidth,\r\n      showWarningList,\r\n      mapIdRef,\r\n      mapNameRef,\r\n      mapListRef,\r\n      showDetails,\r\n      formContentComponentRef,\r\n      mainNavRef,\r\n      visibleObj,\r\n      status,\r\n      drawerInfo,\r\n      // drawerInfo: toRefs(drawerInfo),\r\n      fenceInfo,\r\n      fenceListInfo,\r\n      ruleListInfo,\r\n      ruleFormRef,\r\n\r\n      ruleItemDetail,\r\n      types: TYPES,\r\n      navClick,\r\n      resetNavIndex,\r\n      equipSwitchClick,\r\n      fenceInfoFormRef,\r\n      handleAddFence,\r\n      handleFenceDraw,\r\n      handleEditFence,\r\n      handleSubmitFence,\r\n      handleDelFence,\r\n      fenceCurrentChange,\r\n      drawFenceInfo,\r\n      handleRevokeFence,\r\n      handleRedrawFence,\r\n      handleCancelDrawFence,\r\n      handleFinishDrawFence,\r\n      contextmenuTypeRef,\r\n      contxtmenuPosition,\r\n      contextmenuList,\r\n      detailsForm,\r\n      trackPlayback,\r\n      hideDetails,\r\n      equipImgRef,\r\n      addEquip,\r\n      updateX,\r\n      updateY,\r\n      changeDirection,\r\n      cancelForm,\r\n      handleDetailConfirm,\r\n      detailsEdit,\r\n      handleClickTrackPlayback,\r\n      handleCloseContextmenu,\r\n      handleClickSeeTrackPlayback,\r\n      seeNowVideo,\r\n      seeHistoryVideo,\r\n      handleCloseAllVideo,\r\n      handleCloseAllHistoryVideo,\r\n      popMonitorVideo,\r\n      popHistoryMonitorVideo,\r\n      watchMonitorListPanelState,\r\n      watchHistoryMonitorListPanelState,\r\n      monitorListInfo,\r\n      showEquipDetails,\r\n      alarmType,\r\n      alarmForm,\r\n      transferProps,\r\n      transferData,\r\n      handleSeeRules,\r\n      handleAddRule,\r\n      handleEditRule,\r\n      handleSubmitRule,\r\n      handleDelRule,\r\n      areaRulesOption,\r\n      ruleCurrentChange,\r\n      ruleDisabledDate,\r\n      timerPickerChange,\r\n      ruleItemDetailRule,\r\n      changeAreaVisible,\r\n      toggleAllFenceVisible,\r\n      layerPerson,\r\n      layerPosition,\r\n      controlButtonList,\r\n      controlButtonChange,\r\n      closeMapChoosen,\r\n      changeMap,\r\n      leftPannelSearch,\r\n      querySearch,\r\n      searchChange,\r\n      searchDevice,\r\n      person,\r\n      userSearchRes,\r\n      alarmInfo,\r\n      alarmListInfo,\r\n      formatTime,\r\n      alarmCurrentChange,\r\n      getAlarmListByCondition,\r\n      handleDetailAlarm\r\n    };\r\n  },\r\n});\r\n","import { render } from \"./index.vue?vue&type=template&id=264210bc&scoped=true\"\nimport script from \"./index.vue?vue&type=script&lang=ts\"\nexport * from \"./index.vue?vue&type=script&lang=ts\"\n\nimport \"./style/index.scss?vue&type=style&index=0&id=264210bc&lang=scss&scoped=true\"\nscript.render = render\nscript.__scopeId = \"data-v-264210bc\"\n\nexport default script","import { render } from \"./index.vue?vue&type=template&id=45d78b5a&scoped=true\"\nimport script from \"./index.vue?vue&type=script&lang=js\"\nexport * from \"./index.vue?vue&type=script&lang=js\"\n\nimport \"./index.vue?vue&type=style&index=0&id=45d78b5a&lang=scss&scoped=true\"\nscript.render = render\nscript.__scopeId = \"data-v-45d78b5a\"\n\nexport default script","/*\r\n * @Description:\r\n * @Author: huxianc\r\n * @Date: 2020-12-11 10:04:13\r\n * @LastEditors: huxianc\r\n * @LastEditTime: 2021-01-19 14:59:02\r\n */\r\nimport { createRouter, createWebHashHistory, RouteRecordRaw } from \"vue-router\";\r\nimport Home from \"../views/Home/index.vue\";\r\n\r\nconst routes: Array<RouteRecordRaw> = [\r\n  {\r\n    path: \"/\",\r\n    name: \"Home\",\r\n    component: Home\r\n  },\r\n  {\r\n    path: \"/login\",\r\n    name: \"Login\",\r\n    component: () =>\r\n      import(/* webpackChunkName: \"login\" */ \"../views/login/index.vue\")\r\n  },\r\n  {\r\n    path: \"/about\",\r\n    name: \"About\",\r\n    // route level code-splitting\r\n    // this generates a separate chunk (about.[hash].js) for this route\r\n    // which is lazy-loaded when the route is visited.\r\n    component: () =>\r\n      import(/* webpackChunkName: \"about\" */ \"../views/About.vue\")\r\n  }\r\n];\r\n\r\nconst router = createRouter({\r\n  history: createWebHashHistory(),\r\n  routes,\r\n  scrollBehavior(to, from, savedPosition) {\r\n    if (savedPosition) {\r\n      return savedPosition;\r\n    } else {\r\n      return { top: 0 };\r\n    }\r\n  }\r\n});\r\n\r\nexport default router;\r\n","/*\r\n * @Description:\r\n * @Author: huxianc\r\n * @Date: 2021-01-04 14:02:04\r\n * @LastEditors: huxianc\r\n * @LastEditTime: 2021-01-04 15:19:58\r\n */\r\n\r\ninterface ISettings {\r\n  title: string;\r\n}\r\nconst settings: ISettings = {\r\n  title: \"船舶项目\"\r\n};\r\n\r\nexport default settings;\r\n","/*\r\n * @Description:\r\n * @Author: huxianc\r\n * @Date: 2021-01-04 14:14:24\r\n * @LastEditors: huxianc\r\n * @LastEditTime: 2021-01-19 16:16:25\r\n */\r\nimport router from \"./router\";\r\nimport { RouteLocationNormalized } from \"vue-router\";\r\nimport NProgress from \"nprogress\"; // progress bar\r\nimport \"nprogress/nprogress.css\"; // progress bar\r\nimport defaultSettings from \"./settings\";\r\nimport { getToken } from \"./utils/auth\";\r\n\r\nconst title = defaultSettings.title;\r\nconst getPageTitle = (pageTitle: string) => {\r\n  if (pageTitle) {\r\n    return `${pageTitle} - ${title}`;\r\n  }\r\n  return `${title}`;\r\n};\r\n\r\nconst whiteList = [\"/login\"];\r\n\r\nrouter.beforeEach(\r\n  async (to: RouteLocationNormalized, _: RouteLocationNormalized) => {\r\n    NProgress.start();\r\n\r\n    document.title = getPageTitle(to.meta.title);\r\n\r\n    const hasToken = getToken();\r\n\r\n    if (hasToken) {\r\n      if (to.path === \"/login\") {\r\n        return \"/\";\r\n      }\r\n    } else {\r\n      if (whiteList.includes(to.path)) {\r\n        return true;\r\n      } else {\r\n        return `/login?redirect=${to.path}`;\r\n      }\r\n    }\r\n  }\r\n);\r\n\r\nrouter.afterEach(to => {\r\n  NProgress.done();\r\n});\r\n","import { createStore } from \"vuex\";\r\n\r\nexport default createStore({\r\n  state: {},\r\n  mutations: {},\r\n  actions: {},\r\n  modules: {}\r\n});\r\n","<!--\r\n * @Description: \r\n * @Author: huxianc\r\n * @Date: 2020-12-11 10:04:13\r\n * @LastEditors: huxianc\r\n * @LastEditTime: 2020-12-24 14:38:41\r\n-->\r\n<template>\r\n  <router-view></router-view>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  name: \"App\"\r\n};\r\n</script>\r\n","import { render } from \"./App.vue?vue&type=template&id=fbb75044\"\nimport script from \"./App.vue?vue&type=script&lang=js\"\nexport * from \"./App.vue?vue&type=script&lang=js\"\nscript.render = render\n\nexport default script","/*\r\n * @Description:\r\n * @Author: huxianc\r\n * @Date: 2021-01-06 16:44:07\r\n * @LastEditors: huxianc\r\n * @LastEditTime: 2021-01-22 17:13:35\r\n */\r\nimport \"dayjs/locale/zh-cn\";\r\nimport locale from \"element-plus/lib/locale\";\r\nimport lang from \"element-plus/lib/locale/lang/zh-cn\";\r\nimport {\r\n  // ElAlert,\r\n  // ElAside,\r\n  // ElAutocomplete,\r\n  // ElAvatar,\r\n  // ElBacktop,\r\n  // ElBadge,\r\n  // ElBreadcrumb,\r\n  // ElBreadcrumbItem,\r\n  ElButton,\r\n  // ElButtonGroup,\r\n  // ElCalendar,\r\n  // ElCard,\r\n  // ElCarousel,\r\n  // ElCarouselItem,\r\n  // ElCascader,\r\n  // ElCascaderPanel,\r\n  ElCheckbox,\r\n  ElCheckboxButton,\r\n  ElCheckboxGroup,\r\n  ElCol,\r\n  // ElCollapse,\r\n  // ElCollapseItem,\r\n  ElCollapseTransition,\r\n  // ElColorPicker,\r\n  // ElContainer,\r\n  ElDatePicker,\r\n  ElDialog,\r\n  // ElDivider,\r\n  ElDrawer,\r\n  ElDropdown,\r\n  ElDropdownItem,\r\n  ElDropdownMenu,\r\n  // ElFooter,\r\n  ElForm,\r\n  ElFormItem,\r\n  // ElHeader,\r\n  ElIcon,\r\n  ElImage,\r\n  ElInput,\r\n  // ElInputNumber,\r\n  // ElLink,\r\n  // ElMain,\r\n  // ElMenu,\r\n  // ElMenuItem,\r\n  // ElMenuItemGroup,\r\n  ElOption,\r\n  // ElOptionGroup,\r\n  // ElPageHeader,\r\n  ElPagination,\r\n  ElPopconfirm,\r\n  // ElPopover,\r\n  // ElPopper,\r\n  // ElProgress,\r\n  // ElRadio,\r\n  // ElRadioButton,\r\n  // ElRadioGroup,\r\n  // ElRate,\r\n  ElRow,\r\n  ElScrollbar,\r\n  ElSelect,\r\n  // ElSlider,\r\n  // ElStep,\r\n  // ElSteps,\r\n  // ElSubmenu,\r\n  ElSwitch,\r\n  ElTabPane,\r\n  ElTable,\r\n  ElTableColumn,\r\n  ElTabs,\r\n  ElTag,\r\n  ElTimePicker,\r\n  ElTimeSelect,\r\n  // ElTimeline,\r\n  // ElTimelineItem,\r\n  ElTooltip,\r\n  ElTransfer,\r\n  // ElTree,\r\n  // ElUpload,\r\n  ElInfiniteScroll,\r\n  ElLoading,\r\n  ElMessage\r\n  // ElMessageBox,\r\n  // ElNotification,\r\n} from \"element-plus\";\r\n\r\nconst components = [\r\n  // ElAlert,\r\n  // ElAside,\r\n  // ElAutocomplete,\r\n  // ElAvatar,\r\n  // ElBacktop,\r\n  // ElBadge,\r\n  // ElBreadcrumb,\r\n  // ElBreadcrumbItem,\r\n  ElButton,\r\n  // ElButtonGroup,\r\n  // ElCalendar,\r\n  // ElCard,\r\n  // ElCarousel,\r\n  // ElCarouselItem,\r\n  // ElCascader,\r\n  // ElCascaderPanel,\r\n  ElCheckbox,\r\n  ElCheckboxButton,\r\n  ElCheckboxGroup,\r\n  ElCol,\r\n  // ElCollapse,\r\n  // ElCollapseItem,\r\n  ElCollapseTransition,\r\n  // ElColorPicker,\r\n  // ElContainer,\r\n  ElDatePicker,\r\n  ElDialog,\r\n  // ElDivider,\r\n  ElDrawer,\r\n  ElDropdown,\r\n  ElDropdownItem,\r\n  ElDropdownMenu,\r\n  // ElFooter,\r\n  ElForm,\r\n  ElFormItem,\r\n  // ElHeader,\r\n  ElIcon,\r\n  ElImage,\r\n  ElInput,\r\n  // ElInputNumber,\r\n  // ElLink,\r\n  // ElMain,\r\n  // ElMenu,\r\n  // ElMenuItem,\r\n  // ElMenuItemGroup,\r\n  ElOption,\r\n  // ElOptionGroup,\r\n  // ElPageHeader,\r\n  ElPagination,\r\n  ElPopconfirm,\r\n  // ElPopover,\r\n  // ElPopper,\r\n  // ElProgress,\r\n  // ElRadio,\r\n  // ElRadioButton,\r\n  // ElRadioGroup,\r\n  // ElRate,\r\n  ElRow,\r\n  ElScrollbar,\r\n  ElSelect,\r\n  // ElSlider,\r\n  // ElStep,\r\n  // ElSteps,\r\n  // ElSubmenu,\r\n  ElSwitch,\r\n  ElTabPane,\r\n  ElTable,\r\n  ElTableColumn,\r\n  ElTabs,\r\n  ElTag,\r\n  ElTimePicker,\r\n  ElTimeSelect,\r\n  // ElTimeline,\r\n  // ElTimelineItem,\r\n  ElTooltip,\r\n  ElTransfer\r\n  // ElTree,\r\n  // ElUpload,\r\n];\r\n\r\nconst plugins = [\r\n  ElInfiniteScroll,\r\n  ElLoading,\r\n  ElMessage\r\n  // ElMessageBox,\r\n  // ElNotification,\r\n];\r\nimport \"../style/element-variables.scss\";\r\n\r\nexport default (app: any) => {\r\n  app.config.globalProperties.$ELEMENT = { size: \"small\" };\r\n\r\n  locale.use(lang);\r\n\r\n  components.forEach(component => {\r\n    app.component(component.name, component);\r\n  });\r\n\r\n  plugins.forEach(plugin => {\r\n    app.use(plugin);\r\n  });\r\n};\r\n","/*\r\n * @Description: \r\n * @Author: huxianc\r\n * @Date: 2021-01-18 09:13:10\r\n * @LastEditors: huxianc\r\n * @LastEditTime: 2021-01-18 09:17:08\r\n */\r\nimport type { ObjectDirective } from \"vue\"\r\n\r\nconst debounceClick:ObjectDirective<any> = {\r\n  mounted: function(el, binding) {\r\n    let timer: number|null = null;\r\n    el.addEventListener('click', () => {\r\n      if (timer) {\r\n        clearTimeout(timer)\r\n      }\r\n      timer = window.setTimeout(() => {\r\n        binding.value()\r\n      }, 1000)\r\n    })\r\n  }\r\n}\r\n\r\nexport default debounceClick","/*\r\n * @Description:\r\n * @Author: huxianc\r\n * @Date: 2020-12-11 10:04:13\r\n * @LastEditors: huxianc\r\n * @LastEditTime: 2021-01-19 15:24:53\r\n */\r\nimport \"normalize.css\";\r\nimport { createApp } from \"vue\";\r\nimport router from \"./router\";\r\nimport \"./permission\";\r\nimport store from \"./store\";\r\nimport App from \"./App.vue\";\r\n\r\nimport element from \"./plugins/element-plus\";\r\n\r\nimport \"./style/index.scss\";\r\n\r\n// iconfont\r\nimport \"@/assets/fonts/iconfont/iconfont.css\";\r\n\r\n// vue-svgicon\r\nimport { VueSvgIconPlugin } from \"@yzfe/vue3-svgicon\";\r\nimport \"@yzfe/svgicon/lib/svgicon.css\";\r\n\r\n// directive\r\nimport debounceClick from \"./directive/debounce-click\";\r\n\r\nconst app = createApp(App);\r\nelement(app);\r\napp.directive(\"debounce-click\", debounceClick);\r\napp\r\n  .use(VueSvgIconPlugin, { tagName: \"svg-icon\" })\r\n  .use(store)\r\n  .use(router)\r\n  // .use(ElementPlus, { locale })\r\n  .mount(\"#app\");\r\n","export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./headerBar.vue?vue&type=style&index=0&id=dc82bc7a&lang=scss&scoped=true\"","\n            const data = {\"name\":\"exit-fullscreen\",\"data\":{\"width\":\"128\",\"height\":\"128\",\"viewBox\":\"0 0 128 128\",\"data\":\"<path pid=\\\"0\\\" d=\\\"M49.217 41.329l-.136-35.24c-.06-2.715-2.302-4.345-5.022-4.405h-3.65c-2.712-.06-4.866 2.303-4.806 5.016l.152 19.164-24.151-23.79a6.698 6.698 0 00-9.499 0 6.76 6.76 0 000 9.526l23.93 23.713-18.345.074c-2.712-.069-5.228 1.813-5.64 5.02v3.462c.069 2.721 2.31 4.97 5.022 5.03l35.028-.207c.052.005.087.025.133.025l2.457.054a4.626 4.626 0 003.436-1.38c.88-.874 1.205-2.096 1.169-3.462l-.262-2.465c0-.048.182-.081.182-.136h.002zm52.523 51.212l18.32-.073c2.713.06 5.224-1.609 5.64-4.815v-3.462c-.068-2.722-2.317-4.97-5.021-5.04l-34.58.21c-.053 0-.086-.021-.138-.021l-2.451-.06a4.64 4.64 0 00-3.445 1.381c-.885.868-1.201 2.094-1.174 3.46l.27 2.46c.005.06-.177.095-.177.141l.141 34.697c.069 2.713 2.31 4.338 5.022 4.397l3.45.006c2.705.062 4.867-2.31 4.8-5.026l-.153-18.752 24.151 23.946a6.69 6.69 0 009.494 0 6.747 6.747 0 000-9.523L101.74 92.54v.001zM48.125 80.662a4.636 4.636 0 00-3.437-1.382l-2.457.06c-.05 0-.082.022-.137.022l-35.025-.21c-2.712.07-4.957 2.318-5.022 5.04v3.462c.409 3.206 2.925 4.874 5.633 4.814l18.554.06-24.132 23.928c-2.62 2.626-2.62 6.89 0 9.524a6.694 6.694 0 009.496 0l24.155-23.79-.155 18.866c-.06 2.722 2.094 5.093 4.801 5.025h3.65c2.72-.069 4.962-1.685 5.022-4.406l.141-34.956c0-.05-.182-.082-.182-.136l.262-2.46c.03-1.366-.286-2.592-1.166-3.46h-.001zM80.08 47.397a4.62 4.62 0 003.443 1.374l2.45-.054c.055 0 .088-.02.143-.028l35.08.21c2.712-.062 4.953-2.312 5.021-5.033l.009-3.463c-.417-3.211-2.937-5.084-5.64-5.025l-18.615-.073 23.917-23.715c2.63-2.623 2.63-6.879.008-9.513a6.691 6.691 0 00-9.494 0L92.251 26.016l.155-19.312c.065-2.713-2.097-5.085-4.802-5.025h-3.45c-2.713.069-4.954 1.693-5.022 4.406l-.139 35.247c0 .054.18.088.18.136l-.267 2.465c-.028 1.366.288 2.588 1.174 3.463v.001z\\\"/>\"}}\n        \n                module.exports = data\n                ","export * from \"-!../../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./handle.vue?vue&type=style&index=0&id=8316ca22&lang=scss&scoped=true\""],"sourceRoot":""}