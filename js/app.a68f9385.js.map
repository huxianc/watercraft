{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./src/views/Home/content/components/basestationList.vue?07c0","webpack:///./src/views/Home/content/components/layerPersonList.vue?a66d","webpack:///./src/utils/http3.ts","webpack:///./src/views/Home/content/constVariables/index.ts","webpack:///./src/views/Home/content/components/handle.vue?50e0","webpack:///./src/views/Home/content/components/mapChoosen.vue?461c","webpack:///./src/views/Home/index.vue?6462","webpack:///./src/views/Home/content/components/monitorList.vue?d861","webpack:///./src/utils/auth.ts","webpack:///./src/api/stage.ts","webpack:///./src/views/Home/content/components/formContent.vue?434a","webpack:///./src/views/Home/Head/index.vue?df38","webpack:///./src/views/Home/Head/index.vue","webpack:///./src/views/Home/Head/headerBar.vue","webpack:///./src/components/Screenfull/index.vue","webpack:///./src/components/Screenfull/index.vue?f90b","webpack:///./src/components/Screenfull/index.vue?0538","webpack:///./src/views/Home/Head/headerBar.vue?0b42","webpack:///./src/views/Home/Head/headerBar.vue?ad0a","webpack:///./src/views/Home/Head/index.vue?8f47","webpack:///./src/views/Home/Head/index.vue?e642","webpack:///./src/views/Home/Head/headerBar.vue?150d","webpack:///./src/views/Home/content/components/waterAlarm.vue?bc8a","webpack:///./src/views/Home/content/components/mainNav.vue?20ca","webpack:///./src/views/Home/Head/headerBar.vue?3173","webpack:///./src/views/Home/content/components/playbackControl.vue?015c","webpack:///./src/icons/svg/fullscreen.svg","webpack:///./src/utils/urls.ts","webpack:///./src/views/Home/content/style/index.scss?7fae","webpack:///./src/views/Home/content/components/historyMonitor.vue?09e5","webpack:///./src/views/Home/content/components/contextmenuContent.vue?b4f4","webpack:///./src/views/Home/index.vue","webpack:///./src/views/Home/content/index.vue","webpack:///./src/api/alarm.ts","webpack:///./src/api/common.ts","webpack:///./src/views/Home/content/utils/index.ts","webpack:///./src/views/Home/content/utils/shape.ts","webpack:///./src/views/Home/content/utils/ws.ts","webpack:///./src/views/Home/content/components/mainNav.vue","webpack:///./src/views/Home/content/components/mainNav.vue?5aa2","webpack:///./src/views/Home/content/components/mainNav.vue?04bb","webpack:///./src/views/Home/content/components/personList.vue","webpack:///./src/views/Home/content/components/personList.vue?878a","webpack:///./src/views/Home/content/components/personList.vue?ddbf","webpack:///./src/views/Home/content/components/cameraList.vue","webpack:///./src/views/Home/content/components/cameraList.vue?867b","webpack:///./src/views/Home/content/components/cameraList.vue?9612","webpack:///./src/views/Home/content/components/basestationList.vue","webpack:///./src/views/Home/content/components/basestationList.vue?2271","webpack:///./src/views/Home/content/components/basestationList.vue?62b2","webpack:///./src/views/Home/content/components/fenceBox.vue","webpack:///./src/views/Home/content/components/fenceBox.vue?9080","webpack:///./src/views/Home/content/components/fenceBox.vue?cbdf","webpack:///./src/views/Home/content/components/contextmenuContent.vue","webpack:///./src/views/Home/content/components/contextmenuContent.vue?4bd5","webpack:///./src/views/Home/content/components/contextmenuContent.vue?8c29","webpack:///./src/views/Home/content/components/formContent.vue","webpack:///./src/views/Home/content/components/formItem/labelItem.vue","webpack:///./src/views/Home/content/components/formItem/labelItem.vue?baf3","webpack:///./src/views/Home/content/components/formItem/labelItem.vue?8f76","webpack:///./src/views/Home/content/components/formItem/personItem.vue","webpack:///./src/views/Home/content/components/formItem/personItem.vue?56d3","webpack:///./src/views/Home/content/components/formItem/personItem.vue?5763","webpack:///./src/views/Home/content/components/formItem/basestationItem.vue","webpack:///./src/views/Home/content/components/formItem/basestationItem.vue?36f9","webpack:///./src/views/Home/content/components/formItem/basestationItem.vue?21d4","webpack:///./src/views/Home/content/components/formItem/cameraItem.vue","webpack:///./src/views/Home/content/components/formItem/cameraItem.vue?84d4","webpack:///./src/views/Home/content/components/formItem/cameraItem.vue?31a5","webpack:///./src/views/Home/content/components/formContent.vue?d080","webpack:///./src/views/Home/content/components/formContent.vue?a4ba","webpack:///./src/views/Home/content/components/trackPlaybackMenu.vue","webpack:///./src/views/Home/content/components/trackPlaybackMenu.vue?fbce","webpack:///./src/views/Home/content/components/waterAlarm.vue","webpack:///./src/views/Home/content/components/waterAlarm.vue?e970","webpack:///./src/views/Home/content/components/monitorList.vue","webpack:///./src/views/Home/content/directive/drag-dialog/drag.ts","webpack:///./src/views/Home/content/directive/drag-dialog/index.ts","webpack:///./src/views/Home/content/components/monitorList.vue?436a","webpack:///./src/views/Home/content/components/historyMonitor.vue","webpack:///./src/views/Home/content/components/historyMonitor.vue?b34e","webpack:///./src/views/Home/content/components/historyMonitor.vue?43c8","webpack:///./src/views/Home/content/components/warningList.vue","webpack:///./src/views/Home/content/components/warningList.vue?ba8a","webpack:///./src/views/Home/content/components/labelList.vue","webpack:///./src/components/hd/hd-table-column.vue","webpack:///./src/components/hd/hd-table-column.vue?a83e","webpack:///./src/components/hd/hd-table-column.vue?71e9","webpack:///./src/views/Home/content/components/labelList.vue?464b","webpack:///./src/views/Home/content/components/labelList.vue?aa2b","webpack:///./src/views/Home/content/components/handle.vue","webpack:///./src/views/Home/content/components/handle.vue?bdee","webpack:///./src/views/Home/content/components/handle.vue?f5b3","webpack:///./src/views/Home/content/components/layerPersonList.vue","webpack:///./src/views/Home/content/components/layerPersonList.vue?1503","webpack:///./src/views/Home/content/components/layerPersonList.vue?e048","webpack:///./src/views/Home/content/components/mapChoosen.vue","webpack:///./src/views/Home/content/components/mapChoosen.vue?6fc4","webpack:///./src/views/Home/content/components/mapChoosen.vue?4087","webpack:///./src/views/Home/content/components/alarmContent.vue","webpack:///./src/views/Home/content/components/alarmContent.vue?7a01","webpack:///./src/views/Home/content/components/alarmContent.vue?0d73","webpack:///./src/views/Home/content/components/dragableContainer.vue","webpack:///./src/views/Home/content/components/dragableContainer.vue?0349","webpack:///./src/views/Home/content/components/dragableContainer.vue?a38d","webpack:///./src/views/Home/content/components/playbackControl.vue","webpack:///./src/views/Home/content/components/playbackControl.vue?a2d0","webpack:///./src/views/Home/content/components/playbackControl.vue?adbf","webpack:///./src/views/Home/content/module/initData.ts","webpack:///./src/views/Home/content/index.vue?7190","webpack:///./src/views/Home/content/index.vue?a4a6","webpack:///./src/views/Home/index.vue?b56a","webpack:///./src/router/index.ts","webpack:///./src/settings.ts","webpack:///./src/permission.ts","webpack:///./src/App.vue","webpack:///./src/App.vue?dfb6","webpack:///./src/plugins/element-plus.ts","webpack:///./src/components/hd/hd-table.vue","webpack:///./src/components/hd/hd-table.vue?10ac","webpack:///./src/components/hd/hd-table.vue?51da","webpack:///./src/components/hd/hd-dialog.vue","webpack:///./src/components/hd/hd-dialog.vue?baba","webpack:///./src/components/hd/hd-dialog.vue?4a10","webpack:///./src/plugins/hd-element.ts","webpack:///./src/directive/debounce-click/index.ts","webpack:///./src/main.ts","webpack:///./src/utils/index.ts","webpack:///./src/icons/svg/exit-fullscreen.svg","webpack:///./src/views/Home/content/components/dragableContainer.vue?b47d"],"names":["webpackJsonpCallback","data","moduleId","chunkId","chunkIds","moreModules","executeModules","i","resolves","length","Object","prototype","hasOwnProperty","call","installedChunks","push","modules","parentJsonpFunction","shift","deferredModules","apply","checkDeferredModules","result","deferredModule","fulfilled","j","depId","splice","__webpack_require__","s","installedModules","installedCssChunks","jsonpScriptSrc","p","exports","module","l","e","promises","cssChunks","Promise","resolve","reject","href","fullhref","existingLinkTags","document","getElementsByTagName","tag","dataHref","getAttribute","rel","existingStyleTags","linkTag","createElement","type","onload","onerror","event","request","target","src","err","Error","code","parentNode","removeChild","head","appendChild","then","installedChunkData","promise","onScriptComplete","script","charset","timeout","nc","setAttribute","error","clearTimeout","chunk","errorType","realSrc","message","name","undefined","setTimeout","all","m","c","d","getter","o","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","oe","console","jsonpArray","window","oldJsonpFunction","slice","service","a","baseURL","headers","jsonList","interceptors","use","config","url","visittoken","includes","stringify","response","res","success","msg","duration","TYPES","basestation","labelList","person","camera","List","NAV_INFO","title","FENCE","ALARM","DATAV","TITLE_HEIGHT","ALL_MENU","label","clickCode","DEFAULT_COLORS","BLUE","RED","TRANSPARENT","bubblePathObj","top","bottom","left","right","areaRules","areaRulesOption","map","item","index","String","formateRuleType","findIndex","bgImageConfig","width","height","areaColorConfig","stroke","fill","strokeWidth","perfectDrawEnabled","YMD","Hms","timeFormateStr","warningListWidth","getFormTitle","handleTypeList","id","content","handleExample","TokenKey","getToken","setToken","token","set","removeToken","remove","UserName","setUsername","username","localStorage","setItem","getUsername","getItem","UserAccount","setUserAccount","account","BNum","setBNum","bnum","wsArr","setWsArr","ws","JSON","getWsArr","parse","HomeSNum","setHomeSNum","homesnum","LoadSNum","setLoadSNum","loadsnum","getLoadSNum","deviceAll","setAllDevice","deviceall","getAllDevice","sceneAll","setAllScene","sceneall","getMapByNum","snum","sceneAllStr","buildingAll","setAllBuild","buildingall","getBuildByNum","dnum","buildAllStr","buildAll","logout","router","clear","getAllScene","method","getAllLayer","getAllBuild","getAllHArea","saveHArea","getOnehAreaSetDeivce","delHArea","saveRule","getRule","delRule","class","now","style","trigger","dropdown","to","divided","logOut","click","isFullscreen","exitFullscreen","fullscreen","setup","change","init","isEnabled","on","destroy","off","warning","toggle","render","components","Screenfull","__scopeId","HeaderBar","format","timer","setInterval","clearInterval","ip","alarmIp","locateUrl","alarm","baseUrl","alarmUrl","imgUrl","httpFlvServer","ref","navClick","visibleObj","nav","showMenu","drawerInfo","showList","direction","size","with-header","resetNavIndex","append-to-body","drawerTitle","activeName","equipSwitchClick","types","form-data","detailsForm","formData","seeNowVideo","seeHistoryVideo","showEquipDetails","wsAllLabel","fenceListInfo","tableVisible","handleAddFence","tableData","toggleAllFenceVisible","prop","align","default","row","show","changeAreaVisible","$event","areaids","handleEditFence","handleSeeRules","areaname","handleDelFence","effect","reference","loading","current-page","params","curpage","layout","total","background","fenceCurrentChange","fenceInfo","dialogType","visible","showFooterButtons","close-on-click-modal","confirmButtonDisabled","drawFenceInfo","clonePoints","handleSubmitFence","model","form","rules","label-width","gutter","span","offset","clearable","placeholder","chosenCamera","filterable","filter-placeholder","allMapCamera","titles","props","transferProps","option","dname","required","handleFenceDraw","status","isDrawFence","handleRevokeFence","handleRedrawFence","handleCancelDrawFence","handleFinishDrawFence","ruleListInfo","visiable","handleAddRule","handleEditRule","handleDelRule","ruleCurrentChange","ruleItemDetail","handleSubmitRule","ruleItemDetailRule","isLoop","permitType","limitedTime","startTime","timerPickerChange","endTime","disabled","disabledDate","ruleDisabledDate","memo","alarmListInfo","inline","SourceType","getAlarmListByCondition","alarmType","timeRange","range-separator","start-placeholder","end-placeholder","alarmLevel","alarmProgress","header-cell-style","show-overflow-tooltip","handleHandleAlarm","showAlarmDetail","page-size","alarmCurrentChange","alarmInfo","CreateTime","SourceName","ShowSceneNum","sname","SourcePointNum","alt","iconStyle","dealAccount","dealTime","handleLocate","alarmContent","handleVisible","footer","alarmHandleSubmit","abel-width","handleType","rows","handleContent","handleExampleVisible","getHandleExample","show-header","contextmenu","contextmenuTypeRef","contxtmenu-position","contxtmenuPosition","contextmenu-list","contextmenuList","showDetails","handleClickTrackPlayback","personFollow","formTitle","hideDetails","form-type","x","y","monitorListFlag","handleCloseAllVideo","monitorListInfo","newMonitorList","monitorInner","camera-data","cameraData","livePlayCount","active","historyMonitorListFlag","handleCloseAllHistoryVideo","newHistoryMonitorList","monitorHistoryInner","history-camera-data","historyCameraData","historyPlayCount","trackPlayback","center","handleOpenContextmenu","handleClickSeeTrackPlayback","date","is-range","time","isPlayBack","sTime","playbackObj","eTime","currentTime","currentIndex","len","isPlay","changeRate","togglePlay","playbackClose","changeProcess","warningWidth","showWarningList","alarmForm","wsAlarmItem","handleIds","getAlarmTotal","getAlarmUnHandle","cancelId","cancelAlarmId","layerPerson","person-list","mouse-position","layerPosition","controlPannel","fasle","mapNameRef","leftPannelSearch","remote-method","querySearch","default-first-option","remote","searchChange","userSearchRes","lids","ltype","currentMap","alarmTotal","alarmUnHandle","controlButtonList","controlButtonChange","closeMapChoosen","map-list","mapListRef","map-id","mapIdRef","changeMap","isFollowing","handleCloseFollow","getAllAlarmType","dealAlarmItem","dealAlarms","getCommonApi","getOffset","canvasPos","imgPos","scale","getCorrectPx","ele","pos","w","offsetWidth","h","offsetHeight","winWidth","innerWidth","winHeight","innerHeight","screenTocanvas","state","sx","sy","strToPos","str","split","Number","svgToImage","isBubble","pathSrc","color","svg","createElementNS","path","svgStr","XMLSerializer","serializeToString","base64","btoa","image","Image","guid","S4","Math","random","toString","substring","generateImageDomByType","attrs","layrestype","defdata","layinfo","W","H","Color","svgConfig","imageDom","loadImage","func","WSType","wsUrls","location","forEach","servertype","serverip","serverport","Alarm","locateIcon","cx","cy","loop","time1","time2","ymd","Date","getTrackTime","checkTimeGap","rule","callback","hour","getTime","generatePersonGroup","group","shadowColor","shadowBlur","fontSize","rectHeight","textRect","Rect","cornerRadius","text","Text","offsetX","offsetY","add","personItem","LocationPoint","ObjData","BindObjName","LocationSceneId","TagId","navList","navItem","navIndex","handleNavClick","icon","emits","emit","resetIndex","search","handleDetail","page","changePage","CLICKED","Array","personAll","getList","getAllPersonList","param","act","common","element","Username","cameraAll","filter","dtypecode","extinfo","Password","ChanelNum","IsYunTai","IsCameraPhoto","xcoordinate","ycoordinate","dids","tips","getFirstY","isSelected","uwbt3checking","uwbr4checking","rfidchecking","timeStyle","styleFilter","dtype","version","baseData","timeTipsStyle","pagesize","sys_showpagesize","eattribute","elem","attrName","arr","startsWith","count","list","handleClick","hiddenRef","styleAttrs","menuItem","handleClickContentmenu","SHOW_DETAILS","TRACK_PLAYBACK","SEE_NOWVIDEO","SEE_HISTORYVIDEO","FOLLOW","contextMenuRef","getPx","positions","assign","formType","Photo","deviceData","desc","hearttime","voltage","bracelet_voltage","currentalarm","newVal","immediate","deep","DeviceName","Personnel_category","Position","Fettle","BraceletVoltage","hardwarever","pattern","checkState","starttype","DeviceNum","labelItem","basestationItem","cameraItem","formContentRef","roomNum","AlarmMappingLayerIdS","BrandCode","BrandName","BuildingName","BuildingNum","DeviceObjProperty","DeviceSelfPointRelation","DeviceType","DeviceTypeCode","InstallSceneNum","IsUse","OwnAlarmSourceCode","PDeviceIds","SceneName","shapeName","formDatas","newX","isNaN","newY","methods","emitObj","0","1","this","$emit","clickHandler","hiddenBox","Boolean","ctx","radarR","radarR1","shipImg","shipDeg","alpha","personPosArr","mounted","$el","clientWidth","clientHeight","$refs","waterAlarmCanvas","getContext","shipWidth","shipHeight","drawScene","animate","requestAnimationFrame","PI","clearRect","drawBasicIcon","drawRadar","drawPerson","save","translate","rotate","drawImage","restore","canvasWidth","canvasHeight","beginPath","fillStyle","arc","closePath","lineCap","strokeStyle","lineWidth","moveTo","lineTo","grd","createRadialGradient","addColorStop","posArr","$message","muted","autoplay","controls","cameraName","cameraHigh","active-text","inactive-text","active-value","inactive-value","active-color","inactive-color","changSwitch","hidden","getStyle","isLoading","draggableDialog","el","binding","header","customForm","dialogHeaderEl","querySelector","dragDom","cssText","dom","attr","getComputedStyle","onmousedown","disX","clientX","offsetLeft","disY","clientY","offsetTop","dragDomWidth","dragDomHeight","screenWidth","body","screenHeight","minDragDomLeft","maxDragDomLeft","minDragDomTop","maxDragDomTop","styL","styT","replace","onmousemove","onmouseup","drag","CHANGE_MONITORLISTPANEL_STATE","directives","dragDialog","players","playList","monitorPanelState","serverHost","cameraId","subtype","dataRef","playerRef","initPlayer","flv","isSupported","video","rtsp","password","brand","player","Url","encodeURIComponent","createPlayer","isLive","enableStashBuffer","autoCleanupMaxBackwardDuration","autoCleanupMinBackwardDuration","statisticsInfoReportInterval","stashInitialSize","enableDurationMonitor","enableVideoFrozenMonitor","enableConstVideoViewSize","Events","METADATA_ARRIVED","enableVideoStateMonitor","VIDEO_RESOLUTION_CHANGED","MEDIA_SOURCE_ENDED","MEDIA_SOURCE_CLOSE","paused","addEventListener","NETWORK_ERROR","MEDIA_ERROR","VIDEO_FROZEN","ERROR","errType","errDetail","attachMediaElement","load","play","pause","unload","detachMediaElement","initCameraData","newValue","handleVideoProgress","changePlayStatus","playStatus","handleProgress","currentRate","timePicker","day","value-format","searchVideo","CHANGE_HISTORYMONITORLISTPANEL_STATE","innerBarRef","progressBarRef","overTime","currentId","allDuration","progressLength","originTime","formatHaiKangTime","timestamps","timestamp","parseFloat","year","getFullYear","month","getMonth","getDate","getHours","minute","getMinutes","second","getSeconds","formatDahuaTime","nvr_username","nvr_password","nvr_ip","nvr_channel","hasVideo","formatDay","flag","formatTimes","floor","rate","playbackRate","hdTableColumn","xmlns","xmlns:xlink","viewBox","xml:space","attributeType","attributeName","from","dur","repeatCount","lazyLoad","handleStatus","handleLevel","showAlarms","Id","checkAlarm","styleArr","colorStyleArr","diffTime","viewToAlarm","alarmDetail","showHandlePannel","checkedNum","checkAll","handleCheckAllChange","handleAll","alarms","oldY","disposeStatus","typeid","alarmTypeArr","alarmTypeName","static","unHandle","itemsRef","alarmBarRef","getAllAlarm","getAllUnHandleAlarm","getAlarmList","createtime","itemLength","ulLength","scrollTop","checkedAlarm","wsAlarm","AlarmLevel","AlarmSourceType","AlarmContent","AlarmSourceName","newArr","IDS","num","personList","mousePosition","listRef","mapList","mapItem","mapId","surl","pnum","CHANGE_MAP","2","3","4","keys","modelValue","styles","handleClickHeaderClose","CLOSE","playRateRef","options","handleClose","CHANGE_RATE","TOGGLE_PLAY","CHANGE_PROCESS","processRef","maxWidth","initData","wsUrl","mapObj","info","scaleBoundary","minScale","maxScale","draggable","waterAlarmPanel","area","cameraCount","liveCameraCount","historyCameraCount","allData","points","ruleFormRef","checkEndTime","hms","start","handleAlarmId","handleAlarmIdArr","SourceDbOrDeviceIdS","dealMemo","allGroup","cameraGroup","Group","basestationGroup","personGroup","fenceGroup","locateBubbleGroup","alarmGroup","activeTarget","bubble","cacheAlarmObj","cacheBasestationObj","cacheCameraObj","cacheBubbleObj","cacheAreaObj","cachePersonObj","allLayer","wsAlarmType","getAlarm","cancelAlarm","mainNav","cameraList","basestationList","fenceBox","contextmenuContent","formContent","monitorList","historyMonitor","handle","layerPersonList","mapChoosen","dragableContainer","playbackControl","EpauletActionCode","clickTimer","currentContextmenu","tween","steps","lineNode","trackPlaybackLinePos","mousePos","stage","batchDraw","layer","Layer","bgLayer","operationLayer","val","cacheDrawFence","handleStartDrawFence","isFinished","pointsArr","fenceArea","Shape","sceneFunc","shape","fillStrokeShape","close","pop","clearShadowColor","personOrLabel","children","showMenuList","hideMenuList","handleStageWheel","ev","evt","wheelDelta","deltaY","rateX","rateY","toFixed","setAttrs","scaleX","scaleY","handleStageMouseDown","container","cursor","handleStageMouseUp","handleStageMouseMove","mouseMoveFunc","maxSx","minSx","maxSy","minSy","midSy","handleStageContextMenu","preventDefault","stageEventsInit","initStage","Stage","addLayer","moveToBottom","moveToTop","initAlarmIcon","alarmIcon","Circle","radius","period","anim","Animation","frame","sin","stop","initBasestation","generate","initCamera","deviceitem","deviceArr","DeviceIdS","initBubble","OffsetX","OffsetY","IsHaveCount","CountItem","listening","line","Line","bottomGroup","tagList","gap","cornerGroup","cornerH","cornerRect","cornerText","initArea","startPoint","X","Y","areaItem","personImageWH","cachePlaybackPerson","cacheFollowingPerson","initPerson","initType","trackPlaybackTween","transferData","getAllMapCamera","getCurrentMapCamera","getCurrentMapBubble","getCurrentMapBasestation","getCurrentMapPerson","destroyLayer","ProductId","getCurrentMapArea","substr","sIDS","sDealAccount","sDealResult","sDealType","sDealIp","sIDSChar","cacheBgImage","initBgImage","initLocationWs","initAlarmWs","updataBgImage","bgImageDom","initShape","bgSrc","startInit","getAllMap","mainNavRef","fenceInfoFormRef","openFenceDetail","resetFields","editFenceId","LayerIdS","SceneNum","showClose","validate","valid","chooseDevice","CheckSourceID","DevicePointRelation","CheckSourceUnitName","getRules","labelType","ptype","isloop","editPoints","layerId","layerName","openRule","clearValidate","ruleId","stime","etime","limtime","formateTime","formateStr","StartTime","EndTime","ID","Memo","RuleLocateType","PermitType","IsLoopEveryDay","OwnUserType","OwnParam","LimitedTime","deviceInfo","popMonitorVideo","popHistoryMonitorVideo","cid","watchMonitorListPanelState","watchHistoryMonitorListPanelState","trackPlaybackFormRef","PersonnelgId","BindObjSysNum","LocateTriggerTime","playRate","updatePoint","LocatePoint","initMoveLine","lineJoin","moveDown","node","Tween","onUpdate","moveX","moveY","onFinish","followObj","followPersonId","allSearchArr","searchDevice","TypeCodeChar","destroyChildren","searchItem","mapNum","confirm","confirmButtonText","cancelButtonText","catch","locationWs","WebSocket","onmessage","ActionCode","HTagInit","Data","HTagOnline","personData","isIn","some","posItem","HTagOffline","HTagLogOff","currntMapIndex","HTagMove","posObj","gx","gy","HLayerGroupStatistics","TagDataList","HWaterAlarm","HSceneStatistics","onclose","alarmWs","getData","actcode","alarmtype","handleWindowResize","debounceRem","debounceResize","removeEventListener","documentElement","headerComponent","mainComponent","routes","component","Home","history","scrollBehavior","savedPosition","settings","getPageTitle","pageTitle","whiteList","beforeEach","_","meta","hasToken","afterEach","done","plugins","app","globalProperties","$ELEMENT","plugin","element-loading-text","element-loading-spinner","element-loading-background","tooltip-effect","visibleDialog","$attrs","handleCancel","plain","handleConfirm","inheritAttrs","debounceClick","App","directive","tagName","mount","computedRem","docEl","commonRuleItem","customFuncRule","validator","checkPositiveInteger","test","getPagination","allArr","getPagintionCount","arguments","getIntervalTime","diff","week"],"mappings":"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BACA5E,MAAO,QACPd,YACAS,iBACAI,oBACA43B,oBACAj3B,kBACAqD,mBACA1C,mBACAsB,qBACAnB,kBACAU,sBACAO,gBACAyB,qBACAC,qBACAC,yBACAC,yBACA4D,qBACAE,qBACAE,kBACAnI,cACA4J,iBACApB,eACAH,4BACAyB,yBACAC,+BACA7J,eACAC,mBACA0I,uBACAS,8BACA0wB,mBACAC,0BACAE,8BACAC,qCACAtxB,kBACA1I,oBACAuF,YACAsF,YACAxH,gBACAqyB,gBACA10B,kBACAkD,iBACAC,kBACAI,oBACAH,iBACAvN,gBAAA,QACAwN,qBACAY,mBACAJ,qBACAL,qBACA5D,qBACAN,yBACA8K,cACAG,gBACAgB,oBACAC,uBACAC,mBACAK,aACAnB,oBACAE,eACAG,gBACAovB,gBACA7lC,SACA0W,iBACA7F,YACAjB,gBACAgB,sBACAb,2BACAU,qBACAkB,qBACA/L,cAAA,QACA8K,mBACAuB,oBACAsD,eACAK,iBACAH,iBACAC,oBACAhT,eAAA,QACAG,cAAA,QACA6hC,wBACAhwB,eACAM,cACAC,cACAE,iBACAD,iBACAvC,gBACArN,YAAA,QACA4D,OAAA,QACAuO,qBACAlG,oB,UCxqFN,GAAOpJ,OAAS,GAChB,GAAOG,UAAY,kBAEJ,U/ESA,IACbF,WAAY,CACVkgC,gBAAA,OACAC,cAAA,K,UgFfJ,GAAOpgC,OAASA,EAChB,GAAOG,UAAY,kBAEJ,UCETkgC,GAAgC,CACpC,CACE7uB,KAAM,IACN/c,KAAM,OACN6rC,UAAWC,IAEb,CACE/uB,KAAM,SACN/c,KAAM,QACN6rC,UAAW,kBACT,yCAEJ,CACE9uB,KAAM,MACN/c,KAAM,KACN6rC,UAAW,kBACT,0CAIA,GAAS,eAAa,CAC1BE,QAAS,iBACTH,UACAI,eAH0B,SAGXzhC,EAAI2qB,EAAM+W,GACvB,OAAIA,GAGK,CAAE5nC,IAAK,MAKL,M,wBC/BT6nC,I,UAAsB,CAC1B1oC,MAAO,gBAGM,MCDTA,GAAQ,GAAgBA,MACxB2oC,GAAe,SAACC,GACpB,OAAIA,EACF,UAAUA,EAAV,cAAy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","file":"js/app.a68f9385.js","sourcesContent":[" \t// install a JSONP callback for chunk loading\n \tfunction webpackJsonpCallback(data) {\n \t\tvar chunkIds = data[0];\n \t\tvar moreModules = data[1];\n \t\tvar executeModules = data[2];\n\n \t\t// add \"moreModules\" to the modules object,\n \t\t// then flag all \"chunkIds\" as loaded and fire callback\n \t\tvar moduleId, chunkId, i = 0, resolves = [];\n \t\tfor(;i < chunkIds.length; i++) {\n \t\t\tchunkId = chunkIds[i];\n \t\t\tif(Object.prototype.hasOwnProperty.call(installedChunks, chunkId) && installedChunks[chunkId]) {\n \t\t\t\tresolves.push(installedChunks[chunkId][0]);\n \t\t\t}\n \t\t\tinstalledChunks[chunkId] = 0;\n \t\t}\n \t\tfor(moduleId in moreModules) {\n \t\t\tif(Object.prototype.hasOwnProperty.call(moreModules, moduleId)) {\n \t\t\t\tmodules[moduleId] = moreModules[moduleId];\n \t\t\t}\n \t\t}\n \t\tif(parentJsonpFunction) parentJsonpFunction(data);\n\n \t\twhile(resolves.length) {\n \t\t\tresolves.shift()();\n \t\t}\n\n \t\t// add entry modules from loaded chunk to deferred list\n \t\tdeferredModules.push.apply(deferredModules, executeModules || []);\n\n \t\t// run deferred modules when all chunks ready\n \t\treturn checkDeferredModules();\n \t};\n \tfunction checkDeferredModules() {\n \t\tvar result;\n \t\tfor(var i = 0; i < deferredModules.length; i++) {\n \t\t\tvar deferredModule = deferredModules[i];\n \t\t\tvar fulfilled = true;\n \t\t\tfor(var j = 1; j < deferredModule.length; j++) {\n \t\t\t\tvar depId = deferredModule[j];\n \t\t\t\tif(installedChunks[depId] !== 0) fulfilled = false;\n \t\t\t}\n \t\t\tif(fulfilled) {\n \t\t\t\tdeferredModules.splice(i--, 1);\n \t\t\t\tresult = __webpack_require__(__webpack_require__.s = deferredModule[0]);\n \t\t\t}\n \t\t}\n\n \t\treturn result;\n \t}\n\n \t// The module cache\n \tvar installedModules = {};\n\n \t// object to store loaded CSS chunks\n \tvar installedCssChunks = {\n \t\t\"app\": 0\n \t}\n\n \t// object to store loaded and loading chunks\n \t// undefined = chunk not loaded, null = chunk preloaded/prefetched\n \t// Promise = chunk loading, 0 = chunk loaded\n \tvar installedChunks = {\n \t\t\"app\": 0\n \t};\n\n \tvar deferredModules = [];\n\n \t// script path function\n \tfunction jsonpScriptSrc(chunkId) {\n \t\treturn __webpack_require__.p + \"js/\" + ({\"login\":\"login\",\"three\":\"three\"}[chunkId]||chunkId) + \".\" + {\"login\":\"de679eea\",\"three\":\"d76abad2\"}[chunkId] + \".js\"\n \t}\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n \t// This file contains only the entry chunk.\n \t// The chunk loading function for additional chunks\n \t__webpack_require__.e = function requireEnsure(chunkId) {\n \t\tvar promises = [];\n\n\n \t\t// mini-css-extract-plugin CSS loading\n \t\tvar cssChunks = {\"login\":1,\"three\":1};\n \t\tif(installedCssChunks[chunkId]) promises.push(installedCssChunks[chunkId]);\n \t\telse if(installedCssChunks[chunkId] !== 0 && cssChunks[chunkId]) {\n \t\t\tpromises.push(installedCssChunks[chunkId] = new Promise(function(resolve, reject) {\n \t\t\t\tvar href = \"css/\" + ({\"login\":\"login\",\"three\":\"three\"}[chunkId]||chunkId) + \".\" + {\"login\":\"1654d2a3\",\"three\":\"938ce9b7\"}[chunkId] + \".css\";\n \t\t\t\tvar fullhref = __webpack_require__.p + href;\n \t\t\t\tvar existingLinkTags = document.getElementsByTagName(\"link\");\n \t\t\t\tfor(var i = 0; i < existingLinkTags.length; i++) {\n \t\t\t\t\tvar tag = existingLinkTags[i];\n \t\t\t\t\tvar dataHref = tag.getAttribute(\"data-href\") || tag.getAttribute(\"href\");\n \t\t\t\t\tif(tag.rel === \"stylesheet\" && (dataHref === href || dataHref === fullhref)) return resolve();\n \t\t\t\t}\n \t\t\t\tvar existingStyleTags = document.getElementsByTagName(\"style\");\n \t\t\t\tfor(var i = 0; i < existingStyleTags.length; i++) {\n \t\t\t\t\tvar tag = existingStyleTags[i];\n \t\t\t\t\tvar dataHref = tag.getAttribute(\"data-href\");\n \t\t\t\t\tif(dataHref === href || dataHref === fullhref) return resolve();\n \t\t\t\t}\n \t\t\t\tvar linkTag = document.createElement(\"link\");\n \t\t\t\tlinkTag.rel = \"stylesheet\";\n \t\t\t\tlinkTag.type = \"text/css\";\n \t\t\t\tlinkTag.onload = resolve;\n \t\t\t\tlinkTag.onerror = function(event) {\n \t\t\t\t\tvar request = event && event.target && event.target.src || fullhref;\n \t\t\t\t\tvar err = new Error(\"Loading CSS chunk \" + chunkId + \" failed.\\n(\" + request + \")\");\n \t\t\t\t\terr.code = \"CSS_CHUNK_LOAD_FAILED\";\n \t\t\t\t\terr.request = request;\n \t\t\t\t\tdelete installedCssChunks[chunkId]\n \t\t\t\t\tlinkTag.parentNode.removeChild(linkTag)\n \t\t\t\t\treject(err);\n \t\t\t\t};\n \t\t\t\tlinkTag.href = fullhref;\n\n \t\t\t\tvar head = document.getElementsByTagName(\"head\")[0];\n \t\t\t\thead.appendChild(linkTag);\n \t\t\t}).then(function() {\n \t\t\t\tinstalledCssChunks[chunkId] = 0;\n \t\t\t}));\n \t\t}\n\n \t\t// JSONP chunk loading for javascript\n\n \t\tvar installedChunkData = installedChunks[chunkId];\n \t\tif(installedChunkData !== 0) { // 0 means \"already installed\".\n\n \t\t\t// a Promise means \"currently loading\".\n \t\t\tif(installedChunkData) {\n \t\t\t\tpromises.push(installedChunkData[2]);\n \t\t\t} else {\n \t\t\t\t// setup Promise in chunk cache\n \t\t\t\tvar promise = new Promise(function(resolve, reject) {\n \t\t\t\t\tinstalledChunkData = installedChunks[chunkId] = [resolve, reject];\n \t\t\t\t});\n \t\t\t\tpromises.push(installedChunkData[2] = promise);\n\n \t\t\t\t// start chunk loading\n \t\t\t\tvar script = document.createElement('script');\n \t\t\t\tvar onScriptComplete;\n\n \t\t\t\tscript.charset = 'utf-8';\n \t\t\t\tscript.timeout = 120;\n \t\t\t\tif (__webpack_require__.nc) {\n \t\t\t\t\tscript.setAttribute(\"nonce\", __webpack_require__.nc);\n \t\t\t\t}\n \t\t\t\tscript.src = jsonpScriptSrc(chunkId);\n\n \t\t\t\t// create error before stack unwound to get useful stacktrace later\n \t\t\t\tvar error = new Error();\n \t\t\t\tonScriptComplete = function (event) {\n \t\t\t\t\t// avoid mem leaks in IE.\n \t\t\t\t\tscript.onerror = script.onload = null;\n \t\t\t\t\tclearTimeout(timeout);\n \t\t\t\t\tvar chunk = installedChunks[chunkId];\n \t\t\t\t\tif(chunk !== 0) {\n \t\t\t\t\t\tif(chunk) {\n \t\t\t\t\t\t\tvar errorType = event && (event.type === 'load' ? 'missing' : event.type);\n \t\t\t\t\t\t\tvar realSrc = event && event.target && event.target.src;\n \t\t\t\t\t\t\terror.message = 'Loading chunk ' + chunkId + ' failed.\\n(' + errorType + ': ' + realSrc + ')';\n \t\t\t\t\t\t\terror.name = 'ChunkLoadError';\n \t\t\t\t\t\t\terror.type = errorType;\n \t\t\t\t\t\t\terror.request = realSrc;\n \t\t\t\t\t\t\tchunk[1](error);\n \t\t\t\t\t\t}\n \t\t\t\t\t\tinstalledChunks[chunkId] = undefined;\n \t\t\t\t\t}\n \t\t\t\t};\n \t\t\t\tvar timeout = setTimeout(function(){\n \t\t\t\t\tonScriptComplete({ type: 'timeout', target: script });\n \t\t\t\t}, 120000);\n \t\t\t\tscript.onerror = script.onload = onScriptComplete;\n \t\t\t\tdocument.head.appendChild(script);\n \t\t\t}\n \t\t}\n \t\treturn Promise.all(promises);\n \t};\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// on error function for async loading\n \t__webpack_require__.oe = function(err) { console.error(err); throw err; };\n\n \tvar jsonpArray = window[\"webpackJsonp\"] = window[\"webpackJsonp\"] || [];\n \tvar oldJsonpFunction = jsonpArray.push.bind(jsonpArray);\n \tjsonpArray.push = webpackJsonpCallback;\n \tjsonpArray = jsonpArray.slice();\n \tfor(var i = 0; i < jsonpArray.length; i++) webpackJsonpCallback(jsonpArray[i]);\n \tvar parentJsonpFunction = oldJsonpFunction;\n\n\n \t// add entry module to deferred list\n \tdeferredModules.push([0,\"chunk-vendors\"]);\n \t// run deferred modules when ready\n \treturn checkDeferredModules();\n","export * from \"-!../../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./basestationList.vue?vue&type=style&index=0&id=519e38a4&lang=scss&scoped=true\"","export * from \"-!../../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./layerPersonList.vue?vue&type=style&index=0&id=78a92eb4&lang=scss&scoped=true\"","/*\r\n * @Description:\r\n * @Author: huxianc\r\n * @Date: 2020-12-24 15:11:37\r\n * @LastEditors: huxianc\r\n * @LastEditTime: 2021-01-22 14:14:00\r\n */\r\n\r\nimport axios from \"axios\";\r\nimport { ElMessage } from \"element-plus\";\r\nimport { baseUrl, alarmUrl } from \"./urls\";\r\nimport qs from \"qs\";\r\nimport { getToken } from \"./auth\";\r\n\r\nconst service = axios.create({\r\n  baseURL: baseUrl,\r\n  headers: {\r\n    \"Content-Type\": \"application/x-www-form-urlencoded\"\r\n  },\r\n  timeout: 5000\r\n});\r\n\r\nconst jsonList = [\"/alarm/deal\", \"/alarm/dealall\"];\r\n\r\nservice.interceptors.request.use(\r\n  async config => {\r\n    if (config.url !== \"/tbs/dologin\") {\r\n      config.headers.visittoken = await getToken();\r\n    }\r\n\r\n    if (jsonList.includes(config.url as string)) {\r\n      config.baseURL = alarmUrl;\r\n      config.headers[\"Content-Type\"] = \"application/json\";\r\n    } else {\r\n      config.data = qs.stringify(config.data);\r\n    }\r\n\r\n    return config;\r\n  },\r\n  error => {\r\n    console.log(error);\r\n    return Promise.reject(error);\r\n  }\r\n);\r\n\r\nservice.interceptors.response.use(\r\n  response => {\r\n    const res = response.data;\r\n    if (res.result && res.result.success === false) {\r\n      ElMessage({\r\n        message: res.result.msg || \"Error\",\r\n        type: \"error\",\r\n        duration: 5 * 1000\r\n      });\r\n\r\n      return Promise.reject(new Error(res.result.msg || \"Error\"));\r\n    } else {\r\n      return res;\r\n    }\r\n  },\r\n  error => {\r\n    console.log(\"err\" + error);\r\n    ElMessage({\r\n      message: error.message,\r\n      type: \"error\",\r\n      duration: 5 * 1000\r\n    });\r\n    return Promise.reject(error);\r\n  }\r\n);\r\n\r\nexport default service;\r\n","/*\r\n * @Description:定义一些常见的变量\r\n * @Author: huxianc\r\n * @Date: 2020-11-20 16:09:33\r\n * @LastEditors: liufuqiang\r\n * @LastEditTime: 2021-02-20 11:39:13\r\n */\r\nimport { TNavBasic, INavObj } from \"../types/mainNav\";\r\nimport { TWarningListWidth } from \"../types/alarm.d\";\r\n// all type\r\nexport const TYPES = {\r\n  basestation: \"basestation\",\r\n  labelList: \"labelList\",\r\n  person: \"person\",\r\n  camera: \"camera\"\r\n};\r\n\r\nconst List = \"List\";\r\n//  导航信息\r\nexport const NAV_INFO: TNavBasic = {\r\n  camera: {\r\n    name: \"摄像头\",\r\n    code: [TYPES.camera] + List,\r\n    title: \"摄像头列表\"\r\n  },\r\n  basestation: {\r\n    name: \"基站管理\",\r\n    code: [TYPES.basestation] + List,\r\n    title: \"基站列表\"\r\n  },\r\n  labelList: {\r\n    name: \"标签信息\",\r\n    code: [TYPES.labelList] + List,\r\n    title: \"标签列表\"\r\n  },\r\n  person: {\r\n    name: \"人员信息\",\r\n    code: [TYPES.person] + List,\r\n    title: \"人员列表\"\r\n  }\r\n};\r\n\r\nexport const FENCE: INavObj = {\r\n  name: \"电子围栏\",\r\n  code: \"fence\"\r\n};\r\n\r\nexport const ALARM: INavObj = {\r\n  name: \"报警管理\",\r\n  code: \"alarm\"\r\n};\r\n\r\nexport const DATAV: INavObj = {\r\n  name: \"统计中心\",\r\n  code: \"datav\"\r\n};\r\n\r\n// 头部高度\r\nexport const TITLE_HEIGHT = 60;\r\n\r\n// 右键菜单列表\r\nexport const ALL_MENU = {\r\n  [TYPES.basestation]: [\r\n    {\r\n      label: \"查看详情\",\r\n      clickCode: \"showDetails\"\r\n    }\r\n    // {\r\n    //   label: \"编辑\",\r\n    //   clickCode: \"edit\"\r\n    // }\r\n  ],\r\n  [TYPES.labelList]: [\r\n    {\r\n      label: \"查看详情\",\r\n      clickCode: \"showDetails\"\r\n    },\r\n    {\r\n      label: \"轨迹回放\",\r\n      clickCode: \"trackPlayback\"\r\n    },\r\n    {\r\n      label: \"实时跟踪\",\r\n      clickCode: \"follow\"\r\n    }\r\n  ],\r\n  [TYPES.camera]: [\r\n    {\r\n      label: \"查看详情\",\r\n      clickCode: \"showDetails\"\r\n    },\r\n    {\r\n      label: \"查看实时视频\",\r\n      clickCode: \"seeNowVideo\"\r\n    },\r\n    {\r\n      label: \"查看历史视频\",\r\n      clickCode: \"seeHistoryVideo\"\r\n    }\r\n    // {\r\n    //   label: \"编辑\",\r\n    //   clickCode: \"edit\"\r\n    // }\r\n  ]\r\n};\r\n\r\nexport const DEFAULT_COLORS = {\r\n  BLUE: \"rgba(32, 162, 255, 1)\",\r\n  RED: \"rgba(255, 32, 32, 1)\",\r\n  TRANSPARENT: \"rgba(0,0,0,0)\"\r\n};\r\n\r\nexport const bubblePathObj = {\r\n  top:\r\n    \"M140,12a5,5,0,0,0-5-5H76L70,0,64,7H5a5,5,0,0,0-5,5V62a5,5,0,0,0,5,5H135a5,5,0,0,0,5-5Z\",\r\n  bottom:\r\n    \"M0,55a5,5,0,0,0,5,5H64l6,7,6-7h59a5,5,0,0,0,5-5V5a5,5,0,0,0-5-5H5A5,5,0,0,0,0,5Z\",\r\n  left:\r\n    \"M146,55a5,5,0,0,1-5,5H11a5,5,0,0,1-5-5V36L0,30l6-6V5a5,5,0,0,1,5-5H141a5,5,0,0,1,5,5Z\",\r\n  right:\r\n    \"M0,5A5,5,0,0,1,5,0H135a5,5,0,0,1,5,5V24l6,6-6,6V55a5,5,0,0,1-5,5H5a5,5,0,0,1-5-5Z\"\r\n};\r\n\r\nexport const areaRules = [\r\n  \"禁止进入\",\r\n  \"禁止外出\",\r\n  \"聚集报警\",\r\n  \"允许进入\",\r\n  \"允许外出\",\r\n  \"进入且限制停留时长\",\r\n  \"外出且限制停留时长\"\r\n];\r\n\r\nexport const areaRulesOption = areaRules.map((item, index) => ({\r\n  label: item,\r\n  value: String(index + 1)\r\n}));\r\n\r\nexport const formateRuleType = (type: string | number) => {\r\n  type = String(type);\r\n  const index = areaRulesOption.findIndex(item => item.value === type);\r\n  return areaRulesOption[index].label;\r\n};\r\n\r\n// 背景图宽高\r\nexport const bgImageConfig = {\r\n  width: 6000,\r\n  height: 3000\r\n};\r\n\r\n// 绘制自定义区域 - 电子围栏 颜色 宽度\r\nexport const areaColorConfig = {\r\n  stroke: \"red\",\r\n  fill: \"rgba(0,255,0,0.1)\",\r\n  strokeWidth: 3,\r\n  // https://konvajs.org/docs/performance/All_Performance_Tips.html 12\r\n  perfectDrawEnabled: false\r\n};\r\n\r\nexport const YMD = \"YYYY-MM-DD\";\r\nexport const Hms = \"HH:mm:ss\";\r\nexport const timeFormateStr = YMD + \" \" + Hms;\r\n\r\nexport const warningListWidth: TWarningListWidth = \"-350px\";\r\n\r\n/**\r\n * @description:\r\n * @param {string} type\r\n * @return {*}\r\n */\r\nexport const getFormTitle = (type: string) => {\r\n  const title = {\r\n    [TYPES.camera]: \"摄像头\",\r\n    [TYPES.basestation]: \"基站\",\r\n    [TYPES.labelList]: \"标签\",\r\n    [TYPES.person]: \"人员\"\r\n  };\r\n  return title[type];\r\n};\r\n// 报警处理类型列表\r\nexport const handleTypeList = [\r\n  { id: 1, content: \"正常报警\" },\r\n  { id: 2, content: \"测试报警\" },\r\n  { id: 3, content: \"误报警\" }\r\n];\r\n// 报警处理结果模板\r\nexport const handleExample = [\r\n  { id: 1, content: \"正常报警，已处理完成！\" },\r\n  { id: 2, content: \"测试报警，已处理完成！\" },\r\n  { id: 3, content: \"误报警，已处理完成！\" }\r\n];\r\n","export * from \"-!../../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./handle.vue?vue&type=style&index=0&id=144529ed&lang=scss&scoped=true\"","export * from \"-!../../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./mapChoosen.vue?vue&type=style&index=0&id=3f9cbe41&lang=scss&scoped=true\"","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./index.vue?vue&type=style&index=0&id=1a742b00&lang=scss&scoped=true\"","export * from \"-!../../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./monitorList.vue?vue&type=style&index=0&id=90514850&lang=scss\"","/*\r\n * @Description:\r\n * @Author: huxianc\r\n * @Date: 2021-01-19 15:14:46\r\n * @LastEditors: liufuqiang\r\n * @LastEditTime: 2021-02-02 14:12:53\r\n */\r\n\r\nimport { IBuildItem, IMapData } from \"./../views/Home/content/types/index.d\";\r\nimport { IWsItem } from \"@/types/login\";\r\nimport { IDeviceItem } from \"@/views/Home/content/types/index\";\r\nimport Cookies from \"js-cookie\";\r\nimport { Router } from \"vue-router\";\r\n\r\nconst TokenKey = \"hd-water-key\";\r\n\r\nexport function getToken() {\r\n  return Cookies.get(TokenKey);\r\n}\r\n\r\nexport function setToken(token: string) {\r\n  return Cookies.set(TokenKey, token);\r\n}\r\n\r\nexport function removeToken() {\r\n  return Cookies.remove(TokenKey);\r\n}\r\n\r\n// 账号名称 eg:驾驶仓指挥室\r\nconst UserName = \"username\";\r\n\r\nexport function setUsername(username: string) {\r\n  return localStorage.setItem(UserName, username);\r\n}\r\n\r\nexport function getUsername() {\r\n  return localStorage.getItem(UserName) || \"\";\r\n}\r\n\r\nexport function removeUsername() {\r\n  return localStorage.removeItem(UserName);\r\n}\r\n\r\n// 账号 eg:zscb\r\nconst UserAccount = \"useraccount\";\r\nexport function setUserAccount(account: string) {\r\n  return localStorage.setItem(UserAccount, account);\r\n}\r\n\r\nexport function getUserAccount() {\r\n  return localStorage.getItem(UserAccount) || \"\";\r\n}\r\n\r\nexport function removeUserAccount() {\r\n  return localStorage.removeItem(UserAccount);\r\n}\r\n\r\n// 当前账号所拥有的建筑编号的起始编号，后续可能会用\r\n// eg:zscb\r\nconst BNum = \"bnum\";\r\nexport function setBNum(bnum: string) {\r\n  return localStorage.setItem(BNum, bnum);\r\n}\r\n\r\nexport function getBNum() {\r\n  return localStorage.getItem(BNum) || \"\";\r\n}\r\n\r\nexport function removeBNum() {\r\n  return localStorage.removeItem(BNum);\r\n}\r\n\r\nconst wsArr = \"serveritem\";\r\n\r\nexport function setWsArr(ws: IWsItem[]) {\r\n  return localStorage.setItem(wsArr, JSON.stringify(ws));\r\n}\r\n\r\nexport function getWsArr() {\r\n  return (JSON.parse(localStorage.getItem(wsArr) as string) || []) as IWsItem[];\r\n}\r\n\r\nexport function removeWsArr() {\r\n  return localStorage.removeItem(wsArr);\r\n}\r\n\r\n// 首页场景编号\r\nconst HomeSNum = \"homesnum\";\r\nexport function setHomeSNum(homesnum: string) {\r\n  return localStorage.setItem(HomeSNum, homesnum);\r\n}\r\n\r\nexport function getHomeSNum() {\r\n  return localStorage.getItem(HomeSNum) || \"\";\r\n}\r\n\r\nexport function removeHomeSNum() {\r\n  return localStorage.removeItem(HomeSNum);\r\n}\r\n\r\n// 初始加载场景编号\r\nconst LoadSNum = \"loadsnum\";\r\nexport function setLoadSNum(loadsnum: string) {\r\n  return localStorage.setItem(LoadSNum, loadsnum);\r\n}\r\n\r\nexport function getLoadSNum() {\r\n  return localStorage.getItem(LoadSNum) || \"\";\r\n}\r\n\r\nexport function removeLoadSNum() {\r\n  return localStorage.removeItem(LoadSNum);\r\n}\r\n\r\nconst deviceAll = \"deviceAll\";\r\n// 保存所有设备信息\r\nexport function setAllDevice(deviceall: IDeviceItem[]) {\r\n  return localStorage.setItem(deviceAll, JSON.stringify(deviceall));\r\n}\r\n// 获取所有设备信息\r\nexport function getAllDevice() {\r\n  return (JSON.parse(localStorage.getItem(deviceAll) as string) ||\r\n    []) as IDeviceItem[];\r\n}\r\n\r\nconst sceneAll = \"sceneAll\";\r\n// 保存所有场景信息\r\nexport function setAllScene(sceneall: any) {\r\n  return localStorage.setItem(sceneAll, JSON.stringify(sceneall));\r\n}\r\n/**\r\n * @description 根据场景编号获取场景名称\r\n * @param snum 场景编号\r\n * @return map 当前场景名称\r\n */\r\nexport function getMapByNum(snum: string) {\r\n  // 从localStorage取所有场景信息\r\n  const sceneAllStr = localStorage.getItem(\"sceneAll\") as string;\r\n  const sceneAll: [] = JSON.parse(sceneAllStr);\r\n  const map = sceneAll[snum] ? sceneAll[snum] : \"\";\r\n  return map;\r\n}\r\n\r\nconst buildingAll = \"buildingAll\";\r\n// 保存所有建筑信息\r\nexport function setAllBuild(buildingall: IBuildItem[]) {\r\n  return localStorage.setItem(buildingAll, JSON.stringify(buildingall));\r\n}\r\n\r\n// 根据建筑编号获取建筑信息\r\nexport function getBuildByNum(dnum: string) {\r\n  // 从localStorage取所有建筑信息\r\n  const buildAllStr = localStorage.getItem(buildingAll) as string;\r\n  const buildAll: [] = JSON.parse(buildAllStr);\r\n  const map = buildAll[dnum] ? buildAll[dnum] : \"\";\r\n  return map;\r\n}\r\n\r\n/**\r\n * @description: 推出登录\r\n * @param {Router} router\r\n * @return {*}\r\n */\r\nexport async function logout(router: Router) {\r\n  await removeToken();\r\n  localStorage.clear();\r\n  router.push(\"/login\");\r\n}\r\n","/*\r\n * @Description:\r\n * @Author: huxianc\r\n * @Date: 2021-01-20 10:39:06\r\n * @LastEditors: huxianc\r\n * @LastEditTime: 2021-01-25 15:37:43\r\n */\r\n\r\nimport http from \"@/utils/http3\";\r\n\r\nexport default {\r\n  //  获取所有场景数据\r\n  getAllScene(data: any) {\r\n    return http({\r\n      url: \"/tbs/getscene\",\r\n      method: \"post\",\r\n      data\r\n    });\r\n  },\r\n  //  获取所有设备数据\r\n  getAllDevice(data: any) {\r\n    return http({\r\n      url: \"/tbs/getdevice\",\r\n      method: \"post\",\r\n      data\r\n    });\r\n  },\r\n  // 获取所有图层数据\r\n  getAllLayer(data: any) {\r\n    return http({\r\n      url: \"/tbs/getlayer\",\r\n      method: \"post\",\r\n      data\r\n    });\r\n  },\r\n  // 获取所有建筑数据\r\n  getAllBuild(data: any) {\r\n    return http({\r\n      url: \"/tbs/getbuild\",\r\n      method: \"post\",\r\n      data\r\n    });\r\n  },\r\n  // 获取所有自定义数据 - 电子围栏\r\n  getAllHArea(data: any) {\r\n    return http({\r\n      url: \"/tbs/getharea\",\r\n      method: \"post\",\r\n      data\r\n    });\r\n  },\r\n  // 新增 | 修改自定义数据 - 电子围栏\r\n  saveHArea(data: any) {\r\n    return http({\r\n      url: \"/tbs/saveharea\",\r\n      method: \"post\",\r\n      data\r\n    });\r\n  },\r\n  // 获取某自定义区域设置过的设备集合\r\n  getOnehAreaSetDeivce(data: any) {\r\n    return http({\r\n      url: \"/tbs/getonehareasetdeivce\",\r\n      method: \"post\",\r\n      data\r\n    });\r\n  },\r\n  // 删除某自定义区域\r\n  delHArea(data: any) {\r\n    return http({\r\n      url: \"/tbs/delharea\",\r\n      method: \"post\",\r\n      data\r\n    });\r\n  },\r\n  // 新增或修改某场景某个自定义区域中的某条规则\r\n  saveRule(data: any) {\r\n    return http({\r\n      url: \"/tbs/saverule\",\r\n      method: \"post\",\r\n      data\r\n    });\r\n  },\r\n  // 获取某场景某个自定义区域设置过的所有规则\r\n  getRule(data: any) {\r\n    return http({\r\n      url: \"/tbs/getrule\",\r\n      method: \"post\",\r\n      data\r\n    });\r\n  },\r\n  // 删除某场景某个自定义区域中的某条规则\r\n  delRule(data: any) {\r\n    return http({\r\n      url: \"/tbs/delrule\",\r\n      method: \"post\",\r\n      data\r\n    });\r\n  }\r\n};\r\n","export * from \"-!../../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./formContent.vue?vue&type=style&index=0&id=7c7ecdc0&lang=scss&scope=true\"","export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./index.vue?vue&type=style&index=0&id=c9dd7a0e&lang=scss&scoped=true\"","<!--\r\n * @Description: \r\n * @Author: huxianc\r\n * @Date: 2020-12-24 14:40:44\r\n * @LastEditors: huxianc\r\n * @LastEditTime: 2021-02-01 15:10:27\r\n-->\r\n\r\n<template>\r\n  <header>\r\n    <div class=\"header\">\r\n      <div class=\"side left\">\r\n        <i class=\"el-icon-time\" />\r\n        <span class=\"time\">{{ now }}</span>\r\n      </div>\r\n      <div class=\"side center\">人员定位及落水报警系统</div>\r\n      <div class=\"right\">\r\n        <header-bar />\r\n      </div>\r\n    </div>\r\n  </header>\r\n</template>\r\n\r\n<script lang=\"ts\">\r\nimport { defineComponent, onMounted, onUnmounted, shallowRef } from \"vue\";\r\nimport dayjs from \"dayjs\";\r\nimport HeaderBar from \"./headerBar.vue\";\r\nimport { timeFormateStr } from \"../content/constVariables\";\r\n\r\nexport default defineComponent({\r\n  name: \"Head\",\r\n  components: {\r\n    HeaderBar\r\n  },\r\n  setup() {\r\n    const now = shallowRef<string>(dayjs().format(timeFormateStr));\r\n    let timer: null | number = null;\r\n    onMounted(() => {\r\n      timer = setInterval(() => {\r\n        now.value = dayjs().format(timeFormateStr);\r\n      });\r\n    });\r\n    onUnmounted(() => {\r\n      timer && clearInterval(timer);\r\n    });\r\n    return {\r\n      now\r\n    };\r\n  }\r\n});\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\nheader {\r\n  position: absolute;\r\n  width: 100%;\r\n  height: 80px;\r\n  z-index: 1500;\r\n  font-size: 18px;\r\n  color: #fff;\r\n  background: url(\"/images/title.png\") repeat center center/100% 100%;\r\n  user-select: none;\r\n  .header {\r\n    position: relative;\r\n    height: 60px;\r\n    overflow: hidden;\r\n  }\r\n}\r\n.side {\r\n  position: absolute;\r\n  top: 50%;\r\n  transform: translateY(-50%);\r\n\r\n  &.left {\r\n    color: #3dd1ff;\r\n    left: 5%;\r\n    font-size: 24px;\r\n    display: flex;\r\n    align-items: center;\r\n    .time {\r\n      margin-left: 5px;\r\n      letter-spacing: 1px;\r\n      color: #43b0de;\r\n      font-size: 16px;\r\n    }\r\n  }\r\n\r\n  &.center {\r\n    left: 50%;\r\n    bottom: 0;\r\n    transform: translateX(-50%);\r\n    font-size: 24px;\r\n    font-weight: bold;\r\n    letter-spacing: 2px;\r\n  }\r\n}\r\n.right {\r\n  height: 100%;\r\n}\r\n</style>\r\n","<!--\r\n * @Description:\r\n * @Author: huxianc\r\n * @Date: 2020-11-23 11:49:13\r\n * @LastEditors: huxianc\r\n * @LastEditTime: 2021-01-29 15:12:10\r\n-->\r\n<template>\r\n  <div class=\"right-menu\">\r\n    <!-- <header-search id=\"header-search\" class=\"right-menu-item\" /> -->\r\n\r\n    <screenfull id=\"screenfull\" class=\"right-menu-item hover-effect\" />\r\n\r\n    <el-dropdown\r\n      class=\"avatar-container right-menu-item hover-effect\"\r\n      trigger=\"click\"\r\n    >\r\n      <div class=\"avatar-wrapper\">\r\n        <i class=\"el-icon-user-solid user-avatar\" />\r\n        <i class=\"el-icon-caret-bottom\" />\r\n      </div>\r\n      <template #dropdown>\r\n        <el-dropdown-menu>\r\n          <router-link to=\"/3d\">\r\n            <el-dropdown-item>3d</el-dropdown-item>\r\n          </router-link>\r\n\r\n          <el-dropdown-item divided @click=\"logOut\">\r\n            <span style=\"display: block\">注销</span>\r\n          </el-dropdown-item>\r\n        </el-dropdown-menu>\r\n      </template>\r\n    </el-dropdown>\r\n  </div>\r\n</template>\r\n\r\n<script lang=\"ts\">\r\nimport Screenfull from \"@/components/Screenfull/index.vue\";\r\nimport { logout } from \"@/utils/auth\";\r\nimport { defineComponent } from \"vue\";\r\nimport { useRouter } from \"vue-router\";\r\n\r\nexport default defineComponent({\r\n  name: \"HeaderBar\",\r\n  components: {\r\n    Screenfull\r\n  },\r\n  setup() {\r\n    const router = useRouter();\r\n    const logOut = () => logout(router);\r\n\r\n    return {\r\n      logOut\r\n    };\r\n  }\r\n});\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n.right-menu {\r\n  float: right;\r\n  height: 100%;\r\n  margin-right: 20px;\r\n  line-height: 60px;\r\n\r\n  &:focus {\r\n    outline: none;\r\n  }\r\n\r\n  .right-menu-item {\r\n    display: inline-block;\r\n    padding: 0 8px;\r\n    height: 100%;\r\n    font-size: 18px;\r\n    color: #fff;\r\n    vertical-align: text-bottom;\r\n\r\n    &.hover-effect {\r\n      cursor: pointer;\r\n      transition: background 0.3s;\r\n\r\n      &:hover {\r\n        background: rgba(0, 0, 0, 0.025);\r\n      }\r\n    }\r\n  }\r\n}\r\n</style>\r\n\r\n<style lang=\"scss\">\r\n.avatar-container {\r\n  margin-right: 30px;\r\n  height: 60px;\r\n  line-height: 60px;\r\n  transform: translateY(-18px);\r\n  text-align: center;\r\n  padding: 0 8px;\r\n\r\n  .avatar-wrapper {\r\n    display: flex;\r\n    align-items: center;\r\n    height: 100%;\r\n    position: relative;\r\n\r\n    .user-avatar {\r\n      cursor: pointer;\r\n      font-size: 20px;\r\n    }\r\n\r\n    .el-icon-caret-bottom {\r\n      cursor: pointer;\r\n      position: absolute;\r\n      right: -20px;\r\n      bottom: 20px;\r\n      font-size: 12px;\r\n    }\r\n  }\r\n  &.el-dropdown {\r\n    color: #fff;\r\n  }\r\n}\r\n</style>\r\n","<!--\r\n * @Description: \r\n * @Author: huxianc\r\n * @Date: 2021-01-04 09:44:34\r\n * @LastEditors: huxianc\r\n * @LastEditTime: 2021-02-03 14:23:10\r\n-->\r\n<template>\r\n  <div>\r\n    <svg-icon\r\n      @click=\"click\"\r\n      :data=\"isFullscreen ? exitFullscreen : fullscreen\"\r\n    />\r\n  </div>\r\n</template>\r\n\r\n<script lang=\"ts\">\r\nimport { onMounted, onUnmounted, shallowRef, defineComponent } from \"vue\";\r\nimport screenfull from \"screenfull\";\r\nimport fullscreen from \"@/icons/svg/fullscreen.svg\";\r\nimport exitFullscreen from \"@/icons/svg/exit-fullscreen.svg\";\r\nimport { ElMessage } from \"element-plus\";\r\n\r\nexport default defineComponent({\r\n  name: \"screenfull\",\r\n  setup() {\r\n    const isFullscreen = shallowRef<boolean>(false);\r\n    const change = () => {\r\n      isFullscreen.value = (screenfull as any).isFullscreen;\r\n    };\r\n    const init = () => {\r\n      if (screenfull.isEnabled) {\r\n        screenfull.on(\"change\", change);\r\n      }\r\n    };\r\n\r\n    const destroy = () => {\r\n      if (screenfull.isEnabled) {\r\n        screenfull.off(\"change\", change);\r\n      }\r\n    };\r\n\r\n    const click = () => {\r\n      if (!screenfull.isEnabled) {\r\n        ElMessage.warning(\"您的浏览器不支持全屏\");\r\n        return false;\r\n      }\r\n      screenfull.toggle();\r\n    };\r\n\r\n    onMounted(() => {\r\n      init();\r\n    });\r\n\r\n    onUnmounted(() => {\r\n      destroy();\r\n    });\r\n\r\n    return {\r\n      isFullscreen,\r\n      click,\r\n      fullscreen,\r\n      exitFullscreen\r\n    };\r\n  }\r\n});\r\n</script>\r\n","\r\nimport { onMounted, onUnmounted, shallowRef, defineComponent } from \"vue\";\r\nimport screenfull from \"screenfull\";\r\nimport fullscreen from \"@/icons/svg/fullscreen.svg\";\r\nimport exitFullscreen from \"@/icons/svg/exit-fullscreen.svg\";\r\nimport { ElMessage } from \"element-plus\";\r\n\r\nexport default defineComponent({\r\n  name: \"screenfull\",\r\n  setup() {\r\n    const isFullscreen = shallowRef<boolean>(false);\r\n    const change = () => {\r\n      isFullscreen.value = (screenfull as any).isFullscreen;\r\n    };\r\n    const init = () => {\r\n      if (screenfull.isEnabled) {\r\n        screenfull.on(\"change\", change);\r\n      }\r\n    };\r\n\r\n    const destroy = () => {\r\n      if (screenfull.isEnabled) {\r\n        screenfull.off(\"change\", change);\r\n      }\r\n    };\r\n\r\n    const click = () => {\r\n      if (!screenfull.isEnabled) {\r\n        ElMessage.warning(\"您的浏览器不支持全屏\");\r\n        return false;\r\n      }\r\n      screenfull.toggle();\r\n    };\r\n\r\n    onMounted(() => {\r\n      init();\r\n    });\r\n\r\n    onUnmounted(() => {\r\n      destroy();\r\n    });\r\n\r\n    return {\r\n      isFullscreen,\r\n      click,\r\n      fullscreen,\r\n      exitFullscreen\r\n    };\r\n  }\r\n});\r\n","import { render } from \"./index.vue?vue&type=template&id=30235f0a\"\nimport script from \"./index.vue?vue&type=script&lang=ts\"\nexport * from \"./index.vue?vue&type=script&lang=ts\"\nscript.render = render\n\nexport default script","\r\nimport Screenfull from \"@/components/Screenfull/index.vue\";\r\nimport { logout } from \"@/utils/auth\";\r\nimport { defineComponent } from \"vue\";\r\nimport { useRouter } from \"vue-router\";\r\n\r\nexport default defineComponent({\r\n  name: \"HeaderBar\",\r\n  components: {\r\n    Screenfull\r\n  },\r\n  setup() {\r\n    const router = useRouter();\r\n    const logOut = () => logout(router);\r\n\r\n    return {\r\n      logOut\r\n    };\r\n  }\r\n});\r\n","import { render } from \"./headerBar.vue?vue&type=template&id=6f2b119c&scoped=true\"\nimport script from \"./headerBar.vue?vue&type=script&lang=ts\"\nexport * from \"./headerBar.vue?vue&type=script&lang=ts\"\n\nimport \"./headerBar.vue?vue&type=style&index=0&id=6f2b119c&lang=scss&scoped=true\"\nimport \"./headerBar.vue?vue&type=style&index=1&id=6f2b119c&lang=scss\"\nscript.render = render\nscript.__scopeId = \"data-v-6f2b119c\"\n\nexport default script","\r\nimport { defineComponent, onMounted, onUnmounted, shallowRef } from \"vue\";\r\nimport dayjs from \"dayjs\";\r\nimport HeaderBar from \"./headerBar.vue\";\r\nimport { timeFormateStr } from \"../content/constVariables\";\r\n\r\nexport default defineComponent({\r\n  name: \"Head\",\r\n  components: {\r\n    HeaderBar\r\n  },\r\n  setup() {\r\n    const now = shallowRef<string>(dayjs().format(timeFormateStr));\r\n    let timer: null | number = null;\r\n    onMounted(() => {\r\n      timer = setInterval(() => {\r\n        now.value = dayjs().format(timeFormateStr);\r\n      });\r\n    });\r\n    onUnmounted(() => {\r\n      timer && clearInterval(timer);\r\n    });\r\n    return {\r\n      now\r\n    };\r\n  }\r\n});\r\n","import { render } from \"./index.vue?vue&type=template&id=c9dd7a0e&scoped=true\"\nimport script from \"./index.vue?vue&type=script&lang=ts\"\nexport * from \"./index.vue?vue&type=script&lang=ts\"\n\nimport \"./index.vue?vue&type=style&index=0&id=c9dd7a0e&lang=scss&scoped=true\"\nscript.render = render\nscript.__scopeId = \"data-v-c9dd7a0e\"\n\nexport default script","export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./headerBar.vue?vue&type=style&index=0&id=6f2b119c&lang=scss&scoped=true\"","export * from \"-!../../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./waterAlarm.vue?vue&type=style&index=0&id=297d393a&lang=scss&scoped=true\"","export * from \"-!../../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./mainNav.vue?vue&type=style&index=0&id=80ca9b2a&lang=scss&scoped=true\"","export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./headerBar.vue?vue&type=style&index=1&id=6f2b119c&lang=scss\"","export * from \"-!../../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./playbackControl.vue?vue&type=style&index=0&id=7e848c89&lang=scss&scoped=true\"","\n            const data = {\"name\":\"fullscreen\",\"data\":{\"width\":\"128\",\"height\":\"128\",\"viewBox\":\"0 0 128 128\",\"data\":\"<path pid=\\\"0\\\" d=\\\"M38.47 52L52 38.462l-23.648-23.67L43.209 0H.035L0 43.137l14.757-14.865L38.47 52zm74.773 47.726L89.526 76 76 89.536l23.648 23.672L84.795 128h43.174L128 84.863l-14.757 14.863zM89.538 52l23.668-23.648L128 43.207V.038L84.866 0 99.73 14.76 76 38.472 89.538 52zM38.46 76L14.792 99.651 0 84.794v43.173l43.137.033-14.865-14.757L52 89.53 38.46 76z\\\"/>\"}}\n        \n                module.exports = data\n                ","/*\r\n * @Description:\r\n * @Author: huxianc\r\n * @Date: 2020-12-24 15:15:41\r\n * @LastEditors: liufuqiang\r\n * @LastEditTime: 2021-02-19 16:21:36\r\n */\r\n\r\nconst ip = \"http://10.1.200.223:\";\r\nconst alarmIp = \"http://10.1.200.27:\";\r\n// const ip = \"http://192.168.1.248:\";\r\n// const ip = \"http://localhost:\"\r\n\r\nconst locateUrl = ip + \"39000/\";\r\nconst alarm = alarmIp + \"9529/\";\r\n\r\nexport const baseUrl = locateUrl + \"api\";\r\nexport const alarmUrl = alarm + \"api\";\r\nexport const imgUrl = ip + \"39001/\";\r\nexport const httpFlvServer = \"ws://10.1.200.246:8888/rtsp\"; //摄像头推流 lfq\r\n","export * from \"-!../../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!./index.scss?vue&type=style&index=0&id=3bab4490&lang=scss&scoped=true\"","export * from \"-!../../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./historyMonitor.vue?vue&type=style&index=0&id=64dc0cc8&lang=scss&scoped=true\"","export * from \"-!../../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./contextmenuContent.vue?vue&type=style&index=0&id=856d70f6&lang=scss&scoped=true\"","<!--\r\n * @Description: \r\n * @Author: huxianc\r\n * @Date: 2020-12-24 14:37:03\r\n * @LastEditors: huxianc\r\n * @LastEditTime: 2021-02-01 14:30:41\r\n-->\r\n<template>\r\n  <div class=\"home-container\">\r\n    <headerComponent />\r\n    <mainComponent />\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport headerComponent from \"./Head/index.vue\";\r\nimport mainComponent from \"./content/index.vue\";\r\nexport default {\r\n  components: {\r\n    headerComponent,\r\n    mainComponent\r\n  }\r\n};\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n.home-container {\r\n  min-height: 100vh;\r\n  display: flex;\r\n  flex-direction: column;\r\n  background: rgba(30, 42, 66, 1);\r\n}\r\n</style>\r\n","<!--\r\n * @Description: \r\n * @Author: huxianc\r\n * @Date: 2020-12-24 14:56:24\r\n * @LastEditors: huxianc\r\n * @LastEditTime: 2021-02-23 10:06:15\r\n-->\r\n<template>\r\n  <main class=\"home-wrapper\">\r\n    <div id=\"container\"></div>\r\n\r\n    <!-- 底部导航 start -->\r\n    <el-collapse-transition>\r\n      <main-nav\r\n        v-show=\"visibleObj.nav && showMenu\"\r\n        ref=\"mainNavRef\"\r\n        @navClick=\"navClick\"\r\n      />\r\n    </el-collapse-transition>\r\n    <!-- 底部导航 end -->\r\n\r\n    <!-- 右侧抽屉 start -->\r\n    <el-drawer\r\n      v-model=\"drawerInfo.showList\"\r\n      direction=\"rtl\"\r\n      size=\"50%\"\r\n      :with-header=\"false\"\r\n      @close=\"resetNavIndex\"\r\n      append-to-body\r\n    >\r\n      <div class=\"drawer-container\">\r\n        <!-- drawer - title -->\r\n        <div class=\"drawer-header\">\r\n          <div class=\"drawer-title\">{{ drawerInfo.drawerTitle }}</div>\r\n          <i\r\n            class=\"el-icon-close close-btn\"\r\n            @click=\"drawerInfo.showList = false\"\r\n          />\r\n        </div>\r\n        <!-- drawer content -->\r\n        <el-tabs\r\n          v-model=\"drawerInfo.activeName\"\r\n          type=\"card\"\r\n          @tab-click=\"equipSwitchClick\"\r\n        >\r\n          <el-tab-pane label=\"摄像头\" :name=\"types.camera\">\r\n            <!-- 添加v-if判断 在tabs切换的时候会发起api请求 -->\r\n            <camera-list\r\n              v-if=\"drawerInfo.activeName === types.camera\"\r\n              :form-data=\"detailsForm.formData\"\r\n              @seeNowVideo=\"seeNowVideo\"\r\n              @seeHistoryVideo=\"seeHistoryVideo\"\r\n              @showEquipDetails=\"showEquipDetails\"\r\n            />\r\n          </el-tab-pane>\r\n          <el-tab-pane label=\"基站\" :name=\"types.basestation\">\r\n            <basestation-list\r\n              v-if=\"drawerInfo.activeName === types.basestation\"\r\n              :form-data=\"detailsForm.formData\"\r\n              @showEquipDetails=\"showEquipDetails\"\r\n            />\r\n          </el-tab-pane>\r\n          <el-tab-pane label=\"标签\" :name=\"types.labelList\">\r\n            <label-list\r\n              v-if=\"drawerInfo.activeName === types.labelList\"\r\n              :form-data=\"detailsForm.formData\"\r\n              :wsAllLabel=\"person.all\"\r\n              @showEquipDetails=\"showEquipDetails\"\r\n            />\r\n          </el-tab-pane>\r\n          <el-tab-pane label=\"人员\" :name=\"types.person\">\r\n            <person-list\r\n              v-if=\"drawerInfo.activeName === types.person\"\r\n              :form-data=\"detailsForm.formData\"\r\n              :wsAllLabel=\"person.all\"\r\n              @showEquipDetails=\"showEquipDetails\"\r\n            />\r\n          </el-tab-pane>\r\n        </el-tabs>\r\n      </div>\r\n    </el-drawer>\r\n    <!-- 右侧抽屉 end -->\r\n\r\n    <!-- 电子围栏table dialog start -->\r\n    <el-dialog\r\n      title=\"电子围栏\"\r\n      v-model=\"fenceListInfo.tableVisible\"\r\n      width=\"50%\"\r\n    >\r\n      <div style=\"margin-bottom: 10px\">\r\n        <el-button type=\"primary\" @click=\"handleAddFence\">新增</el-button>\r\n        <!-- https://vue3js.cn/docs/zh/guide/conditional.html#v-show -->\r\n        <!-- 取决于页面是否频繁切换 -->\r\n        <template v-if=\"fenceListInfo.tableData.length > 0\">\r\n          <el-button type=\"primary\" @click=\"toggleAllFenceVisible(true)\"\r\n            >全部显示</el-button\r\n          >\r\n          <el-button type=\"primary\" @click=\"toggleAllFenceVisible(false)\"\r\n            >全部隐藏</el-button\r\n          >\r\n        </template>\r\n      </div>\r\n      <hd-table\r\n        v-loading=\"fenceListInfo.loading\"\r\n        :data=\"fenceListInfo.tableData\"\r\n      >\r\n        <hd-table-column prop=\"areaname\" label=\"围栏名称\" />\r\n        <el-table-column label=\"显示\" width align=\"center\">\r\n          <template #default=\"{ row }\">\r\n            <el-switch\r\n              v-model=\"row.show\"\r\n              @change=\"changeAreaVisible($event, row.areaids)\"\r\n            />\r\n          </template>\r\n        </el-table-column>\r\n        <el-table-column label=\"操作\" width=\"250\" align=\"center\">\r\n          <template #default=\"{ row }\">\r\n            <el-button type=\"primary\" size=\"mini\" @click=\"handleEditFence(row)\"\r\n              >编辑</el-button\r\n            >\r\n            <el-button type=\"primary\" size=\"mini\" @click=\"handleSeeRules(row)\"\r\n              >规则</el-button\r\n            >\r\n            <el-popconfirm\r\n              :title=\"`确定删除电子围栏 ${row.areaname} ？`\"\r\n              @confirm=\"handleDelFence(row)\"\r\n              effect=\"dark\"\r\n            >\r\n              <template #reference>\r\n                <el-button type=\"danger\" size=\"mini\" style=\"margin-left: 10px\"\r\n                  >删除</el-button\r\n                >\r\n              </template>\r\n            </el-popconfirm>\r\n          </template>\r\n        </el-table-column>\r\n      </hd-table>\r\n      <el-pagination\r\n        v-show=\"fenceListInfo.total\"\r\n        v-model:current-page=\"fenceListInfo.params.curpage\"\r\n        layout=\"total, prev, pager, next, jumper\"\r\n        :total=\"fenceListInfo.total\"\r\n        background\r\n        @current-change=\"fenceCurrentChange\"\r\n      />\r\n    </el-dialog>\r\n    <!-- 电子围栏table dialog end -->\r\n\r\n    <!-- 电子围栏 明细 dialog start -->\r\n    <hd-dialog\r\n      :title=\"`${fenceInfo.dialogType === 0 ? '新增' : '编辑'}电子围栏`\"\r\n      v-model=\"fenceInfo.visible\"\r\n      width=\"800px\"\r\n      showFooterButtons\r\n      :close-on-click-modal=\"false\"\r\n      :confirmButtonDisabled=\"!drawFenceInfo.clonePoints.length\"\r\n      @confirm=\"handleSubmitFence\"\r\n      @cancel=\"fenceInfo.visible = false\"\r\n    >\r\n      <el-form\r\n        ref=\"fenceInfoFormRef\"\r\n        :model=\"fenceInfo.form\"\r\n        :rules=\"fenceInfo.rules\"\r\n        label-width=\"120px\"\r\n      >\r\n        <el-row :gutter=\"0\">\r\n          <el-col :span=\"12\" :offset=\"0\">\r\n            <el-form-item label=\"电子围栏名称：\" prop=\"name\">\r\n              <el-input\r\n                v-model.trim=\"fenceInfo.form.name\"\r\n                clearable\r\n                style=\"max-width: 200px\"\r\n                placeholder=\"请输入电子围栏名称\"\r\n              />\r\n            </el-form-item>\r\n          </el-col>\r\n        </el-row>\r\n\r\n        <el-form-item label=\"选择关联设备：\">\r\n          <el-transfer\r\n            v-model=\"fenceInfo.form.chosenCamera\"\r\n            filterable\r\n            filter-placeholder=\"请输入名称\"\r\n            :data=\"fenceInfo.allMapCamera\"\r\n            :titles=\"['可选择设备', '已选择设备']\"\r\n            :props=\"transferProps\"\r\n          >\r\n            <template #default=\"{ option }\">\r\n              <span>{{ option.dname }}</span>\r\n            </template>\r\n          </el-transfer>\r\n        </el-form-item>\r\n\r\n        <el-form-item label=\"绘制地图：\" required>\r\n          <el-button type=\"success\" size=\"mini\" @click=\"handleFenceDraw\">\r\n            {{\r\n              `${drawFenceInfo.clonePoints.length === 0 ? \"开始\" : \"重新\"}绘制`\r\n            }}\r\n          </el-button>\r\n        </el-form-item>\r\n      </el-form>\r\n    </hd-dialog>\r\n    <!-- 电子围栏 明细 dialog end -->\r\n\r\n    <!-- 电子围栏 操作buttons start -->\r\n    <el-collapse-transition>\r\n      <fence-box\r\n        v-if=\"status.isDrawFence\"\r\n        @revoke=\"handleRevokeFence\"\r\n        @redraw=\"handleRedrawFence\"\r\n        @cancel=\"handleCancelDrawFence\"\r\n        @finish=\"handleFinishDrawFence\"\r\n      />\r\n    </el-collapse-transition>\r\n    <!-- 电子围栏 操作buttons end -->\r\n\r\n    <!-- 规则 table start -->\r\n    <hd-dialog title=\"规则列表\" v-model=\"ruleListInfo.visiable\">\r\n      <div style=\"margin-bottom: 10px\">\r\n        <el-button type=\"primary\" @click=\"handleAddRule\">新增</el-button>\r\n      </div>\r\n      <hd-table v-loading=\"ruleListInfo.loading\" :data=\"ruleListInfo.tableData\">\r\n        <hd-table-column label=\"规则类型\" prop=\"labelType\" />\r\n        <hd-table-column label=\"是否每日循环\" prop=\"loop\" />\r\n        <hd-table-column label=\"开始时间\" width align=\"center\" prop=\"stime\" />\r\n        <hd-table-column label=\"结束时间\" width align=\"center\" prop=\"etime\" />\r\n\r\n        <el-table-column label=\"操作\" width=\"210\" align=\"center\">\r\n          <template #default=\"{ row }\">\r\n            <el-button type=\"primary\" size=\"mini\" @click=\"handleEditRule(row)\"\r\n              >编辑</el-button\r\n            >\r\n            <el-popconfirm\r\n              :title=\"`确定删除该规则？`\"\r\n              @confirm=\"handleDelRule(row)\"\r\n              effect=\"dark\"\r\n            >\r\n              <template #reference>\r\n                <el-button type=\"danger\" size=\"mini\" style=\"margin-left: 10px\"\r\n                  >删除</el-button\r\n                >\r\n              </template>\r\n            </el-popconfirm>\r\n          </template>\r\n        </el-table-column>\r\n      </hd-table>\r\n      <el-pagination\r\n        v-show=\"ruleListInfo.total\"\r\n        v-model:current-page=\"ruleListInfo.curpage\"\r\n        layout=\"total, prev, pager, next, jumper\"\r\n        :total=\"ruleListInfo.total\"\r\n        background\r\n        @current-change=\"ruleCurrentChange\"\r\n      />\r\n    </hd-dialog>\r\n    <!-- 规则 table end -->\r\n\r\n    <!-- 规则详情 start -->\r\n    <hd-dialog\r\n      :title=\"(ruleItemDetail.dialogType === 0 ? '新增' : '编辑') + '规则'\"\r\n      v-model=\"ruleItemDetail.visiable\"\r\n      width=\"60%\"\r\n      :close-on-click-modal=\"false\"\r\n      showFooterButtons\r\n      @confirm=\"handleSubmitRule\"\r\n      @cancel=\"ruleItemDetail.visiable = false\"\r\n    >\r\n      <el-form\r\n        ref=\"ruleFormRef\"\r\n        :model=\"ruleItemDetail.form\"\r\n        :rules=\"ruleItemDetailRule\"\r\n        label-width=\"100px\"\r\n      >\r\n        <el-row :gutter=\"20\">\r\n          <el-col :span=\"12\" :offset=\"0\">\r\n            <el-form-item label=\"每天循环：\">\r\n              <el-switch v-model=\"ruleItemDetail.form.isLoop\"> </el-switch>\r\n            </el-form-item>\r\n          </el-col>\r\n\r\n          <el-col :span=\"12\" :offset=\"0\">\r\n            <el-form-item label=\"规则类型：\" prop=\"permitType\">\r\n              <el-select\r\n                v-model=\"ruleItemDetail.form.permitType\"\r\n                placeholder=\"请选择规则类型\"\r\n                clearable\r\n              >\r\n                <el-option\r\n                  v-for=\"item in areaRulesOption\"\r\n                  :key=\"item.value\"\r\n                  :label=\"item.label\"\r\n                  :value=\"item.value\"\r\n                >\r\n                </el-option>\r\n              </el-select>\r\n            </el-form-item>\r\n          </el-col>\r\n        </el-row>\r\n        <el-row\r\n          v-if=\"\r\n            ruleItemDetail.form.permitType === '6' ||\r\n              ruleItemDetail.form.permitType === '7'\r\n          \"\r\n          :gutter=\"20\"\r\n        >\r\n          <!-- 进入且限制停留时长 || 外出且限制停留时长 才显示 -->\r\n          <el-col :span=\"12\" :offset=\"0\">\r\n            <el-form-item label=\"限时时长：\" prop=\"limitedTime\">\r\n              <el-input\r\n                v-model.trim=\"ruleItemDetail.form.limitedTime\"\r\n                placeholder=\"请输入大于0的正整数\"\r\n                clearable\r\n                style=\"max-width: 200px\"\r\n              ></el-input>\r\n            </el-form-item>\r\n          </el-col>\r\n        </el-row>\r\n        <!-- 如果IsLoop=true,这里的值为小时分秒，如果为false则为年月日小时分秒 -->\r\n        <el-row v-if=\"ruleItemDetail.form.isLoop\" :gutter=\"20\">\r\n          <el-col :span=\"12\" :offset=\"0\">\r\n            <el-form-item label=\"开始时间：\" prop=\"startTime\">\r\n              <el-time-picker\r\n                v-model=\"ruleItemDetail.form.startTime\"\r\n                placeholder=\"开始时间\"\r\n                @change=\"timerPickerChange\"\r\n              >\r\n              </el-time-picker>\r\n            </el-form-item>\r\n          </el-col>\r\n          <el-col :span=\"12\" :offset=\"0\">\r\n            <el-form-item label=\"结束时间：\" prop=\"endTime\">\r\n              <el-time-picker\r\n                v-model=\"ruleItemDetail.form.endTime\"\r\n                placeholder=\"结束时间\"\r\n              >\r\n              </el-time-picker>\r\n            </el-form-item>\r\n          </el-col>\r\n        </el-row>\r\n        <el-row v-else :gutter=\"20\">\r\n          <el-col :span=\"12\" :offset=\"0\">\r\n            <el-form-item label=\"开始时间：\" prop=\"startTime\">\r\n              <el-date-picker\r\n                v-model=\"ruleItemDetail.form.startTime\"\r\n                type=\"datetime\"\r\n                placeholder=\"选择开始日期时间\"\r\n                @change=\"ruleItemDetail.form.endTime = ''\"\r\n              >\r\n              </el-date-picker>\r\n            </el-form-item>\r\n          </el-col>\r\n          <el-col :span=\"12\" :offset=\"0\">\r\n            <el-form-item label=\"结束时间：\" prop=\"endTime\">\r\n              <el-date-picker\r\n                v-model=\"ruleItemDetail.form.endTime\"\r\n                type=\"datetime\"\r\n                placeholder=\"选择结束日期时间\"\r\n                :disabled=\"!ruleItemDetail.form.startTime\"\r\n                :disabledDate=\"ruleDisabledDate\"\r\n              >\r\n              </el-date-picker>\r\n            </el-form-item>\r\n          </el-col>\r\n        </el-row>\r\n\r\n        <el-row :gutter=\"0\">\r\n          <el-col :span=\"24\" :offset=\"0\">\r\n            <el-form-item label=\"备注：\">\r\n              <el-input v-model=\"ruleItemDetail.form.memo\" type=\"textarea\" />\r\n            </el-form-item>\r\n          </el-col>\r\n        </el-row>\r\n      </el-form>\r\n    </hd-dialog>\r\n    <!-- 规则详情 end -->\r\n\r\n    <!-- 报警管理table dialog start -->\r\n    <el-dialog\r\n      title=\"报警管理\"\r\n      v-model=\"alarmListInfo.tableVisible\"\r\n      width=\"65%\"\r\n    >\r\n      <el-form :model=\"alarmListInfo.params\" label-width=\"80px\" :inline=\"true\">\r\n        <el-form-item label>\r\n          <el-select\r\n            v-model=\"alarmListInfo.SourceType\"\r\n            placeholder=\"全部类型\"\r\n            style=\"width: 160px\"\r\n            clearable\r\n            filterable\r\n            @change=\"getAlarmListByCondition\"\r\n          >\r\n            <el-option\r\n              v-for=\"item in alarmType\"\r\n              :key=\"item.value\"\r\n              :label=\"item.label\"\r\n              :value=\"item.value\"\r\n            >\r\n            </el-option>\r\n          </el-select>\r\n        </el-form-item>\r\n        <el-form-item label>\r\n          <el-date-picker\r\n            v-model=\"alarmListInfo.timeRange\"\r\n            type=\"datetimerange\"\r\n            range-separator=\"至\"\r\n            start-placeholder=\"开始日期\"\r\n            end-placeholder=\"结束日期\"\r\n            @change=\"getAlarmListByCondition\"\r\n          >\r\n          </el-date-picker>\r\n        </el-form-item>\r\n        <el-form-item label>\r\n          <el-select\r\n            v-model=\"alarmListInfo.alarmLevel\"\r\n            placeholder=\"全部等级\"\r\n            style=\"width: 120px\"\r\n            clearable\r\n            filterable\r\n            @change=\"getAlarmListByCondition\"\r\n          >\r\n            <el-option label=\"普通\" value=\"0\"> </el-option>\r\n            <el-option label=\"紧急\" value=\"1\"> </el-option>\r\n            <el-option label=\"危急\" value=\"2\"> </el-option>\r\n          </el-select>\r\n        </el-form-item>\r\n        <el-form-item label>\r\n          <el-select\r\n            v-model=\"alarmListInfo.alarmProgress\"\r\n            placeholder=\"全部状态\"\r\n            style=\"width: 120px\"\r\n            clearable\r\n            filterable\r\n            @change=\"getAlarmListByCondition\"\r\n          >\r\n            <el-option label=\"未处理\" value=\"未处理\"> </el-option>\r\n            <el-option label=\"已处理\" value=\"已处理\"> </el-option>\r\n          </el-select>\r\n        </el-form-item>\r\n      </el-form>\r\n      <hd-table\r\n        v-loading=\"alarmListInfo.loading\"\r\n        :data=\"alarmListInfo.tableData\"\r\n        :header-cell-style=\"{ 'text-align': 'center' }\"\r\n      >\r\n        <hd-table-column label=\"类型\" prop=\"SourceType\" width=\"100\" />\r\n        <el-table-column\r\n          label=\"等级\"\r\n          width=\"90\"\r\n          align=\"center\"\r\n          show-overflow-tooltip\r\n        >\r\n          <template #default=\"{ row }\">\r\n            <el-tag v-if=\"row.alarmLevel === 0\">普通</el-tag>\r\n            <el-tag v-if=\"row.alarmLevel === 1\" type=\"warning\">紧急</el-tag>\r\n            <el-tag v-if=\"row.alarmLevel === 2\" type=\"danger\">危急</el-tag>\r\n          </template>\r\n        </el-table-column>\r\n\r\n        <el-table-column\r\n          label=\"状态\"\r\n          width=\"90\"\r\n          align=\"center\"\r\n          show-overflow-tooltip\r\n        >\r\n          <template #default=\"{ row }\">\r\n            <el-tag v-if=\"row.alarmProgress === '未处理'\" type=\"danger\">{{\r\n              row.alarmProgress\r\n            }}</el-tag>\r\n            <el-tag v-if=\"row.alarmProgress === '已处理'\" type=\"success\">{{\r\n              row.alarmProgress\r\n            }}</el-tag>\r\n          </template>\r\n        </el-table-column>\r\n        <hd-table-column\r\n          prop=\"alarmContent\"\r\n          label=\"内容\"\r\n          width\r\n          show-overflow-tooltip\r\n        />\r\n        <hd-table-column prop=\"CreateTime\" label=\"时间\" width=\"155\" />\r\n        <el-table-column label=\"操作\" width=\"240\" align=\"center\">\r\n          <template #default=\"{ row }\">\r\n            <el-button\r\n              type=\"primary\"\r\n              v-if=\"row.alarmProgress === '未处理'\"\r\n              size=\"mini\"\r\n              @click=\"handleHandleAlarm(row)\"\r\n              >处理</el-button\r\n            >\r\n            <el-button type=\"primary\" size=\"mini\" @click=\"showAlarmDetail(row)\"\r\n              >详情</el-button\r\n            >\r\n            <el-popconfirm title=\"确定跳转到报警位置 ？\" effect=\"dark\">\r\n              <template #reference>\r\n                <el-button type=\"primary\" size=\"mini\">查看位置</el-button>\r\n              </template>\r\n            </el-popconfirm>\r\n          </template>\r\n        </el-table-column>\r\n      </hd-table>\r\n      <el-pagination\r\n        v-show=\"alarmListInfo.total\"\r\n        v-model:current-page=\"alarmListInfo.params.curpage\"\r\n        :page-size=\"alarmListInfo.params.size\"\r\n        layout=\"total, prev, pager, next, jumper\"\r\n        :total=\"alarmListInfo.total\"\r\n        background\r\n        @current-change=\"alarmCurrentChange\"\r\n      />\r\n    </el-dialog>\r\n    <!-- 报警管理table dialog end -->\r\n\r\n    <!-- 报警详情 start -->\r\n    <el-dialog title=\"报警详情\" v-model=\"alarmInfo.visible\" width=\"1000px\">\r\n      <div class=\"alarm-detail\">\r\n        <div class=\"monitor-content\">\r\n          <div class=\"left-content\">\r\n            <div class=\"content-controller\">\r\n              <!--报警详情-->\r\n              <ul class=\"alarm-info-data\">\r\n                <li>\r\n                  <span>\r\n                    报警类型：\r\n                    <span style=\"color: #ff7352\">\r\n                      {{ alarmInfo.form.SourceType }}\r\n                    </span>\r\n                  </span>\r\n\r\n                  <span>\r\n                    报警时间：\r\n                    <span style=\"color: #ff7352\">{{\r\n                      alarmInfo.form.CreateTime\r\n                    }}</span>\r\n                  </span>\r\n                </li>\r\n                <li>\r\n                  <span\r\n                    >报警等级：\r\n                    <el-tag v-if=\"alarmInfo.form.alarmLevel === 0\">普通</el-tag>\r\n                    <el-tag\r\n                      v-if=\"alarmInfo.form.alarmLevel === 1\"\r\n                      type=\"warning\"\r\n                      >紧急</el-tag\r\n                    >\r\n                    <el-tag v-if=\"alarmInfo.form.alarmLevel === 2\" type=\"danger\"\r\n                      >危急</el-tag\r\n                    >\r\n                  </span>\r\n                  <span>\r\n                    触发人员：\r\n                    <span style=\"color: #d9354e\">\r\n                      {{ alarmInfo.form.SourceName }}\r\n                    </span>\r\n                  </span>\r\n                </li>\r\n                <li>\r\n                  <span>\r\n                    所在地图：{{\r\n                      getMapByNum(alarmInfo.form.ShowSceneNum).sname\r\n                    }}\r\n                  </span>\r\n                  <span> 位置坐标：{{ alarmInfo.form.SourcePointNum }} </span>\r\n                </li>\r\n              </ul>\r\n            </div>\r\n\r\n            <!-- 报警区域 -->\r\n            <div class=\"alarm-area\">\r\n              <img\r\n                :src=\"\r\n                  `${imgUrl}/${getMapByNum(alarmInfo.form.ShowSceneNum).surl}`\r\n                \"\r\n                alt\r\n                ref=\"mapImg\"\r\n              />\r\n              <span\r\n                class=\"icon iconfont pointImg\"\r\n                ref=\"pointImg\"\r\n                :style=\"alarmInfo.iconStyle\"\r\n                >&#xe615;</span\r\n              >\r\n            </div>\r\n          </div>\r\n          <ul class=\"right-content\" ref=\"listBar\">\r\n            <li class=\"description\">\r\n              <div>\r\n                处理状态：\r\n                <el-tag\r\n                  v-if=\"alarmInfo.form.alarmProgress === '未处理'\"\r\n                  type=\"danger\"\r\n                  style=\"width: fit-content\"\r\n                  >{{ alarmInfo.form.alarmProgress }}</el-tag\r\n                >\r\n                <el-tag\r\n                  v-if=\"alarmInfo.form.alarmProgress === '已处理'\"\r\n                  type=\"success\"\r\n                  >{{ alarmInfo.form.alarmProgress }}</el-tag\r\n                >\r\n              </div>\r\n              <div v-show=\"alarmInfo.form.dealAccount\">\r\n                处理用户：{{ alarmInfo.form.dealAccount }}\r\n              </div>\r\n              <div v-show=\"alarmInfo.form.dealAccount\">\r\n                处理时间：{{ alarmInfo.form.dealTime }}\r\n              </div>\r\n            </li>\r\n            <li class=\"alarm-ps\" v-show=\"alarmInfo.form.SourceName\">\r\n              <p style=\"font-size: 1.6rem; margin-bottom: 0.4rem\">备注:</p>\r\n              <p style=\"text-indent: 1rem\"></p>\r\n            </li>\r\n            <li class=\"right-content-head\">\r\n              <el-button size=\"mini\" type=\"info\"> 历史轨迹 </el-button>\r\n              <el-popconfirm title=\"确定跳转到人员实时位置 ？\" effect=\"dark\">\r\n                <template #reference>\r\n                  <el-button type=\"primary\" size=\"mini\">人员位置</el-button>\r\n                </template>\r\n              </el-popconfirm>\r\n            </li>\r\n            <li class=\"right-content-head\">\r\n              <el-popconfirm\r\n                title=\"确定跳转到报警位置 ？\"\r\n                effect=\"dark\"\r\n                @confirm=\"handleLocate\"\r\n              >\r\n                <template #reference>\r\n                  <el-button type=\"primary\" size=\"mini\">查看位置</el-button>\r\n                </template>\r\n              </el-popconfirm>\r\n            </li>\r\n            <li class=\"right-content-head\">\r\n              <div>\r\n                <p>详情描述：</p>\r\n                <p>{{ alarmInfo.form.alarmContent }}</p>\r\n              </div>\r\n            </li>\r\n          </ul>\r\n        </div>\r\n      </div>\r\n    </el-dialog>\r\n    <!-- 报警详情 end -->\r\n\r\n    <!-- 报警处理弹框 start -->\r\n    <el-dialog\r\n      title=\"报警处理\"\r\n      v-model=\"alarmInfo.handleVisible\"\r\n      width=\"30%\"\r\n      :close-on-click-modal=\"false\"\r\n    >\r\n      <el-form abel-width=\"100px\" :rules=\"alarmInfo.rules\">\r\n        <el-form-item label=\"处理类型\">\r\n          <el-select\r\n            v-model=\"alarmInfo.form.handleType\"\r\n            placeholder=\"处理类型\"\r\n            clearable\r\n            filterable\r\n          >\r\n            <el-option\r\n              v-for=\"item in handleTypeList\"\r\n              :key=\"item.id\"\r\n              :label=\"item.content\"\r\n              :value=\"item.content\"\r\n            >\r\n            </el-option>\r\n          </el-select>\r\n        </el-form-item>\r\n        <el-form-item label=\"处理结果\">\r\n          <div>\r\n            <el-input\r\n              type=\"textarea\"\r\n              style=\"width: 80%\"\r\n              :rows=\"4\"\r\n              placeholder=\"请输入处理结果\"\r\n              v-model=\"alarmInfo.form.handleContent\"\r\n              @focus=\"alarmInfo.handleExampleVisible = true\"\r\n            >\r\n            </el-input>\r\n            <i\r\n              v-if=\"alarmInfo.handleExampleVisible\"\r\n              class=\"el-icon el-icon-document\"\r\n              >模板</i\r\n            >\r\n            <el-table\r\n              v-if=\"alarmInfo.handleExampleVisible\"\r\n              :data=\"handleExample\"\r\n              @row-click=\"getHandleExample\"\r\n              :show-header=\"false\"\r\n            >\r\n              <el-table-column width=\"60\" property=\"id\"></el-table-column>\r\n              <el-table-column property=\"content\"></el-table-column>\r\n            </el-table>\r\n          </div>\r\n        </el-form-item>\r\n      </el-form>\r\n\r\n      <template #footer>\r\n        <span class=\"dialog-footer\">\r\n          <el-button @click=\"alarmInfo.handleVisible = false\">取 消</el-button>\r\n          <el-button type=\"primary\" @click=\"alarmHandleSubmit\">确 定</el-button>\r\n        </span>\r\n      </template>\r\n    </el-dialog>\r\n    <!-- 报警处理弹框 end -->\r\n\r\n    <!-- 右键出现的菜单 start -->\r\n    <contextmenu-content\r\n      v-if=\"visibleObj.contextmenu\"\r\n      :type=\"contextmenuTypeRef\"\r\n      :contxtmenu-position=\"contxtmenuPosition\"\r\n      :contextmenu-list=\"contextmenuList\"\r\n      @clicked=\"visibleObj.contextmenu = false\"\r\n      @seeNowVideo=\"seeNowVideo\"\r\n      @seeHistoryVideo=\"seeHistoryVideo\"\r\n      @showDetails=\"showDetails\"\r\n      @trackPlayback=\"handleClickTrackPlayback\"\r\n      @follow=\"personFollow\"\r\n    />\r\n    <!-- 右键出现的菜单 end -->\r\n\r\n    <!-- 查看的内容 form start -->\r\n    <dragable-container\r\n      v-model=\"visibleObj.detailsForm\"\r\n      :title=\"detailsForm.formTitle\"\r\n      @close=\"hideDetails\"\r\n    >\r\n      <form-content\r\n        :form-data=\"detailsForm.formData\"\r\n        :form-type=\"contextmenuTypeRef\"\r\n        :x=\"detailsForm.x\"\r\n        :y=\"detailsForm.y\"\r\n      />\r\n    </dragable-container>\r\n    <!-- 查看的内容 form end -->\r\n    <!-- 监控列表lfq start -->\r\n    <dragable-container\r\n      v-model=\"visibleObj.monitorListFlag\"\r\n      :width=\"768\"\r\n      @close=\"handleCloseAllVideo\"\r\n      title=\"实时视频\"\r\n    >\r\n      <div\r\n        v-for=\"(value, index) in monitorListInfo.newMonitorList\"\r\n        v-show=\"value.active\"\r\n        :key=\"index\"\r\n        :class=\"monitorListInfo.monitorInner\"\r\n      >\r\n        <monitor-list\r\n          ref=\"monitorListPanelRef\"\r\n          :camera-data=\"value\"\r\n          @changeMonitorListPanelState=\"\r\n            watchMonitorListPanelState(value.camera.id)\r\n          \"\r\n          :cameraData=\"value\"\r\n          :livePlayCount=\"monitorListInfo.livePlayCount\"\r\n        />\r\n      </div>\r\n    </dragable-container>\r\n    <!-- 监控列表 end -->\r\n    <!--历史监控列表lfq start-->\r\n    <dragable-container\r\n      v-model=\"visibleObj.historyMonitorListFlag\"\r\n      :width=\"768\"\r\n      title=\"历史视频\"\r\n      @close=\"handleCloseAllHistoryVideo\"\r\n    >\r\n      <div\r\n        v-for=\"(value, index) in monitorListInfo.newHistoryMonitorList\"\r\n        v-show=\"value.active\"\r\n        :key=\"index\"\r\n        :class=\"monitorListInfo.monitorHistoryInner\"\r\n      >\r\n        <history-monitor\r\n          ref=\"hitoryMonitorListPanelRef\"\r\n          :history-camera-data=\"value\"\r\n          @changeHistoryMonitorListPanelState=\"\r\n            watchHistoryMonitorListPanelState(value.camera.id)\r\n          \"\r\n          :historyCameraData=\"value\"\r\n          :historyPlayCount=\"monitorListInfo.historyPlayCount\"\r\n        />\r\n      </div>\r\n    </dragable-container>\r\n    <!--历史监控列表lfq end-->\r\n    <!-- 轨迹回放选择时间 start -->\r\n    <hd-dialog\r\n      title=\"选择轨迹回放时间\"\r\n      v-model=\"trackPlayback.show\"\r\n      width=\"600px\"\r\n      :close-on-click-modal=\"false\"\r\n      center\r\n      showFooterButtons\r\n      @opened=\"handleOpenContextmenu\"\r\n      @confirm=\"handleClickSeeTrackPlayback\"\r\n      @cancel=\"trackPlayback.show = false\"\r\n    >\r\n      <el-form\r\n        ref=\"trackPlaybackFormRef\"\r\n        :model=\"trackPlayback.form\"\r\n        :rules=\"trackPlayback.rules\"\r\n        label-width=\"100px\"\r\n        size=\"small\"\r\n      >\r\n        <el-form-item label=\"选择日期：\" prop=\"date\">\r\n          <el-date-picker\r\n            v-model=\"trackPlayback.form.date\"\r\n            type=\"date\"\r\n            placeholder=\"选择日期\"\r\n            :disabledDate=\"trackPlayback.disabledDate\"\r\n          />\r\n        </el-form-item>\r\n        <!-- 时间段只能是一个小时 -->\r\n        <el-form-item label=\"时间范围：\" prop=\"time\">\r\n          <el-time-picker\r\n            is-range\r\n            v-model=\"trackPlayback.form.time\"\r\n            range-separator=\"至\"\r\n            start-placeholder=\"开始时间\"\r\n            end-placeholder=\"结束时间\"\r\n            placeholder=\"选择时间范围\"\r\n          >\r\n          </el-time-picker>\r\n        </el-form-item>\r\n      </el-form>\r\n    </hd-dialog>\r\n    <!-- 轨迹回放选择时间 end -->\r\n\r\n    <!-- 轨迹回放控制功能 -->\r\n    <playback-control\r\n      v-if=\"status.isPlayBack\"\r\n      :sTime=\"playbackObj.sTime\"\r\n      :eTime=\"playbackObj.eTime\"\r\n      :currentTime=\"playbackObj.currentTime\"\r\n      :currentIndex=\"playbackObj.currentIndex\"\r\n      :len=\"playbackObj.len\"\r\n      :isPlay=\"playbackObj.isPlay\"\r\n      @changeRate=\"changeRate\"\r\n      @togglePlay=\"togglePlay\"\r\n      @close=\"playbackClose\"\r\n      @changeProcess=\"changeProcess\"\r\n    />\r\n\r\n    <!-- 右侧报警 start-->\r\n    <div class=\"warning-container\" :style=\"{ right: warningWidth }\">\r\n      <div class=\"warning-wrap\">\r\n        <div class=\"warning-show-button\" @click=\"showWarningList\">报警列表</div>\r\n        <div class=\"warning-content\">\r\n          <el-form\r\n            :model=\"fenceListInfo.params\"\r\n            label-width=\"80px\"\r\n            :inline=\"true\"\r\n          >\r\n            <el-select\r\n              v-model=\"alarmForm.type\"\r\n              placeholder=\"全部\"\r\n              clearable\r\n              filterable\r\n              style=\"width: 98%\"\r\n              @change=\"() => {}\"\r\n            >\r\n              <el-option\r\n                v-for=\"item in alarmType\"\r\n                :key=\"item.value\"\r\n                :label=\"item.label\"\r\n                :value=\"item.value\"\r\n              >\r\n              </el-option>\r\n            </el-select>\r\n            <br />\r\n            <transition name=\"slide-fade\">\r\n              <handle\r\n                :alarmType=\"alarmForm.type\"\r\n                :wsAlarmItem=\"wsAlarmItem\"\r\n                :handleIds=\"alarmListInfo.handleIds\"\r\n                @getAlarmTotal=\"getAlarmTotal\"\r\n                @getAlarmUnHandle=\"getAlarmUnHandle\"\r\n                @showAlarmDetail=\"showAlarmDetail\"\r\n                @showHandlePannel=\"handleHandleAlarm\"\r\n                :cancelId=\"cancelAlarmId\"\r\n              ></handle>\r\n            </transition>\r\n          </el-form>\r\n        </div>\r\n      </div>\r\n    </div>\r\n    <!-- 右侧报警 end-->\r\n\r\n    <!-- 人员图层 start -->\r\n    <layer-person-list\r\n      v-if=\"visibleObj.layerPerson\"\r\n      :person-list=\"layerPerson\"\r\n      :mouse-position=\"layerPosition\"\r\n    />\r\n    <!-- 人员图层 end -->\r\n\r\n    <!-- 左侧控制按钮 start -->\r\n    <div\r\n      v-show=\"!visibleObj.controlPannel && showMenu\"\r\n      class=\"control-menu\"\r\n      @click=\"visibleObj.controlPannel = !visibleObj.controlPannel\"\r\n    >\r\n      <span class=\"icon iconfont\">&#xe613;</span>\r\n    </div>\r\n    <!-- 左侧控制按钮 end -->\r\n\r\n    <!-- 控制面板 start -->\r\n    <div class=\"control-panel\" v-show=\"visibleObj.controlPannel && showMenu\">\r\n      <div class=\"control-wrap\">\r\n        <i\r\n          class=\"el-icon-close close-btn\"\r\n          @click=\"visibleObj.controlPannel = fasle\"\r\n        ></i>\r\n        <div class=\"control-title o-h\">\r\n          {{ mapNameRef }}\r\n        </div>\r\n        <el-select\r\n          v-model.trim=\"leftPannelSearch\"\r\n          :remote-method=\"querySearch\"\r\n          filterable\r\n          default-first-option\r\n          remote\r\n          size=\"small\"\r\n          placeholder=\"全局搜索\"\r\n          class=\"search-select\"\r\n          @change=\"searchChange\"\r\n          clearable\r\n        >\r\n          <el-option\r\n            v-for=\"item in userSearchRes\"\r\n            :key=\"item.lids\"\r\n            :value=\"item.lids\"\r\n            :label=\"item.ltype\"\r\n          />\r\n        </el-select>\r\n        <div class=\"data-display-item\">\r\n          <div class=\"title\">\r\n            <span class=\"icon iconfont\">&#xe6d8;</span>\r\n            <span>人员信息</span>\r\n          </div>\r\n          <div class=\"display-content\">\r\n            <div class=\"data-item\">\r\n              <div class=\"count\">{{ person.all.length }}</div>\r\n              <div class=\"name\">总上线人数</div>\r\n            </div>\r\n            <div class=\"data-item\">\r\n              <div class=\"count\">{{ person.currentMap.length }}</div>\r\n              <div class=\"name\">当前上线人数</div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n        <div class=\"data-display-item\">\r\n          <div class=\"title\">\r\n            <span class=\"icon iconfont big\">&#xe69c;</span>\r\n            <span>报警信息</span>\r\n          </div>\r\n          <div class=\"display-content\">\r\n            <div class=\"data-item\">\r\n              <div class=\"count\">{{ alarmInfo.alarmTotal }}</div>\r\n              <div class=\"name\">报警总数</div>\r\n            </div>\r\n            <div class=\"data-item warn\">\r\n              <div class=\"count\">{{ alarmInfo.alarmUnHandle }}</div>\r\n              <div class=\"name\">待处理</div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n        <div class=\"control-buttons-container\">\r\n          <div\r\n            class=\"control-button-item\"\r\n            v-for=\"(item, index) in controlButtonList\"\r\n            :key=\"`button-${index}`\"\r\n          >\r\n            <div class=\"button-label\">{{ item.label }}</div>\r\n            <el-switch\r\n              v-model=\"item.show\"\r\n              @change=\"controlButtonChange($event, item.code)\"\r\n              size=\"mini\"\r\n            >\r\n            </el-switch>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n    <!-- 控制面板 end -->\r\n\r\n    <!-- 地图选择 -->\r\n    <dragable-container\r\n      v-model=\"visibleObj.map\"\r\n      title=\"选择地图\"\r\n      :width=\"800\"\r\n      @close=\"closeMapChoosen\"\r\n      ><map-choosen\r\n        :map-list=\"mapListRef\"\r\n        :map-id=\"mapIdRef\"\r\n        @changeMap=\"changeMap\"\r\n    /></dragable-container>\r\n\r\n    <!-- 实时跟踪关闭按钮 -->\r\n    <el-button\r\n      v-if=\"status.isFollowing\"\r\n      class=\"close-follow\"\r\n      type=\"primary\"\r\n      @click=\"handleCloseFollow\"\r\n      >关闭实时跟踪</el-button\r\n    >\r\n  </main>\r\n</template>\r\n\r\n<script lang=\"ts\">\r\nimport {\r\n  defineComponent,\r\n  onMounted,\r\n  onUnmounted,\r\n  reactive,\r\n  ref,\r\n  shallowRef,\r\n  computed,\r\n  watch,\r\n  nextTick,\r\n} from \"vue\";\r\nimport stageApi from \"@/api/stage\";\r\nimport alarmApi from \"@/api/alarm\";\r\nimport commonApi from \"@/api/common\";\r\n\r\nimport { imgUrl } from \"@/utils/urls\";\r\nimport { IResponseCommon, ISelectOption } from \"@/types/index\";\r\n\r\nimport {\r\n  IMapArrItem,\r\n  IDeviceItem,\r\n  IDeviceInfo,\r\n  Nullable,\r\n  IPersonArrItem,\r\n  IMessageClose,\r\n  TLayerItem,\r\n  TVectorgraph,\r\n  IBuildItem,\r\n  ISvgToImageConfig,\r\n  IAreaItem,\r\n  IPos,\r\n  ITrackItem,\r\n  ITrackErrorItem,\r\n  TTrackRes,\r\n} from \"./types/index\";\r\nimport { IBubbleDataItem, TDestoryType } from \"./types/cacheObj\";\r\nimport { IAlarmType } from \"./types/alarm\";\r\nimport { IGetAlarmItem } from \"./types/ws\";\r\nimport {\r\n  IAddEditFenceParams,\r\n  ISetDeviceData,\r\n  ISetDeviceDataItem,\r\n  IRuleItem,\r\n  IUpperPos,\r\n} from \"./types/fence\";\r\n// todo konva 按需引入  https://www.npmjs.com/package/konva Minimal bundle\r\nimport Konva from \"konva\";\r\nimport { Stage } from \"konva/types/Stage\";\r\nimport { ElMessage, ElMessageBox } from \"element-plus\";\r\nimport type { Pane } from \"element-plus/lib/el-tabs/src/tabs.vue\";\r\nimport {\r\n  getOffset,\r\n  screenTocanvas,\r\n  svgToImage,\r\n  guid,\r\n  generateImageDomByType,\r\n  loadImage,\r\n  locateIcon,\r\n  getDateTime,\r\n  getTrackTime,\r\n  strToPos,\r\n  checkTimeGap,\r\n} from \"./utils\";\r\nimport { generatePersonGroup } from \"./utils/shape\";\r\nimport { generatePersonItem } from \"./utils/ws\";\r\nimport { cloneDeep, debounce } from \"lodash\";\r\nimport {\r\n  mainNav,\r\n  personList,\r\n  cameraList,\r\n  basestationList,\r\n  fenceBox,\r\n  contextmenuContent,\r\n  formContent,\r\n  monitorList,\r\n  historyMonitor,\r\n  labelList,\r\n  handle,\r\n  layerPersonList,\r\n  mapChoosen,\r\n  dragableContainer,\r\n  playbackControl,\r\n} from \"./components\";\r\n\r\n// 常量\r\nimport {\r\n  NAV_INFO,\r\n  FENCE,\r\n  ALARM,\r\n  DATAV,\r\n  TITLE_HEIGHT as titleHeight,\r\n  TYPES,\r\n  areaRulesOption,\r\n  formateRuleType,\r\n  bgImageConfig,\r\n  areaColorConfig,\r\n  Hms,\r\n  timeFormateStr,\r\n  warningListWidth,\r\n  getFormTitle,\r\n  DEFAULT_COLORS,\r\n  handleTypeList,\r\n  handleExample,\r\n} from \"./constVariables\";\r\n\r\nimport { computedRem, commonRuleItem, getPagination, customFuncRule } from \"@/utils\";\r\nimport { Shape } from \"konva/types/Shape\";\r\nimport { IELForm } from \"./types/element\";\r\nimport { Image } from \"konva/types/shapes/Image\";\r\nimport {\r\n  setAllDevice,\r\n  setAllScene,\r\n  setAllBuild,\r\n  getBuildByNum,\r\n  getMapByNum,\r\n  getUsername,\r\n  setLoadSNum,\r\n} from \"@/utils/auth\";\r\nimport initData from \"./module/initData\";\r\nimport dayjs from \"dayjs\";\r\nimport { Group } from \"konva/types/Group\";\r\nimport { Animation } from \"konva/types/Animation\";\r\nimport { IFrame } from \"konva/types/types\";\r\n\r\nexport default defineComponent({\r\n  name: \"Content\",\r\n  components: {\r\n    mainNav,\r\n    personList,\r\n    cameraList,\r\n    basestationList,\r\n    fenceBox,\r\n    contextmenuContent,\r\n    formContent,\r\n    monitorList,\r\n    historyMonitor,\r\n    labelList,\r\n    handle,\r\n    layerPersonList,\r\n    mapChoosen,\r\n    dragableContainer,\r\n    playbackControl,\r\n  },\r\n  setup() {\r\n    enum EpauletActionCode {\r\n      /** 标签初始化 */\r\n      HTagInit = 1000,\r\n      /** 单个标签上线 */\r\n      HTagOnline = 1001,\r\n      /** 单个标签下线 */\r\n      HTagOffline = 1002,\r\n      /** 单个标签移动 */\r\n      HTagMove = 1003,\r\n      /** 图层统计 */\r\n      HLayerGroupStatistics = 1004,\r\n      /** 单个标签注销 */\r\n      HTagLogOff = 1005,\r\n      /** 落水报警 */\r\n      HWaterAlarm = 1006,\r\n      /** 每个地图人员数据 */\r\n      HSceneStatistics = 1007,\r\n    }\r\n\r\n    const {\r\n      router,\r\n      wsUrl, // ws 连接地址\r\n      mapObj, // 后端传过来的地图 obj\r\n      mapListRef, // 后端传过来的地图 arr\r\n      mapIdRef,\r\n      scaleBoundary, // 缩放边界值 mminScale maxScale\r\n      state,\r\n      status,\r\n      showMenu,\r\n      mapNameRef,\r\n      warningWidth, // 右侧报警宽度\r\n      contextmenuTypeRef, // 右键查看的类型 TYPES\r\n      contxtmenuPosition, // 右键 位置\r\n      contextmenuList, // 右键shape的菜单\r\n      detailsForm,\r\n      visibleObj,\r\n      monitorListInfo,\r\n      drawerInfo,\r\n      fenceInfo,\r\n      fenceListInfo,\r\n      drawFenceInfo,\r\n      ruleListInfo, // 规则 table\r\n      ruleFormRef,\r\n      ruleItemDetail, // 规则 详情\r\n      ruleItemDetailRule,\r\n      ruleDisabledDate, // 带日期的选择器\r\n      alarmInfo,\r\n      alarmListInfo,\r\n      allGroup,\r\n      activeTarget,\r\n      basestation,\r\n      bubble,\r\n      camera,\r\n      area,\r\n      person,\r\n      cacheAlarmObj,\r\n      cacheBasestationObj,\r\n      cacheCameraObj,\r\n      layerPerson,\r\n      layerPosition,\r\n      cacheBubbleObj,\r\n      cacheAreaObj,\r\n      cachePersonObj,\r\n      transferProps,\r\n      allLayer,\r\n      controlButtonList,\r\n      wsAlarmType,\r\n      alarmType,\r\n      alarmForm,\r\n    } = initData();\r\n\r\n    let clickTimer: Nullable<number> = null;\r\n    let currentContextmenu: Nullable<Shape | Group> = null; // 当前右键的那个shape，因为加了激活的shadow需要清除\r\n\r\n    const trackPlayback = reactive({\r\n      show: false, // 选择轨迹回放时间的弹窗\r\n      // 选择轨迹回放时间的form\r\n      form: {\r\n        date: \"\" as any,\r\n        time: [],\r\n      },\r\n      rules: {\r\n        date: commonRuleItem(\"请选择日期\"),\r\n        time: [commonRuleItem(\"请选择时间\"), customFuncRule(checkTimeGap)],\r\n      },\r\n      disabledDate(time: Date) {\r\n        return time.getTime() > Date.now();\r\n      },\r\n      message: null as any,\r\n      tween: null as any,\r\n      steps: [] as ITrackItem[],\r\n      lineNode: null as any,\r\n    });\r\n\r\n    const playbackObj = reactive({\r\n      sTime: \"\",\r\n      eTime: \"\",\r\n      currentTime: \"\",\r\n      currentIndex: 0,\r\n      len: 0,\r\n      isPlay: true,\r\n    });\r\n\r\n    let trackPlaybackLinePos: number[] = [];\r\n\r\n    // 时间选择器\r\n    function timerPickerChange() {\r\n      if (ruleItemDetail.form.endTime) {\r\n        ruleItemDetail.form.endTime = \"\";\r\n      }\r\n    }\r\n\r\n    const mousePos: IPos = { x: 0, y: 0 };\r\n\r\n    let stage: Nullable<Stage> = null;\r\n    function batchDraw() {\r\n      (stage as Stage).batchDraw();\r\n    }\r\n\r\n    const layer = new Konva.Layer();\r\n    const bgLayer = new Konva.Layer();\r\n    const operationLayer = new Konva.Layer();\r\n\r\n    watch(monitorListInfo.newMonitorList, (val) => {\r\n      let count = 0;\r\n      val.forEach((item: { active: any }) => {\r\n        const active = item.active;\r\n        if (active) {\r\n          count++;\r\n        }\r\n      });\r\n      if (count === 0) {\r\n        visibleObj.monitorListFlag = false;\r\n      }\r\n      monitorListInfo.livePlayCount = count;\r\n      if (count === 1) {\r\n        monitorListInfo.monitorInner = \"monitor-inner-one\";\r\n      } else {\r\n        monitorListInfo.monitorInner = \"monitor-inner-pannel\";\r\n      }\r\n\r\n      if (val.length > monitorListInfo.cameraCount) {\r\n        if (val.length > monitorListInfo.cameraCount * 1000) {\r\n          val.splice(0, val.length - monitorListInfo.cameraCount);\r\n        }\r\n        val.forEach((item: { active: any }, index: number) => {\r\n          if (index < val.length - monitorListInfo.cameraCount) {\r\n            item.active = false;\r\n          }\r\n        });\r\n      }\r\n    });\r\n    watch(monitorListInfo.newHistoryMonitorList, (val) => {\r\n      let count = 0;\r\n      val.forEach((value: { active: any }) => {\r\n        const active = value.active;\r\n        if (active) {\r\n          count++;\r\n        }\r\n      });\r\n      if (count === 0) {\r\n        visibleObj.historyMonitorListFlag = false;\r\n      }\r\n      monitorListInfo.historyPlayCount = count;\r\n      if (count === 1) {\r\n        monitorListInfo.monitorHistoryInner = \"monitor-inner-one\";\r\n      } else {\r\n        monitorListInfo.monitorHistoryInner = \"monitor-inner-pannel\";\r\n      }\r\n\r\n      if (val.length > monitorListInfo.cameraCount) {\r\n        if (val.length > monitorListInfo.cameraCount * 1000) {\r\n          val.splice(0, val.length - monitorListInfo.cameraCount);\r\n        }\r\n        val.forEach((value: { active: any }, index: number) => {\r\n          if (index < val.length - monitorListInfo.cameraCount) {\r\n            value.active = false;\r\n          }\r\n        });\r\n      }\r\n    });\r\n\r\n    let cacheDrawFence: Nullable<Shape> = null;\r\n    /**\r\n     * @description: 绘制电子围栏\r\n     * @param {boolean} isFinished 是否绘制完成\r\n     * @return {*}\r\n     */\r\n    function handleStartDrawFence(isFinished = false) {\r\n      cacheDrawFence?.destroy();\r\n\r\n      const pointsArr = drawFenceInfo.points;\r\n      if (pointsArr.length === 0) {\r\n        batchDraw();\r\n        return;\r\n      }\r\n\r\n      const fenceArea = new Konva.Shape({\r\n        ...areaColorConfig,\r\n        sceneFunc: function (ctx, shape) {\r\n          ctx.beginPath();\r\n          ctx.moveTo(pointsArr[0].x, pointsArr[0].y);\r\n          for (let i = 1; i < pointsArr.length; i++) {\r\n            const { x, y } = pointsArr[i];\r\n            ctx.lineTo(x, y);\r\n          }\r\n          ctx.stroke();\r\n          if (isFinished) {\r\n            ctx.closePath();\r\n          }\r\n          ctx.fillStrokeShape(shape);\r\n        },\r\n      });\r\n      cacheDrawFence = fenceArea;\r\n      allGroup.fenceGroup.add(fenceArea);\r\n      batchDraw();\r\n    }\r\n\r\n    // 电子围栏重新绘制\r\n    function handleRedrawFence() {\r\n      drawFenceInfo.points = [];\r\n      handleStartDrawFence();\r\n    }\r\n\r\n    // 电子围栏撤销\r\n    function handleRevokeFence() {\r\n      const { points } = drawFenceInfo;\r\n      const len = points.length;\r\n      if (len === 0) {\r\n        ElMessage.info(\"还一个点都没有添加噢！\");\r\n      } else if (len === 1 || len === 2) {\r\n        handleRedrawFence();\r\n      } else {\r\n        points.splice(len - 2, 2);\r\n        handleStartDrawFence();\r\n      }\r\n    }\r\n\r\n    // 取消绘制电子围栏\r\n    function handleCancelDrawFence() {\r\n      handleRedrawFence();\r\n      status.isDrawFence = false;\r\n      (drawFenceInfo.message as IMessageClose)?.close();\r\n      drawFenceInfo.points = [];\r\n      drawFenceInfo.clonePoints = [];\r\n      fenceInfo.visible = true;\r\n    }\r\n\r\n    // 完成绘制电子围栏\r\n    function handleFinishDrawFence() {\r\n      const { points } = drawFenceInfo;\r\n      const len = points.length;\r\n      if (len < 4) {\r\n        ElMessage.info(\"最少三个点才能组成一个面\");\r\n      } else {\r\n        (drawFenceInfo.message as IMessageClose).close();\r\n        status.isDrawFence = false;\r\n        points.pop();\r\n        drawFenceInfo.clonePoints = cloneDeep(points);\r\n        handleStartDrawFence(true);\r\n        setTimeout(() => {\r\n          fenceInfo.visible = true;\r\n          handleRedrawFence();\r\n        }, 500);\r\n      }\r\n    }\r\n\r\n    // 清除阴影\r\n    function clearShadowColor() {\r\n      const personOrLabel = [TYPES.labelList, TYPES.person];\r\n\r\n      if (personOrLabel.includes(contextmenuTypeRef.value)) {\r\n        ((currentContextmenu as Group)?.children[0] as Shape)?.shadowColor(\r\n          DEFAULT_COLORS.TRANSPARENT\r\n        );\r\n      } else {\r\n        (currentContextmenu as Shape)?.shadowColor?.(DEFAULT_COLORS.TRANSPARENT);\r\n      }\r\n\r\n      batchDraw();\r\n    }\r\n\r\n    /**\r\n     * @description: 显示右键菜单\r\n     * @param {Event} e window原生e\r\n     * @return {*}\r\n     */\r\n    function showMenuList(e: MouseEvent) {\r\n      const { clientX: x, clientY: y } = e;\r\n      Object.assign(contxtmenuPosition, {\r\n        left: x,\r\n        top: y - titleHeight,\r\n      });\r\n      visibleObj.contextmenu = true;\r\n    }\r\n\r\n    // 隐藏右键菜单\r\n    function hideMenuList() {\r\n      if (visibleObj.contextmenu) {\r\n        visibleObj.contextmenu = false;\r\n        clearShadowColor();\r\n        currentContextmenu = null;\r\n      }\r\n    }\r\n\r\n    function handleStageWheel() {\r\n      (stage as Stage).on(\"wheel\", (e) => {\r\n        const ev: WheelEvent = e.evt;\r\n\r\n        // ts 定义的 没有 wheelDelta 属性\r\n        // const wheelDelta = ev.wheelDelta ? ev.wheelDelta : ev.deltaY * -40;\r\n        const wheelDelta = ev.deltaY * -40;\r\n\r\n        const rateX = (ev.clientX - state.sx) / state.scale;\r\n        const rateY = (ev.clientY - state.sy) / state.scale;\r\n\r\n        if (wheelDelta > 0) {\r\n          state.scale += 0.05;\r\n          state.scale = Number((state.scale + 0.05).toFixed(2));\r\n          if (state.scale >= scaleBoundary.maxScale) {\r\n            state.scale = scaleBoundary.maxScale;\r\n          }\r\n        } else {\r\n          state.scale -= 0.05;\r\n          state.scale = Number((state.scale - 0.05).toFixed(2));\r\n          if (state.scale <= scaleBoundary.minScale) {\r\n            state.scale = scaleBoundary.minScale;\r\n          }\r\n        }\r\n\r\n        state.sx = ev.clientX - state.scale * rateX;\r\n        state.sy = ev.clientY - state.scale * rateY;\r\n\r\n        (stage as Stage).setAttrs({\r\n          x: state.sx,\r\n          y: state.sy,\r\n          scaleX: state.scale,\r\n          scaleY: state.scale,\r\n        });\r\n\r\n        if (status.isDrawFence) {\r\n          handleStartDrawFence();\r\n        }\r\n\r\n        batchDraw();\r\n      });\r\n    }\r\n\r\n    function handleStageMouseDown() {\r\n      (stage as Stage).on(\"mousedown\", (e) => {\r\n        const ev = e.evt;\r\n        if (status.isDrawFence) {\r\n          clickTimer = window.setTimeout(() => {\r\n            const pos = screenTocanvas({ x: ev.clientX, y: ev.clientY }, state);\r\n            drawFenceInfo.points.push(pos);\r\n            handleStartDrawFence();\r\n          }, 300);\r\n\r\n          return;\r\n        }\r\n        status.draggable = true;\r\n        Object.assign(mousePos, {\r\n          x: ev.clientX,\r\n          y: ev.clientY,\r\n        });\r\n        (stage as Stage).container().style.cursor = \"move\";\r\n        hideMenuList();\r\n      });\r\n    }\r\n\r\n    function handleStageMouseUp() {\r\n      (stage as Stage).on(\"mouseup mouseout\", () => {\r\n        if (status.draggable) {\r\n          status.draggable = false;\r\n          (stage as Stage).container().style.cursor = \"default\";\r\n        }\r\n      });\r\n    }\r\n\r\n    function handleStageMouseMove() {\r\n      (stage as Stage).on(\r\n        \"mousemove\",\r\n        debounce((e) => {\r\n          const mouseMoveFunc = () => {\r\n            const ev: MouseEvent = e.evt;\r\n\r\n            if (status.isDrawFence) {\r\n              const { points } = drawFenceInfo;\r\n\r\n              if (points.length >= 1) {\r\n                if (points.length > 1) {\r\n                  points.pop();\r\n                }\r\n                const pos = screenTocanvas({ x: ev.clientX, y: ev.clientY }, state);\r\n                points.push(pos);\r\n                handleStartDrawFence();\r\n              }\r\n              return;\r\n            }\r\n            if (!status.draggable) return;\r\n\r\n            state.sx += ev.clientX - mousePos.x;\r\n            state.sy += ev.clientY - mousePos.y;\r\n\r\n            const maxSx = getOffset(\r\n              {\r\n                x: (stage as Stage).width() * 0.25,\r\n                y: 0,\r\n              },\r\n              {\r\n                x: 0,\r\n                y: 0,\r\n              },\r\n              state.scale\r\n            ).x;\r\n            const minSx = getOffset(\r\n              {\r\n                x: (stage as Stage).width() * 0.75,\r\n                y: 0,\r\n              },\r\n              {\r\n                x: bgImageConfig.width,\r\n                y: 0,\r\n              },\r\n              state.scale\r\n            ).x;\r\n            const maxSy = getOffset(\r\n              {\r\n                x: 0,\r\n                y: titleHeight,\r\n              },\r\n              { x: 0, y: 0 },\r\n              state.scale\r\n            ).y;\r\n            const minSy = getOffset(\r\n              {\r\n                x: 0,\r\n                y: (stage as Stage).height(),\r\n              },\r\n              { x: 0, y: bgImageConfig.height },\r\n              state.scale\r\n            ).y;\r\n\r\n            const midSy = getOffset(\r\n              {\r\n                x: 0,\r\n                y: (stage as Stage).height() / 2,\r\n              },\r\n              {\r\n                x: 0,\r\n                y: bgImageConfig.height / 2,\r\n              },\r\n              state.scale\r\n            ).y;\r\n\r\n            if (maxSx <= minSx) {\r\n              state.sx = maxSx;\r\n            } else if (state.sx > maxSx) {\r\n              state.sx = maxSx;\r\n            } else if (state.sx < minSx) {\r\n              state.sx = minSx;\r\n            }\r\n\r\n            if (maxSy <= minSy) {\r\n              state.sy = maxSy;\r\n            } else if (state.sy > maxSy) {\r\n              state.sy = maxSy;\r\n            } else if (state.sy < minSy) {\r\n              state.sy = minSy;\r\n            }\r\n\r\n            if (state.scale === scaleBoundary.minScale) {\r\n              state.sy = midSy;\r\n            }\r\n\r\n            Object.assign(mousePos, {\r\n              x: ev.clientX,\r\n              y: ev.clientY,\r\n            });\r\n\r\n            (stage as Stage).setAttrs({\r\n              x: state.sx,\r\n              y: state.sy,\r\n            });\r\n\r\n            batchDraw();\r\n          };\r\n          mouseMoveFunc();\r\n        }, 10)\r\n      );\r\n    }\r\n\r\n    function handleStageContextMenu() {\r\n      (stage as Stage).on(\"contextmenu\", (e) => {\r\n        const ev: MouseEvent = e.evt;\r\n        ev.preventDefault();\r\n        clickTimer && clearTimeout(clickTimer);\r\n        if (status.isDrawFence) {\r\n          handleFinishDrawFence();\r\n          return;\r\n        }\r\n      });\r\n    }\r\n\r\n    function stageEventsInit() {\r\n      handleStageWheel();\r\n      handleStageMouseDown();\r\n      handleStageMouseUp();\r\n      handleStageMouseMove();\r\n      handleStageContextMenu();\r\n    }\r\n\r\n    function initStage() {\r\n      stage = new Konva.Stage({\r\n        width: window.innerWidth,\r\n        height: window.innerHeight - titleHeight,\r\n        container: \"container\",\r\n        scale: {\r\n          x: state.scale,\r\n          y: state.scale,\r\n        },\r\n      });\r\n    }\r\n\r\n    function hideDetails() {\r\n      clearShadowColor();\r\n      visibleObj.detailsForm = false;\r\n    }\r\n\r\n    // 保存所有设备\r\n    let deviceAll = reactive<IDeviceItem[]>([]);\r\n\r\n    async function addLayer() {\r\n      (stage as Stage).add(layer).add(bgLayer).add(operationLayer);\r\n\r\n      Object.keys(allGroup).forEach((key) => {\r\n        layer.add(allGroup[key]);\r\n      });\r\n\r\n      bgLayer.moveToBottom();\r\n      allGroup.fenceGroup.moveToBottom();\r\n      operationLayer.moveToTop();\r\n    }\r\n\r\n    async function initAlarmIcon(attrs: { x: number; y: number; id: number }) {\r\n      const { x, y, id } = attrs;\r\n      const alarmIcon = new Konva.Circle({\r\n        x: x,\r\n        y: y,\r\n        radius: 70,\r\n        fill: \"rgba(255,0,0,.7)\",\r\n      });\r\n      cacheAlarmObj[id] = alarmIcon;\r\n      const period = 5000;\r\n      allGroup.alarmGroup.add(alarmIcon);\r\n      let anim: null | Animation = new Konva.Animation((frame) => {\r\n        const scale = Math.sin(((frame as IFrame).time * 2 * Math.PI) / period) + 0.001;\r\n        alarmIcon.scale({ x: scale, y: scale });\r\n      }, layer);\r\n      (anim as Animation).start();\r\n      setTimeout(() => {\r\n        (anim as Animation)?.stop();\r\n        anim = null;\r\n        cacheAlarmObj[id].destroy();\r\n        delete cacheAlarmObj[id];\r\n        batchDraw();\r\n      }, 3000);\r\n    }\r\n\r\n    async function initBasestation(attrs: TLayerItem, show = controlButtonList[0].show) {\r\n      const { x, y, lids } = attrs;\r\n      // todo 等后端返deviceitem 现在为空\r\n      // const deviceArr = JSON.parse(deviceitem) as ISetDeviceDataItem[];\r\n      console.log(\"base attrs\", attrs);\r\n      const imageDom = await generateImageDomByType(attrs);\r\n\r\n      const generate = () => {\r\n        const shape = new Konva.Image({\r\n          x,\r\n          y,\r\n          width: imageDom.width,\r\n          height: imageDom.height,\r\n          image: imageDom,\r\n          shadowColor: DEFAULT_COLORS.TRANSPARENT,\r\n          // shadowBlur: imageDom.width,\r\n          shadowBlur: 20,\r\n          name: lids,\r\n        });\r\n\r\n        shape.on(\"contextmenu\", (e) => {\r\n          console.log(e);\r\n          if (status.isDrawFence) {\r\n            return false;\r\n          }\r\n\r\n          hideDetails();\r\n\r\n          activeTarget.attrs = cloneDeep(e.target.attrs);\r\n          currentContextmenu = shape;\r\n\r\n          contextmenuTypeRef.value = TYPES.basestation;\r\n          showMenuList(e.evt);\r\n\r\n          shape.shadowColor(DEFAULT_COLORS.BLUE);\r\n          batchDraw();\r\n        });\r\n\r\n        allGroup.basestationGroup.add(shape);\r\n        cacheBasestationObj[lids] = shape;\r\n        shape.visible(show);\r\n        batchDraw();\r\n      };\r\n\r\n      loadImage(imageDom, generate);\r\n    }\r\n\r\n    async function initCamera(attrs: TLayerItem, show = controlButtonList[1].show) {\r\n      const { x, y, lids, deviceitem } = attrs;\r\n      const imageDom = await generateImageDomByType(attrs);\r\n\r\n      const deviceArr = JSON.parse(deviceitem) as ISetDeviceDataItem[];\r\n\r\n      const shape = new Konva.Image({\r\n        x,\r\n        y,\r\n        width: imageDom.width,\r\n        height: imageDom.height,\r\n        image: imageDom,\r\n        shadowColor: DEFAULT_COLORS.TRANSPARENT,\r\n        // shadowBlur: imageDom.width,\r\n        shadowBlur: 20,\r\n        // 摄像头应该只有一个id，后续数据可以通过id在deviceAll中找到相应的数据\r\n        name: deviceArr[0].DeviceIdS,\r\n      });\r\n\r\n      shape.on(\"contextmenu\", (e) => {\r\n        console.log(e);\r\n        if (status.isDrawFence) {\r\n          return false;\r\n        }\r\n\r\n        hideDetails();\r\n\r\n        activeTarget.attrs = cloneDeep(e.target.attrs);\r\n\r\n        contextmenuTypeRef.value = TYPES.camera;\r\n        currentContextmenu = shape;\r\n\r\n        showMenuList(e.evt);\r\n        visibleObj.contextmenu = true;\r\n\r\n        shape.shadowColor(DEFAULT_COLORS.BLUE);\r\n        batchDraw();\r\n      });\r\n\r\n      allGroup.cameraGroup.add(shape);\r\n      cacheCameraObj[lids] = shape;\r\n      shape.visible(show);\r\n      batchDraw();\r\n    }\r\n\r\n    async function initBubble(attrs: TVectorgraph) {\r\n      const offsetX = 24;\r\n      const offsetY = 16;\r\n      const OffsetX = 2 * offsetX;\r\n      const OffsetY = 2 * offsetY;\r\n      const { x, y, sname, lids } = attrs;\r\n\r\n      const { W, H, layinfo, Color, IsHaveCount, CountItem } = attrs.defdata;\r\n      const w = W - OffsetX;\r\n      const h = H - OffsetY;\r\n      const group = new Konva.Group({\r\n        x,\r\n        y,\r\n      });\r\n\r\n      const config: ISvgToImageConfig = {\r\n        pathSrc: layinfo,\r\n        width: W,\r\n        height: H,\r\n        color: Color,\r\n      };\r\n\r\n      const imageDom = await svgToImage(config, attrs.ltype === \"标注图层\");\r\n      const image = new Konva.Image({\r\n        image: imageDom,\r\n        name: lids,\r\n        // listening:false,\r\n        // stroke: \"rgba(255,0,0,.5)\",\r\n      });\r\n\r\n      if (!IsHaveCount) {\r\n        const label = new Konva.Text({\r\n          x: W / 2 - offsetX,\r\n          y: (h - 10) / 2,\r\n          text: sname,\r\n          fontSize: 14,\r\n          fill: \"#fff\",\r\n          listening: false,\r\n        });\r\n        label.offsetX(label.width() / 2);\r\n        label.offsetY(label.height() / 2);\r\n        group.add(image).add(label);\r\n      } else {\r\n        const label = new Konva.Text({\r\n          x: W / 2 - offsetX,\r\n          y: H / 8,\r\n          text: sname,\r\n          fontSize: 14,\r\n          fill: \"#fff\",\r\n          listening: false,\r\n        });\r\n        label.offsetX(label.width() / 2);\r\n\r\n        const line = new Konva.Line({\r\n          points: [w * 0.1, h / 2, w * 0.9, h / 2],\r\n          stroke: \"#fff\",\r\n          strokeWidth: 0.5,\r\n          listening: false,\r\n        });\r\n\r\n        const bottomGroup = new Konva.Group({\r\n          x: w / 2,\r\n          y: (h - 10) * 0.7,\r\n          listening: false,\r\n        });\r\n\r\n        cacheBubbleObj[lids] = {\r\n          text: [],\r\n          tagList: [],\r\n        };\r\n\r\n        const len = CountItem.length;\r\n        const gap = 10;\r\n\r\n        CountItem.forEach((item, index) => {\r\n          const cornerGroup = new Konva.Group({\r\n            x: gap * index,\r\n            listening: false,\r\n          });\r\n\r\n          const cornerH = ((h - 10) / 2) * 0.5;\r\n          const cornerRect = new Konva.Rect({\r\n            width: w / 3 / len,\r\n            height: cornerH,\r\n            fill: \"rgba(255,255,255,.6)\",\r\n            cornerRadius: cornerH,\r\n            listening: false,\r\n          });\r\n          cornerRect.offsetX(cornerRect.width() / 2);\r\n\r\n          const cornerText = new Konva.Text({\r\n            x: 0,\r\n            y: cornerH / 2,\r\n            fill: Color,\r\n            text: \"?\",\r\n            name: item,\r\n            listening: false,\r\n          });\r\n          cornerText.offsetX(cornerText.width() / 2);\r\n          cornerText.offsetY(cornerText.height() / 2);\r\n\r\n          cornerGroup.add(cornerRect).add(cornerText);\r\n\r\n          cacheBubbleObj[lids].text.push(cornerText);\r\n\r\n          bottomGroup.add(cornerGroup);\r\n        });\r\n\r\n        group.add(image).add(label).add(line).add(bottomGroup);\r\n\r\n        group.on(\"dblclick\", (e) => {\r\n          console.log(e);\r\n          const { clientX, clientY } = e.evt;\r\n          Object.assign(layerPosition, {\r\n            left: clientX,\r\n            top: clientY - titleHeight,\r\n          });\r\n          // 应该动态取 但是我懒得改了 这个项目应该只有一个\r\n          layerPerson.value = cacheBubbleObj[e.target.attrs.name].tagList[0];\r\n          console.log(\"layerPerson.value\", layerPerson.value);\r\n\r\n          visibleObj.layerPerson = true;\r\n        });\r\n      }\r\n\r\n      allGroup.locateBubbleGroup.add(group);\r\n    }\r\n\r\n    // 回显电子围栏\r\n    function initArea(attrs: IAreaItem) {\r\n      const { areaids, points, areaname, show } = attrs;\r\n      const posArr = JSON.parse(points) as IUpperPos[];\r\n      const group = new Konva.Group({\r\n        visible: show,\r\n      });\r\n      const startPoint = posArr[0];\r\n      const text = new Konva.Text({\r\n        x: startPoint.X + 10,\r\n        y: startPoint.Y + 10,\r\n        text: areaname,\r\n        fill: \"#fff\",\r\n        fontSize: 24,\r\n      });\r\n      const areaItem = new Konva.Shape({\r\n        ...areaColorConfig,\r\n        sceneFunc: function (ctx, shape) {\r\n          ctx.beginPath();\r\n          ctx.moveTo(posArr[0].X, posArr[0].Y);\r\n          for (let i = 1; i < posArr.length; i++) {\r\n            const { X, Y } = posArr[i];\r\n            ctx.lineTo(X, Y);\r\n          }\r\n          ctx.stroke();\r\n          ctx.closePath();\r\n          ctx.fillStrokeShape(shape);\r\n        },\r\n      });\r\n      group.add(areaItem).add(text);\r\n      // 存在就将之前的 销毁 置空\r\n      if (cacheAreaObj[areaids]) {\r\n        cacheAreaObj[areaids].destroy();\r\n        delete cacheAreaObj[areaids];\r\n      }\r\n      allGroup.fenceGroup.add(group);\r\n      cacheAreaObj[areaids] = group;\r\n\r\n      batchDraw();\r\n    }\r\n\r\n    // 修复 右键同一个 shape x y 会变空的问题\r\n    watch(\r\n      () => visibleObj.detailsForm,\r\n      (newVal) => {\r\n        if (newVal === false) {\r\n          detailsForm.formData = {};\r\n          detailsForm.x = 0;\r\n          detailsForm.y = 0;\r\n        }\r\n      }\r\n    );\r\n    // 存储人员image的宽高\r\n    const personImageWH = {\r\n      width: 0,\r\n      height: 0,\r\n    };\r\n    let cachePlaybackPerson: any = null;\r\n    let cacheFollowingPerson: any = null;\r\n    async function initPerson(attrs: IPersonArrItem, initType = 0) {\r\n      const { x, y, name, TagId } = attrs;\r\n\r\n      if (cachePersonObj[TagId] && initType === 0) {\r\n        return;\r\n      }\r\n\r\n      const imageDom = new window.Image();\r\n      imageDom.src = `/images/staff_unchecked${initType + 1}.png`;\r\n      imageDom.onload = () => {\r\n        const group = new Konva.Group({\r\n          x: x + imageDom.width / 2,\r\n          y: y + imageDom.height,\r\n        });\r\n        if (personImageWH.width === 0) {\r\n          personImageWH.width = imageDom.width;\r\n          personImageWH.height = imageDom.height;\r\n        }\r\n        const image = generatePersonGroup(group, imageDom, TagId, name);\r\n        if (initType === 0) {\r\n          cachePersonObj[TagId] = group;\r\n        } else {\r\n          cachePlaybackPerson = group;\r\n        }\r\n\r\n        // 普通初始化\r\n        if (allGroup.personGroup && initType === 0) {\r\n          allGroup.personGroup.add(group);\r\n        } else if (operationLayer && initType) {\r\n          operationLayer.add(group);\r\n          group.moveToTop();\r\n        }\r\n\r\n        if (initType === 0) {\r\n          group.on(\"contextmenu\", (e) => {\r\n            if (status.isPlayBack) {\r\n              ElMessage.info(\"正在轨迹回放，执行其他操作请先关闭轨迹回放\");\r\n              return;\r\n            }\r\n            if (status.isFollowing) {\r\n              ElMessage.info(\"正在实时跟踪，执行其他操作请先关闭轨迹实时跟踪\");\r\n              return;\r\n            }\r\n            console.log(e);\r\n            console.log(e.target.attrs.id);\r\n            if (status.isDrawFence) {\r\n              return false;\r\n            }\r\n            activeTarget.attrs = cloneDeep(e.target.attrs);\r\n            hideDetails();\r\n\r\n            currentContextmenu = group;\r\n            contextmenuTypeRef.value = TYPES.labelList;\r\n            showMenuList(e.evt);\r\n            visibleObj.contextmenu = true;\r\n            image.shadowColor(DEFAULT_COLORS.BLUE);\r\n            batchDraw();\r\n          });\r\n        } else {\r\n          status.isPlayBack = true;\r\n          trackPlayback.message = ElMessage({\r\n            // showClose: true,\r\n            message: \"轨迹回放中...\",\r\n            type: \"warning\",\r\n            duration: 0,\r\n          });\r\n          // eslint-disable-next-line @typescript-eslint/no-use-before-define\r\n          trackPlaybackTween(group, trackPlayback.steps);\r\n        }\r\n        batchDraw();\r\n      };\r\n    }\r\n\r\n    const transferData = ref<any>([]);\r\n    // 获取当前场景下的所有 摄像头\r\n    function getAllMapCamera() {\r\n      return deviceAll.filter(\r\n        (item) => item.dtypecode === \"Camera_IP\" && item.snum === mapIdRef.value\r\n      );\r\n    }\r\n\r\n    async function getCurrentMapCamera(mapId: string) {\r\n      camera.currentMap = camera.all.filter((item) => item.snum === mapId);\r\n      camera.currentMap.forEach((item) => {\r\n        initCamera(item);\r\n      });\r\n    }\r\n\r\n    function getCurrentMapBubble(mapId: string) {\r\n      bubble.currentMap = bubble.all.filter((item) => item.snum === mapId);\r\n      bubble.currentMap.forEach((item) => {\r\n        initBubble(item);\r\n      });\r\n    }\r\n\r\n    function getCurrentMapBasestation(mapId: string) {\r\n      basestation.currentMap = basestation.all.filter((item) => item.snum === mapId);\r\n      basestation.currentMap.forEach((item) => {\r\n        initBasestation(item);\r\n      });\r\n    }\r\n\r\n    const getCurrentMapPerson = (mapId: string) => {\r\n      person.currentMap = person.all.filter(\r\n        (item: any) => item.LocationSceneId === mapId\r\n      );\r\n      console.log(\"currentMap\", person.currentMap);\r\n      person.currentMap.forEach((item) => {\r\n        initPerson(item);\r\n      });\r\n    };\r\n    //\r\n    async function getAllLayer() {\r\n      // eslint-disable-next-line @typescript-eslint/no-use-before-define\r\n      destroyLayer(\"layer\");\r\n\r\n      const params = {\r\n        act: \"kTM5tsxPxjZPbajPzDQ1586422437860\",\r\n        ProductId: \"99999999-9999-9999-9999-999999999999\",\r\n      };\r\n      const res: unknown = await stageApi.getAllLayer(params);\r\n      const { data } = res as IResponseCommon<TLayerItem[]>;\r\n      console.log(\"getAllLayer=>\", data);\r\n\r\n      allLayer.value = data;\r\n\r\n      // layerTypes : 标注图层  | 摄像头图层 | 基站图层\r\n\r\n      // 标注图层\r\n      bubble.all = data.filter((item) => item.ltype === \"标注图层\") as TVectorgraph[];\r\n      getCurrentMapBubble(mapIdRef.value);\r\n\r\n      // 摄像头图层\r\n      camera.all = data.filter((item) => item.ltype === \"摄像头图层\");\r\n      getCurrentMapCamera(mapIdRef.value);\r\n\r\n      // 基站图层\r\n      basestation.all = data.filter(\r\n        (item) => item.ltype === \"基站图层\"\r\n      ) as TVectorgraph[];\r\n      getCurrentMapBasestation(mapIdRef.value);\r\n\r\n      batchDraw();\r\n    }\r\n\r\n    async function getAllBuild() {\r\n      const params = {\r\n        act: \"cRfPNhii9hVXQ6D8C151586425533740\",\r\n      };\r\n      const res: unknown = await stageApi.getAllBuild(params);\r\n\r\n      const { data } = res as IResponseCommon<IBuildItem[]>;\r\n      // 保存建筑信息，报警信息需要根据dnum查询建筑信息\r\n      setAllBuild(data);\r\n      console.log(\"getAllBuild\", data);\r\n    }\r\n\r\n    function getCurrentMapArea(mapId: string) {\r\n      area.currentMap = area.all.filter((item) => item.snum === mapId);\r\n      fenceListInfo.allData = area.currentMap;\r\n      fenceListInfo.tableData = getPagination(\r\n        fenceListInfo.allData,\r\n        fenceListInfo.params.curpage\r\n      );\r\n      fenceListInfo.total = fenceListInfo.allData.length;\r\n\r\n      area.currentMap.forEach((item) => {\r\n        initArea(item);\r\n      });\r\n    }\r\n\r\n    // 只展示当前地图 电子围栏\r\n    // 获取自定义区域 - 电子围栏\r\n    async function getAllHArea() {\r\n      // eslint-disable-next-line @typescript-eslint/no-use-before-define\r\n      destroyLayer(\"area\");\r\n      const params = {\r\n        act: \"KP9NBmF37ejHCChTUhA1586415869244\",\r\n      };\r\n      const res: unknown = await stageApi.getAllHArea(params);\r\n      const { data } = res as IResponseCommon<IAreaItem[]>;\r\n      console.log(\"getAllHArea\", data);\r\n\r\n      area.all = data.map((item) => {\r\n        return {\r\n          ...item,\r\n          show: visibleObj.area,\r\n        };\r\n      }) as IAreaItem[];\r\n      getCurrentMapArea(mapIdRef.value);\r\n    }\r\n    // 获取所有报警信息\r\n    async function getAllAlarm() {\r\n      const param = {\r\n        act: \"6Z6wTPGkfMVF9eLTOXA1611040899987\",\r\n        curpage: alarmListInfo.params.curpage,\r\n        // eslint-disable-next-line @typescript-eslint/camelcase\r\n        sys_showpagesize: alarmListInfo.params.size,\r\n        ShowSceneNum: alarmListInfo.ShowSceneNum,\r\n        SourceType: alarmListInfo.SourceType,\r\n        alarmLevel: alarmListInfo.alarmLevel,\r\n        sTime: alarmListInfo.sTime,\r\n        eTime: alarmListInfo.eTime,\r\n        alarmProgress: alarmListInfo.alarmProgress,\r\n      };\r\n      const res = await commonApi.getCommonApi(param);\r\n      const { result, data } = res as any;\r\n\r\n      if (result.success) {\r\n        data.content.forEach((element: any) => {\r\n          // 开始时间\r\n          const createtime = dayjs(element.CreateTime).format(timeFormateStr);\r\n          element.CreateTime = createtime;\r\n          // 处理时间\r\n          const dealTime = dayjs(element.dealTime).format(timeFormateStr);\r\n          element.dealTime = dealTime;\r\n        });\r\n        alarmListInfo.tableData = data.content;\r\n        alarmListInfo.total = data.count;\r\n      }\r\n    }\r\n    function alarmCurrentChange() {\r\n      alarmListInfo.loading = true;\r\n      getAllAlarm();\r\n      alarmListInfo.loading = false;\r\n    }\r\n    function getAlarmListByCondition() {\r\n      alarmListInfo.params.curpage = 1;\r\n      alarmListInfo.loading = true;\r\n      alarmListInfo.sTime = alarmListInfo.timeRange ? alarmListInfo.timeRange[0] : \"\";\r\n      alarmListInfo.eTime = alarmListInfo.timeRange ? alarmListInfo.timeRange[1] : \"\";\r\n      if (alarmListInfo.timeRange) {\r\n        const sTime = alarmListInfo.timeRange[0];\r\n        const eTime = alarmListInfo.timeRange[1];\r\n        alarmListInfo.sTime = dayjs(sTime).format(timeFormateStr);\r\n        alarmListInfo.eTime = dayjs(eTime).format(timeFormateStr);\r\n      } else {\r\n        alarmListInfo.sTime = \"\";\r\n        alarmListInfo.eTime = \"\";\r\n      }\r\n      getAllAlarm();\r\n      alarmListInfo.loading = false;\r\n    }\r\n\r\n    // 打开报警处理弹框\r\n    function handleHandleAlarm(row: any) {\r\n      console;\r\n      if (row.length > 0) {\r\n        // 批量处理\r\n        let str = \"\";\r\n        alarmInfo.handleAlarmId = \"\";\r\n        row.forEach((item: any) => {\r\n          str += item.IDS + \",\";\r\n        });\r\n        // 去掉最后一个逗号\r\n        if (str.length > 0) {\r\n          str = str.substr(0, str.length - 1);\r\n        }\r\n        alarmInfo.handleAlarmIdArr = str;\r\n      } else {\r\n        alarmInfo.handleAlarmId = row.IDS;\r\n        alarmInfo.handleAlarmIdArr = \"\";\r\n      }\r\n      alarmInfo.handleVisible = true;\r\n      alarmInfo.form.handleContent = \"\";\r\n      alarmInfo.handleExampleVisible = false;\r\n    }\r\n    // 获取点击处理意见模板\r\n    function getHandleExample(row: any) {\r\n      alarmInfo.form.handleContent = row.content;\r\n      alarmInfo.handleExampleVisible = false;\r\n    }\r\n    // 报警处理提交\r\n    async function alarmHandleSubmit() {\r\n      const handleAlarmId = alarmInfo.handleAlarmId;\r\n      const handleAlarmIdArr = alarmInfo.handleAlarmIdArr;\r\n      const handleType = alarmInfo.form.handleType;\r\n      const handleContent = alarmInfo.form.handleContent;\r\n      if (handleAlarmId) {\r\n        // 处理单个报警\r\n        const params = {\r\n          sIDS: handleAlarmId,\r\n          sDealAccount: getUsername(),\r\n          sDealResult: handleContent,\r\n          sDealType: handleType,\r\n          sDealIp: \"127.0.0.1\",\r\n        };\r\n        // 提交接口\r\n        const res: unknown = await alarmApi.dealAlarmItem(params);\r\n        const { success, msg } = res as any;\r\n        if (success) {\r\n          alarmInfo.handleVisible = false;\r\n          ElMessage.success(msg);\r\n          // 获取所有报警列表\r\n          alarmListInfo.handleIds = [handleAlarmId];\r\n          alarmListInfo.tableData.forEach((item: any) => {\r\n            if (item.IDS === handleAlarmId) {\r\n              item.alarmProgress = \"已处理\";\r\n            }\r\n          });\r\n          getAllAlarm();\r\n        } else {\r\n          ElMessage.error(msg);\r\n        }\r\n      } else {\r\n        // 批量处理\r\n        const params = {\r\n          sIDSChar: handleAlarmIdArr,\r\n          sDealAccount: getUsername(),\r\n          sDealResult: handleContent,\r\n          sDealType: handleType,\r\n          sDealIp: \"127.0.0.1\",\r\n        };\r\n        // 提交接口\r\n        const res: unknown = await alarmApi.dealAlarms(params);\r\n        const { success, msg } = res as any;\r\n        if (success) {\r\n          alarmInfo.handleVisible = false;\r\n          ElMessage.success(msg);\r\n          // 获取所有报警列表\r\n          alarmListInfo.handleIds = handleAlarmIdArr.split(\",\");\r\n          alarmListInfo.tableData.forEach((item: any) => {\r\n            alarmListInfo.handleIds.forEach((val: any) => {\r\n              if (item.IDS === val) {\r\n                item.alarmProgress = \"已处理\";\r\n              }\r\n            });\r\n          });\r\n          getAllAlarm();\r\n        } else {\r\n          ElMessage.error(msg);\r\n        }\r\n      }\r\n    }\r\n    // 获取报警总数\r\n    function getAlarmTotal(total: number) {\r\n      alarmInfo.alarmTotal = total;\r\n    }\r\n    // 获取未处理报警总数\r\n    function getAlarmUnHandle(count: number) {\r\n      alarmInfo.alarmUnHandle = count;\r\n    }\r\n    // 右侧报警信息报警详情\r\n    function showAlarmDetail(row: any) {\r\n      alarmInfo.visible = true;\r\n      alarmInfo.form = row;\r\n      const { x, y } = strToPos(alarmInfo.form.SourcePointNum);\r\n      console.log(x, y);\r\n      const left = (x - (20 / 2) * 10) / 6000;\r\n      const top = (y - 20 * 10) / 3000;\r\n      alarmInfo.iconStyle.left = `${left * 100}%`;\r\n      alarmInfo.iconStyle.top = `${top * 100}%`;\r\n\r\n      console.log({\r\n        left,\r\n        top,\r\n      });\r\n    }\r\n\r\n    let cacheBgImage: Nullable<Image> = null; //缓存背景图对象\r\n    /**\r\n     * @description: 加载背景图\r\n     * @param {src}\r\n     * @return {*}\r\n     */\r\n    async function initBgImage(src: string = imgUrl + mapObj[mapIdRef.value].surl) {\r\n      console.log(\"src:\", src);\r\n\r\n      const imageDom = new window.Image();\r\n      imageDom.src = src;\r\n      imageDom.onload = async () => {\r\n        const image = new Konva.Image({\r\n          image: imageDom,\r\n          width: imageDom.width,\r\n          height: imageDom.height,\r\n          // https://konvajs.org/docs/performance/All_Performance_Tips.html 13\r\n          listening: false,\r\n        });\r\n\r\n        state.scale = Number((window.innerWidth / image.width()).toFixed(2));\r\n        scaleBoundary.minScale = state.scale;\r\n\r\n        await bgLayer.add(image);\r\n        (stage as Stage).setAttrs({\r\n          scale: {\r\n            x: state.scale,\r\n            y: state.scale,\r\n          },\r\n        });\r\n\r\n        cacheBgImage = image;\r\n\r\n        image.moveToBottom();\r\n        await batchDraw();\r\n\r\n        // 图片加载成功 才注册 stage 事件\r\n        stageEventsInit();\r\n\r\n        // eslint-disable-next-line @typescript-eslint/no-use-before-define\r\n        getAllDevice();\r\n        getAllLayer();\r\n        getAllBuild();\r\n        getAllHArea();\r\n        // 获取所有报警列表\r\n        getAllAlarm();\r\n        // eslint-disable-next-line @typescript-eslint/no-use-before-define\r\n        initLocationWs();\r\n        // eslint-disable-next-line @typescript-eslint/no-use-before-define\r\n        initAlarmWs();\r\n      };\r\n    }\r\n\r\n    // 背景图更新\r\n    function updataBgImage(mapId: string) {\r\n      const bgImageDom = new window.Image();\r\n      console.log(mapObj);\r\n      bgImageDom.src = imgUrl + mapObj[mapId].surl;\r\n      bgImageDom.onload = () => {\r\n        (cacheBgImage as Image).image(bgImageDom);\r\n        batchDraw();\r\n      };\r\n    }\r\n\r\n    async function initShape(bgSrc?: string) {\r\n      await initBgImage(bgSrc);\r\n    }\r\n\r\n    async function startInit() {\r\n      initStage();\r\n      addLayer();\r\n      initShape();\r\n    }\r\n\r\n    async function getAllMap() {\r\n      const params = {\r\n        act: \"bPxM1k2cWCeMeEIbWZV1586415800673\",\r\n      };\r\n      const res: unknown = await stageApi.getAllScene(params);\r\n\r\n      const { data } = res as IResponseCommon<IMapArrItem[]>;\r\n      console.log(\"getAllMap=>\", data);\r\n      mapListRef.value = data || [];\r\n      mapListRef.value.forEach((value) => {\r\n        mapObj[value.snum] = value;\r\n      });\r\n      // 保存所有场景信息到localStorage中\r\n      setAllScene(mapObj);\r\n      startInit();\r\n    }\r\n\r\n    // nav\r\n    const mainNavRef = ref();\r\n    function navClick(code: string) {\r\n      console.log(\"navCode=>\", code);\r\n      hideMenuList();\r\n      visibleObj.layerPerson = false;\r\n      for (const key in NAV_INFO) {\r\n        if (NAV_INFO[key].code === code) {\r\n          drawerInfo.showList = true;\r\n          drawerInfo.drawerTitle = NAV_INFO[key].title;\r\n          drawerInfo.activeName = key;\r\n          break;\r\n        }\r\n      }\r\n      // 点击电子围栏\r\n      if (FENCE.code === code) {\r\n        fenceListInfo.tableVisible = true;\r\n      }\r\n\r\n      // 点击报警管理\r\n      if (ALARM.code === code) {\r\n        alarmListInfo.tableVisible = true;\r\n      }\r\n\r\n      // 点击数据中心\r\n      if (DATAV.code === code) {\r\n        ElMessage.info(\"暂未开放\");\r\n        // router.push(\"/datav\");\r\n      }\r\n    }\r\n\r\n    function resetNavIndex() {\r\n      mainNavRef.value.resetIndex();\r\n    }\r\n\r\n    // drawer\r\n    /**\r\n     * @description: 设备模块切换设备类型\r\n     * @param {Pane} data\r\n     * @return {*}\r\n     */\r\n    function equipSwitchClick(data: Pane) {\r\n      drawerInfo.showList = true;\r\n      drawerInfo.drawerTitle = NAV_INFO[data.props.name].title;\r\n    }\r\n\r\n    // 电子围栏\r\n    const fenceInfoFormRef = ref();\r\n    // 打开电子围栏 通用\r\n    function openFenceDetail(type = 0) {\r\n      fenceInfo.visible = true;\r\n      fenceInfo.dialogType = type;\r\n      drawFenceInfo.clonePoints = [];\r\n      nextTick(() => {\r\n        (fenceInfoFormRef.value as IELForm).resetFields();\r\n        fenceInfo.form.chosenCamera = [];\r\n      });\r\n    }\r\n    // 点击新增电子围栏\r\n    function handleAddFence() {\r\n      openFenceDetail(0);\r\n    }\r\n    // 点击编辑电子围栏\r\n    let editFenceId = \"\"; // 编辑保存的id\r\n    async function handleEditFence(row: IAreaItem) {\r\n      // console.log(row);\r\n      openFenceDetail(1);\r\n      const { areaids, points, areaname } = row;\r\n      editFenceId = areaids;\r\n\r\n      const params = {\r\n        act: \"WHIHF7U1FtTjZORrI4h1611195385202\",\r\n        LayerIdS: areaids,\r\n        SceneNum: mapIdRef.value,\r\n      };\r\n      const res: unknown = await stageApi.getOnehAreaSetDeivce(params);\r\n      const { data } = res as IResponseCommon<ISetDeviceData>;\r\n\r\n      const deviceArr = JSON.parse(data.deviceitem) as ISetDeviceDataItem[];\r\n      deviceArr.forEach((item) => {\r\n        fenceInfo.form.chosenCamera.push(item.DeviceIdS);\r\n      });\r\n\r\n      fenceInfo.form.name = areaname;\r\n      drawFenceInfo.clonePoints = JSON.parse(points);\r\n    }\r\n    // 触发绘制电子围栏\r\n    function handleFenceDraw() {\r\n      // 隐藏两个dialog\r\n      fenceInfo.visible = false;\r\n      fenceListInfo.tableVisible = false;\r\n\r\n      // 绘制\r\n      drawFenceInfo.message = ElMessage({\r\n        showClose: true,\r\n        message: \"鼠标单击左键新增点，右键可完成绘制\",\r\n        type: \"warning\",\r\n        duration: 0,\r\n      });\r\n\r\n      drawFenceInfo.points = [];\r\n      status.isDrawFence = true;\r\n    }\r\n\r\n    // 新增/编辑 电子围栏 提交按钮点击事件\r\n    function handleSubmitFence() {\r\n      (fenceInfoFormRef.value as IELForm).validate(async (valid: boolean) => {\r\n        if (valid) {\r\n          const chooseDevice: ISetDeviceDataItem[] = fenceInfo.form.chosenCamera.map(\r\n            (item: string) => {\r\n              const index = fenceInfo.allMapCamera.findIndex((i) => i.dids === item);\r\n              return {\r\n                DeviceIdS: item,\r\n                DeviceType: fenceInfo.allMapCamera[index].dname,\r\n              };\r\n            }\r\n          );\r\n          const params: IAddEditFenceParams = {\r\n            act: \"i9YWieOBzym06JamZtI1586422307190\",\r\n            LayerIdS: fenceInfo.dialogType === 0 ? guid() : editFenceId,\r\n            SceneNum: mapIdRef.value,\r\n            CheckSourceID: JSON.stringify(\r\n              drawFenceInfo.clonePoints.map((item) => ({ X: item.x, Y: item.y }))\r\n            ),\r\n            DevicePointRelation:\r\n              fenceInfo.form.chosenCamera.length === 0\r\n                ? \"\"\r\n                : JSON.stringify(chooseDevice),\r\n            CheckSourceUnitName: fenceInfo.form.name,\r\n          };\r\n          const res: unknown = await stageApi.saveHArea(params);\r\n          const { result } = res as IResponseCommon<string>;\r\n          if (result.msg === \"操作成功\") {\r\n            ElMessage.success(result.msg);\r\n            fenceInfo.visible = false;\r\n            getAllHArea();\r\n          }\r\n        }\r\n      });\r\n    }\r\n\r\n    // 删除 电子围栏\r\n    async function handleDelFence(row: IAreaItem) {\r\n      const { areaids } = row;\r\n      const params = {\r\n        act: \"mYfPMH51aE2FMOzxiFd1586422236651\",\r\n        LayerIdS: areaids,\r\n        SceneNum: mapIdRef.value,\r\n      };\r\n      const res: unknown = await stageApi.delHArea(params);\r\n      console.log(res);\r\n      const { result } = res as IResponseCommon<string>;\r\n      if (result.msg) {\r\n        ElMessage.success(result.msg);\r\n        getAllHArea();\r\n      }\r\n    }\r\n\r\n    async function getRules(id: string) {\r\n      ruleListInfo.loading = true;\r\n      const params = {\r\n        act: \"N71kyUJz3OiP2MOZ6Ea1586415957754\",\r\n        LayerIdS: id,\r\n        SceneNum: mapIdRef.value,\r\n      };\r\n      const res: unknown = await stageApi.getRule(params);\r\n      const { data } = res as IResponseCommon<IRuleItem[]>;\r\n      ruleListInfo.allData = data.map((item) => ({\r\n        ...item,\r\n        labelType: formateRuleType(item.ptype),\r\n        loop: item.isloop ? \"是\" : \"否\",\r\n      }));\r\n      ruleListInfo.tableData = getPagination(ruleListInfo.allData, ruleListInfo.curpage);\r\n      ruleListInfo.total = data.length || 0;\r\n      console.log(data);\r\n      ruleListInfo.loading = false;\r\n    }\r\n\r\n    function ruleCurrentChange(page: number) {\r\n      ruleListInfo.loading = true;\r\n      ruleListInfo.tableData = getPagination(ruleListInfo.allData, page);\r\n      ruleListInfo.loading = false;\r\n    }\r\n\r\n    let editPoints = \"\";\r\n    let layerId = \"\"; // 区域编号\r\n    let layerName = \"\"; // 区域名称\r\n    async function handleSeeRules(row: IAreaItem) {\r\n      ruleListInfo.visiable = true;\r\n      const { areaids, points, areaname } = row;\r\n      editPoints = points;\r\n      layerId = areaids;\r\n      layerName = areaname;\r\n      getRules(areaids);\r\n    }\r\n\r\n    function fenceCurrentChange(page: number) {\r\n      fenceListInfo.loading = true;\r\n      fenceListInfo.tableData = getPagination(fenceListInfo.allData, page);\r\n      fenceListInfo.loading = false;\r\n    }\r\n\r\n    function openRule(type = 0) {\r\n      ruleItemDetail.visiable = true;\r\n      ruleItemDetail.dialogType = type;\r\n      ruleItemDetail.form.name = layerName;\r\n      ruleItemDetail.form.memo = \"\";\r\n      ruleItemDetail.form.isLoop = false;\r\n      ruleItemDetail.form.limitedTime = \"\";\r\n      ruleItemDetail.form.startTime = \"\";\r\n      ruleItemDetail.form.endTime = \"\";\r\n      ruleItemDetail.form.permitType = \"\";\r\n      nextTick(() => {\r\n        // ! 无效\r\n        // (ruleFormRef.value as IELForm).resetFields();\r\n        (ruleFormRef.value as IELForm).clearValidate();\r\n      });\r\n    }\r\n    // 新增规则\r\n    function handleAddRule() {\r\n      openRule(0);\r\n      nextTick(() => {\r\n        console.log(ruleItemDetail.form);\r\n      });\r\n    }\r\n    let ruleId = 0; // 编辑\r\n    async function handleEditRule(row: IRuleItem) {\r\n      openRule(1);\r\n      const { stime, ptype, memo, id, etime, isloop, limtime } = row;\r\n      ruleId = id;\r\n\r\n      const { startTime, endTime } = await getDateTime(isloop, stime, etime);\r\n\r\n      ruleItemDetail.form.memo = memo;\r\n      ruleItemDetail.form.isLoop = isloop;\r\n      ruleItemDetail.form.limitedTime = String(limtime);\r\n      ruleItemDetail.form.startTime = startTime;\r\n      ruleItemDetail.form.endTime = endTime;\r\n      ruleItemDetail.form.permitType = String(ptype);\r\n      console.log(ruleItemDetail.form);\r\n\r\n      // ? 有问题\r\n      // const obj = {\r\n      //   memo,\r\n      //   isLoop: isloop,\r\n      //   limitedTime: limtime,\r\n      //   startTime,\r\n      //   endTime,\r\n      //   permitType: String(ptype),\r\n      // };\r\n      //  Object.assign(ruleItemDetail.form, obj);\r\n    }\r\n\r\n    // 新增/编辑 规则 提交按钮点击事件\r\n    function handleSubmitRule() {\r\n      (ruleFormRef.value as IELForm).validate(async (valid: boolean) => {\r\n        if (valid) {\r\n          const {\r\n            memo,\r\n            isLoop,\r\n            limitedTime,\r\n            startTime,\r\n            endTime,\r\n            permitType,\r\n          } = ruleItemDetail.form;\r\n\r\n          const formateTime = (loop: boolean, time1: Date, time2: Date) => {\r\n            const formateStr = loop ? Hms : timeFormateStr;\r\n\r\n            return {\r\n              StartTime: dayjs(time1).format(formateStr),\r\n              EndTime: dayjs(time2).format(formateStr),\r\n            };\r\n          };\r\n\r\n          const { StartTime, EndTime } = formateTime(\r\n            isLoop,\r\n            startTime as Date,\r\n            endTime as Date\r\n          );\r\n\r\n          const params = {\r\n            act: \"QRZNk8BItBSJTT0ikWT1586422170736\",\r\n            LayerIdS: layerId,\r\n            SceneNum: mapIdRef.value,\r\n            ID: ruleItemDetail.dialogType === 0 ? 0 : ruleId,\r\n            CheckSourceUnitName: layerName,\r\n            CheckSourceID: editPoints,\r\n            Memo: memo,\r\n            RuleLocateType: 2,\r\n            PermitType: permitType,\r\n            IsLoopEveryDay: isLoop,\r\n            OwnUserType: \"0,8\",\r\n            OwnParam: \"\",\r\n            LimitedTime: limitedTime || \"0\",\r\n            StartTime,\r\n            EndTime,\r\n          };\r\n          const res: unknown = await stageApi.saveRule(params);\r\n          const { result } = res as IResponseCommon<string>;\r\n          if (result.msg) {\r\n            ElMessage.success(result.msg);\r\n            ruleItemDetail.visiable = false;\r\n            getRules(layerId);\r\n          }\r\n        }\r\n      });\r\n    }\r\n\r\n    // 删除某场景某个自定义区域中的某条规则\r\n    async function handleDelRule(row: IRuleItem) {\r\n      const { id } = row;\r\n      const params = {\r\n        act: \"nBpfTKDXs2nDV7y4dT41586415983980\",\r\n        LayerIdS: layerId,\r\n        SceneNum: mapIdRef.value,\r\n        ID: id,\r\n      };\r\n      const res: unknown = await stageApi.delRule(params);\r\n      const { result } = res as IResponseCommon<string>;\r\n      if (result.msg) {\r\n        ElMessage.success(result.msg);\r\n        getRules(layerId);\r\n      }\r\n    }\r\n\r\n    /**\r\n     * 查看基站/摄像头/标签详情\r\n     */\r\n    function showEquipDetails(data: any, type: string) {\r\n      visibleObj.detailsForm = true;\r\n      detailsForm.formTitle = getFormTitle(type);\r\n      detailsForm.formData = data;\r\n      detailsForm.x = 0;\r\n      detailsForm.y = 0;\r\n      contextmenuTypeRef.value = type;\r\n    }\r\n\r\n    function showDetails(type: string = contextmenuTypeRef.value) {\r\n      visibleObj.detailsForm = false;\r\n      detailsForm.formTitle = getFormTitle(contextmenuTypeRef.value);\r\n      console.log(type);\r\n      if (type === TYPES.labelList) {\r\n        // 人员 -> 页面上移动的标签\r\n        contextmenuTypeRef.value = TYPES.person;\r\n        detailsForm.formTitle = \"人员\";\r\n        console.log(\"activeTarget\", activeTarget);\r\n        const index = person.currentMap.findIndex(\r\n          (item) => item.TagId === activeTarget.attrs.id\r\n        );\r\n        if (index > -1) {\r\n          const personItem = person.currentMap[index];\r\n          console.log(\"personItem\", personItem);\r\n          detailsForm.formData = Object.assign(\r\n            {},\r\n            {\r\n              Username: personItem.name,\r\n              DeviceName: personItem.TagId,\r\n              // eslint-disable-next-line @typescript-eslint/camelcase\r\n              Personnel_category: \"\",\r\n              Position: \"\",\r\n              Fettle: \"\",\r\n            }\r\n          );\r\n          // 获取全部人员\r\n        } else {\r\n          ElMessage.info(\"该用户已下线\");\r\n        }\r\n      } else if (type === TYPES.camera || type === TYPES.basestation) {\r\n        const index = deviceAll.findIndex(\r\n          (item) => item.dids === activeTarget.attrs.name\r\n        );\r\n        console.log(\"camera || basestation\", deviceAll[index], index);\r\n        detailsForm.formData = deviceAll[index];\r\n        detailsForm.x = activeTarget.attrs.x;\r\n        detailsForm.y = activeTarget.attrs.y;\r\n        if (type === TYPES.camera) {\r\n          // 摄像头\r\n          const deviceInfo = JSON.parse(deviceAll[index].extinfo) as IDeviceInfo;\r\n          const { ChanelNum, IsYunTai, Password, UserName } = deviceInfo;\r\n          Object.assign(detailsForm.formData, {\r\n            ChanelNum,\r\n            IsYunTai,\r\n            Password,\r\n            UserName,\r\n          });\r\n        } else {\r\n          // 基站\r\n        }\r\n\r\n        // console.log(\"cameraInfo\", deviceInfo);\r\n      }\r\n\r\n      visibleObj.detailsForm = true;\r\n    }\r\n\r\n    /**\r\n     * @description: 调取实时监控 lfq\r\n     * @param {*} id\r\n     * @return {*}\r\n     */\r\n    async function popMonitorVideo(id: string | number) {\r\n      const params = {\r\n        act: \"fCGtP4nXdRZjr6TYeiN1611196242913\",\r\n        DeviceIdS: id,\r\n      };\r\n      const res: unknown = await commonApi.getCommonApi(params);\r\n      const { result, data } = res as any;\r\n      if (result.success) {\r\n        const active = true;\r\n        monitorListInfo.newMonitorList.push({\r\n          camera: data[0][0],\r\n          active: active,\r\n        });\r\n        monitorListInfo.monitorListFlag = true;\r\n      } else {\r\n        ElMessage.error(\"调取监控失败\");\r\n      }\r\n    }\r\n\r\n    /**\r\n     * @description: 调取历史监控 lfq\r\n     * @param {*} id\r\n     * @return {*}\r\n     */\r\n    async function popHistoryMonitorVideo(id: string | number) {\r\n      const params = {\r\n        act: \"fCGtP4nXdRZjr6TYeiN1611196242913\",\r\n        DeviceIdS: id,\r\n      };\r\n      const res: unknown = await commonApi.getCommonApi(params);\r\n\r\n      const { result, data } = res as any;\r\n      if (result.success) {\r\n        const active = true;\r\n        monitorListInfo.newHistoryMonitorList.push({\r\n          camera: data[0][0],\r\n          active: active,\r\n        });\r\n        monitorListInfo.historyMonitorListFlag = true;\r\n      } else {\r\n        ElMessage.error(\"调取历史监控失败\");\r\n      }\r\n    }\r\n\r\n    /**\r\n     * @description: 查看实时视频 lfq\r\n     * @param {*}\r\n     * @return {*}\r\n     */\r\n    function seeNowVideo(id?: string | number) {\r\n      const cid = id ? id : activeTarget.attrs.name;\r\n      popMonitorVideo(cid);\r\n      visibleObj.monitorListFlag = true;\r\n    }\r\n\r\n    // 关闭所有视频\r\n    function handleCloseAllVideo() {\r\n      monitorListInfo.newMonitorList.splice(0, monitorListInfo.newMonitorList.length);\r\n      visibleObj.monitorListFlag = false;\r\n      clearShadowColor();\r\n    }\r\n\r\n    // 关闭所有历史回放视频\r\n    function handleCloseAllHistoryVideo() {\r\n      monitorListInfo.newHistoryMonitorList.splice(\r\n        0,\r\n        monitorListInfo.newHistoryMonitorList.length\r\n      );\r\n      visibleObj.historyMonitorListFlag = false;\r\n      clearShadowColor();\r\n    }\r\n\r\n    /**\r\n     * @description: 查看历史视频 lfq\r\n     * @param {*}\r\n     * @return {*}\r\n     */\r\n    function seeHistoryVideo(id?: string | number) {\r\n      const cid = id ? id : activeTarget.attrs.name;\r\n      popHistoryMonitorVideo(cid);\r\n      visibleObj.historyMonitorListFlag = true;\r\n    }\r\n\r\n    /**\r\n     * @description: 监控列表 lfq\r\n     * @param {*} id\r\n     * @return {*}\r\n     */\r\n    function watchMonitorListPanelState(id: string | number) {\r\n      const index = monitorListInfo.newMonitorList.findIndex(\r\n        (item) => item.camera.id === id\r\n      );\r\n      monitorListInfo.newMonitorList[index].active = false;\r\n    }\r\n\r\n    /**\r\n     * @description: 历史监控列表 lfq\r\n     * @param {*} id\r\n     * @return {*}\r\n     */\r\n    function watchHistoryMonitorListPanelState(id: string | number) {\r\n      monitorListInfo.newHistoryMonitorList.forEach((value: any) => {\r\n        if (id === value.camera.id) {\r\n          value.active = false;\r\n        }\r\n      });\r\n    }\r\n    // ? 是否可抽离成组件\r\n    const trackPlaybackFormRef = ref(); // 轨迹回放的选择时间 form\r\n    function handleClickTrackPlayback() {\r\n      trackPlayback.show = true;\r\n    }\r\n    // 轨迹回放弹窗打开清空数据\r\n    function handleOpenContextmenu() {\r\n      clearShadowColor();\r\n      (trackPlaybackFormRef.value as IELForm).resetFields();\r\n    }\r\n\r\n    function handleClickSeeTrackPlayback() {\r\n      (trackPlaybackFormRef.value as IELForm).validate(async (valid: boolean) => {\r\n        if (valid) {\r\n          const { sTime, eTime } = getTrackTime(\r\n            trackPlayback.form.date as Date,\r\n            trackPlayback.form.time\r\n          );\r\n          console.log({ sTime, eTime });\r\n          console.log(cachePersonObj[activeTarget.attrs.id]);\r\n          const index = person.currentMap.findIndex(\r\n            (item) => item.TagId === activeTarget.attrs.id\r\n          );\r\n          const personItem = person.currentMap[index];\r\n          console.log(personItem);\r\n          const params = {\r\n            act: \"IFO7HGpIsXDYz62Y0rx1611632994969\",\r\n            PersonnelgId: personItem.ObjData.BindObjSysNum,\r\n            sTime,\r\n            eTime,\r\n          };\r\n          const res: unknown = await commonApi.getCommonApi(params);\r\n          const { data } = res as IResponseCommon<TTrackRes>;\r\n          console.log(\"轨迹回放返回值\", data);\r\n          if (data.length === 0) {\r\n            ElMessage.info(\"该时间段没有运动轨迹\");\r\n          } else {\r\n            if ((data[0] as any).Text) {\r\n              const r = data as ITrackErrorItem[];\r\n              ElMessage.error(r[0].Text);\r\n            } else {\r\n              trackPlayback.steps = data as ITrackItem[];\r\n              trackPlayback.show = false;\r\n              // 动画\r\n              const index = person.currentMap.findIndex(\r\n                (item) => item.TagId === activeTarget.attrs.id\r\n              );\r\n              if (index > -1) {\r\n                const len = trackPlayback.steps.length;\r\n                playbackObj.len = len;\r\n                const sTime = dayjs(trackPlayback.steps[0].LocateTriggerTime).format(Hms);\r\n                const eTime = dayjs(\r\n                  trackPlayback.steps[len - 1].LocateTriggerTime\r\n                ).format(Hms);\r\n                playbackObj.sTime = sTime;\r\n                playbackObj.eTime = eTime;\r\n                initPerson(person.currentMap[index], 1);\r\n              }\r\n            }\r\n          }\r\n        }\r\n      });\r\n    }\r\n    let playRate = 1.0;\r\n    function changeRate(rate: string) {\r\n      playRate = Number(rate);\r\n    }\r\n    function togglePlay(isPlay: boolean) {\r\n      playbackObj.isPlay = isPlay;\r\n      if (isPlay) {\r\n        trackPlayback.tween.play();\r\n      } else {\r\n        trackPlayback.tween.pause();\r\n      }\r\n    }\r\n    // 更新轨迹回放中的点 防止点过多\r\n    function updatePoint(index: number) {\r\n      trackPlaybackLinePos = [];\r\n      const steps = cloneDeep(trackPlayback.steps).splice(0, index);\r\n\r\n      steps.forEach((item) => {\r\n        const { x, y } = strToPos(item.LocatePoint);\r\n        trackPlaybackLinePos.push(x + personImageWH.width / 2, y + personImageWH.height);\r\n      });\r\n    }\r\n    /** 用户点击进度条位置 */\r\n    function changeProcess(index: number) {\r\n      playbackObj.currentIndex = index;\r\n      // 线\r\n      // 先清空\r\n      trackPlaybackLinePos = [];\r\n\r\n      // 拿到前面运动的点\r\n      if (index !== 0) {\r\n        updatePoint(index);\r\n      }\r\n\r\n      togglePlay(true);\r\n    }\r\n\r\n    // 结束轨迹回放\r\n    function playbackClose() {\r\n      trackPlayback.tween = null;\r\n      trackPlayback.message?.close();\r\n      trackPlayback.steps = [];\r\n      trackPlayback.lineNode?.destroy();\r\n      trackPlaybackLinePos = [];\r\n      cachePlaybackPerson?.destroy();\r\n      status.isPlayBack = false;\r\n    }\r\n\r\n    // 绘制轨迹回放的线\r\n    function initMoveLine() {\r\n      trackPlayback.lineNode?.destroy();\r\n      trackPlayback.lineNode = new Konva.Line({\r\n        points: trackPlaybackLinePos,\r\n        stroke: \"rgba(0,0,0,.8)\",\r\n        strokeWidth: 3,\r\n        lineCap: \"round\",\r\n        lineJoin: \"round\",\r\n        name: \"moveLine\",\r\n      });\r\n      operationLayer.add(trackPlayback.lineNode);\r\n      trackPlayback.lineNode.moveToTop();\r\n      trackPlayback.lineNode.moveDown();\r\n      batchDraw();\r\n    }\r\n\r\n    // 轨迹回放动画\r\n    async function trackPlaybackTween(node: any, steps: ITrackItem[]) {\r\n      // 手动结束判断\r\n      if (!status.isPlayBack) {\r\n        return;\r\n      }\r\n      // 判断轨迹回放是否结束\r\n      if (steps.length - 1 === playbackObj.currentIndex) {\r\n        playbackObj.isPlay = false;\r\n        ElMessage.success(\"轨迹回放结束\");\r\n        return;\r\n      }\r\n\r\n      const { SceneNum } = steps[0];\r\n\r\n      const animate = () => {\r\n        const { LocatePoint, LocateTriggerTime } = steps[\r\n          playbackObj.currentIndex\r\n        ] as ITrackItem;\r\n        playbackObj.currentTime = LocateTriggerTime.replace(\"T\", \" \");\r\n        playbackObj.currentIndex++;\r\n        const { x, y } = strToPos(LocatePoint);\r\n        trackPlayback.tween = new Konva.Tween({\r\n          node,\r\n          duration: 0.2 / playRate,\r\n          x,\r\n          y,\r\n          onUpdate: () => {\r\n            const moveX = node.x() + personImageWH.width / 2;\r\n            const moveY = node.y() + personImageWH.height;\r\n            trackPlaybackLinePos.push(moveX, moveY);\r\n            // trackPlaybackLinePos.push(node.x(), node.y());\r\n            // 5 个点产生了204 / 2 个坐标\r\n            initMoveLine();\r\n          },\r\n          onFinish: () => {\r\n            updatePoint(playbackObj.currentIndex);\r\n            trackPlaybackTween(node, steps);\r\n            node.moveToTop();\r\n          },\r\n        });\r\n        trackPlayback.tween.play();\r\n      };\r\n\r\n      if (SceneNum === mapIdRef.value) {\r\n        animate();\r\n      } else {\r\n        ElMessage.info(\"检测到当前人物的初始位置不在该页面中，正在切换中...\");\r\n        // eslint-disable-next-line @typescript-eslint/no-use-before-define\r\n        await changeMap(SceneNum);\r\n        await trackPlaybackTween(node, steps);\r\n      }\r\n    }\r\n\r\n    const followObj = reactive({\r\n      message: null as any,\r\n    });\r\n    // 实时跟踪人员 tagId\r\n    let followPersonId = \"-1\";\r\n    function personFollow() {\r\n      const index = person.currentMap.findIndex(\r\n        (item) => item.TagId === activeTarget.attrs.id\r\n      );\r\n      if (index > -1) {\r\n        const personItem = person.currentMap[index];\r\n        status.isFollowing = true;\r\n        followPersonId = activeTarget.attrs.id;\r\n        cacheFollowingPerson = currentContextmenu;\r\n        followObj.message = ElMessage({\r\n          type: \"warning\",\r\n          message: `${personItem.name}实时跟踪中...`,\r\n          duration: 0,\r\n        });\r\n      } else {\r\n        followPersonId = \"-1\";\r\n        ElMessage.info(\"该用户已下线\");\r\n      }\r\n    }\r\n\r\n    // 左侧边栏\r\n    const leftPannelSearch = shallowRef<string>(\"\");\r\n    // 用户搜索显示的数据 layer + 标签（人员）\r\n    const userSearchRes = ref<any[]>([]);\r\n    // 所有集合\r\n    const allSearchArr = ref<any[]>([]);\r\n    // 过滤出的 基站 和 摄像头 由图层过滤\r\n    const searchDevice = computed(() => {\r\n      return allLayer.value.filter((item) => !item.ltype.includes(\"标注\"));\r\n    });\r\n\r\n    watch(\r\n      [() => searchDevice.value.length,()=>person.all.length],\r\n      () => {\r\n        allSearchArr.value = [...searchDevice.value, ...person.all];\r\n        // eslint-disable-next-line @typescript-eslint/no-use-before-define\r\n        querySearch(leftPannelSearch.value);\r\n      }\r\n    );\r\n\r\n    async function getAllDevice() {\r\n      const params = {\r\n        act: \"Vd95kIrsbON1Z6H27eM1586422577340\",\r\n        TypeCodeChar: \"\",\r\n      };\r\n      const res: unknown = await stageApi.getAllDevice(params);\r\n\r\n      const { data } = res as IResponseCommon<IDeviceItem[]>;\r\n      console.log(\"getAllDevice\", data);\r\n\r\n      deviceAll = data || [];\r\n\r\n      fenceInfo.allMapCamera = getAllMapCamera();\r\n      console.log(fenceInfo.allMapCamera);\r\n\r\n      // 保存所有设备信息到localStorage中\r\n      setAllDevice(deviceAll);\r\n    }\r\n\r\n    function querySearch(name: string) {\r\n      if (name !== \"\" && name !== null) {\r\n        // allSearchArr.value = [...searchDevice.value, ...person.all];\r\n        // console.log(allSearchArr.value)\r\n        userSearchRes.value = allSearchArr.value.filter((item) =>\r\n          item.ltype.includes(name)\r\n        );\r\n      } else {\r\n        userSearchRes.value = allSearchArr.value;\r\n      }\r\n    }\r\n\r\n    // 左侧边栏 switch change 事件\r\n    function controlButtonChange(newVal: boolean, code: string) {\r\n      if (code === \"nav\") {\r\n        visibleObj.nav = newVal;\r\n      }\r\n\r\n      if (code === \"camera\") {\r\n        Object.keys(cacheCameraObj).forEach((key) => {\r\n          cacheCameraObj[key].visible(newVal);\r\n          batchDraw();\r\n        });\r\n      }\r\n      if (code === \"basestation\") {\r\n        Object.keys(cacheBasestationObj).forEach((key) => {\r\n          cacheBasestationObj[key].visible(newVal);\r\n          batchDraw();\r\n        });\r\n      }\r\n\r\n      if (code === \"map\") {\r\n        visibleObj.map = newVal;\r\n      }\r\n    }\r\n\r\n    function closeMapChoosen() {\r\n      visibleObj.map = false;\r\n      const index = controlButtonList.findIndex((item) => item.code === \"map\");\r\n      controlButtonList[index].show = false;\r\n    }\r\n\r\n    function changeMap(mapId: string) {\r\n      console.log(\"mapId\", mapId);\r\n\r\n      if (mapId === mapListRef.value[0].snum) {\r\n        router.push(\"/3d\");\r\n        return;\r\n      }\r\n      if (mapIdRef.value === mapId) {\r\n        return;\r\n      }\r\n      mapIdRef.value = mapId;\r\n      // 1. 背景图更新\r\n      updataBgImage(mapId);\r\n      // 2. 所有绘制的 shape 销毁，重新绘制新的 getAllLayer() 函数\r\n      // eslint-disable-next-line @typescript-eslint/no-use-before-define\r\n      destroyLayer();\r\n      // 2.1 摄像头\r\n      getCurrentMapCamera(mapId);\r\n      // 2.2 基站\r\n      getCurrentMapBasestation(mapId);\r\n      // 2.3 气泡\r\n      getCurrentMapBubble(mapId);\r\n      // 2.4 电子围栏\r\n      getCurrentMapArea(mapId);\r\n      // 2.5 人员\r\n      getCurrentMapPerson(mapId);\r\n      // 2.6 操作图层\r\n      operationLayer.destroyChildren();\r\n      setLoadSNum(mapId);\r\n    }\r\n\r\n    // 左侧边栏 全局搜索\r\n    async function searchChange(e: string) {\r\n      console.log(e);\r\n      if (!e) return;\r\n      const index = userSearchRes.value.findIndex((item) => e === item.lids);\r\n\r\n      // 防止用户下线的情况\r\n      if (index > -1) {\r\n        console.log(userSearchRes.value[index]);\r\n        const searchItem = userSearchRes.value[index];\r\n        const mapNum = searchItem.map ? searchItem.map : searchItem.snum;\r\n\r\n        if (mapNum === mapIdRef.value) {\r\n          const { x, y } = locateIcon({ x: searchItem.x, y: searchItem.y });\r\n          console.log({ x, y });\r\n          (stage as Stage).setAttrs({\r\n            x: x * state.scale,\r\n            y: y * state.scale - titleHeight,\r\n          });\r\n          // todo 高亮 分类型：人员 | layer\r\n          batchDraw();\r\n          console.log({ x: (stage as Stage).x(), y: (stage as Stage).y() });\r\n        } else {\r\n          ElMessageBox.confirm(\"选中的目标不在当前地图，是否跳转？\", \"提示\", {\r\n            confirmButtonText: \"确定\",\r\n            cancelButtonText: \"取消\",\r\n            type: \"info\",\r\n          })\r\n            .then(() => {\r\n              changeMap(mapNum);\r\n            })\r\n            .catch((err) => {\r\n              ElMessage.info(\"已取消跳转\");\r\n              console.error(err);\r\n\r\n              leftPannelSearch.value = \"\";\r\n            });\r\n        }\r\n      } else {\r\n        leftPannelSearch.value = \"\";\r\n        ElMessage.info(\"该用户已下线\");\r\n      }\r\n    }\r\n\r\n    // ws 相关\r\n    let locationWs: Nullable<WebSocket> = null;\r\n    function initLocationWs() {\r\n      const url = wsUrl.location;\r\n      locationWs = new WebSocket(url);\r\n      locationWs.onmessage = async (event) => {\r\n        const data = JSON.parse(event.data);\r\n        if (data.ActionCode === EpauletActionCode.HTagInit) {\r\n          console.log(\"init\", data.Data);\r\n          person.all = (data.Data as IPersonArrItem[]).map((item) =>\r\n            generatePersonItem(item)\r\n          );\r\n\r\n          getCurrentMapPerson(mapIdRef.value);\r\n        }\r\n\r\n        if (data.ActionCode === EpauletActionCode.HTagOnline) {\r\n          const personData = data.Data as IPersonArrItem;\r\n          // 判断上线的人是否存在\r\n          const isIn = person.all.some((item) => item.TagId === personData.TagId);\r\n          if (isIn) return;\r\n          const posItem = generatePersonItem(personData);\r\n          person.all.push(posItem);\r\n          if (mapIdRef.value === personData.LocationSceneId) {\r\n            person.currentMap.push(posItem);\r\n            initPerson(posItem);\r\n          }\r\n          ElMessage.info(`${posItem.name}上线`);\r\n        }\r\n\r\n        if (\r\n          data.ActionCode === EpauletActionCode.HTagOffline ||\r\n          data.ActionCode === EpauletActionCode.HTagLogOff\r\n        ) {\r\n          // 下线返的只有 TagId 有数据\r\n          const personItem = data.Data as IPersonArrItem;\r\n          // console.log(\"下线data=>\", personItem);\r\n\r\n          const index = person.all.findIndex((item) => item.TagId === personItem.TagId);\r\n          if (index > -1) {\r\n            if (person.all[index].map === mapIdRef.value) {\r\n              const currntMapIndex = person.currentMap.findIndex(\r\n                (item) => item.TagId === personItem.TagId\r\n              );\r\n              if (currntMapIndex > -1) {\r\n                person.currentMap.splice(currntMapIndex, 1);\r\n                const node = cachePersonObj[personItem.TagId];\r\n                if (\r\n                  personItem.TagId ===\r\n                  ((cacheFollowingPerson as Group)?.children[0] as Shape).attrs.id\r\n                ) {\r\n                  status.isFollowing = false;\r\n                  ElMessage.info(\"该用户已下线，轨迹跟踪结束\");\r\n                }\r\n                node?.destroy();\r\n                delete cachePersonObj[personItem.TagId];\r\n                batchDraw();\r\n              }\r\n            }\r\n            const name = person.all[index].name;\r\n            person.all.splice(index, 1);\r\n            if (data.ActionCode === EpauletActionCode.HTagOffline) {\r\n              ElMessage.info(`${name}下线`);\r\n            }\r\n          }\r\n        }\r\n\r\n        if (data.ActionCode === EpauletActionCode.HTagMove) {\r\n          const personItem = data.Data as IPersonArrItem;\r\n          const posObj = generatePersonItem(personItem);\r\n          // 判断所有人中是否有当前人物\r\n          const index = person.all.findIndex((item) => item.TagId === posObj.TagId);\r\n\r\n          // const { x: bx, y: by } = person.all[index];\r\n          if (index > -1) {\r\n            // x,y 不变啥也不做\r\n            const item = person.all[index];\r\n            if (item.x === posObj.x && item.y === posObj.y) {\r\n              return;\r\n            }\r\n            Object.assign(item, posObj);\r\n          }\r\n\r\n          // 判断是否是当前地图\r\n          if (personItem.LocationSceneId === mapIdRef.value) {\r\n            const node = cachePersonObj[personItem.TagId];\r\n            node?.to({\r\n              x: posObj.x,\r\n              y: posObj.y,\r\n              duration: 0.2,\r\n            });\r\n            // 判断实时跟踪\r\n            if (status.isFollowing && followPersonId === posObj.TagId) {\r\n              const gx = -(posObj.x * state.scale - window.innerWidth / 2);\r\n              const gy = -(\r\n                posObj.y * state.scale -\r\n                (window.innerHeight - titleHeight) / 2\r\n              );\r\n              (stage as Stage).setAttrs({\r\n                x: gx,\r\n                y: gy,\r\n              });\r\n            }\r\n            batchDraw();\r\n          }\r\n        }\r\n\r\n        if (data.ActionCode === EpauletActionCode.HLayerGroupStatistics) {\r\n          // console.log(\"HLayerGroupStatistics\", data.Data);\r\n          const list = (data.Data as IBubbleDataItem[]) || [];\r\n          list.forEach((item, index: number) => {\r\n            cacheBubbleObj[item.LayerIdS].text[index].text(\r\n              String(item.TagDataList.length || 0)\r\n            );\r\n            cacheBubbleObj[item.LayerIdS].tagList[index] = item.TagDataList || [];\r\n          });\r\n          batchDraw();\r\n        }\r\n\r\n        if (data.ActionCode === EpauletActionCode.HWaterAlarm) {\r\n          console.log(\"落水报警\", data.Data);\r\n        }\r\n        if (data.ActionCode === EpauletActionCode.HSceneStatistics) {\r\n          // console.log(\"每个地图人员数据\", data.Data);\r\n          data.Data.forEach((item: any, index: number) => {\r\n            mapListRef.value[index].pnum = item.TagDataList.length || 0;\r\n          });\r\n        }\r\n      };\r\n\r\n      locationWs.onclose = () => {\r\n        //\r\n      };\r\n    }\r\n    let alarmWs: Nullable<WebSocket> = null;\r\n    const wsAlarmItem = shallowRef<Nullable<IGetAlarmItem>>(null);\r\n    const cancelAlarmId = shallowRef<string>(\"\");\r\n    function initAlarmWs() {\r\n      const url = wsUrl.alarm;\r\n      alarmWs = new WebSocket(url);\r\n      alarmWs.onmessage = async (event) => {\r\n        const data = JSON.parse(event.data);\r\n        // console.log(\"报警数据=>\", data);\r\n        const getData = JSON.parse(data.data);\r\n        // 收到报警\r\n        if (data.actcode === wsAlarmType.getAlarm) {\r\n          const res = getData as IGetAlarmItem;\r\n          // console.log(\"收到报警数据\", res);\r\n          wsAlarmItem.value = res;\r\n          ElMessage.info(\"有新的报警，请及时处理\");\r\n          if (warningWidth.value === warningListWidth) {\r\n            warningWidth.value = \"0\";\r\n          }\r\n        }\r\n\r\n        // 取消报警\r\n        if (data.actcode === wsAlarmType.cancelAlarm) {\r\n          const res = getData as string;\r\n          // console.log(\"收到取消报警数据\", res);\r\n          cancelAlarmId.value = res;\r\n        }\r\n      };\r\n    }\r\n\r\n    function showWarningList() {\r\n      warningWidth.value =\r\n        warningWidth.value !== warningListWidth ? warningListWidth : \"0\";\r\n    }\r\n\r\n    async function getAllAlarmType() {\r\n      const params = {\r\n        act: \"E83yVQOUUMYKt6jRYRI1586428010174\",\r\n      };\r\n      const res: unknown = await alarmApi.getAllAlarmType(params);\r\n      const { data } = res as IResponseCommon<IAlarmType[]>;\r\n      alarmType.value = data.map((item) => ({\r\n        label: item.alarmtype,\r\n        value: item.alarmtype,\r\n      })) as ISelectOption[];\r\n    }\r\n\r\n    /**\r\n     * @description: 电子围栏 点击列中 切换 显示\r\n     * @param {*} show 切换后的值\r\n     * @param {*} areaids 区域id\r\n     * @return {*}\r\n     */\r\n    function changeAreaVisible(show: boolean, areaids: string) {\r\n      // 找到当前视图中的 绘制区域\r\n      const group = cacheAreaObj[areaids];\r\n      group.visible(show);\r\n      // 测试了其他的是指向类型 不用手动更新\r\n      batchDraw();\r\n      ElMessage.success(\"操作成功\");\r\n    }\r\n    // 显示 | 隐藏 当前地图电子围栏\r\n    function toggleAllFenceVisible(show: boolean) {\r\n      fenceListInfo.allData.forEach((item) => {\r\n        if (item.show !== show) {\r\n          item.show = show;\r\n          cacheAreaObj[item.areaids].visible(show);\r\n        }\r\n      });\r\n      batchDraw();\r\n      ElMessage.success(\"操作成功\");\r\n    }\r\n\r\n    // 清空数据 和 删除 shape\r\n    function destroyLayer(type: TDestoryType = \"all\") {\r\n      const destroy = {\r\n        layer: () => {\r\n          // 摄像头\r\n          allGroup.cameraGroup.destroyChildren();\r\n          for (const key in cacheCameraObj) {\r\n            delete cacheCameraObj[key];\r\n          }\r\n          // 基站\r\n          allGroup.basestationGroup.destroyChildren();\r\n          for (const key in cacheBasestationObj) {\r\n            delete cacheCameraObj[key];\r\n          }\r\n          // 气泡\r\n          allGroup.locateBubbleGroup.destroyChildren();\r\n          for (const key in cacheBubbleObj) {\r\n            delete cacheBubbleObj[key];\r\n          }\r\n        },\r\n        area: () => {\r\n          allGroup.fenceGroup.destroyChildren();\r\n          for (const key in cacheAreaObj) {\r\n            delete cacheAreaObj[key];\r\n          }\r\n        },\r\n        person: () => {\r\n          allGroup.personGroup.destroyChildren();\r\n          for (const key in cachePersonObj) {\r\n            delete cachePersonObj[key];\r\n          }\r\n        },\r\n      };\r\n      if (type === \"all\") {\r\n        Object.keys(destroy).map((func) => {\r\n          destroy[func]();\r\n        });\r\n      } else {\r\n        destroy[type]();\r\n      }\r\n    }\r\n\r\n    function handleCloseFollow() {\r\n      status.isFollowing = false;\r\n      followObj.message?.close();\r\n      ((cacheFollowingPerson as Group).children[0] as Shape)?.shadowColor(\r\n        DEFAULT_COLORS.TRANSPARENT\r\n      );\r\n      batchDraw();\r\n    }\r\n\r\n    // 报警详情中 点击 查看位置 定位\r\n    async function handleLocate() {\r\n      console.log(alarmInfo.form);\r\n      await changeMap(alarmInfo.form.ShowSceneNum);\r\n      alarmInfo.visible = false;\r\n      const { x, y } = strToPos(alarmInfo.form.SourcePointNum);\r\n      (stage as Stage).setAttrs({\r\n        x: -(x * state.scale - window.innerWidth / 2),\r\n        y: -(y * state.scale - (window.innerHeight - titleHeight) / 2),\r\n      });\r\n      initAlarmIcon({ x, y, id: alarmInfo.form.Id });\r\n      batchDraw();\r\n    }\r\n\r\n    // 最后\r\n    // window resize\r\n    function handleWindowResize() {\r\n      if (!cacheBgImage) return;\r\n      state.scale = Number((window.innerWidth / cacheBgImage.width()).toFixed(2));\r\n      scaleBoundary.minScale = state.scale;\r\n      state.sx = 0;\r\n      state.sy = 0;\r\n      const attrs = {\r\n        x: state.sx,\r\n        y: state.sy,\r\n        width: window.innerWidth,\r\n        height: window.innerHeight - titleHeight,\r\n        scale: {\r\n          x: state.scale,\r\n          y: state.scale,\r\n        },\r\n      };\r\n      (stage as Stage).setAttrs(attrs);\r\n      batchDraw();\r\n    }\r\n\r\n    const debounceRem = debounce(computedRem, 100);\r\n    const debounceResize = debounce(handleWindowResize, 100);\r\n\r\n    onMounted(() => {\r\n      getAllMap();\r\n      getAllAlarmType();\r\n      computedRem();\r\n      window.addEventListener(\"resize\", debounceRem);\r\n      window.addEventListener(\"resize\", debounceResize);\r\n    });\r\n\r\n    onUnmounted(() => {\r\n      clickTimer && clearTimeout(clickTimer);\r\n      locationWs?.close();\r\n      alarmWs?.close();\r\n      window.removeEventListener(\"resize\", debounceRem);\r\n      document.documentElement.style.fontSize = \"\";\r\n      window.removeEventListener(\"resize\", debounceResize);\r\n    });\r\n\r\n    return {\r\n      warningWidth,\r\n      showWarningList,\r\n      mapIdRef,\r\n      mapNameRef,\r\n      mapListRef,\r\n      showDetails,\r\n      mainNavRef,\r\n      visibleObj,\r\n      status,\r\n      showMenu,\r\n      drawerInfo,\r\n      fenceInfo,\r\n      fenceListInfo,\r\n      ruleListInfo,\r\n      ruleFormRef,\r\n      ruleItemDetail,\r\n      types: TYPES,\r\n      navClick,\r\n      resetNavIndex,\r\n      equipSwitchClick,\r\n      fenceInfoFormRef,\r\n      handleAddFence,\r\n      handleFenceDraw,\r\n      handleEditFence,\r\n      handleSubmitFence,\r\n      handleDelFence,\r\n      fenceCurrentChange,\r\n      drawFenceInfo,\r\n      handleRevokeFence,\r\n      handleRedrawFence,\r\n      handleCancelDrawFence,\r\n      handleFinishDrawFence,\r\n      contextmenuTypeRef,\r\n      contxtmenuPosition,\r\n      contextmenuList,\r\n      detailsForm,\r\n      trackPlayback,\r\n      hideDetails,\r\n      handleClickTrackPlayback,\r\n      handleOpenContextmenu,\r\n      handleClickSeeTrackPlayback,\r\n      seeNowVideo,\r\n      seeHistoryVideo,\r\n      handleCloseAllVideo,\r\n      handleCloseAllHistoryVideo,\r\n      popMonitorVideo,\r\n      popHistoryMonitorVideo,\r\n      watchMonitorListPanelState,\r\n      watchHistoryMonitorListPanelState,\r\n      monitorListInfo,\r\n      showEquipDetails,\r\n      alarmType,\r\n      alarmForm,\r\n      transferProps,\r\n      transferData,\r\n      handleSeeRules,\r\n      handleAddRule,\r\n      handleEditRule,\r\n      handleSubmitRule,\r\n      handleDelRule,\r\n      areaRulesOption,\r\n      ruleCurrentChange,\r\n      ruleDisabledDate,\r\n      timerPickerChange,\r\n      ruleItemDetailRule,\r\n      changeAreaVisible,\r\n      toggleAllFenceVisible,\r\n      layerPerson,\r\n      layerPosition,\r\n      controlButtonList,\r\n      controlButtonChange,\r\n      closeMapChoosen,\r\n      changeMap,\r\n      leftPannelSearch,\r\n      querySearch,\r\n      searchChange,\r\n      searchDevice,\r\n      person,\r\n      userSearchRes,\r\n      alarmInfo,\r\n      alarmListInfo,\r\n      alarmCurrentChange,\r\n      getAlarmListByCondition,\r\n      handleHandleAlarm,\r\n      alarmHandleSubmit,\r\n      getBuildByNum,\r\n      showAlarmDetail,\r\n      getHandleExample,\r\n      wsAlarmItem,\r\n      cancelAlarmId,\r\n      getAlarmTotal,\r\n      getAlarmUnHandle,\r\n      handleTypeList,\r\n      handleExample,\r\n      trackPlaybackFormRef,\r\n      playbackObj,\r\n      changeRate,\r\n      togglePlay,\r\n      changeProcess,\r\n      playbackClose,\r\n      personFollow,\r\n      getMapByNum,\r\n      imgUrl,\r\n      handleCloseFollow,\r\n      handleLocate,\r\n    };\r\n  },\r\n});\r\n</script>\r\n\r\n<style lang=\"scss\" src=\"./style/index.scss\" scoped></style>\r\n","/*\r\n * @Description:\r\n * @Author: huxianc\r\n * @Date: 2021-01-22 14:08:38\r\n * @LastEditors: liufuqiang\r\n * @LastEditTime: 2021-02-04 10:39:55\r\n */\r\n\r\nimport http from \"@/utils/http3\";\r\n\r\nexport default {\r\n  //  获取所有报警类型\r\n  getAllAlarmType(data: any) {\r\n    return http({\r\n      url: \"/tbs/getalarmtype\",\r\n      method: \"post\",\r\n      data\r\n    });\r\n  },\r\n  // 单个报警处理\r\n  dealAlarmItem(data: any) {\r\n    return http({\r\n      url: \"/alarm/deal\",\r\n      method: \"post\",\r\n      data\r\n    });\r\n  },\r\n  // 批量处理报警\r\n  dealAlarms(data: any) {\r\n    return http({\r\n      url: \"/alarm/dealall\",\r\n      method: \"post\",\r\n      data\r\n    });\r\n  }\r\n};\r\n","/*\r\n * @Description:\r\n * @Author: huxianc\r\n * @Date: 2021-01-28 17:33:46\r\n * @LastEditors: huxianc\r\n * @LastEditTime: 2021-01-28 17:36:41\r\n */\r\n\r\nimport http from \"@/utils/http3\";\r\n\r\nexport default {\r\n  // 获取所有报警信息\r\n  getCommonApi(data: any) {\r\n    return http({\r\n      url: \"/rcaec/bigwa\",\r\n      method: \"post\",\r\n      data\r\n    });\r\n  }\r\n};\r\n","/*\r\n * @Description:\r\n * @Author: huxianc\r\n * @Date: 2020-12-25 10:26:28\r\n * @LastEditors: huxianc\r\n * @LastEditTime: 2021-02-22 11:23:27\r\n */\r\nimport {\r\n  ICanvasBasicState,\r\n  IPos,\r\n  ICanvasToStageConfig,\r\n  ISvgToImageConfig,\r\n  TLayerItem,\r\n  TVectorgraph,\r\n  ILayerCommon\r\n} from \"./../types/index.d\";\r\n\r\nimport {\r\n  TITLE_HEIGHT as titleHeight,\r\n  bubblePathObj,\r\n  bgImageConfig,\r\n  YMD,\r\n  Hms\r\n} from \"../constVariables\";\r\nimport { imgUrl } from \"@/utils/urls\";\r\nimport { getWsArr } from \"@/utils/auth\";\r\nimport dayjs from \"dayjs\";\r\n\r\n/**\r\n * @description: 计算偏移量\r\n * @param {objrct} canvasPos canvas的坐标 {x,y}\r\n * @param {object} imgPos 图片的坐标 {x,y}\r\n * @param {number} scale 缩放\r\n * @return {object} {x,y}\r\n */\r\nexport function getOffset(canvasPos: IPos, imgPos: IPos, scale: number) {\r\n  return {\r\n    x: canvasPos.x - imgPos.x * scale,\r\n    y: canvasPos.y - imgPos.y * scale\r\n  };\r\n}\r\n\r\n/**\r\n * @description: 返回正确的位置 右键菜单不会超出屏幕\r\n * @param {*} ele html element\r\n * @param {object} pos 位置 {x,y}\r\n * @return {object} {left,top}\r\n */\r\nexport function getCorrectPx(\r\n  ele: HTMLElement,\r\n  pos: { left: number; top: number }\r\n) {\r\n  const w = ele.offsetWidth;\r\n  const h = ele.offsetHeight;\r\n\r\n  const winWidth = window.innerWidth;\r\n  const winHeight = window.innerHeight;\r\n\r\n  const res = { left: pos.left, top: pos.top };\r\n  // 右判断\r\n  if (pos.left + w > winWidth) {\r\n    res.left = winWidth - w;\r\n  }\r\n  // 底判断\r\n  if (pos.top + h + titleHeight > winHeight) {\r\n    res.top = winHeight - titleHeight - h;\r\n  }\r\n\r\n  return res;\r\n}\r\n\r\n/**\r\n * @description: 鼠标点击坐标转换成konva坐标\r\n * @param {IPos} pos {x,y}\r\n * @param {ICanvasBasicState} state {sx,sy,scale}\r\n * @return {object} {x,y}\r\n */\r\nexport function screenTocanvas(pos: IPos, state: ICanvasBasicState): IPos {\r\n  const { sx, sy, scale } = state;\r\n  return {\r\n    x: (pos.x - sx) / scale,\r\n    y: (pos.y - titleHeight - sy) / scale\r\n  };\r\n}\r\n\r\n/**\r\n * @description: canvas坐标转换到stage上的坐标\r\n * @param {ICanvasToStageConfig} data\r\n * @return {*}\r\n */\r\nexport function canvasToStage(data: ICanvasToStageConfig): IPos {\r\n  const { x, y, sx, sy, scale } = data;\r\n  return {\r\n    x: ~~((x - sx) / scale),\r\n    y: ~~((y - sy - titleHeight) / scale)\r\n  };\r\n}\r\n\r\n/**\r\n * @description: 后端返得坐标字符串转换成 IPos 类型的坐标\r\n * @param {string} str\r\n * @return {*}\r\n */\r\nexport function strToPos(str: string): IPos {\r\n  const [x, y] = str.split(\",\").map(pos => Number(pos));\r\n  return {\r\n    x,\r\n    y\r\n  };\r\n}\r\n\r\nexport function svgToImage(config: ISvgToImageConfig, isBubble = false) {\r\n  const { pathSrc, width, height, color } = config;\r\n  const svg = document.createElementNS(\"http://www.w3.org/2000/svg\", \"svg\");\r\n\r\n  svg.setAttribute(\"width\", `${width}`);\r\n  svg.setAttribute(\"height\", `${height}`);\r\n  svg.setAttribute(\"x\", \"0\");\r\n  svg.setAttribute(\"y\", \"0\");\r\n  svg.setAttribute(\r\n    \"viewBox\",\r\n    `0 0 ${isBubble ? width : \"1024\"} ${isBubble ? height : \"1024\"}`\r\n  );\r\n  const path = document.createElementNS(\"http://www.w3.org/2000/svg\", \"path\");\r\n  path.setAttribute(\"d\", isBubble ? bubblePathObj.bottom : pathSrc);\r\n  path.setAttribute(\"width\", \"100%\");\r\n  path.setAttribute(\"height\", \"100%\");\r\n  path.setAttribute(\"fill\", `${color}`);\r\n  svg.appendChild(path);\r\n\r\n  const svgStr = new XMLSerializer().serializeToString(svg);\r\n  const base64 = window.btoa(svgStr);\r\n  const image = new window.Image();\r\n  image.src = `data:image/svg+xml;base64,${base64}`;\r\n  return image;\r\n}\r\n\r\n//生成随机 GUID 数 xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx\r\nexport function guid() {\r\n  function S4() {\r\n    return (((1 + Math.random()) * 0x10000) | 0).toString(16).substring(1);\r\n  }\r\n  return (\r\n    S4() +\r\n    S4() +\r\n    \"-\" +\r\n    S4() +\r\n    \"-\" +\r\n    S4() +\r\n    \"-\" +\r\n    S4() +\r\n    \"-\" +\r\n    S4() +\r\n    S4() +\r\n    S4()\r\n  );\r\n}\r\n\r\n// 根据类型生成 image DOM\r\nexport async function generateImageDomByType(attrs: TLayerItem) {\r\n  const { layrestype } = attrs.defdata;\r\n  if (layrestype === \"3\") {\r\n    const config = attrs as TVectorgraph;\r\n    const { layinfo, W, H, Color } = config.defdata;\r\n    const svgConfig: ISvgToImageConfig = {\r\n      pathSrc: layinfo,\r\n      width: W,\r\n      height: H,\r\n      color: Color\r\n    };\r\n    const imageDom = await svgToImage(svgConfig);\r\n    return imageDom;\r\n  } else {\r\n    const config = attrs as ILayerCommon;\r\n    const { layinfo } = config.defdata;\r\n    const imageDom = new window.Image();\r\n    imageDom.src = imgUrl + layinfo;\r\n    return imageDom;\r\n  }\r\n}\r\n\r\n/**\r\n * @description: 防止图片类型为加载完毕直接生成了\r\n * @param {HTMLImageElement} imageDom\r\n * @param {Function} func\r\n * @return {*}\r\n */\r\nexport function loadImage(imageDom: HTMLImageElement, func: Function) {\r\n  if (imageDom.width === 0) {\r\n    imageDom.onload = () => {\r\n      func();\r\n    };\r\n  } else {\r\n    func();\r\n  }\r\n}\r\n\r\n// 获得ws url 地址\r\nexport const getWsUrl = () => {\r\n  enum WSType {\r\n    location = 3, // 高精度定位服务\r\n    Alarm = 1, // 报警服务\r\n    Trans = 199 // 数据中转服务（后续可能会用到）\r\n  }\r\n  const wsUrls = {\r\n    location: \"\",\r\n    alarm: \"\"\r\n  };\r\n  const wsArr = getWsArr();\r\n  wsArr.forEach(item => {\r\n    if (item.servertype === WSType.location) {\r\n      wsUrls.location = `ws://${item.serverip}:${item.serverport}/${WSType[3]}`;\r\n    }\r\n    if (item.servertype === WSType.Alarm) {\r\n      wsUrls.alarm = `ws://${item.serverip}:${item.serverport}/${WSType[1]}`;\r\n    }\r\n  });\r\n  return wsUrls;\r\n};\r\n\r\n/**\r\n * @description: 根据传入数据的{x,y}来偏移数据\r\n * @param {IPos} pos\r\n * @return {IPos}\r\n */\r\nexport function locateIcon(pos: IPos): IPos {\r\n  const cx = bgImageConfig.width / 2;\r\n  const cy = bgImageConfig.height / 2;\r\n  const { x, y } = pos;\r\n  return {\r\n    x: cx - x,\r\n    y: cy - y\r\n  };\r\n}\r\n\r\nexport const getDateTime = (loop: boolean, time1: string, time2: string) => {\r\n  if (loop) {\r\n    // 年月日\r\n    const ymd = dayjs(new Date()).format(YMD);\r\n    return {\r\n      startTime: new Date(`${ymd} ${time1}`),\r\n      endTime: new Date(`${ymd} ${time2}`)\r\n    };\r\n  } else {\r\n    return {\r\n      startTime: new Date(time1),\r\n      endTime: new Date(time2)\r\n    };\r\n  }\r\n};\r\n\r\n/**\r\n * @description: 轨迹回放时间formate\r\n * @param {Date} date\r\n * @param {Date} time\r\n * @return {*}\r\n */\r\nexport function getTrackTime(date: Date, time: Date[]) {\r\n  const ymd = dayjs(date).format(YMD);\r\n  const sTime = `${ymd} ${dayjs(time[0]).format(Hms)}`;\r\n  const eTime = `${ymd} ${dayjs(time[1]).format(Hms)}`;\r\n  return {\r\n    sTime,\r\n    eTime\r\n  };\r\n}\r\n\r\n/**\r\n * @description: 轨迹回放时间间隔限制\r\n * @param {any} rule\r\n * @param {Date} value\r\n * @param {Function} callback\r\n * @return {*}\r\n */\r\nexport const checkTimeGap = (rule: any, value: Date[], callback: Function) => {\r\n  const hour = (value[1].getTime() - value[0].getTime()) / 3600000;\r\n  if (hour > 1) {\r\n    callback(new Error(\"轨迹回放时间不能超过一小时\"));\r\n  } else {\r\n    callback();\r\n  }\r\n};\r\n","/*\r\n * @Description:\r\n * @Author: huxianc\r\n * @Date: 2021-02-01 17:21:32\r\n * @LastEditors: huxianc\r\n * @LastEditTime: 2021-02-22 14:07:35\r\n */\r\nimport { Group } from \"konva/types/Group\";\r\nimport Konva from \"konva\";\r\nimport { DEFAULT_COLORS } from \"../constVariables\";\r\n\r\n/**\r\n * @description: 生成初始化人物的shape 返回Image\r\n * @param {*}\r\n * @return {*}\r\n */\r\nexport function generatePersonGroup(\r\n  group: Group,\r\n  imageDom: HTMLImageElement,\r\n  id: number | string,\r\n  name: string\r\n) {\r\n  const image = new Konva.Image({\r\n    width: imageDom.width,\r\n    height: imageDom.height,\r\n    image: imageDom,\r\n    shadowColor: DEFAULT_COLORS.TRANSPARENT,\r\n    shadowBlur: 20,\r\n    id: String(id) // 需要绑  右键返回的是当前右键的shape，拿不到group  当然也可以拿parent\r\n  });\r\n  const fontSize = 14;\r\n  const rectHeight = imageDom.height * 0.4;\r\n  const textRect = new Konva.Rect({\r\n    width: imageDom.width,\r\n    height: rectHeight,\r\n    y: -rectHeight - 5,\r\n    fill: \"rgba(0,0,0,.7)\",\r\n    cornerRadius: rectHeight\r\n  });\r\n  const text = new Konva.Text({\r\n    // width:imageDom.width,\r\n    // height:rectHeight,\r\n    x: imageDom.width / 2,\r\n    y: -fontSize - 5,\r\n    text: name,\r\n    fontSize,\r\n    fill: \"#fff\",\r\n    id: String(id)\r\n  });\r\n  text.offsetX(text.width() / 2);\r\n  text.offsetY(text.height() / 2 - 5 / 2);\r\n\r\n  group\r\n    .add(image)\r\n    .add(textRect)\r\n    .add(text);\r\n  return image;\r\n}\r\n","import { strToPos } from \".\";\r\nimport { IPersonArrItem } from \"../types\";\r\n\r\nexport const generatePersonItem = (\r\n  personItem: IPersonArrItem\r\n): IPersonArrItem => {\r\n  const { x, y } = strToPos(personItem.LocationPoint);\r\n  return {\r\n    ...personItem,\r\n    x,\r\n    y,\r\n    name: personItem.ObjData.BindObjName,\r\n    map: personItem.LocationSceneId,\r\n    lids: personItem.TagId,\r\n    ltype: personItem.ObjData.BindObjName\r\n  };\r\n};\r\n","<!--\r\n * @Description:底部导航栏\r\n * @Author: huxianc\r\n * @Date: 2020-11-20 14:03:08\r\n * @LastEditors: huxianc\r\n * @LastEditTime: 2021-02-20 11:27:53\r\n-->\r\n\r\n<template>\r\n  <nav>\r\n    <ul>\r\n      <li\r\n        v-for=\"(navItem, index) in navList\"\r\n        :key=\"navItem.name\"\r\n        :class=\"{ active: index === navIndex }\"\r\n        @click=\"handleNavClick(navItem, index)\"\r\n      >\r\n        <span class=\"icon iconfont\" v-html=\"navItem.icon\" />\r\n        <div>{{ navItem.name }}</div>\r\n      </li>\r\n    </ul>\r\n  </nav>\r\n</template>\r\n\r\n<script lang=\"ts\">\r\nimport { defineComponent, shallowRef } from \"vue\";\r\nimport { NAV_INFO, FENCE, TYPES, ALARM, DATAV } from \"../constVariables\";\r\nimport { INavItem } from \"../types/mainNav\";\r\nexport default defineComponent({\r\n  name: \"MainNav\",\r\n  emits: [\"navClick\"],\r\n  setup(props, { emit }) {\r\n    const navList: INavItem[] = [\r\n      { name: \"主页\", icon: \"&#xe61d;\", code: \"index\" },\r\n      // {\r\n      //   name: '电子考勤',\r\n      //   icon: '&#xe638;',\r\n      //   path: '/home/attendance',\r\n      //   class: ''\r\n      // },\r\n      {\r\n        icon: \"&#xe61a;\",\r\n        ...FENCE\r\n      },\r\n      // {\r\n      //   name: '区域管理',\r\n      //   icon: '&#xe667;',\r\n      //   path: '/home/arealist',\r\n      //   class: ''\r\n      // },\r\n      // 我理解成视频列表\r\n      {\r\n        icon: \"&#xe7e8;\",\r\n        ...NAV_INFO[TYPES.camera]\r\n      },\r\n      // 理解成基站列表\r\n      {\r\n        icon: \"&#xe603;\",\r\n        ...NAV_INFO[TYPES.basestation]\r\n      },\r\n      // {\r\n      //   name: '报警信息',\r\n      //   icon: '&#xe624;',\r\n      //   path: '/home/alarmlist',\r\n      //   class: ''\r\n      // },\r\n      // 标签列表\r\n      {\r\n        icon: \"&#xe6d8;\",\r\n        ...NAV_INFO[TYPES.labelList]\r\n      },\r\n      // 理解成人员列表\r\n      {\r\n        icon: \"&#xe60d;\",\r\n        ...NAV_INFO[TYPES.person]\r\n      },\r\n\r\n      // 报警管理列表\r\n      {\r\n        icon: \"&#xe624;\",\r\n        ...ALARM\r\n      },\r\n      // 统计中心\r\n      {\r\n        icon: \"&#xe61e;\",\r\n        ...DATAV\r\n      }\r\n\r\n      //\r\n      // {name: \"跟踪预警\", icon: \"&#xe619;\", path: \"/home/gzyj\", class: \"\"},\r\n      // {\r\n      //   name: '轨迹回放',\r\n      //   icon: '&#xe61e;',\r\n      //   path: '/home/tracklist',\r\n      //   class: ''\r\n      // },\r\n      // {\r\n      //   name: '工具管理',\r\n      //   icon: '&#xe62b;',\r\n      //   path: '/home/tool',\r\n      //   class: ''\r\n      // },\r\n      // {\r\n      //   name: '车辆管理',\r\n      //   icon: '&#xe629;',\r\n      //   path: '/home/car',\r\n      //   class: ''\r\n      // },\r\n      // {\r\n      //   name: \"数据分析\",\r\n      //   icon: \"&#xe62e;\",\r\n      //   path: \"/home/analysis\",\r\n      //   class: \"\"\r\n      // },\r\n      // {\r\n      //   name: \"报警设置\",\r\n      //   icon: \"&#xe627;\",\r\n      //   code: \"warn\"\r\n      // }\r\n    ];\r\n\r\n    const navIndex = shallowRef(0);\r\n\r\n    function handleNavClick(navItem: INavItem, index: number) {\r\n      if (navIndex.value !== index) {\r\n        navIndex.value = index;\r\n      }\r\n      const { code } = navItem;\r\n      if (!code) return;\r\n      emit(\"navClick\", code);\r\n    }\r\n    function resetIndex() {\r\n      navIndex.value = 0;\r\n    }\r\n    return {\r\n      navList,\r\n      navIndex,\r\n      handleNavClick,\r\n      resetIndex\r\n    };\r\n  }\r\n});\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\nnav {\r\n  width: 84rem;\r\n  position: absolute;\r\n  bottom: 2rem;\r\n  left: 50%;\r\n  transform: translateX(-50%);\r\n  border: 1px solid rgba(51, 119, 233, 0.13);\r\n  border-left: none;\r\n  border-right: none;\r\n  z-index: 1000;\r\n}\r\nul {\r\n  display: flex;\r\n  justify-content: space-evenly;\r\n  padding: 0 4rem;\r\n  color: rgba(91, 169, 233, 0.8);\r\n  background: url(\"../../../../assets/dashboard/nav_bg.png\") repeat center\r\n    center/100% 100%;\r\n  li {\r\n    /* flex: 1; */\r\n    min-width: 8rem;\r\n    padding: 1rem;\r\n    display: flex;\r\n    flex-direction: column;\r\n    justify-content: center;\r\n    align-items: center;\r\n    cursor: pointer;\r\n    transition: all 0.3s ease;\r\n\r\n    &:hover,\r\n    &.active {\r\n      color: #33eaff;\r\n      background: url(\"../../../../assets/dashboard/active.png\") repeat center\r\n        center/100% 100%;\r\n    }\r\n\r\n    span {\r\n      font-size: 2.4rem;\r\n    }\r\n    div {\r\n      margin-top: 1rem;\r\n      font-size: 1.4rem;\r\n    }\r\n  }\r\n}\r\n</style>\r\n","\r\nimport { defineComponent, shallowRef } from \"vue\";\r\nimport { NAV_INFO, FENCE, TYPES, ALARM, DATAV } from \"../constVariables\";\r\nimport { INavItem } from \"../types/mainNav\";\r\nexport default defineComponent({\r\n  name: \"MainNav\",\r\n  emits: [\"navClick\"],\r\n  setup(props, { emit }) {\r\n    const navList: INavItem[] = [\r\n      { name: \"主页\", icon: \"&#xe61d;\", code: \"index\" },\r\n      // {\r\n      //   name: '电子考勤',\r\n      //   icon: '&#xe638;',\r\n      //   path: '/home/attendance',\r\n      //   class: ''\r\n      // },\r\n      {\r\n        icon: \"&#xe61a;\",\r\n        ...FENCE\r\n      },\r\n      // {\r\n      //   name: '区域管理',\r\n      //   icon: '&#xe667;',\r\n      //   path: '/home/arealist',\r\n      //   class: ''\r\n      // },\r\n      // 我理解成视频列表\r\n      {\r\n        icon: \"&#xe7e8;\",\r\n        ...NAV_INFO[TYPES.camera]\r\n      },\r\n      // 理解成基站列表\r\n      {\r\n        icon: \"&#xe603;\",\r\n        ...NAV_INFO[TYPES.basestation]\r\n      },\r\n      // {\r\n      //   name: '报警信息',\r\n      //   icon: '&#xe624;',\r\n      //   path: '/home/alarmlist',\r\n      //   class: ''\r\n      // },\r\n      // 标签列表\r\n      {\r\n        icon: \"&#xe6d8;\",\r\n        ...NAV_INFO[TYPES.labelList]\r\n      },\r\n      // 理解成人员列表\r\n      {\r\n        icon: \"&#xe60d;\",\r\n        ...NAV_INFO[TYPES.person]\r\n      },\r\n\r\n      // 报警管理列表\r\n      {\r\n        icon: \"&#xe624;\",\r\n        ...ALARM\r\n      },\r\n      // 统计中心\r\n      {\r\n        icon: \"&#xe61e;\",\r\n        ...DATAV\r\n      }\r\n\r\n      //\r\n      // {name: \"跟踪预警\", icon: \"&#xe619;\", path: \"/home/gzyj\", class: \"\"},\r\n      // {\r\n      //   name: '轨迹回放',\r\n      //   icon: '&#xe61e;',\r\n      //   path: '/home/tracklist',\r\n      //   class: ''\r\n      // },\r\n      // {\r\n      //   name: '工具管理',\r\n      //   icon: '&#xe62b;',\r\n      //   path: '/home/tool',\r\n      //   class: ''\r\n      // },\r\n      // {\r\n      //   name: '车辆管理',\r\n      //   icon: '&#xe629;',\r\n      //   path: '/home/car',\r\n      //   class: ''\r\n      // },\r\n      // {\r\n      //   name: \"数据分析\",\r\n      //   icon: \"&#xe62e;\",\r\n      //   path: \"/home/analysis\",\r\n      //   class: \"\"\r\n      // },\r\n      // {\r\n      //   name: \"报警设置\",\r\n      //   icon: \"&#xe627;\",\r\n      //   code: \"warn\"\r\n      // }\r\n    ];\r\n\r\n    const navIndex = shallowRef(0);\r\n\r\n    function handleNavClick(navItem: INavItem, index: number) {\r\n      if (navIndex.value !== index) {\r\n        navIndex.value = index;\r\n      }\r\n      const { code } = navItem;\r\n      if (!code) return;\r\n      emit(\"navClick\", code);\r\n    }\r\n    function resetIndex() {\r\n      navIndex.value = 0;\r\n    }\r\n    return {\r\n      navList,\r\n      navIndex,\r\n      handleNavClick,\r\n      resetIndex\r\n    };\r\n  }\r\n});\r\n","import { render } from \"./mainNav.vue?vue&type=template&id=80ca9b2a&scoped=true\"\nimport script from \"./mainNav.vue?vue&type=script&lang=ts\"\nexport * from \"./mainNav.vue?vue&type=script&lang=ts\"\n\nimport \"./mainNav.vue?vue&type=style&index=0&id=80ca9b2a&lang=scss&scoped=true\"\nscript.render = render\nscript.__scopeId = \"data-v-80ca9b2a\"\n\nexport default script","<!--\r\n * @Author: huxianc\r\n * @Date: 2020-12-01 15:04:25\r\n * @LastEditTime: 2021-02-22 09:38:50\r\n * @LastEditors: liufuqiang\r\n * @Description: In User Settings Edit\r\n-->\r\n<template>\r\n  <div>\r\n    <el-form :model=\"params\" label-width=\"80px\" :inline=\"true\" size=\"small\">\r\n      <el-form-item label=\"人员姓名\">\r\n        <el-input v-model.trim=\"params.search\" clearable @change=\"search\" />\r\n      </el-form-item>\r\n      <el-form-item>\r\n        <el-button type=\"primary\" @click=\"search\">搜索</el-button>\r\n      </el-form-item>\r\n    </el-form>\r\n    <hd-table v-loading=\"loading\" :data=\"tableData\">\r\n      <hd-table-column label=\"设备\" prop=\"DeviceName\" />\r\n      <hd-table-column label=\"姓名\" prop=\"Username\" />\r\n      <hd-table-column label=\"职位\" prop=\"Position\" />\r\n      <hd-table-column width=\"80\" label=\"工号\" prop=\"Job_number\" />\r\n      <hd-table-column width=\"80\" label=\"房号\" prop=\"Room_number\" />\r\n      <el-table-column\r\n        width=\"155\"\r\n        label=\"位置\"\r\n        show-overflow-tooltip\r\n        align=\"center\"\r\n      >\r\n        <template #default=\"{ row }\">\r\n          <span v-if=\"row.snum\" style=\"color: #3dd1ff\">\r\n            {{ getMapByNum(row.snum).sname }}\r\n          </span>\r\n          <span v-if=\"!row.snum\">\r\n            未上线\r\n          </span>\r\n        </template>\r\n      </el-table-column>\r\n      <el-table-column width=\"170\" label=\"操作\" align=\"center\">\r\n        <template #default=\"{ row }\">\r\n          <el-button size=\"mini\" type=\"primary\" @click=\"handleDetail(row)\"\r\n            >详情</el-button\r\n          >\r\n          <el-popconfirm title=\"确定跳转到人员实时位置 ？\" effect=\"dark\">\r\n            <template #reference>\r\n              <el-button type=\"primary\" size=\"mini\">实时位置</el-button>\r\n            </template>\r\n          </el-popconfirm>\r\n        </template>\r\n      </el-table-column>\r\n    </hd-table>\r\n    <el-pagination\r\n      v-show=\"total && tableData && tableData.length\"\r\n      background\r\n      v-model:current-page=\"params.page\"\r\n      layout=\"total, prev, pager, next, jumper\"\r\n      :total=\"total\"\r\n      @current-change=\"changePage\"\r\n    />\r\n  </div>\r\n</template>\r\n\r\n<script lang=\"ts\">\r\nimport {\r\n  onMounted,\r\n  reactive,\r\n  ref,\r\n  defineComponent,\r\n  shallowRef,\r\n  PropType\r\n} from \"vue\";\r\nimport commonApi from \"@/api/common\";\r\nimport { TYPES } from \"../constVariables\";\r\nimport { ICommonTableParams, IPersonItem } from \"../types\";\r\nimport { getPagination, getPagintionCount } from \"@/utils\";\r\nimport { getMapByNum } from \"@/utils/auth\";\r\nimport { IResponseCommon } from \"@/types\";\r\nimport { IPersonArrItem } from \"../types/index\";\r\nconst CLICKED = \"clicked\";\r\n\r\nexport default defineComponent({\r\n  name: \"LabelList\",\r\n  props: {\r\n    wsAllLabel: {\r\n      type: Array as PropType<IPersonArrItem[]>\r\n    }\r\n  },\r\n  emits: [\"showEquipDetails\", CLICKED],\r\n  setup(props, { emit }) {\r\n    const params = reactive<ICommonTableParams>({\r\n      page: 1,\r\n      prop: \"Username\",\r\n      search: \"\"\r\n    });\r\n    let personAll: any[] = [];\r\n    const loading = shallowRef<boolean>(false);\r\n\r\n    const tableData = ref<IPersonItem[]>([]);\r\n    const total = shallowRef<number>(0);\r\n\r\n    // 获取分页列表\r\n    function getList() {\r\n      tableData.value = getPagination(\r\n        personAll,\r\n        params.page,\r\n        params.prop,\r\n        params.search\r\n      );\r\n      total.value = getPagintionCount(personAll, params.prop, params.search);\r\n      loading.value = false;\r\n    }\r\n    // 获取所有人员信息\r\n    async function getAllPersonList() {\r\n      loading.value = true;\r\n      const param = {\r\n        act: \"rYVwSSwhmDcZRL0yQbO1611304770982\"\r\n      };\r\n      const result: unknown = await commonApi.getCommonApi(param);\r\n      const { data } = result as IResponseCommon<IPersonItem[]>;\r\n      data.forEach((item: any) => {\r\n        if (props.wsAllLabel) {\r\n          props.wsAllLabel.forEach(element => {\r\n            if (element.name === item.Username) {\r\n              item.snum = element.LocationSceneId;\r\n            }\r\n          });\r\n        }\r\n      });\r\n      personAll = data;\r\n      // 获取分页列表\r\n      getList();\r\n    }\r\n    // 详情\r\n    function handleDetail(row: IPersonItem) {\r\n      emit(\"showEquipDetails\", row, TYPES.person);\r\n      emit(CLICKED);\r\n    }\r\n\r\n    // 分页\r\n    async function changePage(page: number) {\r\n      params.page = page;\r\n      getList();\r\n    }\r\n    // 搜索\r\n    async function search() {\r\n      params.page = 1;\r\n      getList();\r\n    }\r\n\r\n    onMounted(() => {\r\n      // 获取所有人员信息\r\n      getAllPersonList();\r\n    });\r\n\r\n    return {\r\n      params,\r\n      loading,\r\n      tableData,\r\n      total,\r\n      changePage,\r\n      search,\r\n      getMapByNum,\r\n      handleDetail\r\n    };\r\n  }\r\n});\r\n</script>\r\n","\r\nimport {\r\n  onMounted,\r\n  reactive,\r\n  ref,\r\n  defineComponent,\r\n  shallowRef,\r\n  PropType\r\n} from \"vue\";\r\nimport commonApi from \"@/api/common\";\r\nimport { TYPES } from \"../constVariables\";\r\nimport { ICommonTableParams, IPersonItem } from \"../types\";\r\nimport { getPagination, getPagintionCount } from \"@/utils\";\r\nimport { getMapByNum } from \"@/utils/auth\";\r\nimport { IResponseCommon } from \"@/types\";\r\nimport { IPersonArrItem } from \"../types/index\";\r\nconst CLICKED = \"clicked\";\r\n\r\nexport default defineComponent({\r\n  name: \"LabelList\",\r\n  props: {\r\n    wsAllLabel: {\r\n      type: Array as PropType<IPersonArrItem[]>\r\n    }\r\n  },\r\n  emits: [\"showEquipDetails\", CLICKED],\r\n  setup(props, { emit }) {\r\n    const params = reactive<ICommonTableParams>({\r\n      page: 1,\r\n      prop: \"Username\",\r\n      search: \"\"\r\n    });\r\n    let personAll: any[] = [];\r\n    const loading = shallowRef<boolean>(false);\r\n\r\n    const tableData = ref<IPersonItem[]>([]);\r\n    const total = shallowRef<number>(0);\r\n\r\n    // 获取分页列表\r\n    function getList() {\r\n      tableData.value = getPagination(\r\n        personAll,\r\n        params.page,\r\n        params.prop,\r\n        params.search\r\n      );\r\n      total.value = getPagintionCount(personAll, params.prop, params.search);\r\n      loading.value = false;\r\n    }\r\n    // 获取所有人员信息\r\n    async function getAllPersonList() {\r\n      loading.value = true;\r\n      const param = {\r\n        act: \"rYVwSSwhmDcZRL0yQbO1611304770982\"\r\n      };\r\n      const result: unknown = await commonApi.getCommonApi(param);\r\n      const { data } = result as IResponseCommon<IPersonItem[]>;\r\n      data.forEach((item: any) => {\r\n        if (props.wsAllLabel) {\r\n          props.wsAllLabel.forEach(element => {\r\n            if (element.name === item.Username) {\r\n              item.snum = element.LocationSceneId;\r\n            }\r\n          });\r\n        }\r\n      });\r\n      personAll = data;\r\n      // 获取分页列表\r\n      getList();\r\n    }\r\n    // 详情\r\n    function handleDetail(row: IPersonItem) {\r\n      emit(\"showEquipDetails\", row, TYPES.person);\r\n      emit(CLICKED);\r\n    }\r\n\r\n    // 分页\r\n    async function changePage(page: number) {\r\n      params.page = page;\r\n      getList();\r\n    }\r\n    // 搜索\r\n    async function search() {\r\n      params.page = 1;\r\n      getList();\r\n    }\r\n\r\n    onMounted(() => {\r\n      // 获取所有人员信息\r\n      getAllPersonList();\r\n    });\r\n\r\n    return {\r\n      params,\r\n      loading,\r\n      tableData,\r\n      total,\r\n      changePage,\r\n      search,\r\n      getMapByNum,\r\n      handleDetail\r\n    };\r\n  }\r\n});\r\n","import { render } from \"./personList.vue?vue&type=template&id=3b836488\"\nimport script from \"./personList.vue?vue&type=script&lang=ts\"\nexport * from \"./personList.vue?vue&type=script&lang=ts\"\nscript.render = render\n\nexport default script","<!--\r\n * @Author: your name\r\n * @Date: 2020-12-01 15:04:25\r\n * @LastEditTime: 2021-02-20 16:02:26\r\n * @LastEditors: liufuqiang\r\n * @Description: In User Settings Edit\r\n-->\r\n<template>\r\n  <div>\r\n    <el-form :model=\"params\" label-width=\"80px\" :inline=\"true\" size=\"small\">\r\n      <el-form-item label=\"摄像头IP\">\r\n        <el-input v-model.trim=\"params.search\" clearable @change=\"search\" />\r\n      </el-form-item>\r\n      <el-form-item>\r\n        <el-button type=\"primary\" @click=\"search\">搜索</el-button>\r\n      </el-form-item>\r\n    </el-form>\r\n\r\n    <hd-table v-loading=\"loading\" :data=\"tableData\">\r\n      <hd-table-column label=\"IP\" prop=\"dnum\" width=\"110\" />\r\n      <hd-table-column label=\"名称\" prop=\"dname\" />\r\n      <el-table-column label=\"位置\" show-overflow-tooltip align=\"center\">\r\n        <template #default=\"{row}\">\r\n          {{ getMapByNum(row.snum).sname }}\r\n        </template>\r\n      </el-table-column>\r\n      <el-table-column width=\"300\" label=\"操作\" align=\"center\">\r\n        <template #default=\"{row}\">\r\n          <el-button size=\"mini\" type=\"primary\" @click=\"handleDetail(row)\"\r\n            >详情</el-button\r\n          >\r\n          <el-button size=\"mini\" type=\"primary\" @click=\"seeNowVideo(row)\"\r\n            >实时视频</el-button\r\n          >\r\n          <el-button size=\"mini\" type=\"primary\" @click=\"seeHistoryVideo(row)\"\r\n            >历史回放</el-button\r\n          >\r\n        </template>\r\n      </el-table-column>\r\n    </hd-table>\r\n    <el-pagination\r\n      v-show=\"total && tableData && tableData.length\"\r\n      background\r\n      v-model:current-page=\"params.page\"\r\n      layout=\"total, prev, pager, next, jumper\"\r\n      :total=\"total\"\r\n      @current-change=\"changePage\"\r\n    />\r\n  </div>\r\n</template>\r\n\r\n<script lang=\"ts\">\r\nimport { defineComponent, reactive, ref, onMounted, shallowRef } from \"vue\";\r\nimport { TYPES } from \"../constVariables\";\r\nimport { ICommonTableParams, IDeviceItem } from \"../types\";\r\nimport { getPagination, getPagintionCount } from \"@/utils\";\r\nimport { getAllDevice, getMapByNum } from \"@/utils/auth\";\r\nconst CLICKED = \"clicked\";\r\n\r\nexport default defineComponent({\r\n  name: \"CameraList\",\r\n  emits: [\"showEquipDetails\", \"seeNowVideo\", \"seeHistoryVideo\", CLICKED],\r\n  setup(props, { emit }) {\r\n    const params = reactive<ICommonTableParams>({\r\n      page: 1,\r\n      prop: \"dnum\",\r\n      search: \"\"\r\n    });\r\n    const loading = shallowRef<boolean>(false);\r\n    const tableData = ref<IDeviceItem[]>([]);\r\n    const total = shallowRef<number>(0);\r\n    // 获取分页列表\r\n    async function getList() {\r\n      loading.value = true;\r\n      // 从localStorage取所有设备信息\r\n      const deviceAll = getAllDevice();\r\n      const cameraAll = deviceAll.filter(\r\n        item => item.dtypecode === \"Camera_IP\"\r\n      );\r\n      cameraAll.forEach((item: any) => {\r\n        if (item.extinfo) {\r\n          const extinfo = JSON.parse(item.extinfo);\r\n          item.UserName = extinfo.UserName;\r\n          item.Password = extinfo.Password;\r\n          item.ChanelNum = extinfo.ChanelNum;\r\n          item.IsYunTai = extinfo.IsYunTai;\r\n          item.IsCameraPhoto = extinfo.IsCameraPhoto;\r\n          item.x = extinfo.xcoordinate; // x坐标\r\n          item.y = extinfo.ycoordinate; // y坐标\r\n        }\r\n      });\r\n      tableData.value = getPagination(\r\n        cameraAll,\r\n        params.page,\r\n        params.prop,\r\n        params.search\r\n      );\r\n      total.value = getPagintionCount(cameraAll, params.prop, params.search);\r\n      loading.value = false;\r\n    }\r\n    // 详情\r\n    function handleDetail(row: IDeviceItem) {\r\n      emit(\"showEquipDetails\", row, TYPES.camera);\r\n      emit(CLICKED);\r\n    }\r\n    // 分页\r\n    async function changePage(page: number) {\r\n      params.page = page;\r\n      getList();\r\n    }\r\n    // 搜索\r\n    async function search() {\r\n      params.page = 1;\r\n      getList();\r\n    }\r\n\r\n    // 实时视频\r\n    function seeNowVideo(row: IDeviceItem) {\r\n      emit(\"seeNowVideo\", row.dids);\r\n    }\r\n    // 历史视频\r\n    function seeHistoryVideo(row: IDeviceItem) {\r\n      emit(\"seeHistoryVideo\", row.dids);\r\n    }\r\n\r\n    onMounted(() => {\r\n      getList();\r\n    });\r\n\r\n    return {\r\n      params,\r\n      loading,\r\n      tableData,\r\n      total,\r\n      changePage,\r\n      search,\r\n      getMapByNum,\r\n      handleDetail,\r\n      seeNowVideo,\r\n      seeHistoryVideo\r\n    };\r\n  }\r\n});\r\n</script>\r\n","\r\nimport { defineComponent, reactive, ref, onMounted, shallowRef } from \"vue\";\r\nimport { TYPES } from \"../constVariables\";\r\nimport { ICommonTableParams, IDeviceItem } from \"../types\";\r\nimport { getPagination, getPagintionCount } from \"@/utils\";\r\nimport { getAllDevice, getMapByNum } from \"@/utils/auth\";\r\nconst CLICKED = \"clicked\";\r\n\r\nexport default defineComponent({\r\n  name: \"CameraList\",\r\n  emits: [\"showEquipDetails\", \"seeNowVideo\", \"seeHistoryVideo\", CLICKED],\r\n  setup(props, { emit }) {\r\n    const params = reactive<ICommonTableParams>({\r\n      page: 1,\r\n      prop: \"dnum\",\r\n      search: \"\"\r\n    });\r\n    const loading = shallowRef<boolean>(false);\r\n    const tableData = ref<IDeviceItem[]>([]);\r\n    const total = shallowRef<number>(0);\r\n    // 获取分页列表\r\n    async function getList() {\r\n      loading.value = true;\r\n      // 从localStorage取所有设备信息\r\n      const deviceAll = getAllDevice();\r\n      const cameraAll = deviceAll.filter(\r\n        item => item.dtypecode === \"Camera_IP\"\r\n      );\r\n      cameraAll.forEach((item: any) => {\r\n        if (item.extinfo) {\r\n          const extinfo = JSON.parse(item.extinfo);\r\n          item.UserName = extinfo.UserName;\r\n          item.Password = extinfo.Password;\r\n          item.ChanelNum = extinfo.ChanelNum;\r\n          item.IsYunTai = extinfo.IsYunTai;\r\n          item.IsCameraPhoto = extinfo.IsCameraPhoto;\r\n          item.x = extinfo.xcoordinate; // x坐标\r\n          item.y = extinfo.ycoordinate; // y坐标\r\n        }\r\n      });\r\n      tableData.value = getPagination(\r\n        cameraAll,\r\n        params.page,\r\n        params.prop,\r\n        params.search\r\n      );\r\n      total.value = getPagintionCount(cameraAll, params.prop, params.search);\r\n      loading.value = false;\r\n    }\r\n    // 详情\r\n    function handleDetail(row: IDeviceItem) {\r\n      emit(\"showEquipDetails\", row, TYPES.camera);\r\n      emit(CLICKED);\r\n    }\r\n    // 分页\r\n    async function changePage(page: number) {\r\n      params.page = page;\r\n      getList();\r\n    }\r\n    // 搜索\r\n    async function search() {\r\n      params.page = 1;\r\n      getList();\r\n    }\r\n\r\n    // 实时视频\r\n    function seeNowVideo(row: IDeviceItem) {\r\n      emit(\"seeNowVideo\", row.dids);\r\n    }\r\n    // 历史视频\r\n    function seeHistoryVideo(row: IDeviceItem) {\r\n      emit(\"seeHistoryVideo\", row.dids);\r\n    }\r\n\r\n    onMounted(() => {\r\n      getList();\r\n    });\r\n\r\n    return {\r\n      params,\r\n      loading,\r\n      tableData,\r\n      total,\r\n      changePage,\r\n      search,\r\n      getMapByNum,\r\n      handleDetail,\r\n      seeNowVideo,\r\n      seeHistoryVideo\r\n    };\r\n  }\r\n});\r\n","import { render } from \"./cameraList.vue?vue&type=template&id=f40876e2\"\nimport script from \"./cameraList.vue?vue&type=script&lang=ts\"\nexport * from \"./cameraList.vue?vue&type=script&lang=ts\"\nscript.render = render\n\nexport default script","<!--\r\n * @Description: \r\n * @Author: liufuqiang\r\n * @Date: 2021-02-08 15:24:08\r\n * @LastEditors: liufuqiang\r\n * @LastEditTime: 2021-02-20 16:02:35\r\n-->\r\n<template>\r\n  <!-- 基站 -->\r\n  <div class=\"station\">\r\n    <el-form :model=\"params\" label-width=\"80px\" :inline=\"true\" size=\"small\">\r\n      <el-form-item label=\"基站编号\">\r\n        <el-input v-model.trim=\"params.dnum\" clearable @change=\"search\" />\r\n      </el-form-item>\r\n      <el-form-item>\r\n        <el-button type=\"primary\" @click=\"search\">搜索</el-button>\r\n      </el-form-item>\r\n    </el-form>\r\n\r\n    <div class=\"tips\">\r\n      <div v-for=\"item in tips\" :key=\"item.label\">\r\n        <span\r\n          class=\"icon iconfont\"\r\n          v-html=\"item.icon\"\r\n          :style=\"{ color: item.color }\"\r\n        ></span>\r\n        <span>{{ item.label }}</span>\r\n      </div>\r\n    </div>\r\n    <div class=\"station-list clearfix\" @touchstart=\"getFirstY\" ref=\"listBar\">\r\n      <div\r\n        v-for=\"item in tableData\"\r\n        :key=\"item.id\"\r\n        @click=\"handleDetail(item)\"\r\n        class=\"station-item\"\r\n        :class=\"item.isSelected ? 'checked' : 'item'\"\r\n      >\r\n        <div class=\"direction-light\">\r\n          <span class=\"icon iconfont\" :style=\"style[item.uwbt3checking || 0]\"\r\n            >&#xe628;</span\r\n          >\r\n          <span class=\"icon iconfont\" :style=\"style[item.uwbr4checking || 0]\"\r\n            >&#xe628;</span\r\n          >\r\n          <span class=\"icon iconfont\" :style=\"style[item.rfidchecking || 0]\"\r\n            >&#xe628;</span\r\n          >\r\n        </div>\r\n        <div class=\"direction-light\">\r\n          <span class=\"icon iconfont\" :style=\"style[item.uwbt3checking || 0]\"\r\n            >T3</span\r\n          >\r\n          <span class=\"icon iconfont\" :style=\"style[item.uwbr4checking || 0]\"\r\n            >R4</span\r\n          >\r\n          <span class=\"icon iconfont\" :style=\"style[item.rfidchecking || 0]\"\r\n            >RFID</span\r\n          >\r\n        </div>\r\n        <span\r\n          class=\"icon iconfont item-square\"\r\n          :style=\"timeStyle[styleFilter(item)]\"\r\n          >&#xe666;</span\r\n        >\r\n        <p :title=\"item.dnum\">{{ item.dnum }}</p>\r\n        <p :title=\"item.dtype\">{{ item.dtype }}</p>\r\n        <p :title=\"item.version\">{{ item.version }}</p>\r\n      </div>\r\n    </div>\r\n\r\n    <el-pagination\r\n      v-show=\"total && tableData && tableData.length\"\r\n      background\r\n      v-model:current-page=\"params.page\"\r\n      layout=\"total, prev, pager, next, jumper\"\r\n      :total=\"total\"\r\n      @current-change=\"changePage\"\r\n    />\r\n  </div>\r\n</template>\r\n\r\n<script lang=\"ts\">\r\nimport {\r\n  defineComponent,\r\n  reactive,\r\n  ref,\r\n  onMounted,\r\n  shallowRef,\r\n  toRefs\r\n} from \"vue\";\r\nimport commonApi from \"@/api/common\";\r\nimport { TYPES } from \"../constVariables\";\r\nimport { IDeviceItem } from \"../types\";\r\nimport { getMapByNum } from \"@/utils/auth\";\r\nconst CLICKED = \"clicked\";\r\n\r\nexport default defineComponent({\r\n  name: \"BasestationList\",\r\n  emits: [\"showEquipDetails\", CLICKED],\r\n  setup(props, { emit }) {\r\n    const baseData = reactive({\r\n      timeStyle: [\r\n        {\r\n          color: \"#0066ff\"\r\n        },\r\n        {\r\n          color: \"#707070\"\r\n        }\r\n      ],\r\n      style: [\r\n        // {\r\n        //   color: \"#666600\"\r\n        // },\r\n        {\r\n          color: \"#FF0000\"\r\n        },\r\n        {\r\n          color: \"#00FF00\"\r\n        },\r\n        {\r\n          color: \"#0000FF\"\r\n        },\r\n        {\r\n          color: \"#FFFF00\"\r\n        },\r\n        {\r\n          color: \"#00FFFF\"\r\n        },\r\n        {\r\n          color: \"#FF00FF\"\r\n        }\r\n      ],\r\n      timeTipsStyle: [\r\n        {\r\n          color: \"#0066ff\"\r\n        },\r\n        {\r\n          color: \"#707070\"\r\n        }\r\n      ]\r\n    });\r\n    const tips = ref([\r\n      {\r\n        icon: \"&#xe628;\",\r\n        label: \"自检失败\",\r\n        color: \"#FF0000\"\r\n      },\r\n      {\r\n        icon: \"&#xe628;\",\r\n        label: \"读ID成功\",\r\n        color: \"#00FF00\"\r\n      },\r\n      {\r\n        icon: \"&#xe628;\",\r\n        label: \"自检成功\",\r\n        color: \"#0000FF\"\r\n      },\r\n      {\r\n        icon: \"&#xe628;\",\r\n        label: \"设备功能关闭\",\r\n        color: \"#FFFF00\"\r\n      },\r\n      {\r\n        icon: \"&#xe628;\",\r\n        label: \"运行过程检测ID失败\",\r\n        color: \"#00FFFF\"\r\n      },\r\n      {\r\n        icon: \"&#xe666;\",\r\n        label: \"有效\",\r\n        color: \"#0066ff\"\r\n      },\r\n      {\r\n        icon: \"&#xe666;\",\r\n        label: \"失效\",\r\n        color: \"#707070\"\r\n      }\r\n    ]);\r\n    const params = reactive({\r\n      page: 1,\r\n      pagesize: 10,\r\n      dtype: \"基站\",\r\n      dnum: \"\"\r\n    });\r\n    const loading = shallowRef<boolean>(false);\r\n    const tableData = ref<IDeviceItem[]>([]);\r\n    const total = shallowRef<number>(0);\r\n    // 获取分页列表\r\n    async function getList() {\r\n      loading.value = true;\r\n      const param = {\r\n        act: \"mKQQKGa49xhcOWaBjDI1612407197459\",\r\n        curpage: params.page,\r\n        // eslint-disable-next-line @typescript-eslint/camelcase\r\n        sys_showpagesize: params.pagesize,\r\n        dtype: params.dtype,\r\n        dnum: params.dnum\r\n      };\r\n      const res = await commonApi.getCommonApi(param);\r\n      const { data } = res as any;\r\n\r\n      data.content.forEach((item: any) => {\r\n        if (item.eattribute) {\r\n          const attrs = item.eattribute.split(\",\");\r\n          attrs.forEach((elem: any) => {\r\n            const attrName = elem.split(\"|\");\r\n            const arr = [\r\n              \"status\", // 设备在线状态\r\n              \"hearttime\", // 最后心跳时间\r\n              \"softver\", // 软件版本号\r\n              \"hardwarever\", // 硬件版本号\r\n              \"version\", // 软件版本号\r\n              \"starttype\", // 启动类型\r\n              \"checkState\", // 自检状态\r\n              \"maxstr\", // 物理\r\n              \"uwbr4checking\", // UWBR4自检结果\r\n              \"uwbt3checking\", // UWBT3自检\r\n              \"rfidchecking\", // RFID自检结果\r\n              \"pattern\" // 模式\r\n            ];\r\n            arr.forEach(prop => {\r\n              if (!item[prop] && attrName[0] === prop) {\r\n                item[prop] = attrName[1].split(\":\")[1];\r\n              }\r\n            });\r\n          });\r\n        }\r\n        let extinfo = item.extinfo;\r\n        if (extinfo) {\r\n          if (!extinfo.startsWith(\"{\")) {\r\n            extinfo = JSON.parse(JSON.stringify(extinfo));\r\n          } else {\r\n            extinfo = JSON.parse(extinfo);\r\n          }\r\n\r\n          item.x = extinfo.xcoordinate; // x坐标\r\n          item.y = extinfo.ycoordinate; // y坐标\r\n        }\r\n      });\r\n      tableData.value = data.content;\r\n      console.log(\"tableData.value\", tableData.value);\r\n      total.value = data.count;\r\n      loading.value = false;\r\n    }\r\n    // 动态样式\r\n    function styleFilter(item: any) {\r\n      return item.status == \"在线\" ? 0 : 1;\r\n    }\r\n\r\n    // 查看详情\r\n    function handleDetail(row: IDeviceItem) {\r\n      emit(\"showEquipDetails\", row, TYPES.basestation);\r\n      emit(CLICKED);\r\n    }\r\n    // 分页\r\n    async function changePage(page: number) {\r\n      params.page = page;\r\n      getList();\r\n    }\r\n    // 搜索\r\n    async function search() {\r\n      params.page = 1;\r\n      getList();\r\n    }\r\n\r\n    onMounted(() => {\r\n      getList();\r\n    });\r\n\r\n    return {\r\n      ...toRefs(baseData),\r\n      tips,\r\n      params,\r\n      loading,\r\n      tableData,\r\n      total,\r\n      handleDetail,\r\n      changePage,\r\n      search,\r\n      getMapByNum,\r\n      styleFilter\r\n    };\r\n  }\r\n});\r\n</script>\r\n<style lang=\"scss\" scoped>\r\n.station {\r\n  border-radius: 0.5rem;\r\n  .station-list {\r\n    height: 37.3rem;\r\n    padding: 0 1rem;\r\n    overflow: auto;\r\n    &::-webkit-scrollbar {\r\n      /*滚动条整体样式*/\r\n      width: 0.5rem; /*高宽分别对应横竖滚动条的尺寸*/\r\n    }\r\n    &::-webkit-scrollbar-thumb {\r\n      /*滚动条里面小方块*/\r\n      /*!*滚动条里面小方块*!*/\r\n      border-radius: 0.3rem;\r\n      background: rgba(255, 255, 255, 0.3);\r\n      height: 3rem;\r\n    }\r\n    & > div {\r\n      float: left;\r\n      width: 10%;\r\n      height: 9rem;\r\n      display: flex;\r\n      justify-content: center;\r\n    }\r\n    .station-item {\r\n      width: 14rem;\r\n      height: 14rem;\r\n      margin-top: 2rem;\r\n      display: flex;\r\n      justify-content: center;\r\n      align-items: center;\r\n      flex-direction: column;\r\n      text-align: center;\r\n      cursor: pointer;\r\n      margin-left: 3rem;\r\n      .direction-light {\r\n        width: 100%;\r\n        display: flex;\r\n        justify-content: space-between;\r\n        span {\r\n          font-size: 1.4rem;\r\n          margin: 0 1rem;\r\n        }\r\n      }\r\n\r\n      .item-square {\r\n        color: rgb(0, 102, 255);\r\n      }\r\n      span {\r\n        font-size: 4rem;\r\n        margin-top: 0.2rem;\r\n      }\r\n      p {\r\n        text-align: center;\r\n        font-size: 1.2rem;\r\n        margin: 0.1rem 0;\r\n        overflow: hidden;\r\n        text-overflow: ellipsis;\r\n        white-space: nowrap;\r\n        line-height: 2rem;\r\n        height: 2rem;\r\n      }\r\n    }\r\n    .item {\r\n      background: url(\"../../../../assets/dashboard/equip_unchecked.png\")\r\n        no-repeat center;\r\n      background-size: 100% 100%;\r\n      &:hover {\r\n        background: url(\"../../../../assets/dashboard/equip_checked.png\")\r\n          no-repeat center;\r\n        background-size: 100% 100%;\r\n      }\r\n    }\r\n    .checked {\r\n      background: url(\"../../../../assets/dashboard/equip_checked.png\")\r\n        no-repeat center;\r\n      background-size: 100% 100%;\r\n    }\r\n  }\r\n  .clearfix:after {\r\n    content: \".\"; /* 内容为小点， 尽量加不要空， 否则旧版本浏览器有空隙 */\r\n    display: block; /* 转换为块级元素 */\r\n    height: 0; /* 高度为0 */\r\n    visibility: hidden; /* 隐藏盒子 */\r\n    clear: both; /* 清除浮动 */\r\n  }\r\n}\r\n\r\n.tips {\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: space-evenly;\r\n  padding: 10px 20px;\r\n  background: rgba(49, 142, 255, 0.2);\r\n\r\n  span + span {\r\n    margin-left: 0.5rem;\r\n  }\r\n}\r\n</style>\r\n","\r\nimport {\r\n  defineComponent,\r\n  reactive,\r\n  ref,\r\n  onMounted,\r\n  shallowRef,\r\n  toRefs\r\n} from \"vue\";\r\nimport commonApi from \"@/api/common\";\r\nimport { TYPES } from \"../constVariables\";\r\nimport { IDeviceItem } from \"../types\";\r\nimport { getMapByNum } from \"@/utils/auth\";\r\nconst CLICKED = \"clicked\";\r\n\r\nexport default defineComponent({\r\n  name: \"BasestationList\",\r\n  emits: [\"showEquipDetails\", CLICKED],\r\n  setup(props, { emit }) {\r\n    const baseData = reactive({\r\n      timeStyle: [\r\n        {\r\n          color: \"#0066ff\"\r\n        },\r\n        {\r\n          color: \"#707070\"\r\n        }\r\n      ],\r\n      style: [\r\n        // {\r\n        //   color: \"#666600\"\r\n        // },\r\n        {\r\n          color: \"#FF0000\"\r\n        },\r\n        {\r\n          color: \"#00FF00\"\r\n        },\r\n        {\r\n          color: \"#0000FF\"\r\n        },\r\n        {\r\n          color: \"#FFFF00\"\r\n        },\r\n        {\r\n          color: \"#00FFFF\"\r\n        },\r\n        {\r\n          color: \"#FF00FF\"\r\n        }\r\n      ],\r\n      timeTipsStyle: [\r\n        {\r\n          color: \"#0066ff\"\r\n        },\r\n        {\r\n          color: \"#707070\"\r\n        }\r\n      ]\r\n    });\r\n    const tips = ref([\r\n      {\r\n        icon: \"&#xe628;\",\r\n        label: \"自检失败\",\r\n        color: \"#FF0000\"\r\n      },\r\n      {\r\n        icon: \"&#xe628;\",\r\n        label: \"读ID成功\",\r\n        color: \"#00FF00\"\r\n      },\r\n      {\r\n        icon: \"&#xe628;\",\r\n        label: \"自检成功\",\r\n        color: \"#0000FF\"\r\n      },\r\n      {\r\n        icon: \"&#xe628;\",\r\n        label: \"设备功能关闭\",\r\n        color: \"#FFFF00\"\r\n      },\r\n      {\r\n        icon: \"&#xe628;\",\r\n        label: \"运行过程检测ID失败\",\r\n        color: \"#00FFFF\"\r\n      },\r\n      {\r\n        icon: \"&#xe666;\",\r\n        label: \"有效\",\r\n        color: \"#0066ff\"\r\n      },\r\n      {\r\n        icon: \"&#xe666;\",\r\n        label: \"失效\",\r\n        color: \"#707070\"\r\n      }\r\n    ]);\r\n    const params = reactive({\r\n      page: 1,\r\n      pagesize: 10,\r\n      dtype: \"基站\",\r\n      dnum: \"\"\r\n    });\r\n    const loading = shallowRef<boolean>(false);\r\n    const tableData = ref<IDeviceItem[]>([]);\r\n    const total = shallowRef<number>(0);\r\n    // 获取分页列表\r\n    async function getList() {\r\n      loading.value = true;\r\n      const param = {\r\n        act: \"mKQQKGa49xhcOWaBjDI1612407197459\",\r\n        curpage: params.page,\r\n        // eslint-disable-next-line @typescript-eslint/camelcase\r\n        sys_showpagesize: params.pagesize,\r\n        dtype: params.dtype,\r\n        dnum: params.dnum\r\n      };\r\n      const res = await commonApi.getCommonApi(param);\r\n      const { data } = res as any;\r\n\r\n      data.content.forEach((item: any) => {\r\n        if (item.eattribute) {\r\n          const attrs = item.eattribute.split(\",\");\r\n          attrs.forEach((elem: any) => {\r\n            const attrName = elem.split(\"|\");\r\n            const arr = [\r\n              \"status\", // 设备在线状态\r\n              \"hearttime\", // 最后心跳时间\r\n              \"softver\", // 软件版本号\r\n              \"hardwarever\", // 硬件版本号\r\n              \"version\", // 软件版本号\r\n              \"starttype\", // 启动类型\r\n              \"checkState\", // 自检状态\r\n              \"maxstr\", // 物理\r\n              \"uwbr4checking\", // UWBR4自检结果\r\n              \"uwbt3checking\", // UWBT3自检\r\n              \"rfidchecking\", // RFID自检结果\r\n              \"pattern\" // 模式\r\n            ];\r\n            arr.forEach(prop => {\r\n              if (!item[prop] && attrName[0] === prop) {\r\n                item[prop] = attrName[1].split(\":\")[1];\r\n              }\r\n            });\r\n          });\r\n        }\r\n        let extinfo = item.extinfo;\r\n        if (extinfo) {\r\n          if (!extinfo.startsWith(\"{\")) {\r\n            extinfo = JSON.parse(JSON.stringify(extinfo));\r\n          } else {\r\n            extinfo = JSON.parse(extinfo);\r\n          }\r\n\r\n          item.x = extinfo.xcoordinate; // x坐标\r\n          item.y = extinfo.ycoordinate; // y坐标\r\n        }\r\n      });\r\n      tableData.value = data.content;\r\n      console.log(\"tableData.value\", tableData.value);\r\n      total.value = data.count;\r\n      loading.value = false;\r\n    }\r\n    // 动态样式\r\n    function styleFilter(item: any) {\r\n      return item.status == \"在线\" ? 0 : 1;\r\n    }\r\n\r\n    // 查看详情\r\n    function handleDetail(row: IDeviceItem) {\r\n      emit(\"showEquipDetails\", row, TYPES.basestation);\r\n      emit(CLICKED);\r\n    }\r\n    // 分页\r\n    async function changePage(page: number) {\r\n      params.page = page;\r\n      getList();\r\n    }\r\n    // 搜索\r\n    async function search() {\r\n      params.page = 1;\r\n      getList();\r\n    }\r\n\r\n    onMounted(() => {\r\n      getList();\r\n    });\r\n\r\n    return {\r\n      ...toRefs(baseData),\r\n      tips,\r\n      params,\r\n      loading,\r\n      tableData,\r\n      total,\r\n      handleDetail,\r\n      changePage,\r\n      search,\r\n      getMapByNum,\r\n      styleFilter\r\n    };\r\n  }\r\n});\r\n","import { render } from \"./basestationList.vue?vue&type=template&id=519e38a4&scoped=true\"\nimport script from \"./basestationList.vue?vue&type=script&lang=ts\"\nexport * from \"./basestationList.vue?vue&type=script&lang=ts\"\n\nimport \"./basestationList.vue?vue&type=style&index=0&id=519e38a4&lang=scss&scoped=true\"\nscript.render = render\nscript.__scopeId = \"data-v-519e38a4\"\n\nexport default script","<!--\r\n * @Description:\r\n * @Author: huxianc\r\n * @Date: 2020-11-30 10:05:06\r\n * @LastEditors: huxianc\r\n * @LastEditTime: 2021-02-03 14:23:43\r\n-->\r\n<template>\r\n  <ul class=\"fence-box\">\r\n    <li\r\n      v-for=\"(item, index) in list\"\r\n      :key=\"index\"\r\n      :class=\"{ active: index === 0 }\"\r\n      @click=\"handleClick(item)\"\r\n    >\r\n      {{ item.label }}\r\n    </li>\r\n  </ul>\r\n</template>\r\n\r\n<script lang=\"ts\">\r\nimport { defineComponent, defineEmit } from \"vue\";\r\ninterface ILabel {\r\n  label: string;\r\n  code?: string;\r\n}\r\n\r\ntype TEmitEvents = \"revoke\" | \"redraw\" | \"cancel\" | \"finish\";\r\n\r\n// const emit = defineEmit([\"revoke\", \"redraw\", \"cancel\", \"finish\"]);\r\n\r\nexport default defineComponent({\r\n  name: \"fenceBox\",\r\n  emits: [\"revoke\", \"redraw\", \"cancel\", \"finish\"],\r\n  setup(props, { emit }) {\r\n    const list: ILabel[] = [\r\n      {\r\n        label: \"绘制\"\r\n      },\r\n      {\r\n        label: \"撤销\",\r\n        code: \"revoke\"\r\n      },\r\n      {\r\n        label: \"重新绘制\",\r\n        code: \"redraw\"\r\n      },\r\n      {\r\n        label: \"取消\",\r\n        code: \"cancel\"\r\n      },\r\n      {\r\n        label: \"完成\",\r\n        code: \"finish\"\r\n      }\r\n    ];\r\n    const handleClick = (item: ILabel) => {\r\n      if (item.code) {\r\n        emit(item.code as TEmitEvents);\r\n      }\r\n    };\r\n    return {\r\n      list,\r\n      handleClick\r\n    };\r\n  }\r\n});\r\n</script>\r\n","\r\nimport { defineComponent, defineEmit } from \"vue\";\r\ninterface ILabel {\r\n  label: string;\r\n  code?: string;\r\n}\r\n\r\ntype TEmitEvents = \"revoke\" | \"redraw\" | \"cancel\" | \"finish\";\r\n\r\n// const emit = defineEmit([\"revoke\", \"redraw\", \"cancel\", \"finish\"]);\r\n\r\nexport default defineComponent({\r\n  name: \"fenceBox\",\r\n  emits: [\"revoke\", \"redraw\", \"cancel\", \"finish\"],\r\n  setup(props, { emit }) {\r\n    const list: ILabel[] = [\r\n      {\r\n        label: \"绘制\"\r\n      },\r\n      {\r\n        label: \"撤销\",\r\n        code: \"revoke\"\r\n      },\r\n      {\r\n        label: \"重新绘制\",\r\n        code: \"redraw\"\r\n      },\r\n      {\r\n        label: \"取消\",\r\n        code: \"cancel\"\r\n      },\r\n      {\r\n        label: \"完成\",\r\n        code: \"finish\"\r\n      }\r\n    ];\r\n    const handleClick = (item: ILabel) => {\r\n      if (item.code) {\r\n        emit(item.code as TEmitEvents);\r\n      }\r\n    };\r\n    return {\r\n      list,\r\n      handleClick\r\n    };\r\n  }\r\n});\r\n","import { render } from \"./fenceBox.vue?vue&type=template&id=3a1c9e3c\"\nimport script from \"./fenceBox.vue?vue&type=script&lang=ts\"\nexport * from \"./fenceBox.vue?vue&type=script&lang=ts\"\nscript.render = render\n\nexport default script","<!--\r\n * @Description:\r\n * @Author: huxianc\r\n * @Date: 2020-12-02 09:48:05\r\n * @LastEditors: liufuqiang\r\n * @LastEditTime: 2021-01-07 10:28:15\r\n-->\r\n<template>\r\n  <div\r\n    v-show=\"contextmenuList.length\"\r\n    ref=\"contextMenuRef\"\r\n    class=\"context-menu\"\r\n    :style=\"styleAttrs ? styleAttrs : {}\"\r\n    :class=\"{ hidden: hiddenRef }\"\r\n  >\r\n    <div\r\n      v-for=\"menuItem in contextmenuList\"\r\n      :key=\"menuItem.label\"\r\n      class=\"menu-item\"\r\n      @click=\"handleClickContentmenu(menuItem.clickCode)\"\r\n    >\r\n      {{ menuItem.label }}\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script lang=\"ts\">\r\nimport {\r\n  defineComponent,\r\n  nextTick,\r\n  onMounted,\r\n  PropType,\r\n  ref,\r\n  shallowReactive,\r\n  shallowRef,\r\n  watch\r\n} from \"vue\";\r\nimport { getCorrectPx } from \"../utils\";\r\nimport { TYPES } from \"../constVariables\";\r\nimport { IPos, IStyleLeftTop, TShapeType } from \"../types\";\r\n\r\nconst SHOW_DETAILS = \"showDetails\";\r\nconst TRACK_PLAYBACK = \"trackPlayback\";\r\nconst CLICKED = \"clicked\";\r\nconst SEE_NOWVIDEO = \"seeNowVideo\";\r\nconst SEE_HISTORYVIDEO = \"seeHistoryVideo\";\r\nconst FOLLOW = \"follow\";\r\n\r\nconst emits = [\r\n  SHOW_DETAILS,\r\n  TRACK_PLAYBACK,\r\n  CLICKED,\r\n  SEE_NOWVIDEO,\r\n  SEE_HISTORYVIDEO,\r\n  FOLLOW\r\n];\r\n\r\nexport default defineComponent({\r\n  props: {\r\n    type: {\r\n      type: String as PropType<TShapeType>,\r\n      default: TYPES.basestation\r\n    },\r\n    // 右键菜单列表\r\n    contextmenuList: {\r\n      type: Array,\r\n      default: () => []\r\n    },\r\n    // 传过来的鼠标位置\r\n    contxtmenuPosition: {\r\n      type: Object as PropType<IStyleLeftTop>,\r\n      default: () => ({})\r\n    }\r\n  },\r\n  emits,\r\n  setup(props, { emit }) {\r\n    const styleAttrs = shallowReactive<IPos>({ x: 0, y: 0 });\r\n    const hiddenRef = shallowRef<boolean>(true);\r\n\r\n    const contextMenuRef = ref();\r\n\r\n    function handleClickContentmenu(clickCode: string) {\r\n      if (emits.includes(clickCode)) {\r\n        emit(clickCode, props.type);\r\n      }\r\n      emit(CLICKED);\r\n    }\r\n\r\n    function getPx() {\r\n      nextTick(() => {\r\n        const res = getCorrectPx(\r\n          contextMenuRef.value as HTMLElement,\r\n          props.contxtmenuPosition\r\n        );\r\n\r\n        const positions = {};\r\n        for (const key in res) {\r\n          positions[key] = res[key] + \"px\";\r\n        }\r\n\r\n        Object.assign(styleAttrs, positions);\r\n        hiddenRef.value = false;\r\n      });\r\n    }\r\n\r\n    watch(\r\n      () => props.contxtmenuPosition,\r\n      () => {\r\n        getPx();\r\n      }\r\n    );\r\n\r\n    onMounted(() => {\r\n      getPx();\r\n    });\r\n\r\n    return {\r\n      contextMenuRef,\r\n      styleAttrs,\r\n      hiddenRef,\r\n      handleClickContentmenu\r\n    };\r\n  }\r\n});\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n.context-menu {\r\n  padding: 10px 0;\r\n  position: absolute;\r\n  z-index: 200;\r\n  background: #fff;\r\n  border-radius: 4px;\r\n  border: 1px solid #ebeef5;\r\n  box-shadow: 0 2px 12px 0 rgba(0, 0, 0, 0.1);\r\n  left: 0px;\r\n  top: 30px;\r\n\r\n  &.hidden {\r\n    visibility: hidden;\r\n  }\r\n\r\n  .menu-item {\r\n    padding: 0 20px;\r\n    font-size: 14px;\r\n    color: #606266;\r\n    line-height: 36px;\r\n    outline: none;\r\n    cursor: pointer;\r\n    white-space: nowrap;\r\n\r\n    &:hover {\r\n      background: #ecf5ff;\r\n      color: #66b1ff;\r\n    }\r\n  }\r\n}\r\n</style>\r\n","\r\nimport {\r\n  defineComponent,\r\n  nextTick,\r\n  onMounted,\r\n  PropType,\r\n  ref,\r\n  shallowReactive,\r\n  shallowRef,\r\n  watch\r\n} from \"vue\";\r\nimport { getCorrectPx } from \"../utils\";\r\nimport { TYPES } from \"../constVariables\";\r\nimport { IPos, IStyleLeftTop, TShapeType } from \"../types\";\r\n\r\nconst SHOW_DETAILS = \"showDetails\";\r\nconst TRACK_PLAYBACK = \"trackPlayback\";\r\nconst CLICKED = \"clicked\";\r\nconst SEE_NOWVIDEO = \"seeNowVideo\";\r\nconst SEE_HISTORYVIDEO = \"seeHistoryVideo\";\r\nconst FOLLOW = \"follow\";\r\n\r\nconst emits = [\r\n  SHOW_DETAILS,\r\n  TRACK_PLAYBACK,\r\n  CLICKED,\r\n  SEE_NOWVIDEO,\r\n  SEE_HISTORYVIDEO,\r\n  FOLLOW\r\n];\r\n\r\nexport default defineComponent({\r\n  props: {\r\n    type: {\r\n      type: String as PropType<TShapeType>,\r\n      default: TYPES.basestation\r\n    },\r\n    // 右键菜单列表\r\n    contextmenuList: {\r\n      type: Array,\r\n      default: () => []\r\n    },\r\n    // 传过来的鼠标位置\r\n    contxtmenuPosition: {\r\n      type: Object as PropType<IStyleLeftTop>,\r\n      default: () => ({})\r\n    }\r\n  },\r\n  emits,\r\n  setup(props, { emit }) {\r\n    const styleAttrs = shallowReactive<IPos>({ x: 0, y: 0 });\r\n    const hiddenRef = shallowRef<boolean>(true);\r\n\r\n    const contextMenuRef = ref();\r\n\r\n    function handleClickContentmenu(clickCode: string) {\r\n      if (emits.includes(clickCode)) {\r\n        emit(clickCode, props.type);\r\n      }\r\n      emit(CLICKED);\r\n    }\r\n\r\n    function getPx() {\r\n      nextTick(() => {\r\n        const res = getCorrectPx(\r\n          contextMenuRef.value as HTMLElement,\r\n          props.contxtmenuPosition\r\n        );\r\n\r\n        const positions = {};\r\n        for (const key in res) {\r\n          positions[key] = res[key] + \"px\";\r\n        }\r\n\r\n        Object.assign(styleAttrs, positions);\r\n        hiddenRef.value = false;\r\n      });\r\n    }\r\n\r\n    watch(\r\n      () => props.contxtmenuPosition,\r\n      () => {\r\n        getPx();\r\n      }\r\n    );\r\n\r\n    onMounted(() => {\r\n      getPx();\r\n    });\r\n\r\n    return {\r\n      contextMenuRef,\r\n      styleAttrs,\r\n      hiddenRef,\r\n      handleClickContentmenu\r\n    };\r\n  }\r\n});\r\n","import { render } from \"./contextmenuContent.vue?vue&type=template&id=856d70f6&scoped=true\"\nimport script from \"./contextmenuContent.vue?vue&type=script&lang=ts\"\nexport * from \"./contextmenuContent.vue?vue&type=script&lang=ts\"\n\nimport \"./contextmenuContent.vue?vue&type=style&index=0&id=856d70f6&lang=scss&scoped=true\"\nscript.render = render\nscript.__scopeId = \"data-v-856d70f6\"\n\nexport default script","<!--\r\n * @Description:\r\n * @Author: huxianc\r\n * @Date: 2020-12-03 17:03:54\r\n * @LastEditors: liufuqiang\r\n * @LastEditTime: 2021-02-20 15:57:55\r\n-->\r\n\r\n<template>\r\n  <div class=\"form-content-pannel\">\r\n    <div class=\"person-img\" v-if=\"formType === types.person\">\r\n      <el-image :src=\"form.Photo || form.src\" />\r\n    </div>\r\n    <div class=\"detail-content\">\r\n      <el-form\r\n        v-if=\"formData\"\r\n        ref=\"formContentRef\"\r\n        :model=\"form\"\r\n        label-width=\"110px\"\r\n        size=\"small\"\r\n      >\r\n        <!-- 标签 -->\r\n        <label-item v-if=\"formType === types.labelList\" :deviceData=\"form\" />\r\n        <!-- 人员 -->\r\n        <personItem v-else-if=\"formType === types.person\" :deviceData=\"form\" />\r\n        <!-- 基站 -->\r\n        <basestationItem\r\n          v-else-if=\"formType === types.basestation\"\r\n          :deviceData=\"form\"\r\n        />\r\n        <!-- 摄像头 -->\r\n        <cameraItem v-else :deviceData=\"form\" />\r\n\r\n        <!-- 通用的备注 -->\r\n        <el-row :gutter=\"0\">\r\n          <el-col :span=\"24\" :offset=\"0\">\r\n            <el-form-item label=\"备注：\">\r\n              {{ form.desc }}\r\n            </el-form-item>\r\n          </el-col>\r\n        </el-row>\r\n      </el-form>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script lang=\"ts\">\r\nimport { TYPES } from \"../constVariables\";\r\nimport { defineComponent, PropType, reactive, ref, watch } from \"vue\";\r\nimport { TShapeType } from \"../types\";\r\nimport { labelItem, personItem, basestationItem, cameraItem } from \"./formItem\";\r\nimport { cloneDeep } from \"lodash\";\r\n\r\nexport default defineComponent({\r\n  name: \"FormContent\",\r\n  props: {\r\n    formType: {\r\n      type: String as PropType<TShapeType>,\r\n      default: TYPES.person\r\n    },\r\n    x: { type: Number, default: 0 },\r\n    y: { type: Number, default: 0 },\r\n    formData: {\r\n      type: Object,\r\n      default: () => ({})\r\n    }\r\n  },\r\n  components: { labelItem, personItem, basestationItem, cameraItem },\r\n  setup(props) {\r\n    const formContentRef = ref();\r\n\r\n    const form = reactive({\r\n      // 人员\r\n      roomNum: \"1\",\r\n      src: \"/images/staff_big.png\",\r\n      // 基站\r\n      dname: \"\",\r\n      dnum: \"\",\r\n      x: \"\",\r\n      y: \"\",\r\n      dtype: \"\",\r\n      status: \"\",\r\n      hardwarever: \"\",\r\n      version: \"\",\r\n      starttype: 0,\r\n      checkState: 0,\r\n      uwbr4checking: 0,\r\n      uwbt3checking: 0,\r\n      rfidchecking: 0,\r\n      pattern: \"\",\r\n      // 标签\r\n      currentalarm: \"\", // 落水报警\r\n      voltage: 0, // 电压\r\n      // eslint-disable-next-line @typescript-eslint/camelcase\r\n      bracelet_voltage: 0, // 手环电压\r\n      // 摄像头\r\n      UserName: \"\",\r\n      Password: \"\",\r\n      ChanelNum: 0,\r\n      IsYunTai: false,\r\n      IsCameraPhoto: \"\",\r\n\r\n      AlarmMappingLayerIdS: \"\",\r\n      BrandCode: \"\",\r\n      BrandName: \"\",\r\n      BuildingName: \"\",\r\n      BuildingNum: \"\",\r\n      CreateTime: \"\",\r\n      DeviceName: \"\",\r\n      DeviceNum: \"\",\r\n      DeviceObjProperty: \"\",\r\n      DeviceSelfPointRelation: \"\",\r\n      DeviceType: \"\",\r\n      DeviceTypeCode: \"\",\r\n      InstallSceneNum: \"\",\r\n      IsUse: true,\r\n      OwnAlarmSourceCode: \"\",\r\n      PDeviceIds: \"\",\r\n      SceneName: \"\",\r\n\r\n      // 公共\r\n      shapeName: \"\",\r\n      desc: \"\"\r\n    });\r\n    const formDatas = cloneDeep(form);\r\n    const types = TYPES;\r\n\r\n    watch(\r\n      () => props.formData,\r\n      newVal => {\r\n        if (newVal) {\r\n          console.log(\"newVal\", newVal);\r\n          Object.assign(form, formDatas);\r\n          Object.assign(form, newVal);\r\n          form.x = String(props.x) !== \"0\" ? String(props.x) : form.x;\r\n          form.y = String(props.y) !== \"0\" ? String(props.y) : form.y;\r\n        }\r\n      },\r\n      {\r\n        immediate: true,\r\n        deep: true\r\n      }\r\n    );\r\n\r\n    watch(\r\n      () => props.x,\r\n      newX => {\r\n        console.log(\"x\", newX);\r\n        if (!isNaN(newX)) {\r\n          form.x = String(newX);\r\n        }\r\n      }\r\n    );\r\n    watch(\r\n      () => props.y,\r\n      newY => {\r\n        if (!isNaN(newY)) {\r\n          form.y = String(newY);\r\n        }\r\n      }\r\n    );\r\n\r\n    return {\r\n      formContentRef,\r\n      form,\r\n      types\r\n    };\r\n  }\r\n});\r\n</script>\r\n<style lang=\"scss\" scope>\r\n.form-content-pannel {\r\n  display: flex;\r\n  .person-img {\r\n    width: 30%;\r\n    padding: 30px 30px 201px;\r\n    img {\r\n      width: 140px;\r\n      height: 185px;\r\n    }\r\n  }\r\n  .detail-content {\r\n    padding-top: 30px;\r\n  }\r\n}\r\n</style>\r\n","<!--\r\n * @Description: \r\n * @Author: liufuqiang\r\n * @Date: 2021-02-08 17:58:51\r\n * @LastEditors: liufuqiang\r\n * @LastEditTime: 2021-02-20 14:28:12\r\n-->\r\n<template>\r\n  <el-row>\r\n    <el-col :span=\"12\" :offset=\"0\"\r\n      ><el-form-item label=\"编号：\">\r\n        {{ dnum }}\r\n      </el-form-item></el-col\r\n    >\r\n    <el-col :span=\"12\" :offset=\"0\">\r\n      <el-form-item label=\"在线状态：\">\r\n        <el-tag v-if=\"status == '在线'\">在线</el-tag>\r\n        <el-tag v-if=\"status == '离线' || !status\" type=\"info\">离线</el-tag>\r\n      </el-form-item>\r\n    </el-col>\r\n    <el-col :span=\"12\" :offset=\"0\">\r\n      <el-form-item label=\"名称：\">\r\n        {{ dname }}\r\n      </el-form-item>\r\n    </el-col>\r\n    <el-col :span=\"12\" :offset=\"0\">\r\n      <el-form-item label=\"类型：\">\r\n        {{ dtype }}\r\n      </el-form-item>\r\n    </el-col>\r\n    <el-col :span=\"12\" :offset=\"0\">\r\n      <el-form-item label=\"位置：\">\r\n        {{ getMapByNum(snum).sname || \"未上线\" }}\r\n      </el-form-item>\r\n    </el-col>\r\n    <el-col :span=\"12\" :offset=\"0\">\r\n      <el-form-item label=\"最后心跳：\">\r\n        {{ hearttime }}\r\n      </el-form-item>\r\n    </el-col>\r\n    <el-col :span=\"12\" :offset=\"0\">\r\n      <el-form-item label=\"电压：\">\r\n        {{ voltage }}\r\n      </el-form-item>\r\n    </el-col>\r\n    <el-col :span=\"12\" :offset=\"0\">\r\n      <el-form-item label=\"手环电压：\">\r\n        {{ bracelet_voltage }}\r\n      </el-form-item>\r\n    </el-col>\r\n\r\n    <el-col :span=\"24\" :offset=\"0\">\r\n      <el-form-item label=\"当前报警：\">\r\n        {{ currentalarm }}\r\n      </el-form-item>\r\n    </el-col>\r\n  </el-row>\r\n</template>\r\n\r\n<script lang=\"ts\">\r\nimport { defineComponent, reactive, toRefs, watch } from \"vue\";\r\nimport { getMapByNum } from \"@/utils/auth\";\r\nexport default defineComponent({\r\n  name: \"LabelItem\",\r\n  props: {\r\n    deviceData: {\r\n      type: Object\r\n    }\r\n  },\r\n  setup(props) {\r\n    const form = reactive({\r\n      dname: \"\",\r\n      dnum: \"\",\r\n      dtype: \"\",\r\n      status: \"\",\r\n      hearttime: \"\",\r\n      currentalarm: \"\", // 落水报警\r\n      voltage: 0, // 电压\r\n      // eslint-disable-next-line @typescript-eslint/camelcase\r\n      bracelet_voltage: 0 // 手环电压\r\n    });\r\n\r\n    watch(\r\n      () => props.deviceData,\r\n      newVal => {\r\n        Object.assign(form, newVal);\r\n      },\r\n      {\r\n        immediate: true,\r\n        deep: true\r\n      }\r\n    );\r\n\r\n    return {\r\n      ...toRefs(form),\r\n      getMapByNum\r\n    };\r\n  }\r\n});\r\n</script>\r\n\r\n<style lang=\"scss\" scoped></style>\r\n","\r\nimport { defineComponent, reactive, toRefs, watch } from \"vue\";\r\nimport { getMapByNum } from \"@/utils/auth\";\r\nexport default defineComponent({\r\n  name: \"LabelItem\",\r\n  props: {\r\n    deviceData: {\r\n      type: Object\r\n    }\r\n  },\r\n  setup(props) {\r\n    const form = reactive({\r\n      dname: \"\",\r\n      dnum: \"\",\r\n      dtype: \"\",\r\n      status: \"\",\r\n      hearttime: \"\",\r\n      currentalarm: \"\", // 落水报警\r\n      voltage: 0, // 电压\r\n      // eslint-disable-next-line @typescript-eslint/camelcase\r\n      bracelet_voltage: 0 // 手环电压\r\n    });\r\n\r\n    watch(\r\n      () => props.deviceData,\r\n      newVal => {\r\n        Object.assign(form, newVal);\r\n      },\r\n      {\r\n        immediate: true,\r\n        deep: true\r\n      }\r\n    );\r\n\r\n    return {\r\n      ...toRefs(form),\r\n      getMapByNum\r\n    };\r\n  }\r\n});\r\n","import { render } from \"./labelItem.vue?vue&type=template&id=a6e507d2\"\nimport script from \"./labelItem.vue?vue&type=script&lang=ts\"\nexport * from \"./labelItem.vue?vue&type=script&lang=ts\"\nscript.render = render\n\nexport default script","<!--\r\n * @Description: \r\n * @Author: liufuqiang\r\n * @Date: 2021-02-08 17:58:51\r\n * @LastEditors: liufuqiang\r\n * @LastEditTime: 2021-02-18 16:29:11\r\n-->\r\n<template>\r\n  <el-row>\r\n    <el-col :span=\"12\" :offset=\"0\">\r\n      <el-form-item label=\"姓名：\">\r\n        {{ Username }}\r\n      </el-form-item>\r\n    </el-col>\r\n    <el-col :span=\"12\" :offset=\"0\"\r\n      ><el-form-item label=\"标签：\">\r\n        {{ DeviceName || \"未绑定\" }}\r\n      </el-form-item></el-col\r\n    >\r\n\r\n    <el-col :span=\"12\" :offset=\"0\">\r\n      <el-form-item label=\"类型：\">\r\n        {{ Personnel_category }}\r\n      </el-form-item>\r\n    </el-col>\r\n    <el-col :span=\"12\" :offset=\"0\">\r\n      <el-form-item label=\"职位：\">\r\n        {{ Position }}\r\n      </el-form-item>\r\n    </el-col>\r\n    <el-col :span=\"12\" :offset=\"0\">\r\n      <el-form-item label=\"状态：\">\r\n        {{ Fettle === 0 ? \"上船\" : \"离船\" }}\r\n      </el-form-item>\r\n    </el-col>\r\n  </el-row>\r\n</template>\r\n\r\n<script lang=\"ts\">\r\nimport { defineComponent, reactive, toRefs, watch } from \"vue\";\r\nexport default defineComponent({\r\n  name: \"PersonItem\",\r\n  props: {\r\n    deviceData: {\r\n      type: Object\r\n    }\r\n  },\r\n  setup(props) {\r\n    const form = reactive({\r\n      Username: \"\",\r\n      DeviceName: \"\",\r\n      Photo: \"\",\r\n      src: \"\",\r\n      // eslint-disable-next-line @typescript-eslint/camelcase\r\n      Personnel_category: \"\",\r\n      Position: \"\",\r\n      Fettle: \"\",\r\n      BraceletVoltage: \"\"\r\n    });\r\n\r\n    watch(\r\n      () => props.deviceData,\r\n      newVal => {\r\n        Object.assign(form, newVal);\r\n      },\r\n      {\r\n        immediate: true,\r\n        deep: true\r\n      }\r\n    );\r\n\r\n    return {\r\n      ...toRefs(form)\r\n    };\r\n  }\r\n});\r\n</script>\r\n","\r\nimport { defineComponent, reactive, toRefs, watch } from \"vue\";\r\nexport default defineComponent({\r\n  name: \"PersonItem\",\r\n  props: {\r\n    deviceData: {\r\n      type: Object\r\n    }\r\n  },\r\n  setup(props) {\r\n    const form = reactive({\r\n      Username: \"\",\r\n      DeviceName: \"\",\r\n      Photo: \"\",\r\n      src: \"\",\r\n      // eslint-disable-next-line @typescript-eslint/camelcase\r\n      Personnel_category: \"\",\r\n      Position: \"\",\r\n      Fettle: \"\",\r\n      BraceletVoltage: \"\"\r\n    });\r\n\r\n    watch(\r\n      () => props.deviceData,\r\n      newVal => {\r\n        Object.assign(form, newVal);\r\n      },\r\n      {\r\n        immediate: true,\r\n        deep: true\r\n      }\r\n    );\r\n\r\n    return {\r\n      ...toRefs(form)\r\n    };\r\n  }\r\n});\r\n","import { render } from \"./personItem.vue?vue&type=template&id=53b04033\"\nimport script from \"./personItem.vue?vue&type=script&lang=ts\"\nexport * from \"./personItem.vue?vue&type=script&lang=ts\"\nscript.render = render\n\nexport default script","<!--\r\n * @Description: \r\n * @Author: liufuqiang\r\n * @Date: 2021-02-08 17:58:51\r\n * @LastEditors: liufuqiang\r\n * @LastEditTime: 2021-02-18 09:51:18\r\n-->\r\n<template>\r\n  <el-row>\r\n    <el-col :span=\"12\" :offset=\"0\">\r\n      <el-form-item label=\"基站编号：\">\r\n        {{ dnum }}\r\n      </el-form-item>\r\n    </el-col>\r\n    <el-col :span=\"12\" :offset=\"0\">\r\n      <el-form-item label=\"在线状态：\">\r\n        <el-tag v-if=\"status == '在线'\">在线</el-tag>\r\n        <el-tag v-if=\"status == '离线' || !status\" type=\"info\">离线</el-tag>\r\n      </el-form-item>\r\n    </el-col>\r\n    <el-col :span=\"12\" :offset=\"0\">\r\n      <el-form-item label=\"基站名称：\">\r\n        {{ dname }}\r\n      </el-form-item>\r\n    </el-col>\r\n    <el-col :span=\"12\" :offset=\"0\">\r\n      <el-form-item label=\"基站类型：\">\r\n        {{ dtype }}\r\n      </el-form-item>\r\n    </el-col>\r\n\r\n    <el-col :span=\"12\" :offset=\"0\">\r\n      <el-form-item label=\"硬件版本：\">\r\n        {{ hardwarever }}\r\n      </el-form-item>\r\n    </el-col>\r\n    <el-col :span=\"12\" :offset=\"0\">\r\n      <el-form-item label=\"软件版本：\">\r\n        {{ version || \"\" }}\r\n      </el-form-item>\r\n    </el-col>\r\n    <el-col :span=\"12\" :offset=\"0\">\r\n      <el-form-item label=\"基站x：\">\r\n        {{ x }}\r\n      </el-form-item>\r\n    </el-col>\r\n    <el-col :span=\"12\" :offset=\"0\">\r\n      <el-form-item label=\"基站y：\">\r\n        {{ y }}\r\n      </el-form-item>\r\n    </el-col>\r\n    <el-col :span=\"12\" :offset=\"0\">\r\n      <el-form-item label=\"UWBR4：\">\r\n        <span v-if=\"uwbr4checking == 0\">自检失败</span>\r\n        <span v-if=\"uwbr4checking == 1\">读ID成功</span>\r\n        <span v-if=\"uwbr4checking == 2\">自检成功</span>\r\n        <span v-if=\"uwbr4checking == 3\">设备功能关闭</span>\r\n        <span v-if=\"uwbr4checking == 4\">运行过程检测ID失败</span>\r\n      </el-form-item>\r\n    </el-col>\r\n    <el-col :span=\"12\" :offset=\"0\">\r\n      <el-form-item label=\"UWBT3：\">\r\n        <span v-if=\"uwbt3checking == 0\">自检失败</span>\r\n        <span v-if=\"uwbt3checking == 1\">读ID成功</span>\r\n        <span v-if=\"uwbt3checking == 2\">自检成功</span>\r\n        <span v-if=\"uwbt3checking == 3\">设备功能关闭</span>\r\n        <span v-if=\"uwbt3checking == 4\">运行过程检测ID失败</span>\r\n      </el-form-item>\r\n    </el-col>\r\n    <el-col :span=\"12\" :offset=\"0\">\r\n      <el-form-item label=\"RFID：\">\r\n        <span v-if=\"rfidchecking == 0\">自检失败</span>\r\n        <span v-if=\"rfidchecking == 1\">读ID成功</span>\r\n        <span v-if=\"rfidchecking == 2\">自检成功</span>\r\n        <span v-if=\"rfidchecking == 3\">设备功能关闭</span>\r\n        <span v-if=\"rfidchecking == 4\">运行过程检测ID失败</span>\r\n      </el-form-item>\r\n    </el-col>\r\n    <el-col :span=\"12\" :offset=\"0\">\r\n      <el-form-item label=\"模式：\">\r\n        {{ pattern }}\r\n      </el-form-item>\r\n    </el-col>\r\n    <el-col :span=\"24\" :offset=\"0\">\r\n      <el-form-item label=\"自检状态：\">\r\n        <span v-if=\"checkState == 0\">自检成功</span>\r\n        <span v-if=\"checkState == 1\">自检失败</span>\r\n      </el-form-item>\r\n    </el-col>\r\n  </el-row>\r\n</template>\r\n\r\n<script lang=\"ts\">\r\nimport { defineComponent, reactive, toRefs, watch } from \"vue\";\r\nexport default defineComponent({\r\n  name: \"BasestationItem\",\r\n  props: {\r\n    deviceData: {\r\n      type: Object\r\n    }\r\n  },\r\n  setup(props) {\r\n    const formData = reactive({\r\n      dname: \"\",\r\n      dnum: \"\",\r\n      x: \"\",\r\n      y: \"\",\r\n      dtype: \"\",\r\n      status: \"\",\r\n      hardwarever: \"\",\r\n      version: \"\",\r\n      starttype: 0,\r\n      checkState: 0,\r\n      uwbr4checking: 0,\r\n      uwbt3checking: 0,\r\n      rfidchecking: 0,\r\n      pattern: \"\"\r\n    });\r\n    watch(\r\n      () => props.deviceData,\r\n      newVal => {\r\n        Object.assign(formData, newVal);\r\n      },\r\n      {\r\n        immediate: true,\r\n        deep: true\r\n      }\r\n    );\r\n    return {\r\n      ...toRefs(formData)\r\n    };\r\n  }\r\n});\r\n</script>\r\n","\r\nimport { defineComponent, reactive, toRefs, watch } from \"vue\";\r\nexport default defineComponent({\r\n  name: \"BasestationItem\",\r\n  props: {\r\n    deviceData: {\r\n      type: Object\r\n    }\r\n  },\r\n  setup(props) {\r\n    const formData = reactive({\r\n      dname: \"\",\r\n      dnum: \"\",\r\n      x: \"\",\r\n      y: \"\",\r\n      dtype: \"\",\r\n      status: \"\",\r\n      hardwarever: \"\",\r\n      version: \"\",\r\n      starttype: 0,\r\n      checkState: 0,\r\n      uwbr4checking: 0,\r\n      uwbt3checking: 0,\r\n      rfidchecking: 0,\r\n      pattern: \"\"\r\n    });\r\n    watch(\r\n      () => props.deviceData,\r\n      newVal => {\r\n        Object.assign(formData, newVal);\r\n      },\r\n      {\r\n        immediate: true,\r\n        deep: true\r\n      }\r\n    );\r\n    return {\r\n      ...toRefs(formData)\r\n    };\r\n  }\r\n});\r\n","import { render } from \"./basestationItem.vue?vue&type=template&id=2664c4d8\"\nimport script from \"./basestationItem.vue?vue&type=script&lang=ts\"\nexport * from \"./basestationItem.vue?vue&type=script&lang=ts\"\nscript.render = render\n\nexport default script","<!--\r\n * @Description: \r\n * @Author: liufuqiang\r\n * @Date: 2021-02-08 17:58:51\r\n * @LastEditors: liufuqiang\r\n * @LastEditTime: 2021-02-09 16:55:05\r\n-->\r\n<template>\r\n  <el-row>\r\n    <el-col :span=\"24\" :offset=\"0\">\r\n      <el-form-item label=\"摄像头名称：\">\r\n        {{ DeviceName || dname }}\r\n      </el-form-item>\r\n    </el-col>\r\n    <el-col :span=\"12\" :offset=\"0\">\r\n      <el-form-item label=\"摄像头ip：\">\r\n        {{ DeviceNum || dnum }}\r\n      </el-form-item>\r\n    </el-col>\r\n    <el-col :span=\"12\" :offset=\"0\">\r\n      <el-form-item label=\"所在位置：\">\r\n        {{ getMapByNum(snum).sname }}\r\n      </el-form-item>\r\n    </el-col>\r\n    <el-col :span=\"12\" :offset=\"0\">\r\n      <el-form-item label=\"用户名：\">\r\n        {{ UserName }}\r\n      </el-form-item>\r\n    </el-col>\r\n    <el-col :span=\"12\" :offset=\"0\">\r\n      <el-form-item label=\"密码：\">\r\n        ******\r\n      </el-form-item>\r\n    </el-col>\r\n    <el-col :span=\"12\" :offset=\"0\">\r\n      <el-form-item label=\"通道号：\">\r\n        {{ ChanelNum }}\r\n      </el-form-item>\r\n    </el-col>\r\n    <el-col :span=\"12\" :offset=\"0\">\r\n      <el-form-item label=\"是否云台：\">\r\n        {{ IsYunTai ? \"是\" : \"否\" }}\r\n      </el-form-item>\r\n    </el-col>\r\n    <el-col :span=\"12\" :offset=\"0\">\r\n      <el-form-item label=\"摄像头x：\">\r\n        {{ x }}\r\n      </el-form-item>\r\n    </el-col>\r\n    <el-col :span=\"12\" :offset=\"0\">\r\n      <el-form-item label=\"摄像头y：\">\r\n        {{ y }}\r\n      </el-form-item>\r\n    </el-col>\r\n  </el-row>\r\n</template>\r\n\r\n<script lang=\"ts\">\r\nimport { defineComponent, reactive, toRefs, watch } from \"vue\";\r\nimport { getMapByNum } from \"@/utils/auth\";\r\nexport default defineComponent({\r\n  name: \"CameraItem\",\r\n  props: {\r\n    deviceData: {\r\n      type: Object\r\n    }\r\n  },\r\n  setup(props) {\r\n    const form = reactive({\r\n      DeviceName: \"\",\r\n      DeviceNum: \"\",\r\n      dname: \"\",\r\n      dnum: \"\",\r\n      bnum: \"\",\r\n      snum: \"\",\r\n      UserName: \"\",\r\n      Password: \"\",\r\n      ChanelNum: 0,\r\n      IsYunTai: false,\r\n      IsCameraPhoto: \"\",\r\n      x: \"\",\r\n      y: \"\"\r\n    });\r\n\r\n    watch(\r\n      () => props.deviceData,\r\n      newVal => {\r\n        Object.assign(form, newVal);\r\n      },\r\n      {\r\n        immediate: true,\r\n        deep: true\r\n      }\r\n    );\r\n\r\n    return {\r\n      ...toRefs(form),\r\n      getMapByNum\r\n    };\r\n  }\r\n});\r\n</script>\r\n","\r\nimport { defineComponent, reactive, toRefs, watch } from \"vue\";\r\nimport { getMapByNum } from \"@/utils/auth\";\r\nexport default defineComponent({\r\n  name: \"CameraItem\",\r\n  props: {\r\n    deviceData: {\r\n      type: Object\r\n    }\r\n  },\r\n  setup(props) {\r\n    const form = reactive({\r\n      DeviceName: \"\",\r\n      DeviceNum: \"\",\r\n      dname: \"\",\r\n      dnum: \"\",\r\n      bnum: \"\",\r\n      snum: \"\",\r\n      UserName: \"\",\r\n      Password: \"\",\r\n      ChanelNum: 0,\r\n      IsYunTai: false,\r\n      IsCameraPhoto: \"\",\r\n      x: \"\",\r\n      y: \"\"\r\n    });\r\n\r\n    watch(\r\n      () => props.deviceData,\r\n      newVal => {\r\n        Object.assign(form, newVal);\r\n      },\r\n      {\r\n        immediate: true,\r\n        deep: true\r\n      }\r\n    );\r\n\r\n    return {\r\n      ...toRefs(form),\r\n      getMapByNum\r\n    };\r\n  }\r\n});\r\n","import { render } from \"./cameraItem.vue?vue&type=template&id=da3ed602\"\nimport script from \"./cameraItem.vue?vue&type=script&lang=ts\"\nexport * from \"./cameraItem.vue?vue&type=script&lang=ts\"\nscript.render = render\n\nexport default script","\r\nimport { TYPES } from \"../constVariables\";\r\nimport { defineComponent, PropType, reactive, ref, watch } from \"vue\";\r\nimport { TShapeType } from \"../types\";\r\nimport { labelItem, personItem, basestationItem, cameraItem } from \"./formItem\";\r\nimport { cloneDeep } from \"lodash\";\r\n\r\nexport default defineComponent({\r\n  name: \"FormContent\",\r\n  props: {\r\n    formType: {\r\n      type: String as PropType<TShapeType>,\r\n      default: TYPES.person\r\n    },\r\n    x: { type: Number, default: 0 },\r\n    y: { type: Number, default: 0 },\r\n    formData: {\r\n      type: Object,\r\n      default: () => ({})\r\n    }\r\n  },\r\n  components: { labelItem, personItem, basestationItem, cameraItem },\r\n  setup(props) {\r\n    const formContentRef = ref();\r\n\r\n    const form = reactive({\r\n      // 人员\r\n      roomNum: \"1\",\r\n      src: \"/images/staff_big.png\",\r\n      // 基站\r\n      dname: \"\",\r\n      dnum: \"\",\r\n      x: \"\",\r\n      y: \"\",\r\n      dtype: \"\",\r\n      status: \"\",\r\n      hardwarever: \"\",\r\n      version: \"\",\r\n      starttype: 0,\r\n      checkState: 0,\r\n      uwbr4checking: 0,\r\n      uwbt3checking: 0,\r\n      rfidchecking: 0,\r\n      pattern: \"\",\r\n      // 标签\r\n      currentalarm: \"\", // 落水报警\r\n      voltage: 0, // 电压\r\n      // eslint-disable-next-line @typescript-eslint/camelcase\r\n      bracelet_voltage: 0, // 手环电压\r\n      // 摄像头\r\n      UserName: \"\",\r\n      Password: \"\",\r\n      ChanelNum: 0,\r\n      IsYunTai: false,\r\n      IsCameraPhoto: \"\",\r\n\r\n      AlarmMappingLayerIdS: \"\",\r\n      BrandCode: \"\",\r\n      BrandName: \"\",\r\n      BuildingName: \"\",\r\n      BuildingNum: \"\",\r\n      CreateTime: \"\",\r\n      DeviceName: \"\",\r\n      DeviceNum: \"\",\r\n      DeviceObjProperty: \"\",\r\n      DeviceSelfPointRelation: \"\",\r\n      DeviceType: \"\",\r\n      DeviceTypeCode: \"\",\r\n      InstallSceneNum: \"\",\r\n      IsUse: true,\r\n      OwnAlarmSourceCode: \"\",\r\n      PDeviceIds: \"\",\r\n      SceneName: \"\",\r\n\r\n      // 公共\r\n      shapeName: \"\",\r\n      desc: \"\"\r\n    });\r\n    const formDatas = cloneDeep(form);\r\n    const types = TYPES;\r\n\r\n    watch(\r\n      () => props.formData,\r\n      newVal => {\r\n        if (newVal) {\r\n          console.log(\"newVal\", newVal);\r\n          Object.assign(form, formDatas);\r\n          Object.assign(form, newVal);\r\n          form.x = String(props.x) !== \"0\" ? String(props.x) : form.x;\r\n          form.y = String(props.y) !== \"0\" ? String(props.y) : form.y;\r\n        }\r\n      },\r\n      {\r\n        immediate: true,\r\n        deep: true\r\n      }\r\n    );\r\n\r\n    watch(\r\n      () => props.x,\r\n      newX => {\r\n        console.log(\"x\", newX);\r\n        if (!isNaN(newX)) {\r\n          form.x = String(newX);\r\n        }\r\n      }\r\n    );\r\n    watch(\r\n      () => props.y,\r\n      newY => {\r\n        if (!isNaN(newY)) {\r\n          form.y = String(newY);\r\n        }\r\n      }\r\n    );\r\n\r\n    return {\r\n      formContentRef,\r\n      form,\r\n      types\r\n    };\r\n  }\r\n});\r\n","import { render } from \"./formContent.vue?vue&type=template&id=7c7ecdc0\"\nimport script from \"./formContent.vue?vue&type=script&lang=ts\"\nexport * from \"./formContent.vue?vue&type=script&lang=ts\"\n\nimport \"./formContent.vue?vue&type=style&index=0&id=7c7ecdc0&lang=scss&scope=true\"\nscript.render = render\n\nexport default script","<!--\r\n * @Description:\r\n * @Author: huxianc\r\n * @Date: 2020-12-07 14:44:21\r\n * @LastEditors: huxianc\r\n * @LastEditTime: 2020-12-07 14:52:41\r\n-->\r\n<template>\r\n  <ul class=\"fence-box\">\r\n    <li\r\n      v-for=\"(item, index) in list\"\r\n      :key=\"index\"\r\n      @click=\"handleClick(item, index)\"\r\n    >\r\n      {{ item.label }}\r\n    </li>\r\n  </ul>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  name: \"FenceBox\",\r\n  data() {\r\n    return {\r\n      list: [\r\n        {\r\n          label: \"取消\"\r\n        },\r\n        {\r\n          label: \"完成\"\r\n        }\r\n      ]\r\n    };\r\n  },\r\n  methods: {\r\n    handleClick(item, index) {\r\n      const emitObj = {\r\n        0: \"cancel\",\r\n        1: \"finish\"\r\n      };\r\n\r\n      this.$emit(emitObj[index]);\r\n    }\r\n  }\r\n};\r\n</script>\r\n","import { render } from \"./trackPlaybackMenu.vue?vue&type=template&id=2f3fb5d9\"\nimport script from \"./trackPlaybackMenu.vue?vue&type=script&lang=js\"\nexport * from \"./trackPlaybackMenu.vue?vue&type=script&lang=js\"\nscript.render = render\n\nexport default script","<!--\r\n * @Author: your name\r\n * @Date: 2020-11-30 15:11:38\r\n * @LastEditTime: 2020-12-25 17:48:46\r\n * @LastEditors: huxianc\r\n * @Description: In User Settings Edit\r\n * @FilePath: \\watercraft-front\\src\\views\\home\\components\\waterAlarm.vue\r\n-->\r\n<template>\r\n  <div v-if=\"visible\" class=\"canvas-container\">\r\n    <canvas\r\n      id=\"water-alarm-canvas\"\r\n      ref=\"waterAlarmCanvas\"\r\n      @click=\"clickHandler\"\r\n    />\r\n    <i class=\"el-icon-close hidden-icon\" @click=\"hiddenBox\" />\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  name: \"WaterAlarm\",\r\n  props: {\r\n    visible: {\r\n      type: Boolean,\r\n      default: false\r\n    }\r\n  },\r\n  data() {\r\n    return {\r\n      ctx: null,\r\n      radarR: 60, // 雷达扩散范围\r\n      radarR1: 150, // 雷达扩散范围1\r\n      shipImg: null, // 船的图\r\n      shipDeg: 0, // 船方向\r\n      alpha: 0.1, // 人员透明度\r\n      personPosArr: [\r\n        [100, 100],\r\n        [400, 100]\r\n      ] // 落水人员canvas上的坐标\r\n    };\r\n  },\r\n  mounted() {\r\n    this.visible && this.init();\r\n  },\r\n  methods: {\r\n    init() {\r\n      const { clientWidth, clientHeight } = this.$el;\r\n      this.$refs.waterAlarmCanvas.width = clientWidth;\r\n      this.$refs.waterAlarmCanvas.height = clientHeight;\r\n      this.ctx = this.$refs.waterAlarmCanvas.getContext(\"2d\");\r\n      this.shipImg = new Image();\r\n      this.shipImg.src = \"/images/car.png\";\r\n      this.shipImg.onload = () => {\r\n        const data = {\r\n          ctx: this.ctx,\r\n          shipImg: this.shipImg,\r\n          shipWidth: 60,\r\n          shipHeight: 60,\r\n          shipDeg: this.shipDeg,\r\n          radarR: this.radarR,\r\n          radarR1: this.radarR1,\r\n          alpha: this.alpha,\r\n          personPosArr: this.personPosArr\r\n        };\r\n        this.drawScene(data);\r\n        this.animate();\r\n      };\r\n    },\r\n    // animate(shipImg) {\r\n    animate() {\r\n      if (!this.visible) {\r\n        return;\r\n      }\r\n      requestAnimationFrame(this.animate);\r\n      // const timer = requestAnimationFrame(this.animate);\r\n      // this.$once(\"hook:beforeDestroy\", () => {\r\n      //   cancelAnimationFrame(timer);\r\n      // });\r\n      const data = {\r\n        ctx: this.ctx,\r\n        shipImg: this.shipImg,\r\n        shipWidth: 60,\r\n        shipHeight: 60,\r\n        shipDeg: this.shipDeg,\r\n        radarR: this.radarR,\r\n        radarR1: this.radarR1,\r\n        alpha: this.alpha,\r\n        personPosArr: this.personPosArr\r\n      };\r\n      this.drawScene(data);\r\n      // 调整参数\r\n      this.shipDeg = Math.random() * Math.PI * 2;\r\n      this.radarR = this.radarR > 300 ? 0 : ++this.radarR;\r\n      this.radarR1 = this.radarR1 > 300 ? 0 : ++this.radarR1;\r\n      this.alpha += 0.01;\r\n      this.alpha = this.alpha > 1 ? 0.1 : this.alpha;\r\n    },\r\n    drawScene(data) {\r\n      const {\r\n        ctx,\r\n        shipImg,\r\n        shipWidth,\r\n        shipHeight,\r\n        shipDeg,\r\n        radarR,\r\n        radarR1,\r\n        alpha,\r\n        personPosArr\r\n      } = data;\r\n      const { width, height } = this.$refs.waterAlarmCanvas;\r\n      ctx.clearRect(0, 0, width, height);\r\n      // 绘制基础元素\r\n      this.drawBasicIcon(ctx, width, height);\r\n      // 绘制雷达扩散\r\n      this.drawRadar({ ctx: ctx, pos: [width / 2, height / 2], r: radarR });\r\n      this.drawRadar({ ctx: ctx, pos: [width / 2, height / 2], r: radarR1 });\r\n      // 绘制落水人员\r\n      this.drawPerson(ctx, personPosArr, alpha);\r\n      // 绘制船\r\n      ctx.save();\r\n      ctx.translate(width / 2, height / 2);\r\n      ctx.rotate(shipDeg);\r\n      ctx.drawImage(\r\n        shipImg,\r\n        -shipWidth / 2,\r\n        -shipHeight / 2,\r\n        shipWidth,\r\n        shipHeight\r\n      );\r\n      ctx.restore();\r\n    },\r\n    /**\r\n     * @description: 绘制基础元素\r\n     * @param {*}\r\n     * @return {*}\r\n     */\r\n    drawBasicIcon(ctx, canvasWidth, canvasHeight) {\r\n      // 绘制定位范围圈\r\n      ctx.beginPath();\r\n      ctx.fillStyle = \"#2CA3FF\";\r\n      ctx.arc(\r\n        canvasWidth / 2,\r\n        canvasHeight / 2,\r\n        canvasWidth / 2,\r\n        0,\r\n        Math.PI * 2\r\n      );\r\n      ctx.fill();\r\n      ctx.closePath();\r\n      // 绘制十字线\r\n      ctx.beginPath();\r\n      ctx.lineCap = \"round\";\r\n      ctx.strokeStyle = \"#fff\";\r\n      ctx.lineWidth = 4;\r\n      ctx.moveTo(0, canvasHeight / 2);\r\n      ctx.lineTo(canvasWidth, canvasHeight / 2);\r\n      ctx.moveTo(canvasWidth / 2, 0);\r\n      ctx.lineTo(canvasWidth / 2, canvasHeight);\r\n      ctx.stroke();\r\n      ctx.closePath();\r\n      // 绘制距离范围\r\n      ctx.beginPath();\r\n      ctx.strokeStyle = \"#ffffff\";\r\n      for (let i = 0; i < 6; i++) {\r\n        ctx.arc(canvasWidth / 2, canvasHeight / 2, 50 * i, 0, Math.PI * 2);\r\n      }\r\n      ctx.lineWidth = 2;\r\n      ctx.stroke();\r\n      ctx.closePath();\r\n    },\r\n    /**\r\n     * @description: 绘制雷达扩散图\r\n     * @param {*}\r\n     * @return {*}\r\n     */\r\n    drawRadar(data) {\r\n      const { ctx, pos, r } = data;\r\n      ctx.beginPath();\r\n      const grd = ctx.createRadialGradient(\r\n        pos[0],\r\n        pos[1],\r\n        0,\r\n        pos[0],\r\n        pos[1],\r\n        r\r\n      );\r\n      grd.addColorStop(0, \"rgba(200,0,0,1.0)\");\r\n      grd.addColorStop(1, \"rgba(200,0,0,0.1)\");\r\n      ctx.fillStyle = grd;\r\n      ctx.arc(pos[0], pos[1], r, 0, Math.PI * 2);\r\n      ctx.fill();\r\n      ctx.closePath();\r\n    },\r\n    /**\r\n     * @description: 绘制落水人员\r\n     * @param {*}\r\n     * @return {*}\r\n     */\r\n    drawPerson(ctx, posArr, alpha) {\r\n      ctx.beginPath();\r\n      ctx.fillStyle = `rgba(255,0,0,${alpha})`;\r\n      posArr.forEach(value => {\r\n        ctx.arc(value[0], value[1], 4, 0, Math.PI * 2);\r\n      });\r\n      ctx.fill();\r\n      ctx.closePath();\r\n    },\r\n    hiddenBox() {\r\n      this.$emit(\"update:visible\", false);\r\n    },\r\n    /**\r\n     * @description: 点击canvas\r\n     * @param {*}\r\n     * @return {*}\r\n     */\r\n    clickHandler(e) {\r\n      console.log(e);\r\n      const arr = this.personPosArr;\r\n      const x = e.offsetX;\r\n      const y = e.offsetY;\r\n      for (let i = 0, length = arr.length; i < length; i++) {\r\n        if (\r\n          x > arr[i][0] - 4 &&\r\n          x < arr[i][0] + 4 &&\r\n          y > arr[i][1] - 4 &&\r\n          y < arr[i][1] + 4\r\n        ) {\r\n          this.$message(\"落水人员被点击了\");\r\n          return;\r\n        }\r\n      }\r\n    }\r\n  }\r\n};\r\n</script>\r\n<style lang=\"scss\" scoped>\r\n.canvas-container {\r\n  width: 100%;\r\n  height: 100%;\r\n  background: #fff;\r\n  position: relative;\r\n  & > #water-alarm-canvas {\r\n    width: 100%;\r\n    height: 100%;\r\n  }\r\n  .hidden-icon {\r\n    position: absolute;\r\n    top: 0;\r\n    right: 0;\r\n    font-size: 20px;\r\n    color: #000;\r\n    cursor: pointer;\r\n    &:hover {\r\n      background-color: rgba(0, 0, 0, 0.4);\r\n      color: #fff;\r\n    }\r\n  }\r\n}\r\n</style>\r\n","import { render } from \"./waterAlarm.vue?vue&type=template&id=297d393a&scoped=true\"\nimport script from \"./waterAlarm.vue?vue&type=script&lang=js\"\nexport * from \"./waterAlarm.vue?vue&type=script&lang=js\"\n\nimport \"./waterAlarm.vue?vue&type=style&index=0&id=297d393a&lang=scss&scoped=true\"\nscript.render = render\nscript.__scopeId = \"data-v-297d393a\"\n\nexport default script","<template>\r\n  <div>\r\n    <div ref=\"monitorListPanelRef\" class=\"historical-mon\">\r\n      <div class=\"top-title\">\r\n        <span>{{ cameraName }}</span>\r\n        <div style=\"width:10%\">\r\n          <el-switch\r\n            v-model=\"cameraHigh\"\r\n            class=\"switchStyle\"\r\n            active-text=\"高清\"\r\n            inactive-text=\"清晰\"\r\n            :active-value=\"true\"\r\n            :inactive-value=\"false\"\r\n            active-color=\"#13ce66\"\r\n            inactive-color=\"rgba(67, 67, 122, 1)\"\r\n            @change=\"changSwitch($event, cameraHigh)\"\r\n            >></el-switch\r\n          >\r\n        </div>\r\n        <button @click=\"hidden\" @touchstart.stop.prevent=\"hidden\" />\r\n      </div>\r\n      <!-- 视频 -->\r\n      <div class=\"h5videowrapper h5container\" :style=\"getStyle()\">\r\n        <span v-show=\"isLoading\">视频加载中...</span>\r\n        <video\r\n          ref=\"playerRef\"\r\n          class=\"live-video\"\r\n          muted\r\n          autoplay\r\n          controls=\"true\"\r\n          style=\"object-fit: fill\"\r\n        />\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n<script>\r\nimport flvjs from \"hd-flv\";\r\nimport { httpFlvServer } from \"@/utils/urls\";\r\nimport dragDialog from \"../directive/drag-dialog\";\r\nimport {\r\n  defineComponent,\r\n  onUnmounted,\r\n  ref,\r\n  nextTick,\r\n  reactive,\r\n  toRefs,\r\n  onMounted\r\n} from \"vue\";\r\nimport { ElMessage } from \"element-plus\";\r\nconst CHANGE_MONITORLISTPANEL_STATE = \"changeMonitorListPanelState\";\r\nexport default defineComponent({\r\n  name: \"MonitorList\",\r\n  directives: { dragDialog },\r\n  props: {\r\n    cameraData: {\r\n      type: Object,\r\n      required: true\r\n    },\r\n    livePlayCount: {\r\n      type: Number,\r\n      required: true\r\n    }\r\n  },\r\n  emits: [CHANGE_MONITORLISTPANEL_STATE],\r\n  setup(props, { emit }) {\r\n    const players = ref(); // player值\r\n    const data = reactive({\r\n      playList: {}, // 当前播放列表，最多同时4个\r\n      monitorPanelState: false, // 视频播放器弹框显示标识\r\n      serverHost: \"\", // Http_flv服务地址\r\n      cameraId: 0,\r\n      cameraName: \"\",\r\n      cameraHigh: false,\r\n      subtype: 2,\r\n      isLoading: false\r\n    });\r\n    const dataRef = toRefs(data);\r\n    const playerRef = ref();\r\n    function initPlayer(playList, subtype) {\r\n      // 初始化直播\r\n      if (flvjs.isSupported()) {\r\n        console.log(\"playerRef\", playerRef);\r\n        const video = playerRef.value; //video\r\n        if (video) {\r\n          data.isLoading = true;\r\n          const id = playList.camera.id; // 唯一id\r\n          data.cameraId = id;\r\n          data.cameraName = playList.camera.name;\r\n          let rtsp = `rtsp://${playList.camera.username}:${playList.camera.password}@${playList.camera.ip}?channel=1&subtype=${subtype}`; // rtsp地址\r\n          if (\r\n            playList.camera.brand === \"海康\" ||\r\n            playList.camera.brand === \"海康威视\"\r\n          ) {\r\n            rtsp = `rtsp://${playList.camera.username}:${playList.camera.password}@${playList.camera.ip}/Streaming/Channels/10${subtype}`; // rtsp地址\r\n          } else if (playList.camera.brand === \"大华\") {\r\n            rtsp = `rtsp://${playList.camera.username}:${playList.camera.password}@${playList.camera.ip}?channel=1&subtype=${subtype}`; // rtsp地址\r\n          }\r\n          console.log(\"rtsp\", rtsp);\r\n          players.value = playList.camera.player; // player\r\n          const Url = `${httpFlvServer}/${id}/?url=${encodeURIComponent(\r\n            rtsp\r\n          )}}&brand=${playList.camera.brand}`;\r\n          players.value = flvjs.createPlayer({\r\n            type: \"flv\",\r\n            isLive: true, // 支持直播流（通过isLive:true来设置）,false是点播\r\n            enableStashBuffer: false,\r\n            autoCleanupMaxBackwardDuration: 60,\r\n            autoCleanupMinBackwardDuration: 30,\r\n            statisticsInfoReportInterval: 2000,\r\n            stashInitialSize: 128 * 1024,\r\n            // 如果是Android浏览器，建议enableDurationMonitor设置为false\r\n            enableDurationMonitor: true, // true表示监测当前直播流延时，当发现延时过大时，主动追赶\r\n            enableVideoFrozenMonitor: true, // 监测视频解码是否停滞（画面卡停），当因为某些原因导致无法解码时，将上报VIDEO_FROZEN事件，收到后建议重拉流\r\n            // 如果是Safari浏览器，enableConstVideoViewSize建议设置为false\r\n            enableConstVideoViewSize: true,\r\n            url: Url\r\n          });\r\n          const player = players.value;\r\n          player.on(flvjs.Events.METADATA_ARRIVED, () => {\r\n            // console.log('--== meta data arrived ==--')\r\n            data.isLoading = false;\r\n            console.log(\"--== 视频资源到达 ==--\");\r\n          });\r\n          player.enableVideoStateMonitor(true); // 如果需要，可以动态开关{视频延时 + 解码停滞}监测\r\n\r\n          player.on(flvjs.Events.VIDEO_RESOLUTION_CHANGED, () => {\r\n            // ElMessage.error('视频分辨率发生变化')\r\n            // 更新播放列表\r\n            initPlayer(data.playList, data.subtype);\r\n            // console.log('--== video resolution changed, reload ==--')\r\n            console.log(\"视频分辨率发生变化\");\r\n          });\r\n          player.on(flvjs.Events.MEDIA_SOURCE_ENDED, () => {\r\n            // ElMessage.error('视频流已停止')\r\n            // 更新播放列表\r\n            initPlayer(data.playList, data.subtype);\r\n            // console.log('--== media source ended, normally means server stop push stream ==--')\r\n            console.log(\"视频流已停止\");\r\n          });\r\n          player.on(flvjs.Events.MEDIA_SOURCE_CLOSE, () => {\r\n            // ElMessage.error('视频源已关闭')\r\n            // console.log('--== media source close, show no source view ==--')\r\n            console.log(\"视频源已关闭\");\r\n          });\r\n\r\n          let paused = false;\r\n          video.addEventListener(\"pause\", function() {\r\n            // 暂停开始执行的函数\r\n            paused = true;\r\n          });\r\n          video.addEventListener(\"play\", function() {\r\n            // 播放开始执行的函数\r\n            paused = false;\r\n          });\r\n          player.on(flvjs.Events.NETWORK_ERROR, () => {\r\n            ElMessage.error(\"网络异常，无法加载该视频\");\r\n          });\r\n          player.on(flvjs.Events.MEDIA_ERROR, () => {\r\n            // ElMessage.error('视频源异常')\r\n            console.log(\"视频源异常\");\r\n          });\r\n\r\n          player.on(flvjs.Events.VIDEO_FROZEN, () => {\r\n            // console.log('--== video frozen ==--')\r\n            if (!paused) {\r\n              // 更新播放列表\r\n              initPlayer(data.playList, data.subtype);\r\n            }\r\n          });\r\n\r\n          player.on(flvjs.Events.ERROR, (errType, errDetail) => {\r\n            // ElMessage.error('视频加载失败，重新加载中...')\r\n            if (!paused) {\r\n              // 更新播放列表\r\n              initPlayer(data.playList, data.subtype);\r\n            }\r\n            console.log(\r\n              \"--== flvjs error, type:\" +\r\n                errType +\r\n                \", detail:\" +\r\n                errDetail +\r\n                \" ==--\"\r\n            );\r\n            console.log(\r\n              \"--== should set a timer(for example, 3 seconds) to reload current flv ==--\"\r\n            );\r\n          });\r\n\r\n          players.value.attachMediaElement(video);\r\n          try {\r\n            players.value.load();\r\n            players.value.play();\r\n          } catch (error) {\r\n            console.log(error);\r\n          }\r\n        }\r\n      }\r\n    }\r\n    //页面销毁\r\n    onUnmounted(() => {\r\n      // 关闭视频流\r\n      if (typeof players.value !== \"undefined\" && players.value.e != null) {\r\n        if (players.value != null) {\r\n          players.value.pause();\r\n          players.value.unload();\r\n          players.value.detachMediaElement();\r\n          players.value.destroy();\r\n        }\r\n      }\r\n    });\r\n    //动态样式\r\n    function getStyle() {\r\n      if (props.livePlayCount === 1) {\r\n        return \"width:100%; height:100%\";\r\n      } else {\r\n        return \"width:100%; height:26rem\";\r\n      }\r\n    }\r\n\r\n    // 关闭全部视频\r\n    function hidden() {\r\n      if (typeof players.value !== \"undefined\" && players.value.e != null) {\r\n        if (players.value != null) {\r\n          players.value.pause();\r\n          players.value.unload();\r\n          players.value.detachMediaElement();\r\n          players.value.destroy();\r\n        }\r\n      }\r\n      // 关闭\r\n      emit(CHANGE_MONITORLISTPANEL_STATE, data.cameraId);\r\n    }\r\n\r\n    // 切换清晰度\r\n    function changSwitch($event, value) {\r\n      data.cameraHigh = value;\r\n      if (data.cameraHigh) {\r\n        data.subtype = 1;\r\n      } else {\r\n        data.subtype = 2;\r\n      }\r\n      // 关闭视频流\r\n      if (typeof players.value !== \"undefined\" && players.value.e != null) {\r\n        if (players.value != null) {\r\n          players.value.pause();\r\n          players.value.unload();\r\n          players.value.detachMediaElement();\r\n          players.value.destroy();\r\n        }\r\n      }\r\n      nextTick(() => {\r\n        console.log(data.playList);\r\n        initPlayer(data.playList, data.subtype);\r\n      });\r\n    }\r\n\r\n    function initCameraData(newValue) {\r\n      if (newValue) {\r\n        console.log(\"playList\", data.playList);\r\n        console.log(\"newValue\", newValue);\r\n        data.playList = newValue;\r\n        nextTick(() => {\r\n          if (!newValue.active) {\r\n            // 隐藏后关闭流\r\n            // 关闭视频流\r\n            if (\r\n              typeof players.value !== \"undefined\" &&\r\n              players.value.e != null\r\n            ) {\r\n              if (players.value != null) {\r\n                players.value.pause();\r\n                players.value.unload();\r\n                players.value.detachMediaElement();\r\n                players.value.destroy();\r\n              }\r\n            }\r\n          } else {\r\n            // 更新播放列表\r\n            initPlayer(newValue, data.subtype);\r\n          }\r\n        });\r\n      }\r\n    }\r\n    onMounted(() => {\r\n      initCameraData(props.cameraData);\r\n    });\r\n    return {\r\n      ...dataRef,\r\n      getStyle,\r\n      hidden,\r\n      changSwitch,\r\n      playerRef\r\n    };\r\n  }\r\n});\r\n</script>\r\n<style lang=\"scss\">\r\n.live-video {\r\n  width: 100%;\r\n  height: 100%;\r\n  background: black;\r\n  background-repeat: no-repeat;\r\n  background-size: 100% 100%;\r\n  -moz-background-size: 100% 100%;\r\n  background-image: url(\"/images/connecting.jpg\");\r\n}\r\n.historical-mon {\r\n  /* background: rgba(30, 42, 66, 0.88); */\r\n  width: 100%;\r\n  height: 100%;\r\n  color: #ffffff;\r\n}\r\n.historical-mon .top-title {\r\n  width: 100%;\r\n  line-height: 30px;\r\n  color: #ffffff;\r\n  border-bottom: 1px solid rgba(178, 223, 255, 0.2);\r\n  /* background: #274a7f; */\r\n  display: flex;\r\n  justify-content: space-between;\r\n  align-items: center;\r\n  z-index: 1;\r\n}\r\n.historical-mon .top-title span {\r\n  margin-left: 10px;\r\n}\r\n.historical-mon .top-title button {\r\n  width: 20px;\r\n  height: 20px;\r\n  border: 0;\r\n  cursor: pointer;\r\n  background: url(\"/images/x.png\") no-repeat;\r\n  background-size: 100% 100%;\r\n  background-position: center;\r\n}\r\n.historical-mon ::-webkit-scrollbar {\r\n  /*滚动条整体样式*/\r\n  width: 6px; /*高宽分别对应横竖滚动条的尺寸*/\r\n}\r\n.historical-mon ::-webkit-scrollbar-thumb {\r\n  /*滚动条里面小方块*/\r\n  border-radius: 3px;\r\n  background: rgba(67, 97, 122, 1);\r\n}\r\n.switchStyle {\r\n  font-size: 8px !important;\r\n}\r\n.el-switch__label * {\r\n  line-height: 1;\r\n  font-size: 10px;\r\n  display: inline-block;\r\n}\r\n.switchStyle .el-switch__label {\r\n  position: absolute;\r\n  display: none;\r\n  color: #fff;\r\n}\r\n/*打开时文字位置设置*/\r\n.switchStyle .el-switch__label--right {\r\n  z-index: 1;\r\n  right: 5px;\r\n}\r\n/*关闭时文字位置设置*/\r\n.switchStyle .el-switch__label--left {\r\n  z-index: 1;\r\n  left: 8px;\r\n}\r\n/*显示文字*/\r\n.switchStyle .el-switch__label.is-active {\r\n  display: block;\r\n}\r\n.switchStyle.el-switch .el-switch__core,\r\n.el-switch .el-switch__label {\r\n  width: 48px !important;\r\n  height: 18px !important;\r\n}\r\n</style>\r\n","/*\r\n * @Description:\r\n * @Author: huxianc\r\n * @Date: 2020-11-23 09:45:10\r\n * @LastEditors: huxianc\r\n * @LastEditTime: 2021-01-12 11:07:52\r\n */\r\nimport type { ObjectDirective  } from \"vue\"\r\nimport { TITLE_HEIGHT as titleHeight } from \"../../constVariables\";\r\n//  这里copy的饿了么的drag方案，可以改成自定义的dialog\r\nconst draggableDialog:ObjectDirective<any> = {\r\n  mounted(el,binding) {\r\n    const [header,customForm] = binding.value.split(\",\")\r\n    \r\n    const dialogHeaderEl: HTMLDivElement = el.querySelector(\".\"+header);\r\n    const dragDom = el.querySelector(\".\"+customForm);\r\n    dialogHeaderEl.style.cssText += \";cursor:move;\";\r\n    dragDom.style.cssText += \";top:5rem;\";\r\n\r\n    // 获取原有属性 ie dom元素.currentStyle 火狐谷歌 window.getComputedStyle(dom元素, null);\r\n    // ? ts 好像不支持其他\r\n    // const getStyle = (function() {\r\n    //   if (window.document.currentStyle) {\r\n    //     return (dom, attr) => dom.currentStyle[attr]\r\n    //   } else {\r\n    //     return (dom, attr) => getComputedStyle(dom, false)[attr]\r\n    //   }\r\n    // })()\r\n\r\n    const getStyle = (function() {\r\n      return (dom: HTMLElement, attr: string) =>\r\n        getComputedStyle(dom, null)[attr];\r\n    })();\r\n\r\n    dialogHeaderEl.onmousedown = e => {\r\n      // 鼠标按下，计算当前元素距离可视区的距离\r\n      const disX = e.clientX - dialogHeaderEl.offsetLeft;\r\n      const disY = e.clientY - dialogHeaderEl.offsetTop;\r\n\r\n      const dragDomWidth = dragDom.offsetWidth;\r\n      const dragDomHeight = dragDom.offsetHeight;\r\n\r\n      const screenWidth = document.body.clientWidth;\r\n      const screenHeight = document.body.clientHeight - titleHeight+20;\r\n\r\n      const minDragDomLeft = dragDom.offsetLeft;\r\n      const maxDragDomLeft = screenWidth - dragDom.offsetLeft - dragDomWidth;\r\n\r\n      const minDragDomTop = dragDom.offsetTop;\r\n      const maxDragDomTop = screenHeight - dragDom.offsetTop - dragDomHeight;\r\n\r\n      // 获取到的值带px 正则匹配替换\r\n      let styL: string | number = getStyle(dragDom, \"left\");\r\n      let styT: string | number = getStyle(dragDom, \"top\");\r\n\r\n      if ((styL as string).includes(\"%\")) {\r\n        styL =\r\n          +document.body.clientWidth *\r\n          (+(styL as string).replace(/%/g, \"\") / 100);\r\n        styT =\r\n          +document.body.clientHeight *\r\n          (+(styT as string).replace(/%/g, \"\") / 100);\r\n      } else {\r\n        styL = +(styL as string).replace(/\\px/g, \"\");\r\n        styT = +(styT as string).replace(/\\px/g, \"\");\r\n      }\r\n\r\n      document.onmousemove = function(e) {\r\n        // 通过事件委托，计算移动的距离\r\n        let left = e.clientX - disX;\r\n        let top = e.clientY - disY;\r\n\r\n        // 边界处理\r\n        if (-left > minDragDomLeft) {\r\n          left = -minDragDomLeft;\r\n        } else if (left > maxDragDomLeft) {\r\n          left = maxDragDomLeft;\r\n        }\r\n\r\n        if (-top > minDragDomTop) {\r\n          top = -minDragDomTop;\r\n        } else if (top > maxDragDomTop) {\r\n          top = maxDragDomTop;\r\n        }\r\n\r\n        // 移动当前元素\r\n        dragDom.style.cssText += `;left:${left + (styL as number)}px;top:${top +\r\n          (styT as number)}px;`;\r\n\r\n        // emit onDrag event\r\n        // vnode.child.$emit('dragDialog')\r\n      };\r\n\r\n      document.onmouseup = function() {\r\n        document.onmousemove = null;\r\n        document.onmouseup = null;\r\n      };\r\n    };\r\n  },\r\n};\r\n\r\nexport default draggableDialog;\r\n","/*\r\n * @Description:\r\n * @Author: huxianc\r\n * @Date: 2020-11-23 09:45:03\r\n * @LastEditors: huxianc\r\n * @LastEditTime: 2020-12-25 16:57:32\r\n */\r\nimport drag from \"./drag\";\r\n\r\n// const install = function(Vue) {\r\n//   Vue.directive('drag-dialog', drag)\r\n// }\r\n\r\n// if (window.Vue) {\r\n//   window['drag-dialog'] = drag\r\n//   Vue.use(install); // eslint-disable-line\r\n// }\r\n\r\n// drag.install = install\r\nexport default drag;\r\n","import { render } from \"./monitorList.vue?vue&type=template&id=90514850\"\nimport script from \"./monitorList.vue?vue&type=script&lang=js\"\nexport * from \"./monitorList.vue?vue&type=script&lang=js\"\n\nimport \"./monitorList.vue?vue&type=style&index=0&id=90514850&lang=scss\"\nscript.render = render\n\nexport default script","<template>\r\n  <div ref=\"hsitoryMonitorListPanelRef\" class=\"historical-mon\">\r\n    <div class=\"top-title\">\r\n      <span>{{ cameraName }}</span>\r\n      <button @click=\"hidden\" @touchstart.stop.prevent=\"hidden\" />\r\n    </div>\r\n    <!-- 视频列表 -->\r\n    <div class=\"h5videowrapper h5container\" :style=\"getStyle()\">\r\n      <span v-show=\"isLoading\">视频加载中...</span>\r\n      <video\r\n        ref=\"playerRef\"\r\n        class=\"history-video\"\r\n        autoplay\r\n        controls=\"true\"\r\n        style=\"width:100%; height:100%;object-fit: fill\"\r\n        @timeupdate=\"handleVideoProgress\"\r\n      />\r\n    </div>\r\n    <div v-show=\"players\" class=\"video-controls\">\r\n      <div class>\r\n        <span\r\n          v-show=\"!playStatus\"\r\n          class=\"icon iconfont\"\r\n          @click=\"changePlayStatus(true)\"\r\n          >&#xe635;</span\r\n        >\r\n        <span\r\n          v-show=\"playStatus\"\r\n          class=\"icon iconfont\"\r\n          @click=\"changePlayStatus(false)\"\r\n          >&#xe644;</span\r\n        >\r\n      </div>\r\n      <span class=\"time\">{{ currentTime != 0 ? currentTime : \"\" }}</span>\r\n      <div ref=\"progressBarRef\" class=\"progress\" @click=\"handleProgress\">\r\n        <div ref=\"innerBarRef\" class=\"inner-bar\"></div>\r\n      </div>\r\n      <span class=\"time\">{{ eTime }}</span>\r\n      <div class=\"rate\">\r\n        <span>×{{ currentRate }}</span>\r\n        <ul class=\"rate-list\">\r\n          <li @click=\"changeRate(5.0)\">5.0</li>\r\n          <li @click=\"changeRate(4.0)\">4.0</li>\r\n          <li @click=\"changeRate(3.0)\">3.0</li>\r\n          <li @click=\"changeRate(2.0)\">2.0</li>\r\n          <li @click=\"changeRate(1.5)\">1.5</li>\r\n          <li @click=\"changeRate(1.2)\">1.2</li>\r\n          <li @click=\"changeRate(1.0)\">1.0</li>\r\n          <li @click=\"changeRate(0.5)\">0.5</li>\r\n          <li @click=\"changeRate(0.2)\">0.2</li>\r\n        </ul>\r\n      </div>\r\n    </div>\r\n    <div v-if=\"timePicker\" class=\"block\" style=\"width:100%;\">\r\n      <div style=\"width:38%; float: left;\">\r\n        <el-date-picker\r\n          v-model=\"day\"\r\n          type=\"date\"\r\n          value-format=\"timestamp\"\r\n          placeholder=\"选择日期\"\r\n        >\r\n        </el-date-picker>\r\n      </div>\r\n      <div style=\"width:30%; float: left;\">\r\n        <el-time-picker\r\n          v-model=\"sTime\"\r\n          value-format=\"HH:mm:ss\"\r\n          style=\"width:100%\"\r\n          placeholder=\"开始时间\"\r\n        >\r\n        </el-time-picker>\r\n      </div>\r\n      <div style=\"width:30%; padding-left: 10px; float: left;\">\r\n        <el-time-picker\r\n          v-model=\"eTime\"\r\n          value-format=\"HH:mm:ss\"\r\n          style=\"width:100%\"\r\n          placeholder=\"结束时间\"\r\n        >\r\n        </el-time-picker>\r\n      </div>\r\n      <button\r\n        class=\"el-button el-button--medium el-button--info\"\r\n        style=\"width:100%;background-color: #02163a\"\r\n        @click=\"searchVideo\"\r\n      >\r\n        查询回放\r\n      </button>\r\n    </div>\r\n  </div>\r\n</template>\r\n<script lang=\"ts\">\r\nimport flvjs from \"hd-flv\";\r\nimport { httpFlvServer } from \"@/utils/urls\";\r\nimport {\r\n  defineComponent,\r\n  onUnmounted,\r\n  ref,\r\n  computed,\r\n  watch,\r\n  nextTick,\r\n  reactive,\r\n  toRefs\r\n} from \"vue\";\r\nimport { ElMessage } from \"element-plus\";\r\n\r\nconst CHANGE_HISTORYMONITORLISTPANEL_STATE =\r\n  \"changeHistoryMonitorListPanelState\";\r\nexport default defineComponent({\r\n  name: \"HistpryMonitor\",\r\n  props: {\r\n    historyCameraData: {\r\n      type: Object,\r\n      required: true\r\n    },\r\n    historyPlayCount: {\r\n      type: Number,\r\n      required: true\r\n    }\r\n  },\r\n  emits: [CHANGE_HISTORYMONITORLISTPANEL_STATE],\r\n  setup(props, { emit }) {\r\n    const innerBarRef = ref();\r\n    const progressBarRef = ref();\r\n    const playerRef = ref();\r\n    const players = ref(); // player值\r\n\r\n    const data = reactive({\r\n      playList: {} as Record<string, any>, // 当前播放列表，最多同时4个\r\n      day: \"\",\r\n      sTime: 0,\r\n      eTime: 0,\r\n      startTime: 0,\r\n      endTime: 0,\r\n      playStatus: false,\r\n      timePicker: true,\r\n      currentTime: 0,\r\n      overTime: 0,\r\n      currentRate: 1.0,\r\n      currentId: \"\",\r\n      cameraId: 0,\r\n      cameraName: \"\",\r\n      isLoading: false\r\n    });\r\n    const dataRef = toRefs(data);\r\n\r\n    const allDuration: any = computed(() => {\r\n      const time1: any = data.sTime.toString().split(\":\");\r\n      const time2: any = data.eTime.toString().split(\":\");\r\n      const time =\r\n        (time2[0] - time1[0]) * 3600000 +\r\n        (time2[1] - time1[1]) * 60000 +\r\n        (time2[2] - time1[2]) * 1000;\r\n      return time;\r\n    });\r\n    const progressLength: any = computed(() => {\r\n      return progressBarRef.value[0].clientWidth;\r\n    });\r\n\r\n    const originTime: any = computed(() => {\r\n      const time: any = data.sTime.toString().split(\":\");\r\n      return data.day + time[0] * 3600000 + time[1] * 60000 + time[2] * 1000;\r\n    });\r\n\r\n    onUnmounted(() => {\r\n      // 关闭视频流\r\n      if (typeof players.value !== \"undefined\" && players.value.e != null) {\r\n        if (players.value != null) {\r\n          players.value.pause();\r\n          players.value.unload();\r\n          players.value.detachMediaElement();\r\n          players.value.destroy();\r\n        }\r\n      }\r\n    });\r\n\r\n    // NVR 海康时间格式\r\n    function formatHaiKangTime(timestamps: string) {\r\n      const timestamp = parseFloat(timestamps);\r\n      const year = new Date(timestamp).getFullYear();\r\n      const month = new Date(timestamp).getMonth() + 1;\r\n      const day = new Date(timestamp).getDate();\r\n      const hour = new Date(timestamp).getHours();\r\n      const minute = new Date(timestamp).getMinutes();\r\n      const second = new Date(timestamp).getSeconds();\r\n      return `${year}${month > 9 ? month : \"0\" + month}${\r\n        day > 9 ? day : \"0\" + day\r\n      }T${hour > 9 ? hour : \"0\" + hour}${minute > 9 ? minute : \"0\" + minute}${\r\n        second > 9 ? second : \"0\" + second\r\n      }Z`;\r\n    }\r\n\r\n    // NVR 大华时间格式\r\n    function formatDahuaTime(timestamps: string) {\r\n      const timestamp = parseFloat(timestamps);\r\n      const year = new Date(timestamp).getFullYear();\r\n      const month = new Date(timestamp).getMonth() + 1;\r\n      const day = new Date(timestamp).getDate();\r\n      const hour = new Date(timestamp).getHours();\r\n      const minute = new Date(timestamp).getMinutes();\r\n      const second = new Date(timestamp).getSeconds();\r\n      return `${year}_${month > 9 ? month : \"0\" + month}_${\r\n        day > 9 ? day : \"0\" + day\r\n      }_${hour > 9 ? hour : \"0\" + hour}_${minute > 9 ? minute : \"0\" + minute}_${\r\n        second > 9 ? second : \"0\" + second\r\n      }`;\r\n    }\r\n\r\n    function initPlayer(playList: any) {\r\n      // 初始化直播\r\n      if (flvjs.isSupported()) {\r\n        const player = ref();\r\n        const video = player.value; // video\r\n        if (\r\n          !data.startTime &&\r\n          !data.endTime &&\r\n          !playList.startTime &&\r\n          !playList.endTime\r\n        ) {\r\n          return;\r\n        }\r\n        data.startTime = playList.startTime\r\n          ? playList.startTime\r\n          : data.startTime;\r\n        data.endTime = playList.endTime ? playList.endTime : data.endTime;\r\n        if (playList.startTime && playList.endTime) {\r\n          data.timePicker = false;\r\n        } else {\r\n          data.timePicker = true;\r\n        }\r\n        if (video) {\r\n          data.isLoading = true;\r\n          const id = playList.camera.id; // 唯一id\r\n          data.cameraId = id;\r\n          data.cameraName = playList.camera.name;\r\n          let rtsp = \"\";\r\n          if (\r\n            \"海康\" == playList.camera.brand ||\r\n            \"海康威视\" == playList.camera.brand\r\n          ) {\r\n            const sTime = formatHaiKangTime(data.startTime.toString());\r\n            const eTime = formatHaiKangTime(data.endTime.toString());\r\n            rtsp = `rtsp://${playList.camera.nvr_username} : ${playList.camera.nvr_password}@${playList.camera.nvr_ip}/Streaming/tracks/${playList.camera.nvr_channel}01/?starttime=${sTime}&endtime=\" +\r\n              ${eTime}&codecType=h264&subtype=1`;\r\n          } else if (\"大华\" == playList.camera.brand) {\r\n            const sTime = formatDahuaTime(data.startTime.toString())\r\n              .replace(/-/g, \"_\")\r\n              .replace(/:/g, \"_\")\r\n              .replace(/ /g, \"_\");\r\n            const eTime = formatDahuaTime(data.endTime.toString())\r\n              .replace(/-/g, \"_\")\r\n              .replace(/:/g, \"_\")\r\n              .replace(/ /g, \"_\");\r\n\r\n            rtsp = `rtsp://${playList.camera.nvr_username} : ${playList.camera.nvr_password}@${playList.camera.nvr_ip}/cam/playback?channel=${playList.camera.nvr_channel}&subtype=1&starttime=${sTime}&endtime=\" +\r\n              ${eTime}`;\r\n          }\r\n\r\n          players.value = playList.camera.player; //player\r\n          if (playList.camera.id != data.currentId) {\r\n            data.currentTime = 0;\r\n            data.eTime = 0;\r\n            data.currentRate = 1.0;\r\n          }\r\n          data.currentId = playList.camera.id;\r\n          const Url = `${httpFlvServer}/${id}/?url=${encodeURIComponent(\r\n            rtsp\r\n          )}}&brand=${playList.camera.brand}`;\r\n          players.value = flvjs.createPlayer({\r\n            type: \"flv\",\r\n            isLive: false, // 支持直播流（通过isLive:true来设置）,false是点播\r\n            hasVideo: true,\r\n            url: Url\r\n          });\r\n\r\n          const player = players.value;\r\n          player.on(flvjs.Events.METADATA_ARRIVED, () => {\r\n            console.log(\"--== meta data arrived ==--\");\r\n            data.isLoading = false;\r\n            data.playStatus = true;\r\n          });\r\n\r\n          video.addEventListener(\"pause\", function() {\r\n            // 暂停开始执行的函数\r\n            data.playStatus = true;\r\n          });\r\n          video.addEventListener(\"play\", function() {\r\n            // 播放开始执行的函数\r\n            data.playStatus = false;\r\n          });\r\n\r\n          players.value.attachMediaElement(video);\r\n          try {\r\n            players.value.load();\r\n            players.value.play();\r\n          } catch (error) {\r\n            console.log(error);\r\n          }\r\n        }\r\n      }\r\n    }\r\n\r\n    watch(props.historyCameraData, newValue => {\r\n      if (newValue) {\r\n        data.playList = newValue;\r\n        nextTick(() => {\r\n          if (!newValue.active) {\r\n            // 隐藏后关闭流\r\n            // 关闭视频流\r\n            if (\r\n              typeof players.value !== \"undefined\" &&\r\n              players.value.e != null\r\n            ) {\r\n              if (players.value != null) {\r\n                players.value.pause();\r\n                players.value.unload();\r\n                players.value.detachMediaElement();\r\n                players.value.destroy();\r\n              }\r\n            }\r\n          } else {\r\n            // 更新播放列表\r\n            initPlayer(newValue);\r\n          }\r\n        });\r\n      }\r\n    });\r\n\r\n    function getStyle() {\r\n      if (props.historyPlayCount === 1) {\r\n        return \"width:100%; height:100%\";\r\n      } else {\r\n        return \"width:100%; height:26rem\";\r\n      }\r\n    }\r\n\r\n    // 关闭全部视频\r\n    function hidden() {\r\n      if (typeof players.value !== \"undefined\" && players.value.e != null) {\r\n        if (players.value != null) {\r\n          players.value.pause();\r\n          players.value.unload();\r\n          players.value.detachMediaElement();\r\n          players.value.destroy();\r\n        }\r\n      }\r\n      // 关闭\r\n      emit(CHANGE_HISTORYMONITORLISTPANEL_STATE, data.cameraId);\r\n    }\r\n\r\n    function formatDay(timestamps: string) {\r\n      const timestamp = parseFloat(timestamps);\r\n      const year = new Date(timestamp).getFullYear();\r\n      const month = new Date(timestamp).getMonth() + 1;\r\n      const day = new Date(timestamp).getDate();\r\n      return `${year}-${month > 9 ? month : \"0\" + month}-${\r\n        day > 9 ? day : \"0\" + day\r\n      }`;\r\n    }\r\n\r\n    // 查询历史视频\r\n    function searchVideo() {\r\n      if (!data.sTime || !data.eTime || !data.day) {\r\n        ElMessage.error(\"请选择时间段查询\");\r\n        return;\r\n      }\r\n      data.startTime = new Date(\r\n        Date.parse(formatDay(data.day) + \" \" + data.sTime)\r\n      ).getTime();\r\n      data.endTime = new Date(\r\n        Date.parse(formatDay(data.day) + \" \" + data.eTime)\r\n      ).getTime();\r\n\r\n      // 更新播放列表\r\n      initPlayer(data.playList);\r\n    }\r\n\r\n    function changePlayStatus(flag: boolean) {\r\n      const player = ref();\r\n      if (flag) {\r\n        player.value[0].play();\r\n      } else {\r\n        player.value[0].pause();\r\n      }\r\n      data.playStatus = flag;\r\n    }\r\n\r\n    function formatTimes(timestamps: string) {\r\n      const timestamp = parseFloat(timestamps);\r\n      const hour = new Date(timestamp).getHours();\r\n      const minute = new Date(timestamp).getMinutes();\r\n      const second = new Date(timestamp).getSeconds();\r\n      return `${hour > 9 ? hour : \"0\" + hour}:${\r\n        minute > 9 ? minute : \"0\" + minute\r\n      }:${second > 9 ? second : \"0\" + second}`;\r\n    }\r\n\r\n    function handleProgress(e: any) {\r\n      if (!data.sTime || !data.eTime || !data.day) {\r\n        ElMessage.error(\"请选择时间段查询\");\r\n        return;\r\n      }\r\n\r\n      innerBarRef.value[0].style.width = e.offsetX + \"px\";\r\n      const duration = Math.floor(\r\n        (e.offsetX / progressBarRef.value[0].offsetWidth) * allDuration.value\r\n      );\r\n      const time = data.sTime.toString().split(\":\");\r\n      data.startTime = Number(\r\n        data.day +\r\n          Number(time[0]) * 3600000 +\r\n          Number(time[1]) * 60000 +\r\n          Number(time[2]) * 1000 +\r\n          duration\r\n      );\r\n      initPlayer(data.playList);\r\n    }\r\n\r\n    function handleVideoProgress(e: any) {\r\n      data.currentTime = Number(\r\n        formatTimes(e.target.currentTime * 1000 + data.startTime + \"\")\r\n      );\r\n      innerBarRef.value[0].style.width =\r\n        ((e.target.currentTime * 1000 + data.startTime - originTime.value) /\r\n          (data.endTime - data.startTime)) *\r\n          progressLength.value +\r\n        \"px\";\r\n    }\r\n\r\n    function changeRate(rate: number) {\r\n      data.currentRate = rate;\r\n      playerRef.value[0].playbackRate = rate;\r\n    }\r\n\r\n    return {\r\n      ...dataRef,\r\n      handleProgress,\r\n      getStyle,\r\n      hidden,\r\n      searchVideo,\r\n      changePlayStatus,\r\n      handleVideoProgress,\r\n      changeRate\r\n    };\r\n  }\r\n});\r\n</script>\r\n<style lang=\"scss\" scoped>\r\n.monitorPlayer-panel {\r\n  position: fixed;\r\n  /*right: -10px;*/\r\n  /*top: 150px;*/\r\n  z-index: 1;\r\n}\r\n.history-video {\r\n  width: 100%;\r\n  height: 100%;\r\n  background: black;\r\n  background-repeat: no-repeat;\r\n  background-size: 100% 100%;\r\n  -moz-background-size: 100% 100%;\r\n  background-image: url(\"/images/connecting.jpg\");\r\n}\r\n\r\n.historical-mon {\r\n  /* background: rgba(30, 42, 66, 0.88); */\r\n  width: 100%;\r\n  height: 100%;\r\n  color: #ffffff;\r\n}\r\n\r\n.historical-mon .top-title {\r\n  width: 100%;\r\n  line-height: 30px;\r\n  color: #fff;\r\n  border-bottom: 1px solid rgba(178, 223, 255, 0.2);\r\n  /* background: #274a7f; */\r\n  display: flex;\r\n  justify-content: space-between;\r\n  align-items: center;\r\n  z-index: 1;\r\n}\r\n\r\n.historical-mon .top-title span {\r\n  margin-left: 10px;\r\n}\r\n\r\n.historical-mon .top-title button {\r\n  width: 20px;\r\n  height: 20px;\r\n  border: 0;\r\n  cursor: pointer;\r\n  background: url(/images/x.png) no-repeat;\r\n  background-size: 100% 100%;\r\n  background-position: center;\r\n}\r\n\r\n.historical-mon ::-webkit-scrollbar {\r\n  /*滚动条整体样式*/\r\n  width: 6px; /*高宽分别对应横竖滚动条的尺寸*/\r\n}\r\n\r\n.historical-mon ::-webkit-scrollbar-thumb {\r\n  /*滚动条里面小方块*/\r\n  border-radius: 3px;\r\n  background: rgba(67, 97, 122, 1);\r\n}\r\n\r\n.video-controls {\r\n  width: 100%;\r\n  height: 3rem;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n\r\n  .icon {\r\n    font-size: 1.8rem;\r\n  }\r\n\r\n  .progress {\r\n    width: 70%;\r\n    height: 1rem;\r\n    border-radius: 0.5rem;\r\n    margin: 0 0.5rem;\r\n    background: rgba(0, 0, 0, 0.6);\r\n\r\n    .inner-bar {\r\n      width: 0px;\r\n      height: 100%;\r\n      border-radius: 0.5rem;\r\n      background: rgba(48, 163, 204, 0.5);\r\n    }\r\n  }\r\n  .rate {\r\n    margin-left: 1rem;\r\n    position: relative;\r\n    color: #fff;\r\n    font-size: 1.8rem;\r\n    width: 5rem;\r\n    height: 100%;\r\n    line-height: 3rem;\r\n    text-align: center;\r\n\r\n    &:hover > .rate-list {\r\n      display: block;\r\n    }\r\n\r\n    .rate-list {\r\n      position: absolute;\r\n      bottom: 2rem;\r\n      background: rgba(0, 0, 0, 0.5);\r\n      border-radius: 0.4rem;\r\n      display: none;\r\n\r\n      li {\r\n        height: 2rem;\r\n        line-height: 2rem;\r\n        width: 4rem;\r\n        text-align: center;\r\n\r\n        &:hover {\r\n          background: rgba(0, 0, 0, 0.2);\r\n        }\r\n      }\r\n    }\r\n  }\r\n  .time {\r\n    margin: 0 0.5rem;\r\n  }\r\n}\r\n\r\n.historical-mon .el-input__icon {\r\n  padding-bottom: 1.3rem;\r\n}\r\n\r\n.historical-mon .check-bar > li .el-range-editor {\r\n  display: flex;\r\n  align-items: center;\r\n}\r\n\r\n.historical-mon.check-bar > li .el-range-editor i {\r\n  display: inline-block;\r\n  height: 3.2rem !important;\r\n  line-height: 3.2rem;\r\n  padding-bottom: 1.3rem;\r\n  box-sizing: border-box;\r\n}\r\n\r\n.historical-mon.check-bar > li .el-range-editor span {\r\n  height: 3.4rem;\r\n  line-height: 3.4rem;\r\n  box-sizing: border-box;\r\n}\r\n\r\n.historical-mon .el-pagination__total {\r\n  color: #fff;\r\n}\r\n\r\n.historical-mon .el-checkbox__label {\r\n  font-size: 1.4rem;\r\n}\r\n\r\n.historical-mon .el-date-editor .el-range-input {\r\n  background-color: transparent;\r\n  color: #eee;\r\n  text-align: center;\r\n  font-size: 1.2rem;\r\n  padding-bottom: 0.2rem;\r\n}\r\n\r\n.historical-mon .el-date-editor .el-range-separator {\r\n  color: #eee;\r\n  font-size: 1.2rem;\r\n  padding-bottom: 1.5rem;\r\n}\r\n\r\n.historical-mon .el-range-separator {\r\n  padding-bottom: 1.4rem;\r\n  font-size: 1.2rem;\r\n  color: #eee;\r\n}\r\n\r\n.historical-mon .el-date-editor {\r\n  border-color: #5789ff;\r\n  background-color: #02163a;\r\n  color: #eee;\r\n  text-align: center;\r\n  font-size: 1.2rem;\r\n}\r\n</style>\r\n","\r\nimport flvjs from \"hd-flv\";\r\nimport { httpFlvServer } from \"@/utils/urls\";\r\nimport {\r\n  defineComponent,\r\n  onUnmounted,\r\n  ref,\r\n  computed,\r\n  watch,\r\n  nextTick,\r\n  reactive,\r\n  toRefs\r\n} from \"vue\";\r\nimport { ElMessage } from \"element-plus\";\r\n\r\nconst CHANGE_HISTORYMONITORLISTPANEL_STATE =\r\n  \"changeHistoryMonitorListPanelState\";\r\nexport default defineComponent({\r\n  name: \"HistpryMonitor\",\r\n  props: {\r\n    historyCameraData: {\r\n      type: Object,\r\n      required: true\r\n    },\r\n    historyPlayCount: {\r\n      type: Number,\r\n      required: true\r\n    }\r\n  },\r\n  emits: [CHANGE_HISTORYMONITORLISTPANEL_STATE],\r\n  setup(props, { emit }) {\r\n    const innerBarRef = ref();\r\n    const progressBarRef = ref();\r\n    const playerRef = ref();\r\n    const players = ref(); // player值\r\n\r\n    const data = reactive({\r\n      playList: {} as Record<string, any>, // 当前播放列表，最多同时4个\r\n      day: \"\",\r\n      sTime: 0,\r\n      eTime: 0,\r\n      startTime: 0,\r\n      endTime: 0,\r\n      playStatus: false,\r\n      timePicker: true,\r\n      currentTime: 0,\r\n      overTime: 0,\r\n      currentRate: 1.0,\r\n      currentId: \"\",\r\n      cameraId: 0,\r\n      cameraName: \"\",\r\n      isLoading: false\r\n    });\r\n    const dataRef = toRefs(data);\r\n\r\n    const allDuration: any = computed(() => {\r\n      const time1: any = data.sTime.toString().split(\":\");\r\n      const time2: any = data.eTime.toString().split(\":\");\r\n      const time =\r\n        (time2[0] - time1[0]) * 3600000 +\r\n        (time2[1] - time1[1]) * 60000 +\r\n        (time2[2] - time1[2]) * 1000;\r\n      return time;\r\n    });\r\n    const progressLength: any = computed(() => {\r\n      return progressBarRef.value[0].clientWidth;\r\n    });\r\n\r\n    const originTime: any = computed(() => {\r\n      const time: any = data.sTime.toString().split(\":\");\r\n      return data.day + time[0] * 3600000 + time[1] * 60000 + time[2] * 1000;\r\n    });\r\n\r\n    onUnmounted(() => {\r\n      // 关闭视频流\r\n      if (typeof players.value !== \"undefined\" && players.value.e != null) {\r\n        if (players.value != null) {\r\n          players.value.pause();\r\n          players.value.unload();\r\n          players.value.detachMediaElement();\r\n          players.value.destroy();\r\n        }\r\n      }\r\n    });\r\n\r\n    // NVR 海康时间格式\r\n    function formatHaiKangTime(timestamps: string) {\r\n      const timestamp = parseFloat(timestamps);\r\n      const year = new Date(timestamp).getFullYear();\r\n      const month = new Date(timestamp).getMonth() + 1;\r\n      const day = new Date(timestamp).getDate();\r\n      const hour = new Date(timestamp).getHours();\r\n      const minute = new Date(timestamp).getMinutes();\r\n      const second = new Date(timestamp).getSeconds();\r\n      return `${year}${month > 9 ? month : \"0\" + month}${\r\n        day > 9 ? day : \"0\" + day\r\n      }T${hour > 9 ? hour : \"0\" + hour}${minute > 9 ? minute : \"0\" + minute}${\r\n        second > 9 ? second : \"0\" + second\r\n      }Z`;\r\n    }\r\n\r\n    // NVR 大华时间格式\r\n    function formatDahuaTime(timestamps: string) {\r\n      const timestamp = parseFloat(timestamps);\r\n      const year = new Date(timestamp).getFullYear();\r\n      const month = new Date(timestamp).getMonth() + 1;\r\n      const day = new Date(timestamp).getDate();\r\n      const hour = new Date(timestamp).getHours();\r\n      const minute = new Date(timestamp).getMinutes();\r\n      const second = new Date(timestamp).getSeconds();\r\n      return `${year}_${month > 9 ? month : \"0\" + month}_${\r\n        day > 9 ? day : \"0\" + day\r\n      }_${hour > 9 ? hour : \"0\" + hour}_${minute > 9 ? minute : \"0\" + minute}_${\r\n        second > 9 ? second : \"0\" + second\r\n      }`;\r\n    }\r\n\r\n    function initPlayer(playList: any) {\r\n      // 初始化直播\r\n      if (flvjs.isSupported()) {\r\n        const player = ref();\r\n        const video = player.value; // video\r\n        if (\r\n          !data.startTime &&\r\n          !data.endTime &&\r\n          !playList.startTime &&\r\n          !playList.endTime\r\n        ) {\r\n          return;\r\n        }\r\n        data.startTime = playList.startTime\r\n          ? playList.startTime\r\n          : data.startTime;\r\n        data.endTime = playList.endTime ? playList.endTime : data.endTime;\r\n        if (playList.startTime && playList.endTime) {\r\n          data.timePicker = false;\r\n        } else {\r\n          data.timePicker = true;\r\n        }\r\n        if (video) {\r\n          data.isLoading = true;\r\n          const id = playList.camera.id; // 唯一id\r\n          data.cameraId = id;\r\n          data.cameraName = playList.camera.name;\r\n          let rtsp = \"\";\r\n          if (\r\n            \"海康\" == playList.camera.brand ||\r\n            \"海康威视\" == playList.camera.brand\r\n          ) {\r\n            const sTime = formatHaiKangTime(data.startTime.toString());\r\n            const eTime = formatHaiKangTime(data.endTime.toString());\r\n            rtsp = `rtsp://${playList.camera.nvr_username} : ${playList.camera.nvr_password}@${playList.camera.nvr_ip}/Streaming/tracks/${playList.camera.nvr_channel}01/?starttime=${sTime}&endtime=\" +\r\n              ${eTime}&codecType=h264&subtype=1`;\r\n          } else if (\"大华\" == playList.camera.brand) {\r\n            const sTime = formatDahuaTime(data.startTime.toString())\r\n              .replace(/-/g, \"_\")\r\n              .replace(/:/g, \"_\")\r\n              .replace(/ /g, \"_\");\r\n            const eTime = formatDahuaTime(data.endTime.toString())\r\n              .replace(/-/g, \"_\")\r\n              .replace(/:/g, \"_\")\r\n              .replace(/ /g, \"_\");\r\n\r\n            rtsp = `rtsp://${playList.camera.nvr_username} : ${playList.camera.nvr_password}@${playList.camera.nvr_ip}/cam/playback?channel=${playList.camera.nvr_channel}&subtype=1&starttime=${sTime}&endtime=\" +\r\n              ${eTime}`;\r\n          }\r\n\r\n          players.value = playList.camera.player; //player\r\n          if (playList.camera.id != data.currentId) {\r\n            data.currentTime = 0;\r\n            data.eTime = 0;\r\n            data.currentRate = 1.0;\r\n          }\r\n          data.currentId = playList.camera.id;\r\n          const Url = `${httpFlvServer}/${id}/?url=${encodeURIComponent(\r\n            rtsp\r\n          )}}&brand=${playList.camera.brand}`;\r\n          players.value = flvjs.createPlayer({\r\n            type: \"flv\",\r\n            isLive: false, // 支持直播流（通过isLive:true来设置）,false是点播\r\n            hasVideo: true,\r\n            url: Url\r\n          });\r\n\r\n          const player = players.value;\r\n          player.on(flvjs.Events.METADATA_ARRIVED, () => {\r\n            console.log(\"--== meta data arrived ==--\");\r\n            data.isLoading = false;\r\n            data.playStatus = true;\r\n          });\r\n\r\n          video.addEventListener(\"pause\", function() {\r\n            // 暂停开始执行的函数\r\n            data.playStatus = true;\r\n          });\r\n          video.addEventListener(\"play\", function() {\r\n            // 播放开始执行的函数\r\n            data.playStatus = false;\r\n          });\r\n\r\n          players.value.attachMediaElement(video);\r\n          try {\r\n            players.value.load();\r\n            players.value.play();\r\n          } catch (error) {\r\n            console.log(error);\r\n          }\r\n        }\r\n      }\r\n    }\r\n\r\n    watch(props.historyCameraData, newValue => {\r\n      if (newValue) {\r\n        data.playList = newValue;\r\n        nextTick(() => {\r\n          if (!newValue.active) {\r\n            // 隐藏后关闭流\r\n            // 关闭视频流\r\n            if (\r\n              typeof players.value !== \"undefined\" &&\r\n              players.value.e != null\r\n            ) {\r\n              if (players.value != null) {\r\n                players.value.pause();\r\n                players.value.unload();\r\n                players.value.detachMediaElement();\r\n                players.value.destroy();\r\n              }\r\n            }\r\n          } else {\r\n            // 更新播放列表\r\n            initPlayer(newValue);\r\n          }\r\n        });\r\n      }\r\n    });\r\n\r\n    function getStyle() {\r\n      if (props.historyPlayCount === 1) {\r\n        return \"width:100%; height:100%\";\r\n      } else {\r\n        return \"width:100%; height:26rem\";\r\n      }\r\n    }\r\n\r\n    // 关闭全部视频\r\n    function hidden() {\r\n      if (typeof players.value !== \"undefined\" && players.value.e != null) {\r\n        if (players.value != null) {\r\n          players.value.pause();\r\n          players.value.unload();\r\n          players.value.detachMediaElement();\r\n          players.value.destroy();\r\n        }\r\n      }\r\n      // 关闭\r\n      emit(CHANGE_HISTORYMONITORLISTPANEL_STATE, data.cameraId);\r\n    }\r\n\r\n    function formatDay(timestamps: string) {\r\n      const timestamp = parseFloat(timestamps);\r\n      const year = new Date(timestamp).getFullYear();\r\n      const month = new Date(timestamp).getMonth() + 1;\r\n      const day = new Date(timestamp).getDate();\r\n      return `${year}-${month > 9 ? month : \"0\" + month}-${\r\n        day > 9 ? day : \"0\" + day\r\n      }`;\r\n    }\r\n\r\n    // 查询历史视频\r\n    function searchVideo() {\r\n      if (!data.sTime || !data.eTime || !data.day) {\r\n        ElMessage.error(\"请选择时间段查询\");\r\n        return;\r\n      }\r\n      data.startTime = new Date(\r\n        Date.parse(formatDay(data.day) + \" \" + data.sTime)\r\n      ).getTime();\r\n      data.endTime = new Date(\r\n        Date.parse(formatDay(data.day) + \" \" + data.eTime)\r\n      ).getTime();\r\n\r\n      // 更新播放列表\r\n      initPlayer(data.playList);\r\n    }\r\n\r\n    function changePlayStatus(flag: boolean) {\r\n      const player = ref();\r\n      if (flag) {\r\n        player.value[0].play();\r\n      } else {\r\n        player.value[0].pause();\r\n      }\r\n      data.playStatus = flag;\r\n    }\r\n\r\n    function formatTimes(timestamps: string) {\r\n      const timestamp = parseFloat(timestamps);\r\n      const hour = new Date(timestamp).getHours();\r\n      const minute = new Date(timestamp).getMinutes();\r\n      const second = new Date(timestamp).getSeconds();\r\n      return `${hour > 9 ? hour : \"0\" + hour}:${\r\n        minute > 9 ? minute : \"0\" + minute\r\n      }:${second > 9 ? second : \"0\" + second}`;\r\n    }\r\n\r\n    function handleProgress(e: any) {\r\n      if (!data.sTime || !data.eTime || !data.day) {\r\n        ElMessage.error(\"请选择时间段查询\");\r\n        return;\r\n      }\r\n\r\n      innerBarRef.value[0].style.width = e.offsetX + \"px\";\r\n      const duration = Math.floor(\r\n        (e.offsetX / progressBarRef.value[0].offsetWidth) * allDuration.value\r\n      );\r\n      const time = data.sTime.toString().split(\":\");\r\n      data.startTime = Number(\r\n        data.day +\r\n          Number(time[0]) * 3600000 +\r\n          Number(time[1]) * 60000 +\r\n          Number(time[2]) * 1000 +\r\n          duration\r\n      );\r\n      initPlayer(data.playList);\r\n    }\r\n\r\n    function handleVideoProgress(e: any) {\r\n      data.currentTime = Number(\r\n        formatTimes(e.target.currentTime * 1000 + data.startTime + \"\")\r\n      );\r\n      innerBarRef.value[0].style.width =\r\n        ((e.target.currentTime * 1000 + data.startTime - originTime.value) /\r\n          (data.endTime - data.startTime)) *\r\n          progressLength.value +\r\n        \"px\";\r\n    }\r\n\r\n    function changeRate(rate: number) {\r\n      data.currentRate = rate;\r\n      playerRef.value[0].playbackRate = rate;\r\n    }\r\n\r\n    return {\r\n      ...dataRef,\r\n      handleProgress,\r\n      getStyle,\r\n      hidden,\r\n      searchVideo,\r\n      changePlayStatus,\r\n      handleVideoProgress,\r\n      changeRate\r\n    };\r\n  }\r\n});\r\n","import { render } from \"./historyMonitor.vue?vue&type=template&id=64dc0cc8&scoped=true\"\nimport script from \"./historyMonitor.vue?vue&type=script&lang=ts\"\nexport * from \"./historyMonitor.vue?vue&type=script&lang=ts\"\n\nimport \"./historyMonitor.vue?vue&type=style&index=0&id=64dc0cc8&lang=scss&scoped=true\"\nscript.render = render\nscript.__scopeId = \"data-v-64dc0cc8\"\n\nexport default script","<!--\r\n * @Description: \r\n * @Author: huxianc\r\n * @Date: 2021-01-20 09:56:51\r\n * @LastEditors: huxianc\r\n * @LastEditTime: 2021-01-20 09:57:17\r\n-->\r\n<template>\r\n  <div>\r\n    1\r\n  </div>\r\n</template>\r\n","import { render } from \"./warningList.vue?vue&type=template&id=43160a10\"\nconst script = {}\nscript.render = render\n\nexport default script","<!--\r\n * @Description: 标签信息\r\n * @Author: liufuqiang\r\n * @Date: 2021-01-22 14:36:16\r\n * @LastEditors: liufuqiang\r\n * @LastEditTime: 2021-02-20 16:04:40\r\n-->\r\n<template>\r\n  <div>\r\n    <el-form :model=\"params\" label-width=\"80px\" :inline=\"true\" size=\"small\">\r\n      <el-form-item label=\"标签编号\">\r\n        <el-input v-model.trim=\"params.dnum\" clearable @change=\"search\" />\r\n      </el-form-item>\r\n      <el-form-item>\r\n        <el-button type=\"primary\" @click=\"search\">搜索</el-button>\r\n      </el-form-item>\r\n    </el-form>\r\n    <hd-table :data=\"tableData\" v-loading=\"loading\">\r\n      <hd-table-column label=\"编号\" prop=\"dnum\" width=\"110\" />\r\n      <hd-table-column label=\"名称\" prop=\"dname\" />\r\n      <hd-table-column label=\"类型\" prop=\"dtype\" />\r\n      <el-table-column label=\"电量\" show-overflow-tooltip align=\"center\">\r\n        <template #default=\"{ row }\">\r\n          <div v-show=\"row.voltage < 3.55 || !row.voltage\" style=\"color:#f00;\">\r\n            <span class=\"icon iconfont\">&#xe62a;</span>\r\n          </div>\r\n          <div\r\n            v-show=\"row.voltage >= 3.55 && row.voltage < 3.65\"\r\n            style=\"color:#0f0;\"\r\n          >\r\n            <img src=\"/images/power.png\" style=\"width:16px\" alt=\"\" />\r\n          </div>\r\n          <div v-show=\"row.voltage >= 3.65\" style=\"color:#0f0;\">\r\n            <span class=\"icon iconfont\">&#xe62f;</span>\r\n          </div>\r\n        </template>\r\n      </el-table-column>\r\n      <el-table-column\r\n        width=\"180\"\r\n        label=\"位置\"\r\n        show-overflow-tooltip\r\n        align=\"center\"\r\n      >\r\n        <template #default=\"{ row }\">\r\n          <span v-if=\"row.snum\" style=\"color: #3dd1ff\">\r\n            {{ getMapByNum(row.snum).sname }}\r\n          </span>\r\n          <span v-if=\"!row.snum\">\r\n            未上线\r\n          </span>\r\n        </template>\r\n      </el-table-column>\r\n      <el-table-column width=\"120\" label=\"操作\" align=\"center\">\r\n        <template #default=\"{ row }\">\r\n          <el-button size=\"mini\" type=\"primary\" @click=\"handleDetail(row)\"\r\n            >详情</el-button\r\n          >\r\n        </template>\r\n      </el-table-column>\r\n    </hd-table>\r\n    <el-pagination\r\n      v-show=\"total && tableData && tableData.length\"\r\n      background\r\n      v-model:current-page=\"params.page\"\r\n      layout=\"total, prev, pager, next, jumper\"\r\n      :total=\"total\"\r\n      @current-change=\"changePage\"\r\n    />\r\n  </div>\r\n</template>\r\n\r\n<script lang=\"ts\">\r\nimport {\r\n  onMounted,\r\n  reactive,\r\n  ref,\r\n  defineComponent,\r\n  shallowRef,\r\n  PropType\r\n} from \"vue\";\r\nimport commonApi from \"@/api/common\";\r\nimport { TYPES } from \"../constVariables\";\r\nimport { IDeviceItem } from \"../types\";\r\nimport { IPersonArrItem } from \"../types/index\";\r\nimport { getMapByNum } from \"@/utils/auth\";\r\nimport hdTableColumn from \"@/components/hd/hd-table-column.vue\";\r\nconst CLICKED = \"clicked\";\r\n\r\nexport default defineComponent({\r\n  components: { hdTableColumn },\r\n  name: \"Label\",\r\n  props: {\r\n    wsAllLabel: {\r\n      type: Array as PropType<IPersonArrItem[]>\r\n    }\r\n  },\r\n  emits: [\"showEquipDetails\", CLICKED],\r\n  setup(props, { emit }) {\r\n    const params = reactive({\r\n      page: 1,\r\n      pagesize: 10,\r\n      dtype: \"肩章\",\r\n      dnum: \"\"\r\n    });\r\n    const loading = shallowRef<boolean>(false);\r\n\r\n    const tableData = ref<IDeviceItem[]>([]);\r\n    const total = shallowRef<number>(0);\r\n    // 获取分页列表\r\n    async function getList() {\r\n      loading.value = true;\r\n      const param = {\r\n        act: \"mKQQKGa49xhcOWaBjDI1612407197459\",\r\n        curpage: params.page,\r\n        // eslint-disable-next-line @typescript-eslint/camelcase\r\n        sys_showpagesize: params.pagesize,\r\n        dtype: params.dtype,\r\n        dnum: params.dnum\r\n      };\r\n      const res = await commonApi.getCommonApi(param);\r\n      const { data } = res as any;\r\n      data.content.forEach((item: any) => {\r\n        if (props.wsAllLabel) {\r\n          props.wsAllLabel.forEach(element => {\r\n            if (element.TagId === item.dnum) {\r\n              item.snum = element.LocationSceneId;\r\n            }\r\n          });\r\n        }\r\n\r\n        if (item.eattribute) {\r\n          const attrs = item.eattribute.split(\",\");\r\n          attrs.forEach((elem: any) => {\r\n            const attrName = elem.split(\"|\");\r\n            const arr = [\r\n              \"status\", // 设备在线状态\r\n              \"hearttime\", // 最后心跳时间\r\n              \"currentalarm\", // 落水报警\r\n              \"voltage\", // 电压\r\n              \"bracelet_voltage\" // 对应手环电压\r\n            ];\r\n            arr.forEach(prop => {\r\n              if (!item[prop] && attrName[0] === prop) {\r\n                item[prop] = attrName[1].split(\":\")[1];\r\n              }\r\n            });\r\n          });\r\n        }\r\n      });\r\n      tableData.value = data.content;\r\n      console.log(\"labelList:\", data.content);\r\n      total.value = data.count;\r\n      loading.value = false;\r\n    }\r\n    // 查看详情\r\n    function handleDetail(row: IDeviceItem) {\r\n      emit(\"showEquipDetails\", row, TYPES.labelList);\r\n      emit(CLICKED);\r\n    }\r\n    // 分页\r\n    async function changePage(page: number) {\r\n      params.page = page;\r\n      getList();\r\n    }\r\n    // 搜索\r\n    async function search() {\r\n      params.page = 1;\r\n      getList();\r\n    }\r\n\r\n    onMounted(() => {\r\n      getList();\r\n    });\r\n\r\n    return {\r\n      params,\r\n      loading,\r\n      tableData,\r\n      total,\r\n      changePage,\r\n      search,\r\n      getMapByNum,\r\n      handleDetail\r\n    };\r\n  }\r\n});\r\n</script>\r\n","<!--\r\n * @Description: \r\n * @Author: huxianc\r\n * @Date: 2021-02-01 15:47:16\r\n * @LastEditors: huxianc\r\n * @LastEditTime: 2021-02-01 15:52:52\r\n-->\r\n<template>\r\n  <el-table-column v-bind=\"$attrs\" align=\"center\" show-overflow-tooltip>\r\n  </el-table-column>\r\n</template>\r\n\r\n<script lang=\"ts\">\r\nimport { defineComponent } from \"vue\";\r\n\r\nexport default defineComponent({\r\n  name: \"HdTableColumn\"\r\n});\r\n</script>\r\n\r\n<style scoped></style>\r\n","\r\nimport { defineComponent } from \"vue\";\r\n\r\nexport default defineComponent({\r\n  name: \"HdTableColumn\"\r\n});\r\n","import { render } from \"./hd-table-column.vue?vue&type=template&id=7909bb82\"\nimport script from \"./hd-table-column.vue?vue&type=script&lang=ts\"\nexport * from \"./hd-table-column.vue?vue&type=script&lang=ts\"\nscript.render = render\n\nexport default script","\r\nimport {\r\n  onMounted,\r\n  reactive,\r\n  ref,\r\n  defineComponent,\r\n  shallowRef,\r\n  PropType\r\n} from \"vue\";\r\nimport commonApi from \"@/api/common\";\r\nimport { TYPES } from \"../constVariables\";\r\nimport { IDeviceItem } from \"../types\";\r\nimport { IPersonArrItem } from \"../types/index\";\r\nimport { getMapByNum } from \"@/utils/auth\";\r\nimport hdTableColumn from \"@/components/hd/hd-table-column.vue\";\r\nconst CLICKED = \"clicked\";\r\n\r\nexport default defineComponent({\r\n  components: { hdTableColumn },\r\n  name: \"Label\",\r\n  props: {\r\n    wsAllLabel: {\r\n      type: Array as PropType<IPersonArrItem[]>\r\n    }\r\n  },\r\n  emits: [\"showEquipDetails\", CLICKED],\r\n  setup(props, { emit }) {\r\n    const params = reactive({\r\n      page: 1,\r\n      pagesize: 10,\r\n      dtype: \"肩章\",\r\n      dnum: \"\"\r\n    });\r\n    const loading = shallowRef<boolean>(false);\r\n\r\n    const tableData = ref<IDeviceItem[]>([]);\r\n    const total = shallowRef<number>(0);\r\n    // 获取分页列表\r\n    async function getList() {\r\n      loading.value = true;\r\n      const param = {\r\n        act: \"mKQQKGa49xhcOWaBjDI1612407197459\",\r\n        curpage: params.page,\r\n        // eslint-disable-next-line @typescript-eslint/camelcase\r\n        sys_showpagesize: params.pagesize,\r\n        dtype: params.dtype,\r\n        dnum: params.dnum\r\n      };\r\n      const res = await commonApi.getCommonApi(param);\r\n      const { data } = res as any;\r\n      data.content.forEach((item: any) => {\r\n        if (props.wsAllLabel) {\r\n          props.wsAllLabel.forEach(element => {\r\n            if (element.TagId === item.dnum) {\r\n              item.snum = element.LocationSceneId;\r\n            }\r\n          });\r\n        }\r\n\r\n        if (item.eattribute) {\r\n          const attrs = item.eattribute.split(\",\");\r\n          attrs.forEach((elem: any) => {\r\n            const attrName = elem.split(\"|\");\r\n            const arr = [\r\n              \"status\", // 设备在线状态\r\n              \"hearttime\", // 最后心跳时间\r\n              \"currentalarm\", // 落水报警\r\n              \"voltage\", // 电压\r\n              \"bracelet_voltage\" // 对应手环电压\r\n            ];\r\n            arr.forEach(prop => {\r\n              if (!item[prop] && attrName[0] === prop) {\r\n                item[prop] = attrName[1].split(\":\")[1];\r\n              }\r\n            });\r\n          });\r\n        }\r\n      });\r\n      tableData.value = data.content;\r\n      console.log(\"labelList:\", data.content);\r\n      total.value = data.count;\r\n      loading.value = false;\r\n    }\r\n    // 查看详情\r\n    function handleDetail(row: IDeviceItem) {\r\n      emit(\"showEquipDetails\", row, TYPES.labelList);\r\n      emit(CLICKED);\r\n    }\r\n    // 分页\r\n    async function changePage(page: number) {\r\n      params.page = page;\r\n      getList();\r\n    }\r\n    // 搜索\r\n    async function search() {\r\n      params.page = 1;\r\n      getList();\r\n    }\r\n\r\n    onMounted(() => {\r\n      getList();\r\n    });\r\n\r\n    return {\r\n      params,\r\n      loading,\r\n      tableData,\r\n      total,\r\n      changePage,\r\n      search,\r\n      getMapByNum,\r\n      handleDetail\r\n    };\r\n  }\r\n});\r\n","import { render } from \"./labelList.vue?vue&type=template&id=741bbc6a\"\nimport script from \"./labelList.vue?vue&type=script&lang=ts\"\nexport * from \"./labelList.vue?vue&type=script&lang=ts\"\nscript.render = render\n\nexport default script","<!--\r\n * @Description: 警报处理\r\n * @Author: liufuqiang\r\n * @Date: 2021-01-25 13:50:04\r\n * @LastEditors: liufuqiang\r\n * @LastEditTime: 2021-02-20 11:37:04\r\n-->\r\n<template>\r\n  <div class=\"handle\" @scroll.capture=\"lazyLoad($event)\">\r\n    <div class=\"handle-class\">\r\n      <el-button\r\n        :class=\"flag == '未处理' ? 'active' : ''\"\r\n        @click=\"handleStatus('未处理')\"\r\n      >\r\n        未处理\r\n      </el-button>\r\n      <el-button\r\n        :class=\"flag == '已处理' ? 'active' : ''\"\r\n        @click=\"handleStatus('已处理')\"\r\n      >\r\n        已处理\r\n      </el-button>\r\n    </div>\r\n    <div class=\"danger-level\">\r\n      <el-button :class=\"status[3]\" @click=\"handleLevel(3)\">\r\n        全部\r\n      </el-button>\r\n      <el-button :class=\"status[2]\" @click=\"handleLevel(2)\">\r\n        危急\r\n      </el-button>\r\n      <el-button :class=\"status[1]\" @click=\"handleLevel(1)\">\r\n        严重\r\n      </el-button>\r\n      <el-button :class=\"status[0]\" @click=\"handleLevel(0)\">\r\n        普通\r\n      </el-button>\r\n    </div>\r\n\r\n    <ul ref=\"alarmBarRef\" name=\"warn-items\" class=\"alarm-list\">\r\n      <li\r\n        v-for=\"item in showAlarms\"\r\n        :key=\"item.Id\"\r\n        ref=\"itemsRef\"\r\n        class=\"active\"\r\n        :class=\"item.isSelected ? 'checked' : 'item'\"\r\n        @click=\"checkAlarm(item)\"\r\n      >\r\n        <div\r\n          class=\"top-bar\"\r\n          :style=\"item.status == true ? 'filter:grayscale(0.5)' : ''\"\r\n        >\r\n          <span :style=\"styleArr[item.alarmLevel]\" class=\"alarm-level\">{{\r\n            alarmLevel(item.alarmLevel)\r\n          }}</span>\r\n          <p>\r\n            <span style=\"line-height:2.6rem\">\r\n              {{ item.CreateTime }}\r\n            </span>\r\n            &nbsp;-\r\n            <strong :style=\"colorStyleArr[item.alarmLevel]\">\r\n              {{ item.SourceType }}\r\n            </strong>\r\n            <br />\r\n            <span :style=\"colorStyleArr[item.alarmLevel]\">{{\r\n              item.alarmContent\r\n            }}</span>\r\n          </p>\r\n        </div>\r\n        <div class=\"bot-bar\">\r\n          <span>{{ item.diffTime }}</span>\r\n          <el-button\r\n            size=\"mini\"\r\n            v-show=\"item.map\"\r\n            @click.stop=\"viewToAlarm(item)\"\r\n          >\r\n            查看报警位置\r\n          </el-button>\r\n          <el-button size=\"mini\" @click.stop=\"alarmDetail(item)\">\r\n            查看详情\r\n          </el-button>\r\n          <el-button\r\n            size=\"mini\"\r\n            v-show=\"flag == '未处理'\"\r\n            @click.stop=\"showHandlePannel(item)\"\r\n          >\r\n            处理\r\n          </el-button>\r\n        </div>\r\n      </li>\r\n      <li v-show=\"!loading\" class=\"tips\">\r\n        <p>已经到底啦！</p>\r\n      </li>\r\n    </ul>\r\n    <div class=\"set-bar\">\r\n      <span v-show=\"checkedNum > 0\">已选择{{ checkedNum }}</span\r\n      >&nbsp;\r\n\r\n      <ElCheckbox\r\n        v-show=\"flag == '未处理'\"\r\n        label=\"全选\"\r\n        v-model=\"checkAll\"\r\n        @change=\"handleCheckAllChange\"\r\n      ></ElCheckbox\r\n      >&nbsp;\r\n      <el-popconfirm\r\n        title=\"确定一键处理所有选中报警 ？\"\r\n        @confirm=\"handleAll\"\r\n        effect=\"dark\"\r\n      >\r\n        <template #reference>\r\n          <el-button size=\"mini\" v-show=\"flag != '已处理'\" class=\"single-line\">\r\n            一键处理\r\n          </el-button>\r\n        </template>\r\n      </el-popconfirm>\r\n      <span>共{{ total }}条</span>\r\n      <!-- 加载条--------------- -->\r\n      <div>\r\n        <span v-show=\"loading\" class=\"loader loader--style2\" title=\"1\">\r\n          <svg\r\n            version=\"1.1\"\r\n            id=\"loader-1\"\r\n            xmlns=\"http://www.w3.org/2000/svg\"\r\n            xmlns:xlink=\"http://www.w3.org/1999/xlink\"\r\n            x=\"0px\"\r\n            y=\"0px\"\r\n            width=\"40px\"\r\n            height=\"40px\"\r\n            viewBox=\"0 0 50 50\"\r\n            style=\"enable-background:new 0 0 50 50;\"\r\n            xml:space=\"preserve\"\r\n          >\r\n            <path\r\n              fill=\"#000\"\r\n              d=\"M25.251,6.461c-10.318,0-18.683,8.365-18.683,18.683h4.068c0-8.071,6.543-14.615,14.615-14.615V6.461z\"\r\n            >\r\n              <animateTransform\r\n                attributeType=\"xml\"\r\n                attributeName=\"transform\"\r\n                type=\"rotate\"\r\n                from=\"0 25 25\"\r\n                to=\"360 25 25\"\r\n                dur=\"0.6s\"\r\n                repeatCount=\"indefinite\"\r\n              />\r\n            </path>\r\n          </svg>\r\n        </span>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script lang=\"ts\">\r\nimport {\r\n  defineComponent,\r\n  reactive,\r\n  ref,\r\n  toRefs,\r\n  onMounted,\r\n  watch,\r\n  computed,\r\n  nextTick,\r\n  PropType\r\n} from \"vue\";\r\nimport commonApi from \"@/api/common\";\r\nimport { ElMessage } from \"element-plus\";\r\n// 第三方引入\r\nimport dayjs from \"dayjs\";\r\nimport { getIntervalTime } from \"@/utils\";\r\nimport { timeFormateStr } from \"../constVariables\";\r\nimport { IGetAlarmItem } from \"../types/ws\";\r\n\r\nexport default defineComponent({\r\n  name: \"Handle\",\r\n  props: {\r\n    alarmType: {\r\n      required: false,\r\n      default: \"\"\r\n    },\r\n    /** ws 传入的待处理报警 */\r\n    wsAlarmItem: {\r\n      type: Object as PropType<IGetAlarmItem>\r\n    },\r\n    /** 单个处理和批量处理id数组 */\r\n    handleIds: {\r\n      required: false,\r\n      default: []\r\n    },\r\n    /** ws 传入的已处理报警的 id */\r\n    cancelId: {\r\n      type: String\r\n    }\r\n  },\r\n  emits: [\r\n    \"showAlarmDetail\",\r\n    \"showHandlePannel\",\r\n    \"getAlarmTotal\",\r\n    \"getAlarmUnHandle\"\r\n  ],\r\n  setup(props, { emit }) {\r\n    const params = reactive({\r\n      status: [\"\", \"\", \"\", \"active\"],\r\n      showAlarms: [] as any,\r\n      alarms: [],\r\n      styleArr: [\r\n        { background: \"#00A67B\" },\r\n        { background: \"#FF7352\" },\r\n        { background: \"#D9354E\" }\r\n      ],\r\n      colorStyleArr: [\r\n        { color: \"#52f3c8\" },\r\n        { color: \"#FF7352\" },\r\n        { color: \"#D9354E\" }\r\n      ],\r\n      flag: \"未处理\",\r\n      size: 10,\r\n      page: 1,\r\n      loading: false,\r\n      oldY: undefined,\r\n      disposeStatus: \"未处理\", // 处理状态\r\n      typeid: \"\", // 报警类型id\r\n      alarmLevel: \"\" as string | number,\r\n      alarmTypeArr: [], // 报警类型\r\n      alarmTypeName: \"全部类型\",\r\n      total: 0,\r\n      static: {\r\n        total: 0,\r\n        unHandle: 0\r\n      },\r\n      checkAll: false\r\n    });\r\n\r\n    const itemsRef = ref();\r\n    const alarmBarRef = ref();\r\n    const dataRef = toRefs(params);\r\n    // 获取所有报警数据\r\n    async function getAllAlarm() {\r\n      const param = {\r\n        act: \"6Z6wTPGkfMVF9eLTOXA1611040899987\",\r\n        curpage: 1,\r\n        // eslint-disable-next-line @typescript-eslint/camelcase\r\n        sys_showpagesize: 10,\r\n        ShowSceneNum: \"\",\r\n        SourceType: \"\",\r\n        alarmLevel: \"\",\r\n        sTime: \"\",\r\n        eTime: \"\",\r\n        alarmProgress: \"\"\r\n      };\r\n      const res = await commonApi.getCommonApi(param);\r\n      const { data } = res as any;\r\n      params.static.total = data.count;\r\n      emit(\"getAlarmTotal\", params.static.total);\r\n    }\r\n    // 获取所有未处理报警数据\r\n    async function getAllUnHandleAlarm() {\r\n      const param = {\r\n        act: \"6Z6wTPGkfMVF9eLTOXA1611040899987\",\r\n        curpage: 1,\r\n        // eslint-disable-next-line @typescript-eslint/camelcase\r\n        sys_showpagesize: 10,\r\n        ShowSceneNum: \"\",\r\n        SourceType: \"\",\r\n        alarmLevel: \"\",\r\n        sTime: \"\",\r\n        eTime: \"\",\r\n        alarmProgress: \"未处理\"\r\n      };\r\n      const res = await commonApi.getCommonApi(param);\r\n      const { data } = res as any;\r\n      params.static.unHandle = data.count;\r\n      emit(\"getAlarmUnHandle\", params.static.unHandle);\r\n    }\r\n    // 获取报警分页列表\r\n    async function getAlarmList() {\r\n      const param = {\r\n        act: \"6Z6wTPGkfMVF9eLTOXA1611040899987\",\r\n        curpage: params.page,\r\n        // eslint-disable-next-line @typescript-eslint/camelcase\r\n        sys_showpagesize: params.size,\r\n        ShowSceneNum: \"\",\r\n        SourceType: props.alarmType,\r\n        alarmLevel: params.alarmLevel,\r\n        sTime: \"\",\r\n        eTime: \"\",\r\n        alarmProgress: params.disposeStatus\r\n      };\r\n      const res = await commonApi.getCommonApi(param);\r\n      const { result, data } = res as any;\r\n\r\n      if (result.success) {\r\n        data.content.forEach((element: any) => {\r\n          // 开始时间\r\n          const createtime = dayjs(element.CreateTime).format(timeFormateStr);\r\n          element.CreateTime = createtime;\r\n          // 间隔时间\r\n          element.diffTime = getIntervalTime(createtime);\r\n          // 处理时间\r\n          const dealTime = dayjs(element.dealTime).format(timeFormateStr);\r\n          element.dealTime = dealTime;\r\n          // 默认不选中\r\n          element.isSelected = false;\r\n        });\r\n        params.showAlarms = [...params.showAlarms, ...data.content];\r\n        params.total = data.count;\r\n      }\r\n      params.loading = false;\r\n    }\r\n\r\n    // 报警等级\r\n    function alarmLevel(n: number) {\r\n      const arr = [\"普通\", \"严重\", \"危急\"];\r\n      return arr[n];\r\n    }\r\n\r\n    // 选择处理状态筛选\r\n    function handleStatus(status: string) {\r\n      params.checkAll = false;\r\n      params.loading = true;\r\n      if (params.disposeStatus == status) {\r\n        params.loading = false;\r\n        return;\r\n      }\r\n      params.page = 1;\r\n      params.flag = status;\r\n      params.disposeStatus = status;\r\n      params.showAlarms = [];\r\n      getAlarmList();\r\n    }\r\n    // 滚动按需加载\r\n    function lazyLoad(e: any) {\r\n      const itemLength = itemsRef.value && itemsRef.value.offsetHeight;\r\n      const ulLength = alarmBarRef.value.offsetHeight;\r\n      if (\r\n        e.target.scrollTop >\r\n        itemLength * params.page * params.size - ulLength\r\n      ) {\r\n        // if (params.showAlarms.length < params.page * params.size) {\r\n        //   return;\r\n        // }\r\n\r\n        params.page += 1;\r\n        params.loading = true;\r\n        getAlarmList();\r\n      }\r\n    }\r\n    // 选择报警等级筛选\r\n    function handleLevel(count: number) {\r\n      params.checkAll = false;\r\n      params.loading = true;\r\n      if (\r\n        params.alarmLevel === count ||\r\n        (params.alarmLevel === \"\" && count === 3)\r\n      ) {\r\n        params.loading = false;\r\n        return;\r\n      }\r\n      params.status = [\"\", \"\", \"\", \"\"];\r\n      params.status[count] = \"active\";\r\n      if (count === 3) {\r\n        params.alarmLevel = \"\";\r\n      } else {\r\n        params.alarmLevel = count;\r\n      }\r\n      params.page = 1;\r\n      params.showAlarms = [];\r\n      getAlarmList();\r\n    }\r\n\r\n    // 报警详情\r\n    function alarmDetail(row: any) {\r\n      emit(\"showAlarmDetail\", row);\r\n    }\r\n\r\n    //一键处理\r\n    function handleAll() {\r\n      const checkedAlarm = params.showAlarms.filter(\r\n        (item: any) => item.isSelected\r\n      );\r\n      if (checkedAlarm.length === 0) {\r\n        ElMessage.error(\"请选择要处理的报警信息！\");\r\n        return;\r\n      }\r\n      emit(\"showHandlePannel\", checkedAlarm);\r\n    }\r\n\r\n    // 打开处理弹框\r\n    function showHandlePannel(row: any) {\r\n      emit(\"showHandlePannel\", row);\r\n    }\r\n\r\n    // 选中报警\r\n    function checkAlarm(row: any) {\r\n      params.showAlarms.forEach((item: any) => {\r\n        if (item.Id === row.Id) {\r\n          item.isSelected = !row.isSelected;\r\n          return;\r\n        }\r\n      });\r\n    }\r\n\r\n    // 全选/反选\r\n    function handleCheckAllChange() {\r\n      params.showAlarms.forEach((item: any) => {\r\n        item.isSelected = params.checkAll;\r\n      });\r\n    }\r\n\r\n    watch(\r\n      () => props.wsAlarmItem,\r\n      newVal => {\r\n        console.log(\"newVal\", newVal);\r\n        if (newVal) {\r\n          const wsAlarm = {\r\n            isSelected: false,\r\n            status: false,\r\n            alarmLevel: newVal.AlarmLevel,\r\n            CreateTime: dayjs(new Date()).format(timeFormateStr),\r\n            diffTime: getIntervalTime(dayjs(new Date()).format(timeFormateStr)),\r\n            SourceType: newVal.AlarmSourceType,\r\n            alarmContent: newVal.AlarmContent,\r\n            SourceName: newVal.AlarmSourceName,\r\n            alarmProgress: \"未处理\"\r\n          };\r\n\r\n          params.showAlarms = [wsAlarm, ...params.showAlarms];\r\n          params.static.unHandle++;\r\n          emit(\"getAlarmUnHandle\", params.static.unHandle);\r\n          params.static.total++;\r\n          emit(\"getAlarmTotal\", params.static.total);\r\n        }\r\n      }\r\n    );\r\n    // 处理报警\r\n    watch(\r\n      () => props.handleIds,\r\n      newArr => {\r\n        params.showAlarms.slice().forEach((item: any, index: number) => {\r\n          newArr.forEach((id: string | number) => {\r\n            if (item.IDS == id) {\r\n              params.static.unHandle--;\r\n              emit(\"getAlarmUnHandle\", params.static.unHandle);\r\n              // 防止滚动懒加载失效\r\n              if (params.showAlarms.length < params.size) {\r\n                params.page = 1;\r\n                params.showAlarms = [];\r\n                getAlarmList();\r\n              }\r\n              params.showAlarms.splice(index, 1);\r\n              params.total--;\r\n            }\r\n          });\r\n        });\r\n      }\r\n    );\r\n    const checkedNum: any = computed(() => {\r\n      const num = params.showAlarms.filter((item: any) => item.isSelected);\r\n      return num.length;\r\n    });\r\n\r\n    onMounted(() => {\r\n      getAlarmList();\r\n      // 获取所有报警数据\r\n      getAllAlarm();\r\n      // 获取所有未处理报警数据\r\n      getAllUnHandleAlarm();\r\n    });\r\n\r\n    watch(\r\n      () => props.alarmType,\r\n      () => {\r\n        nextTick(() => {\r\n          params.page = 1;\r\n          params.showAlarms = [];\r\n          getAlarmList();\r\n        });\r\n      }\r\n    );\r\n    return {\r\n      ...dataRef,\r\n      itemsRef,\r\n      alarmBarRef,\r\n      alarmLevel,\r\n      handleStatus,\r\n      lazyLoad,\r\n      handleLevel,\r\n      alarmDetail,\r\n      handleAll,\r\n      showHandlePannel,\r\n      checkAlarm,\r\n      handleCheckAllChange,\r\n      checkedNum\r\n    };\r\n  }\r\n});\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\nbutton {\r\n  border: 0;\r\n  background: 0;\r\n  cursor: pointer;\r\n  outline: none;\r\n}\r\n.handle {\r\n  width: 98%;\r\n  min-width: 220px;\r\n  height: 100vh;\r\n  color: #fff;\r\n  position: relative;\r\n  background: rgb(9, 29, 75, 0.5);\r\n  opacity: 0.95;\r\n  .handle-class {\r\n    display: flex;\r\n    justify-content: space-around;\r\n    button {\r\n      flex-grow: 1;\r\n      line-height: 4rem;\r\n      font-size: 1.6rem;\r\n      background: #23406f;\r\n      color: #fff;\r\n      padding: 0 0.6rem;\r\n      cursor: pointer;\r\n      border-radius: 0;\r\n      width: 100%;\r\n    }\r\n    .active {\r\n      background: 0;\r\n      font-size: 1.6rem;\r\n      font-family: Microsoft YaHei;\r\n      font-weight: 400;\r\n      color: rgba(61, 209, 255, 1);\r\n      line-height: 2rem;\r\n    }\r\n  }\r\n  .danger-level {\r\n    display: flex;\r\n    justify-content: space-between;\r\n    padding: 0rem 0rem 0rem 1rem;\r\n    /* width: 98%; */\r\n    button {\r\n      line-height: 3rem;\r\n      margin: 1rem 0;\r\n      color: #ffffff;\r\n      background: #3672c3;\r\n      border-radius: 0.3rem;\r\n      padding: 0 1.9rem;\r\n      font-size: 1.4rem;\r\n      font-family: Microsoft YaHei;\r\n      font-weight: 400;\r\n      color: rgba(255, 255, 255, 1);\r\n      span {\r\n        margin-left: 1.5rem;\r\n      }\r\n    }\r\n    .active {\r\n      background: #3dd1ff;\r\n    }\r\n  }\r\n  .alarm-list {\r\n    .item {\r\n      background-size: 100% 100%;\r\n      &:hover {\r\n        box-shadow: 0 0 5px rgba(0, 113, 241, 1);\r\n        -webkit-box-shadow: 0 0 5px rgba(0, 113, 241, 1);\r\n      }\r\n    }\r\n    .checked {\r\n      background: url(\"../../../../assets/dashboard/important_monitor.png\")\r\n        repeat center center/100% 110%;\r\n    }\r\n  }\r\n  .alarm-type {\r\n    display: flex;\r\n    font-size: 1.4rem;\r\n    align-items: center;\r\n    padding-left: 1rem;\r\n    padding-bottom: 1rem;\r\n    .spinner-item {\r\n      width: 17rem;\r\n      min-width: 120px;\r\n    }\r\n  }\r\n  ul {\r\n    // border-bottom: 1px solid rgba(134, 208, 255, 0.2);\r\n    height: 70%;\r\n    overflow: auto;\r\n    &::-webkit-scrollbar {\r\n      /*滚动条整体样式*/\r\n      width: 0.7rem; /*高宽分别对应横竖滚动条的尺寸*/\r\n    }\r\n    &::-webkit-scrollbar-thumb {\r\n      /*滚动条里面小方块*/\r\n      border-radius: 0.3rem;\r\n      background: rgba(134, 208, 255, 0.3);\r\n    }\r\n    li.tips {\r\n      p {\r\n        margin: 0 auto;\r\n        text-align: center;\r\n        width: 100px;\r\n      }\r\n    }\r\n    li.active {\r\n      margin: 0 1rem 0.6rem 1rem;\r\n      color: rgba(255, 255, 255, 1);\r\n      font-size: 1.4rem;\r\n      height: 11rem;\r\n      min-height: 70px;\r\n      background: rgba(39, 74, 127, 1);\r\n      border: 1px solid rgba(51, 119, 233, 1);\r\n      border-radius: 0.3rem;\r\n      box-sizing: border-box;\r\n      .top-bar {\r\n        display: flex;\r\n        justify-content: space-between;\r\n        align-items: center;\r\n        .alarm-level {\r\n          display: inline-block;\r\n          width: 5rem;\r\n          min-width: 20px;\r\n          min-height: 35px;\r\n          line-height: 5rem;\r\n          font-size: 1.6rem;\r\n          text-align: center;\r\n          margin: 0.5rem;\r\n          border-radius: 0.4rem;\r\n        }\r\n        p {\r\n          margin: 0;\r\n          width: 80%;\r\n          min-width: 150px;\r\n          padding-right: 0.6rem;\r\n          font-size: 1.3rem;\r\n          line-height: 1.6rem;\r\n        }\r\n      }\r\n      .bot-bar {\r\n        text-align: right;\r\n        line-height: 2.6rem;\r\n        margin-top: 0.6rem;\r\n        span {\r\n          font-size: 1rem;\r\n          padding-top: 0.6rem;\r\n          float: left;\r\n          margin-left: 1rem;\r\n        }\r\n        button {\r\n          font-size: 1.2rem;\r\n          color: #fff;\r\n          background: rgba(54, 114, 195, 1);\r\n          border-radius: 0.3rem;\r\n          margin-right: 1rem;\r\n        }\r\n      }\r\n    }\r\n  }\r\n  .set-bar {\r\n    width: 100%;\r\n    padding: 0.6rem 2rem;\r\n    text-align: center;\r\n    font-size: 1.2rem;\r\n    bottom: 1rem;\r\n    button {\r\n      color: #fff;\r\n      width: 10rem;\r\n      background: rgba(54, 114, 195, 1);\r\n      margin-right: 1rem;\r\n      border-radius: 0.3rem;\r\n    }\r\n  }\r\n}\r\n</style>\r\n","\r\nimport {\r\n  defineComponent,\r\n  reactive,\r\n  ref,\r\n  toRefs,\r\n  onMounted,\r\n  watch,\r\n  computed,\r\n  nextTick,\r\n  PropType\r\n} from \"vue\";\r\nimport commonApi from \"@/api/common\";\r\nimport { ElMessage } from \"element-plus\";\r\n// 第三方引入\r\nimport dayjs from \"dayjs\";\r\nimport { getIntervalTime } from \"@/utils\";\r\nimport { timeFormateStr } from \"../constVariables\";\r\nimport { IGetAlarmItem } from \"../types/ws\";\r\n\r\nexport default defineComponent({\r\n  name: \"Handle\",\r\n  props: {\r\n    alarmType: {\r\n      required: false,\r\n      default: \"\"\r\n    },\r\n    /** ws 传入的待处理报警 */\r\n    wsAlarmItem: {\r\n      type: Object as PropType<IGetAlarmItem>\r\n    },\r\n    /** 单个处理和批量处理id数组 */\r\n    handleIds: {\r\n      required: false,\r\n      default: []\r\n    },\r\n    /** ws 传入的已处理报警的 id */\r\n    cancelId: {\r\n      type: String\r\n    }\r\n  },\r\n  emits: [\r\n    \"showAlarmDetail\",\r\n    \"showHandlePannel\",\r\n    \"getAlarmTotal\",\r\n    \"getAlarmUnHandle\"\r\n  ],\r\n  setup(props, { emit }) {\r\n    const params = reactive({\r\n      status: [\"\", \"\", \"\", \"active\"],\r\n      showAlarms: [] as any,\r\n      alarms: [],\r\n      styleArr: [\r\n        { background: \"#00A67B\" },\r\n        { background: \"#FF7352\" },\r\n        { background: \"#D9354E\" }\r\n      ],\r\n      colorStyleArr: [\r\n        { color: \"#52f3c8\" },\r\n        { color: \"#FF7352\" },\r\n        { color: \"#D9354E\" }\r\n      ],\r\n      flag: \"未处理\",\r\n      size: 10,\r\n      page: 1,\r\n      loading: false,\r\n      oldY: undefined,\r\n      disposeStatus: \"未处理\", // 处理状态\r\n      typeid: \"\", // 报警类型id\r\n      alarmLevel: \"\" as string | number,\r\n      alarmTypeArr: [], // 报警类型\r\n      alarmTypeName: \"全部类型\",\r\n      total: 0,\r\n      static: {\r\n        total: 0,\r\n        unHandle: 0\r\n      },\r\n      checkAll: false\r\n    });\r\n\r\n    const itemsRef = ref();\r\n    const alarmBarRef = ref();\r\n    const dataRef = toRefs(params);\r\n    // 获取所有报警数据\r\n    async function getAllAlarm() {\r\n      const param = {\r\n        act: \"6Z6wTPGkfMVF9eLTOXA1611040899987\",\r\n        curpage: 1,\r\n        // eslint-disable-next-line @typescript-eslint/camelcase\r\n        sys_showpagesize: 10,\r\n        ShowSceneNum: \"\",\r\n        SourceType: \"\",\r\n        alarmLevel: \"\",\r\n        sTime: \"\",\r\n        eTime: \"\",\r\n        alarmProgress: \"\"\r\n      };\r\n      const res = await commonApi.getCommonApi(param);\r\n      const { data } = res as any;\r\n      params.static.total = data.count;\r\n      emit(\"getAlarmTotal\", params.static.total);\r\n    }\r\n    // 获取所有未处理报警数据\r\n    async function getAllUnHandleAlarm() {\r\n      const param = {\r\n        act: \"6Z6wTPGkfMVF9eLTOXA1611040899987\",\r\n        curpage: 1,\r\n        // eslint-disable-next-line @typescript-eslint/camelcase\r\n        sys_showpagesize: 10,\r\n        ShowSceneNum: \"\",\r\n        SourceType: \"\",\r\n        alarmLevel: \"\",\r\n        sTime: \"\",\r\n        eTime: \"\",\r\n        alarmProgress: \"未处理\"\r\n      };\r\n      const res = await commonApi.getCommonApi(param);\r\n      const { data } = res as any;\r\n      params.static.unHandle = data.count;\r\n      emit(\"getAlarmUnHandle\", params.static.unHandle);\r\n    }\r\n    // 获取报警分页列表\r\n    async function getAlarmList() {\r\n      const param = {\r\n        act: \"6Z6wTPGkfMVF9eLTOXA1611040899987\",\r\n        curpage: params.page,\r\n        // eslint-disable-next-line @typescript-eslint/camelcase\r\n        sys_showpagesize: params.size,\r\n        ShowSceneNum: \"\",\r\n        SourceType: props.alarmType,\r\n        alarmLevel: params.alarmLevel,\r\n        sTime: \"\",\r\n        eTime: \"\",\r\n        alarmProgress: params.disposeStatus\r\n      };\r\n      const res = await commonApi.getCommonApi(param);\r\n      const { result, data } = res as any;\r\n\r\n      if (result.success) {\r\n        data.content.forEach((element: any) => {\r\n          // 开始时间\r\n          const createtime = dayjs(element.CreateTime).format(timeFormateStr);\r\n          element.CreateTime = createtime;\r\n          // 间隔时间\r\n          element.diffTime = getIntervalTime(createtime);\r\n          // 处理时间\r\n          const dealTime = dayjs(element.dealTime).format(timeFormateStr);\r\n          element.dealTime = dealTime;\r\n          // 默认不选中\r\n          element.isSelected = false;\r\n        });\r\n        params.showAlarms = [...params.showAlarms, ...data.content];\r\n        params.total = data.count;\r\n      }\r\n      params.loading = false;\r\n    }\r\n\r\n    // 报警等级\r\n    function alarmLevel(n: number) {\r\n      const arr = [\"普通\", \"严重\", \"危急\"];\r\n      return arr[n];\r\n    }\r\n\r\n    // 选择处理状态筛选\r\n    function handleStatus(status: string) {\r\n      params.checkAll = false;\r\n      params.loading = true;\r\n      if (params.disposeStatus == status) {\r\n        params.loading = false;\r\n        return;\r\n      }\r\n      params.page = 1;\r\n      params.flag = status;\r\n      params.disposeStatus = status;\r\n      params.showAlarms = [];\r\n      getAlarmList();\r\n    }\r\n    // 滚动按需加载\r\n    function lazyLoad(e: any) {\r\n      const itemLength = itemsRef.value && itemsRef.value.offsetHeight;\r\n      const ulLength = alarmBarRef.value.offsetHeight;\r\n      if (\r\n        e.target.scrollTop >\r\n        itemLength * params.page * params.size - ulLength\r\n      ) {\r\n        // if (params.showAlarms.length < params.page * params.size) {\r\n        //   return;\r\n        // }\r\n\r\n        params.page += 1;\r\n        params.loading = true;\r\n        getAlarmList();\r\n      }\r\n    }\r\n    // 选择报警等级筛选\r\n    function handleLevel(count: number) {\r\n      params.checkAll = false;\r\n      params.loading = true;\r\n      if (\r\n        params.alarmLevel === count ||\r\n        (params.alarmLevel === \"\" && count === 3)\r\n      ) {\r\n        params.loading = false;\r\n        return;\r\n      }\r\n      params.status = [\"\", \"\", \"\", \"\"];\r\n      params.status[count] = \"active\";\r\n      if (count === 3) {\r\n        params.alarmLevel = \"\";\r\n      } else {\r\n        params.alarmLevel = count;\r\n      }\r\n      params.page = 1;\r\n      params.showAlarms = [];\r\n      getAlarmList();\r\n    }\r\n\r\n    // 报警详情\r\n    function alarmDetail(row: any) {\r\n      emit(\"showAlarmDetail\", row);\r\n    }\r\n\r\n    //一键处理\r\n    function handleAll() {\r\n      const checkedAlarm = params.showAlarms.filter(\r\n        (item: any) => item.isSelected\r\n      );\r\n      if (checkedAlarm.length === 0) {\r\n        ElMessage.error(\"请选择要处理的报警信息！\");\r\n        return;\r\n      }\r\n      emit(\"showHandlePannel\", checkedAlarm);\r\n    }\r\n\r\n    // 打开处理弹框\r\n    function showHandlePannel(row: any) {\r\n      emit(\"showHandlePannel\", row);\r\n    }\r\n\r\n    // 选中报警\r\n    function checkAlarm(row: any) {\r\n      params.showAlarms.forEach((item: any) => {\r\n        if (item.Id === row.Id) {\r\n          item.isSelected = !row.isSelected;\r\n          return;\r\n        }\r\n      });\r\n    }\r\n\r\n    // 全选/反选\r\n    function handleCheckAllChange() {\r\n      params.showAlarms.forEach((item: any) => {\r\n        item.isSelected = params.checkAll;\r\n      });\r\n    }\r\n\r\n    watch(\r\n      () => props.wsAlarmItem,\r\n      newVal => {\r\n        console.log(\"newVal\", newVal);\r\n        if (newVal) {\r\n          const wsAlarm = {\r\n            isSelected: false,\r\n            status: false,\r\n            alarmLevel: newVal.AlarmLevel,\r\n            CreateTime: dayjs(new Date()).format(timeFormateStr),\r\n            diffTime: getIntervalTime(dayjs(new Date()).format(timeFormateStr)),\r\n            SourceType: newVal.AlarmSourceType,\r\n            alarmContent: newVal.AlarmContent,\r\n            SourceName: newVal.AlarmSourceName,\r\n            alarmProgress: \"未处理\"\r\n          };\r\n\r\n          params.showAlarms = [wsAlarm, ...params.showAlarms];\r\n          params.static.unHandle++;\r\n          emit(\"getAlarmUnHandle\", params.static.unHandle);\r\n          params.static.total++;\r\n          emit(\"getAlarmTotal\", params.static.total);\r\n        }\r\n      }\r\n    );\r\n    // 处理报警\r\n    watch(\r\n      () => props.handleIds,\r\n      newArr => {\r\n        params.showAlarms.slice().forEach((item: any, index: number) => {\r\n          newArr.forEach((id: string | number) => {\r\n            if (item.IDS == id) {\r\n              params.static.unHandle--;\r\n              emit(\"getAlarmUnHandle\", params.static.unHandle);\r\n              // 防止滚动懒加载失效\r\n              if (params.showAlarms.length < params.size) {\r\n                params.page = 1;\r\n                params.showAlarms = [];\r\n                getAlarmList();\r\n              }\r\n              params.showAlarms.splice(index, 1);\r\n              params.total--;\r\n            }\r\n          });\r\n        });\r\n      }\r\n    );\r\n    const checkedNum: any = computed(() => {\r\n      const num = params.showAlarms.filter((item: any) => item.isSelected);\r\n      return num.length;\r\n    });\r\n\r\n    onMounted(() => {\r\n      getAlarmList();\r\n      // 获取所有报警数据\r\n      getAllAlarm();\r\n      // 获取所有未处理报警数据\r\n      getAllUnHandleAlarm();\r\n    });\r\n\r\n    watch(\r\n      () => props.alarmType,\r\n      () => {\r\n        nextTick(() => {\r\n          params.page = 1;\r\n          params.showAlarms = [];\r\n          getAlarmList();\r\n        });\r\n      }\r\n    );\r\n    return {\r\n      ...dataRef,\r\n      itemsRef,\r\n      alarmBarRef,\r\n      alarmLevel,\r\n      handleStatus,\r\n      lazyLoad,\r\n      handleLevel,\r\n      alarmDetail,\r\n      handleAll,\r\n      showHandlePannel,\r\n      checkAlarm,\r\n      handleCheckAllChange,\r\n      checkedNum\r\n    };\r\n  }\r\n});\r\n","import { render } from \"./handle.vue?vue&type=template&id=144529ed&scoped=true\"\nimport script from \"./handle.vue?vue&type=script&lang=ts\"\nexport * from \"./handle.vue?vue&type=script&lang=ts\"\n\nimport \"./handle.vue?vue&type=style&index=0&id=144529ed&lang=scss&scoped=true\"\nscript.render = render\nscript.__scopeId = \"data-v-144529ed\"\n\nexport default script","<!--\r\n * @Description: \r\n * @Author: huxianc\r\n * @Date: 2021-01-26 15:53:38\r\n * @LastEditors: huxianc\r\n * @LastEditTime: 2021-01-26 17:01:23\r\n-->\r\n<template>\r\n  <div\r\n    v-show=\"personList.length\"\r\n    ref=\"listRef\"\r\n    class=\"person-list-container\"\r\n    :style=\"styleAttrs ? styleAttrs : {}\"\r\n    :class=\"{ hidden: hiddenRef }\"\r\n  >\r\n    <el-scrollbar style=\"max-height: 400px\">\r\n      <div\r\n        v-for=\"item in personList\"\r\n        :key=\"item.TagId\"\r\n        class=\"person-item\"\r\n        @click=\"handleClick(item)\"\r\n      >\r\n        {{ item.BindObjName }}\r\n      </div>\r\n    </el-scrollbar>\r\n  </div>\r\n</template>\r\n\r\n<script lang=\"ts\">\r\nimport {\r\n  defineComponent,\r\n  nextTick,\r\n  onMounted,\r\n  PropType,\r\n  ref,\r\n  shallowReactive,\r\n  shallowRef,\r\n  watch\r\n} from \"vue\";\r\nimport { getCorrectPx } from \"../utils\";\r\nimport { IPos, IStyleLeftTop } from \"../types\";\r\nimport { ITagListItem } from \"../types/cacheObj\";\r\n\r\nconst CLICKED = \"clicked\";\r\n\r\nexport default defineComponent({\r\n  props: {\r\n    // 右键菜单列表\r\n    personList: {\r\n      type: Array as PropType<ITagListItem[]>,\r\n      default: () => []\r\n    },\r\n    // 传过来的鼠标位置\r\n    mousePosition: {\r\n      type: Object as PropType<IStyleLeftTop>,\r\n      default: () => ({})\r\n    }\r\n  },\r\n  emits: [CLICKED],\r\n  setup(props, { emit }) {\r\n    const styleAttrs = shallowReactive<IPos>({ x: 0, y: 0 });\r\n    const hiddenRef = shallowRef<boolean>(true);\r\n\r\n    const listRef = ref();\r\n\r\n    function getPx() {\r\n      nextTick(() => {\r\n        const res = getCorrectPx(\r\n          listRef.value as HTMLElement,\r\n          props.mousePosition\r\n        );\r\n\r\n        const positions = {};\r\n        for (const key in res) {\r\n          positions[key] = res[key] + \"px\";\r\n        }\r\n\r\n        Object.assign(styleAttrs, positions);\r\n        hiddenRef.value = false;\r\n      });\r\n    }\r\n\r\n    watch(\r\n      () => props.mousePosition,\r\n      () => {\r\n        getPx();\r\n      }\r\n    );\r\n\r\n    onMounted(() => {\r\n      getPx();\r\n    });\r\n\r\n    function handleClick(item: any) {\r\n      emit(CLICKED, item);\r\n    }\r\n\r\n    return { styleAttrs, hiddenRef, listRef, handleClick };\r\n  }\r\n});\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n.person-list-container {\r\n  position: absolute;\r\n  padding: 10px 0;\r\n  background: #fff;\r\n  color: #333;\r\n  top: 0;\r\n  z-index: 99999;\r\n  border-radius: 4px;\r\n  box-shadow: 0 2px 12px 0 rgb(0 0 0 / 10%);\r\n  border: 1px solid #ebeef5;\r\n  &.hidden {\r\n    visibility: hidden;\r\n  }\r\n}\r\n.person-item {\r\n  padding: 0 20px;\r\n  font-size: 14px;\r\n  color: #606266;\r\n  line-height: 36px;\r\n  outline: none;\r\n  cursor: pointer;\r\n  white-space: nowrap;\r\n  &:hover {\r\n    background: #ecf5ff;\r\n    color: #66b1ff;\r\n  }\r\n}\r\n</style>\r\n","\r\nimport {\r\n  defineComponent,\r\n  nextTick,\r\n  onMounted,\r\n  PropType,\r\n  ref,\r\n  shallowReactive,\r\n  shallowRef,\r\n  watch\r\n} from \"vue\";\r\nimport { getCorrectPx } from \"../utils\";\r\nimport { IPos, IStyleLeftTop } from \"../types\";\r\nimport { ITagListItem } from \"../types/cacheObj\";\r\n\r\nconst CLICKED = \"clicked\";\r\n\r\nexport default defineComponent({\r\n  props: {\r\n    // 右键菜单列表\r\n    personList: {\r\n      type: Array as PropType<ITagListItem[]>,\r\n      default: () => []\r\n    },\r\n    // 传过来的鼠标位置\r\n    mousePosition: {\r\n      type: Object as PropType<IStyleLeftTop>,\r\n      default: () => ({})\r\n    }\r\n  },\r\n  emits: [CLICKED],\r\n  setup(props, { emit }) {\r\n    const styleAttrs = shallowReactive<IPos>({ x: 0, y: 0 });\r\n    const hiddenRef = shallowRef<boolean>(true);\r\n\r\n    const listRef = ref();\r\n\r\n    function getPx() {\r\n      nextTick(() => {\r\n        const res = getCorrectPx(\r\n          listRef.value as HTMLElement,\r\n          props.mousePosition\r\n        );\r\n\r\n        const positions = {};\r\n        for (const key in res) {\r\n          positions[key] = res[key] + \"px\";\r\n        }\r\n\r\n        Object.assign(styleAttrs, positions);\r\n        hiddenRef.value = false;\r\n      });\r\n    }\r\n\r\n    watch(\r\n      () => props.mousePosition,\r\n      () => {\r\n        getPx();\r\n      }\r\n    );\r\n\r\n    onMounted(() => {\r\n      getPx();\r\n    });\r\n\r\n    function handleClick(item: any) {\r\n      emit(CLICKED, item);\r\n    }\r\n\r\n    return { styleAttrs, hiddenRef, listRef, handleClick };\r\n  }\r\n});\r\n","import { render } from \"./layerPersonList.vue?vue&type=template&id=78a92eb4&scoped=true\"\nimport script from \"./layerPersonList.vue?vue&type=script&lang=ts\"\nexport * from \"./layerPersonList.vue?vue&type=script&lang=ts\"\n\nimport \"./layerPersonList.vue?vue&type=style&index=0&id=78a92eb4&lang=scss&scoped=true\"\nscript.render = render\nscript.__scopeId = \"data-v-78a92eb4\"\n\nexport default script","<!--\r\n * @Description: \r\n * @Author: huxianc\r\n * @Date: 2021-01-27 13:42:57\r\n * @LastEditors: huxianc\r\n * @LastEditTime: 2021-02-18 15:15:30\r\n-->\r\n<template>\r\n  <div class=\"map-content\">\r\n    <div\r\n      v-for=\"mapItem in mapList\"\r\n      :key=\"mapItem.snum\"\r\n      class=\"map-item\"\r\n      :class=\"{ active: mapItem.snum === mapId }\"\r\n      @click=\"changeMap(mapItem.snum)\"\r\n    >\r\n      <img :src=\"imgUrl + mapItem.surl\" :alt=\"mapItem.sname\" />\r\n      <span class=\"o-h\">\r\n        {{ mapItem.sname }}\r\n      </span>\r\n      <div class=\"num\">{{ mapItem.pnum || 0 }}</div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script lang=\"ts\">\r\nimport { imgUrl } from \"@/utils/urls\";\r\nimport { defineComponent, PropType } from \"vue\";\r\nimport { IMapArrItem } from \"../types\";\r\n\r\nconst CHANGE_MAP = \"changeMap\";\r\n\r\nexport default defineComponent({\r\n  name: \"MapChoosen\",\r\n  props: {\r\n    mapId: {\r\n      type: String,\r\n      required: true\r\n    },\r\n    mapList: {\r\n      type: Object as PropType<IMapArrItem[]>,\r\n      default: () => []\r\n    }\r\n  },\r\n  emits: [CHANGE_MAP],\r\n  setup(props, { emit }) {\r\n    function changeMap(mapId: string) {\r\n      if (mapId === props.mapId) return;\r\n      emit(CHANGE_MAP, mapId);\r\n    }\r\n    return {\r\n      imgUrl,\r\n      changeMap\r\n    };\r\n  }\r\n});\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n.map-content {\r\n  display: grid;\r\n  grid-template-columns: repeat(4, calc((100% - 45px) / 4));\r\n  grid-row-gap: 15px;\r\n  grid-column-gap: 15px;\r\n  padding: 15px;\r\n  max-height: 600px;\r\n  overflow-y: scroll;\r\n}\r\n.map-item {\r\n  position: relative;\r\n  display: flex;\r\n  flex-direction: column;\r\n  padding-bottom: 16px;\r\n  height: 133px;\r\n  background: rgba(0, 0, 0, 0.1);\r\n  border-radius: 5px;\r\n  object-fit: fill;\r\n  justify-content: center;\r\n  align-items: center;\r\n  overflow: hidden;\r\n  transition: color 0.3s ease-in-out;\r\n  cursor: pointer;\r\n  img {\r\n    margin: 10px;\r\n    width: calc(100% - 20px);\r\n  }\r\n  span {\r\n    display: inline-block;\r\n    font-size: 14px;\r\n  }\r\n  .num {\r\n    position: absolute;\r\n    top: 5px;\r\n    right: 5px;\r\n    background: rgba(0, 0, 0, 0.3);\r\n    width: 40px;\r\n    height: 40px;\r\n    border-radius: 50%;\r\n    display: flex;\r\n    justify-content: center;\r\n    align-items: center;\r\n    transform: rotate(45deg);\r\n  }\r\n  &.active,\r\n  &:hover {\r\n    background: url(\"../../../../assets/dashboard/important_monitor.png\") repeat\r\n      center center/100% 100%;\r\n    color: #3ed2ff;\r\n    .num {\r\n      background: rgba(255, 255, 255, 0.3);\r\n    }\r\n  }\r\n}\r\n</style>\r\n","\r\nimport { imgUrl } from \"@/utils/urls\";\r\nimport { defineComponent, PropType } from \"vue\";\r\nimport { IMapArrItem } from \"../types\";\r\n\r\nconst CHANGE_MAP = \"changeMap\";\r\n\r\nexport default defineComponent({\r\n  name: \"MapChoosen\",\r\n  props: {\r\n    mapId: {\r\n      type: String,\r\n      required: true\r\n    },\r\n    mapList: {\r\n      type: Object as PropType<IMapArrItem[]>,\r\n      default: () => []\r\n    }\r\n  },\r\n  emits: [CHANGE_MAP],\r\n  setup(props, { emit }) {\r\n    function changeMap(mapId: string) {\r\n      if (mapId === props.mapId) return;\r\n      emit(CHANGE_MAP, mapId);\r\n    }\r\n    return {\r\n      imgUrl,\r\n      changeMap\r\n    };\r\n  }\r\n});\r\n","import { render } from \"./mapChoosen.vue?vue&type=template&id=3f9cbe41&scoped=true\"\nimport script from \"./mapChoosen.vue?vue&type=script&lang=ts\"\nexport * from \"./mapChoosen.vue?vue&type=script&lang=ts\"\n\nimport \"./mapChoosen.vue?vue&type=style&index=0&id=3f9cbe41&lang=scss&scoped=true\"\nscript.render = render\nscript.__scopeId = \"data-v-3f9cbe41\"\n\nexport default script","<!--\r\n * @Description: \r\n * @Author: liufuqiang\r\n * @Date: 2021-01-28 10:33:15\r\n * @LastEditors: liufuqiang\r\n * @LastEditTime: 2021-01-28 11:20:16\r\n-->\r\n<template>\r\n  <ul class=\"fence-box\">\r\n    <li\r\n      v-for=\"(item, index) in list\"\r\n      :key=\"index\"\r\n      :class=\"{ active: index === 0 }\"\r\n      @click=\"handleClick(item, index)\"\r\n    >\r\n      {{ item.label }}\r\n    </li>\r\n  </ul>\r\n</template>\r\n\r\n<script lang=\"ts\">\r\ninterface ILabel {\r\n  label: string;\r\n}\r\n\r\nconst emitObj = {\r\n  1: \"revoke\",\r\n  2: \"redraw\",\r\n  3: \"cancel\",\r\n  4: \"finish\"\r\n};\r\n\r\nimport { defineComponent } from \"vue\";\r\nexport default defineComponent({\r\n  name: \"AlarmContent\",\r\n  emits: Object.keys(emitObj).map(key => emitObj[key]),\r\n  setup(props, { emit }) {\r\n    const list: ILabel[] = [\r\n      {\r\n        label: \"绘制\"\r\n      },\r\n      {\r\n        label: \"撤销\"\r\n      },\r\n      {\r\n        label: \"重新绘制\"\r\n      },\r\n      {\r\n        label: \"取消\"\r\n      },\r\n      {\r\n        label: \"完成\"\r\n      }\r\n    ];\r\n    function handleClick(item: ILabel, index: number) {\r\n      emit(emitObj[index]);\r\n    }\r\n    return {\r\n      list,\r\n      handleClick\r\n    };\r\n  }\r\n});\r\n</script>\r\n","\r\ninterface ILabel {\r\n  label: string;\r\n}\r\n\r\nconst emitObj = {\r\n  1: \"revoke\",\r\n  2: \"redraw\",\r\n  3: \"cancel\",\r\n  4: \"finish\"\r\n};\r\n\r\nimport { defineComponent } from \"vue\";\r\nexport default defineComponent({\r\n  name: \"AlarmContent\",\r\n  emits: Object.keys(emitObj).map(key => emitObj[key]),\r\n  setup(props, { emit }) {\r\n    const list: ILabel[] = [\r\n      {\r\n        label: \"绘制\"\r\n      },\r\n      {\r\n        label: \"撤销\"\r\n      },\r\n      {\r\n        label: \"重新绘制\"\r\n      },\r\n      {\r\n        label: \"取消\"\r\n      },\r\n      {\r\n        label: \"完成\"\r\n      }\r\n    ];\r\n    function handleClick(item: ILabel, index: number) {\r\n      emit(emitObj[index]);\r\n    }\r\n    return {\r\n      list,\r\n      handleClick\r\n    };\r\n  }\r\n});\r\n","import { render } from \"./alarmContent.vue?vue&type=template&id=a60d22ee\"\nimport script from \"./alarmContent.vue?vue&type=script&lang=ts\"\nexport * from \"./alarmContent.vue?vue&type=script&lang=ts\"\nscript.render = render\n\nexport default script","<!--\r\n * @Description: \r\n * @Author: huxianc\r\n * @Date: 2021-02-05 13:53:26\r\n * @LastEditors: liufuqiang\r\n * @LastEditTime: 2021-02-20 13:52:58\r\n-->\r\n<template>\r\n  <div v-if=\"modelValue\" v-drag-dialog=\"`form-header,custom-form`\">\r\n    <div class=\"custom-form\" :style=\"styles\">\r\n      <div class=\"form-header\">\r\n        <div class=\"form-title\">{{ title }}</div>\r\n        <i class=\"closebtx el-icon-close\" @click=\"handleClickHeaderClose\" />\r\n      </div>\r\n      <div class=\"form-body\">\r\n        <slot />\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script lang=\"ts\">\r\nimport { computed, defineComponent } from \"vue\";\r\nimport dragDialog from \"../directive/drag-dialog\";\r\n\r\nconst CLOSE = \"close\";\r\nexport default defineComponent({\r\n  name: \"DragableContainer\",\r\n  directives: { \"drag-dialog\": dragDialog },\r\n  props: {\r\n    title: {\r\n      type: String,\r\n      default: \"可拖拽表单\"\r\n    },\r\n    modelValue: {\r\n      type: Boolean,\r\n      default: false\r\n    },\r\n    width: {\r\n      type: Number\r\n    }\r\n  },\r\n  emits: [CLOSE],\r\n  setup(props, { emit }) {\r\n    function handleClickHeaderClose() {\r\n      emit(CLOSE);\r\n    }\r\n\r\n    const styles = computed(() => {\r\n      if (props.width) {\r\n        if (props.title === \"历史视频\" || props.title === \"选择地图\") {\r\n          return { width: props.width + \"px\", left: \"23.5%\" };\r\n        } else {\r\n          return { width: props.width + \"px\", \"z-index\": 9001 };\r\n        }\r\n      } else {\r\n        if (props.title === \"历史视频\" || props.title === \"选择地图\") {\r\n          return { left: \"23.5%\" };\r\n        } else {\r\n          return { \"z-index\": 9001 };\r\n        }\r\n      }\r\n    });\r\n\r\n    return {\r\n      handleClickHeaderClose,\r\n      styles\r\n    };\r\n  }\r\n});\r\n</script>\r\n\r\n<style scoped>\r\n.custom-form {\r\n  position: absolute;\r\n  left: 15%;\r\n  top: 10%;\r\n}\r\n</style>\r\n","\r\nimport { computed, defineComponent } from \"vue\";\r\nimport dragDialog from \"../directive/drag-dialog\";\r\n\r\nconst CLOSE = \"close\";\r\nexport default defineComponent({\r\n  name: \"DragableContainer\",\r\n  directives: { \"drag-dialog\": dragDialog },\r\n  props: {\r\n    title: {\r\n      type: String,\r\n      default: \"可拖拽表单\"\r\n    },\r\n    modelValue: {\r\n      type: Boolean,\r\n      default: false\r\n    },\r\n    width: {\r\n      type: Number\r\n    }\r\n  },\r\n  emits: [CLOSE],\r\n  setup(props, { emit }) {\r\n    function handleClickHeaderClose() {\r\n      emit(CLOSE);\r\n    }\r\n\r\n    const styles = computed(() => {\r\n      if (props.width) {\r\n        if (props.title === \"历史视频\" || props.title === \"选择地图\") {\r\n          return { width: props.width + \"px\", left: \"23.5%\" };\r\n        } else {\r\n          return { width: props.width + \"px\", \"z-index\": 9001 };\r\n        }\r\n      } else {\r\n        if (props.title === \"历史视频\" || props.title === \"选择地图\") {\r\n          return { left: \"23.5%\" };\r\n        } else {\r\n          return { \"z-index\": 9001 };\r\n        }\r\n      }\r\n    });\r\n\r\n    return {\r\n      handleClickHeaderClose,\r\n      styles\r\n    };\r\n  }\r\n});\r\n","import { render } from \"./dragableContainer.vue?vue&type=template&id=419a4d42&scoped=true\"\nimport script from \"./dragableContainer.vue?vue&type=script&lang=ts\"\nexport * from \"./dragableContainer.vue?vue&type=script&lang=ts\"\n\nimport \"./dragableContainer.vue?vue&type=style&index=0&id=419a4d42&scoped=true&lang=css\"\nscript.render = render\nscript.__scopeId = \"data-v-419a4d42\"\n\nexport default script","<!--\r\n * @Description: \r\n * @Author: huxianc\r\n * @Date: 2021-02-20 14:09:14\r\n * @LastEditors: huxianc\r\n * @LastEditTime: 2021-02-22 10:29:12\r\n-->\r\n\r\n<template>\r\n  <div class=\"playback-control\">\r\n    <div class=\"playback-container\">\r\n      <span>{{ sTime }}</span>\r\n      <div class=\"process-container\" @click=\"handleClick\" ref=\"processRef\">\r\n        <div\r\n          class=\"process-bar\"\r\n          :style=\"{ width: `${(currentIndex / len) * 100}%` }\"\r\n        ></div>\r\n        <div\r\n          class=\"process-time\"\r\n          :style=\"{ left: `${(currentIndex / len) * 100}%` }\"\r\n        >\r\n          {{ currentTime }}\r\n        </div>\r\n      </div>\r\n      <span>{{ eTime }}</span>\r\n      <span class=\"video-icon\" @click=\"togglePlay\">\r\n        <i :class=\"[`el-icon-video-${isPlay ? 'pause' : 'play'}`]\"></i>\r\n      </span>\r\n      <el-select\r\n        v-model=\"playRateRef\"\r\n        @change=\"changeRate\"\r\n        size=\"mini\"\r\n        style=\"width: 70px; margin: 0 0.5rem\"\r\n      >\r\n        <el-option\r\n          v-for=\"item in options\"\r\n          :key=\"item.value\"\r\n          :label=\"item.label\"\r\n          :value=\"item.value\"\r\n        >\r\n        </el-option>\r\n      </el-select>\r\n\r\n      <span class=\"end\" @click=\"handleClose\">结束回放</span>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script lang=\"ts\">\r\nimport { defineComponent, ref, shallowRef } from \"vue\";\r\nconst CHANGE_RATE = \"changeRate\";\r\nconst TOGGLE_PLAY = \"togglePlay\";\r\nconst CLOSE = \"close\";\r\n/** 用户点击进度条位置 */\r\nconst CHANGE_PROCESS = \"changeProcess\";\r\nexport default defineComponent({\r\n  props: {\r\n    sTime: {\r\n      type: String,\r\n      default: \"12\"\r\n    },\r\n    eTime: {\r\n      type: String,\r\n      default: \"13\"\r\n    },\r\n    currentTime: {\r\n      type: String,\r\n      default: \"14\"\r\n    },\r\n    currentIndex: {\r\n      type: Number,\r\n      default: 0\r\n    },\r\n    len: {\r\n      type: Number,\r\n      default: 10\r\n    },\r\n    /** 是否播放 */\r\n\r\n    isPlay: {\r\n      type: Boolean,\r\n      default: true\r\n    }\r\n  },\r\n  emits: [CHANGE_RATE, TOGGLE_PLAY, CLOSE, CHANGE_PROCESS],\r\n  setup(props, { emit }) {\r\n    const playRateRef = shallowRef<string>(\"1.0\");\r\n\r\n    const options = ref([\r\n      {\r\n        label: \"0.5\",\r\n        value: \"0.5\"\r\n      },\r\n      {\r\n        label: \"1.0\",\r\n        value: \"1.0\"\r\n      },\r\n      {\r\n        label: \"1.5\",\r\n        value: \"1.5\"\r\n      },\r\n      {\r\n        label: \"2.0\",\r\n        value: \"2.0\"\r\n      },\r\n      {\r\n        label: \"3.0\",\r\n        value: \"3.0\"\r\n      },\r\n      {\r\n        label: \"4.0\",\r\n        value: \"4.0\"\r\n      },\r\n      {\r\n        label: \"5.0\",\r\n        value: \"5.0\"\r\n      }\r\n    ]);\r\n\r\n    const processRef = ref();\r\n    function changeRate(e: string) {\r\n      emit(CHANGE_RATE, e);\r\n    }\r\n\r\n    function togglePlay() {\r\n      emit(TOGGLE_PLAY, !props.isPlay);\r\n    }\r\n\r\n    function handleClose() {\r\n      emit(CLOSE);\r\n    }\r\n\r\n    function handleClick(e: MouseEvent) {\r\n      let { offsetX } = e;\r\n      // 最小值判断\r\n      if (offsetX < 0) {\r\n        offsetX = 0;\r\n      }\r\n      if (offsetX === 0) {\r\n        emit(CHANGE_PROCESS, 0);\r\n      }\r\n      // 最大值判断\r\n      const maxWidth = processRef.value.offsetWidth;\r\n      if (offsetX > maxWidth) {\r\n        offsetX = maxWidth;\r\n      }\r\n      if (offsetX === maxWidth) {\r\n        emit(CHANGE_PROCESS, props.len - 1);\r\n      }\r\n\r\n      // 中间值\r\n      if (offsetX > 0 && offsetX < maxWidth) {\r\n        const rate = offsetX / maxWidth;\r\n        const index = Math.floor(props.len * rate);\r\n        emit(CHANGE_PROCESS, index);\r\n      }\r\n    }\r\n\r\n    return {\r\n      processRef,\r\n      playRateRef,\r\n      options,\r\n      changeRate,\r\n      togglePlay,\r\n      handleClose,\r\n      handleClick\r\n    };\r\n  }\r\n});\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n.playback-control {\r\n  position: absolute;\r\n  left: 50%;\r\n  bottom: 20%;\r\n  transform: translate(-50%, -50%);\r\n  width: 80rem;\r\n  height: 4rem;\r\n  font-size: 1.2rem;\r\n  background: #1b3f84;\r\n}\r\n.playback-container {\r\n  width: 100%;\r\n  height: 100%;\r\n  position: relative;\r\n  padding: 8px;\r\n  display: flex;\r\n  align-items: center;\r\n}\r\n.process-container {\r\n  position: relative;\r\n  margin: 0 0.5rem;\r\n  flex: 1;\r\n  height: 100%;\r\n  display: flex;\r\n  background: rgba(71, 163, 226, 0.35);\r\n  cursor: pointer;\r\n  // overflow: auto;\r\n}\r\n.process-bar {\r\n  background: rgba(134, 208, 255, 0.35);\r\n}\r\n.process-time {\r\n  position: absolute;\r\n  top: -32px;\r\n  width: fit-content;\r\n  height: 16px;\r\n  padding: 4px 8px;\r\n  display: flex;\r\n  align-items: center;\r\n  background: #4b93ff;\r\n  box-sizing: content-box;\r\n}\r\nspan + span {\r\n  margin-left: 0.5rem;\r\n}\r\n.video-icon {\r\n  color: #3ed2ff;\r\n  font-size: 2rem;\r\n  cursor: pointer;\r\n}\r\n.end {\r\n  display: inline-flex;\r\n  justify-content: center;\r\n  align-items: center;\r\n  padding: 5px;\r\n  height: 24px;\r\n  border: 1px solid #3672c3;\r\n  border-radius: 3px;\r\n  cursor: pointer;\r\n  &:hover {\r\n    box-shadow: 0 0 2px 2px #3ed2ff;\r\n  }\r\n}\r\n</style>\r\n","\r\nimport { defineComponent, ref, shallowRef } from \"vue\";\r\nconst CHANGE_RATE = \"changeRate\";\r\nconst TOGGLE_PLAY = \"togglePlay\";\r\nconst CLOSE = \"close\";\r\n/** 用户点击进度条位置 */\r\nconst CHANGE_PROCESS = \"changeProcess\";\r\nexport default defineComponent({\r\n  props: {\r\n    sTime: {\r\n      type: String,\r\n      default: \"12\"\r\n    },\r\n    eTime: {\r\n      type: String,\r\n      default: \"13\"\r\n    },\r\n    currentTime: {\r\n      type: String,\r\n      default: \"14\"\r\n    },\r\n    currentIndex: {\r\n      type: Number,\r\n      default: 0\r\n    },\r\n    len: {\r\n      type: Number,\r\n      default: 10\r\n    },\r\n    /** 是否播放 */\r\n\r\n    isPlay: {\r\n      type: Boolean,\r\n      default: true\r\n    }\r\n  },\r\n  emits: [CHANGE_RATE, TOGGLE_PLAY, CLOSE, CHANGE_PROCESS],\r\n  setup(props, { emit }) {\r\n    const playRateRef = shallowRef<string>(\"1.0\");\r\n\r\n    const options = ref([\r\n      {\r\n        label: \"0.5\",\r\n        value: \"0.5\"\r\n      },\r\n      {\r\n        label: \"1.0\",\r\n        value: \"1.0\"\r\n      },\r\n      {\r\n        label: \"1.5\",\r\n        value: \"1.5\"\r\n      },\r\n      {\r\n        label: \"2.0\",\r\n        value: \"2.0\"\r\n      },\r\n      {\r\n        label: \"3.0\",\r\n        value: \"3.0\"\r\n      },\r\n      {\r\n        label: \"4.0\",\r\n        value: \"4.0\"\r\n      },\r\n      {\r\n        label: \"5.0\",\r\n        value: \"5.0\"\r\n      }\r\n    ]);\r\n\r\n    const processRef = ref();\r\n    function changeRate(e: string) {\r\n      emit(CHANGE_RATE, e);\r\n    }\r\n\r\n    function togglePlay() {\r\n      emit(TOGGLE_PLAY, !props.isPlay);\r\n    }\r\n\r\n    function handleClose() {\r\n      emit(CLOSE);\r\n    }\r\n\r\n    function handleClick(e: MouseEvent) {\r\n      let { offsetX } = e;\r\n      // 最小值判断\r\n      if (offsetX < 0) {\r\n        offsetX = 0;\r\n      }\r\n      if (offsetX === 0) {\r\n        emit(CHANGE_PROCESS, 0);\r\n      }\r\n      // 最大值判断\r\n      const maxWidth = processRef.value.offsetWidth;\r\n      if (offsetX > maxWidth) {\r\n        offsetX = maxWidth;\r\n      }\r\n      if (offsetX === maxWidth) {\r\n        emit(CHANGE_PROCESS, props.len - 1);\r\n      }\r\n\r\n      // 中间值\r\n      if (offsetX > 0 && offsetX < maxWidth) {\r\n        const rate = offsetX / maxWidth;\r\n        const index = Math.floor(props.len * rate);\r\n        emit(CHANGE_PROCESS, index);\r\n      }\r\n    }\r\n\r\n    return {\r\n      processRef,\r\n      playRateRef,\r\n      options,\r\n      changeRate,\r\n      togglePlay,\r\n      handleClose,\r\n      handleClick\r\n    };\r\n  }\r\n});\r\n","import { render } from \"./playbackControl.vue?vue&type=template&id=7e848c89&scoped=true\"\nimport script from \"./playbackControl.vue?vue&type=script&lang=ts\"\nexport * from \"./playbackControl.vue?vue&type=script&lang=ts\"\n\nimport \"./playbackControl.vue?vue&type=style&index=0&id=7e848c89&lang=scss&scoped=true\"\nscript.render = render\nscript.__scopeId = \"data-v-7e848c89\"\n\nexport default script","/*\r\n * @Description:\r\n * @Author: huxianc\r\n * @Date: 2021-02-10 09:48:55\r\n * @LastEditors: huxianc\r\n * @LastEditTime: 2021-02-19 14:17:34\r\n */\r\nimport { useRouter } from \"vue-router\";\r\nimport { getLoadSNum, logout } from \"@/utils/auth\";\r\nimport { getWsUrl } from \"../utils\";\r\nimport { computed, reactive, ref, shallowReactive, shallowRef } from \"vue\";\r\nimport {\r\n  IActiveTarget,\r\n  IAreaItem,\r\n  ICanvasBasicState,\r\n  ICanvasScale,\r\n  IDetailsForm,\r\n  IDrawFenceInfo,\r\n  IListData,\r\n  IMapArrItem,\r\n  IMapData,\r\n  IPersonArrItem,\r\n  IShapeGroup,\r\n  IStyleLeftTop,\r\n  TLayerItem,\r\n  TVectorgraph\r\n} from \"../types\";\r\nimport { ElMessage } from \"element-plus\";\r\nimport { IAlarmInfo, IAlarmListInfo, TWarningListWidth } from \"../types/alarm\";\r\nimport {\r\n  ALL_MENU,\r\n  Hms,\r\n  NAV_INFO,\r\n  TYPES,\r\n  warningListWidth,\r\n  YMD\r\n} from \"../constVariables\";\r\nimport {\r\n  IFenceInfo,\r\n  IFenceListInfo,\r\n  IRuleItemDetail,\r\n  IRuleItemDetailRule,\r\n  IRuleListInfo\r\n} from \"../types/fence\";\r\nimport { checkPositiveInteger, commonRuleItem, customFuncRule } from \"@/utils\";\r\nimport dayjs from \"dayjs\";\r\nimport Konva from \"konva\";\r\nimport {\r\n  ICacheBubble,\r\n  ICacheImage,\r\n  ICachePerson,\r\n  ITagListItem\r\n} from \"../types/cacheObj\";\r\nimport { ISelectOption } from \"@/types\";\r\nimport { Circle } from \"konva/types/shapes/Circle\";\r\n\r\nexport default function initData() {\r\n  const router = useRouter();\r\n  const logOut = () => logout(router);\r\n  const wsUrl = getWsUrl();\r\n  const mapObj = reactive<IMapData>({}); // 后端传过来的地图 obj\r\n  const mapListRef = ref<IMapArrItem[]>([]); // 后端传过来的地图 arr\r\n  const mapIdRef = shallowRef<string>(getLoadSNum() || \"\");\r\n  if (!mapIdRef.value) {\r\n    ElMessage.info(\"请重新登录\");\r\n    logOut();\r\n  }\r\n  const scaleBoundary: ICanvasScale = {\r\n    minScale: 0,\r\n    maxScale: 2\r\n  };\r\n  const state = reactive<ICanvasBasicState>({\r\n    scale: 0,\r\n    sx: 0,\r\n    sy: 0\r\n  });\r\n  const status = shallowReactive({\r\n    isPlayBack: false, // 是否在轨迹回放\r\n    isFollowing: false, // 是否在实时跟踪\r\n    draggable: false, // 是否能拖拽\r\n    isDrawFence: false // 是否在绘制电子围栏\r\n  });\r\n  const showMenu = computed(() => {\r\n    return !status.isDrawFence && !status.isFollowing && !status.isPlayBack;\r\n  });\r\n  const mapNameRef = computed(() => mapObj[mapIdRef.value]?.sname || \"\");\r\n  const warningWidth = shallowRef<TWarningListWidth>(warningListWidth);\r\n  const contextmenuTypeRef = shallowRef<string>(TYPES.basestation); // 右键查看的类型 TYPES\r\n  const contxtmenuPosition = shallowReactive<IStyleLeftTop>({\r\n    left: 0,\r\n    top: 0\r\n  }); // 右键 位置\r\n  const contextmenuList = computed(() => ALL_MENU[contextmenuTypeRef.value]);\r\n  const detailsForm = reactive<IDetailsForm>({\r\n    show: false,\r\n    formTitle: \"\",\r\n    formData: null, // 需要传给子组件的form数据\r\n    x: 0, // 新增基站的x\r\n    y: 0\r\n  });\r\n  const visibleObj = shallowReactive({\r\n    nav: true, // 底部导航\r\n    waterAlarmPanel: false, // 落水报警面板\r\n    contextmenu: false, // 右键菜单列表\r\n    detailsForm: false, // 详情form\r\n    monitorListFlag: false, // 实时监控列表 lfq\r\n    historyMonitorListFlag: false, // 历史回放列表 lfq\r\n    area: true, // 是否显示电子围栏\r\n    layerPerson: false, // layer 对应的人员\r\n    map: false, // 地图选择\r\n    controlPannel: true // 左侧显示\r\n  });\r\n  const monitorListInfo = reactive({\r\n    // 监控摄像头相关 lfq\r\n    monitorInner: \"monitor-inner-pannel\", // 实时监控动态class控制样式\r\n    monitorHistoryInner: \"monitor-inner-pannel\", // 历史监控动态class控制样式\r\n    newMonitorList: [] as any[], //调取的实时监控列表 lfq\r\n    newHistoryMonitorList: [] as any[], // 调取的历史监控列表 lfq\r\n    cameraCount: 4, // 支持同时播放摄像头数量 lfq\r\n    liveCameraCount: 1, // 实时跟踪单次调用摄像头数量 lfq\r\n    historyCameraCount: 1, // 轨迹回放单次调用摄像头数量 lfq\r\n    livePlayCount: 1, // 实时调用摄像头数量 lfq\r\n    historyPlayCount: 1, // 历史回放调用摄像头数量 lfq\r\n    monitorListFlag: false, //实时视频 lfq\r\n    historyMonitorListFlag: false //历史视频 lfq\r\n  });\r\n\r\n  const drawerInfo = reactive({\r\n    showList: false, // 是否显示基站、视频、人员列表\r\n    drawerTitle: NAV_INFO[TYPES.basestation].title as string,\r\n    activeName: TYPES.basestation // 激活的组件\r\n  });\r\n  const fenceInfo = reactive<IFenceInfo>({\r\n    visible: false,\r\n    dialogType: 0, // 0 新增  1 编辑\r\n    form: {\r\n      name: \"\",\r\n      chosenCamera: []\r\n    },\r\n    allMapCamera: [], // 所有可供选择的当前地图的摄像头\r\n    rules: {\r\n      name: commonRuleItem(\"请输入电子围栏名称\")\r\n    }\r\n  });\r\n  const fenceListInfo = reactive<IFenceListInfo>({\r\n    tableVisible: false,\r\n    params: {\r\n      curpage: 1\r\n    },\r\n    loading: false,\r\n    allData: [],\r\n    tableData: [],\r\n    total: 0\r\n  });\r\n  const drawFenceInfo = reactive<IDrawFenceInfo>({\r\n    message: null, // 绘制的时候头部的提醒\r\n    points: [], // 绘制的坐标点\r\n    clonePoints: []\r\n  });\r\n  // 规则 table\r\n  const ruleListInfo = reactive<IRuleListInfo>({\r\n    visiable: false,\r\n    loading: false,\r\n    allData: [],\r\n    tableData: [],\r\n    total: 0,\r\n    curpage: 1\r\n  });\r\n  // 规则 详情\r\n  const ruleFormRef = ref();\r\n  const ruleItemDetail = reactive<IRuleItemDetail>({\r\n    visiable: false,\r\n    dialogType: 0, // 0 新增 1 编辑\r\n    form: {\r\n      name: \"\",\r\n      memo: \"\",\r\n      isLoop: false,\r\n      limitedTime: \"\",\r\n      startTime: \"\",\r\n      endTime: \"\",\r\n      permitType: \"\"\r\n    }\r\n  });\r\n  // 保证结束时间 > 开始时间\r\n  const checkEndTime = (rule: any, value: Date, callback: Function) => {\r\n    if (!ruleItemDetail.form.isLoop) {\r\n      callback();\r\n    } else {\r\n      const ymd = dayjs(new Date()).format(YMD); // 今天的年月日\r\n      const hms = dayjs(value).format(Hms); // value 的时分秒\r\n      const start = dayjs(ruleItemDetail.form.startTime).format(Hms); // 开始时间的时分秒\r\n      const startTime = new Date(`${ymd} ${start}`);\r\n      const endTime = new Date(`${ymd} ${hms}`);\r\n      if (startTime.getTime() > endTime.getTime()) {\r\n        return callback(new Error(\"结束时间不能小于开始时间\"));\r\n      } else {\r\n        callback();\r\n      }\r\n    }\r\n  };\r\n  const ruleItemDetailRule: IRuleItemDetailRule = {\r\n    name: commonRuleItem(\"请输入规则名称\"),\r\n    limitedTime: customFuncRule(checkPositiveInteger),\r\n    permitType: commonRuleItem(\"请选择规则类型\"),\r\n    startTime: commonRuleItem(\"请选择开始时间\"),\r\n    endTime: [commonRuleItem(\"请选择结束时间\"), customFuncRule(checkEndTime)]\r\n  };\r\n  // 带日期的选择器\r\n  const ruleDisabledDate = computed(() => {\r\n    return function(time: Date) {\r\n      if (ruleItemDetail.form.startTime) {\r\n        return (\r\n          time.getTime() < (ruleItemDetail.form.startTime as Date).getTime()\r\n        );\r\n      }\r\n      return false;\r\n    };\r\n  });\r\n  const alarmInfo = reactive<IAlarmInfo>({\r\n    visible: false,\r\n    dialogType: 0, // 0 新增  1 编辑\r\n    handleVisible: false, // 处理报警弹框\r\n    handleAlarmId: \"\", // 选中的处理报警id\r\n    handleAlarmIdArr: \"\", // 批量选中的处理报警id\r\n    handleExampleVisible: false,\r\n    form: {\r\n      CreateTime: \"\",\r\n      IDS: \"\",\r\n      Id: 0,\r\n      SceneName: \"\",\r\n      ShowSceneNum: \"\",\r\n      SourceDbOrDeviceIdS: \"\",\r\n      SourceName: \"\",\r\n      SourcePointNum: \"\",\r\n      SourceType: \"\",\r\n      alarmContent: \"\",\r\n      alarmLevel: 0,\r\n      alarmProgress: \"\",\r\n      dealAccount: \"\",\r\n      dealMemo: \"\",\r\n      dealTime: \"\",\r\n      handleContent: \"\", // 处理结果\r\n      handleType: \"\" // 处理类型\r\n    },\r\n    iconStyle: {\r\n      left: \"0\",\r\n      top: \"0\"\r\n    },\r\n    alarmTotal: 0, // 报警总数\r\n    alarmUnHandle: 0, // 未处理报警总数\r\n    rules: {\r\n      handleType: commonRuleItem(\"请选择处理类型\"),\r\n      handleContent: commonRuleItem(\"请填写处理结果\")\r\n    }\r\n  });\r\n  const alarmListInfo = reactive<IAlarmListInfo>({\r\n    tableVisible: false,\r\n    params: {\r\n      curpage: 1,\r\n      size: 10\r\n    },\r\n    loading: false,\r\n    allData: [],\r\n    tableData: [],\r\n    total: 0,\r\n    ShowSceneNum: \"\",\r\n    SourceType: \"\",\r\n    alarmLevel: \"\",\r\n    sTime: \"\",\r\n    eTime: \"\",\r\n    timeRange: \"\",\r\n    alarmProgress: \"\",\r\n    handleIds: [] // 处理的报警id数组\r\n  });\r\n  const allGroup: IShapeGroup = {\r\n    cameraGroup: new Konva.Group({ name: \"cameraGroup\" }),\r\n    basestationGroup: new Konva.Group({ name: \"basestationGroup\" }),\r\n    personGroup: new Konva.Group({ name: \"personGroup\" }),\r\n    fenceGroup: new Konva.Group({ name: \"fenceGroup\" }),\r\n    locateBubbleGroup: new Konva.Group({ name: \"locateBubbleGroup\" }),\r\n    alarmGroup: new Konva.Group({ name: \"alarmGroup\" })\r\n  };\r\n  const activeTarget = reactive<IActiveTarget>({\r\n    attrs: { x: 0, y: 0 } // 存放没更新之前的变量\r\n  });\r\n  const basestation: IListData<TVectorgraph> = {\r\n    all: [],\r\n    currentMap: []\r\n  };\r\n  const bubble: IListData<TVectorgraph> = {\r\n    all: [],\r\n    currentMap: []\r\n  };\r\n  const camera: IListData<TLayerItem> = {\r\n    all: [],\r\n    currentMap: []\r\n  };\r\n  const area: IListData<IAreaItem> = {\r\n    all: [],\r\n    currentMap: []\r\n  };\r\n  const person = reactive<IListData<IPersonArrItem>>({\r\n    all: [],\r\n    currentMap: []\r\n  });\r\n  const cacheAlarmObj: { [key: string]: Circle } = {};\r\n  const cacheBasestationObj: ICacheImage = {};\r\n  const cacheCameraObj: ICacheImage = {};\r\n  const layerPerson = ref<ITagListItem[]>([]);\r\n  const layerPosition = shallowReactive<IStyleLeftTop>({\r\n    left: 0,\r\n    top: 0\r\n  });\r\n  const cacheBubbleObj: ICacheBubble = {};\r\n  const cacheAreaObj: ICachePerson = {};\r\n  const cachePersonObj: ICachePerson = {};\r\n  const transferProps = {\r\n    label: \"dname\",\r\n    key: \"dids\"\r\n  };\r\n  const allLayer = ref<TLayerItem[]>([]);\r\n  const controlButtonList = reactive([\r\n    {\r\n      label: \"基站\",\r\n      show: true,\r\n      code: \"basestation\"\r\n    },\r\n    {\r\n      label: \"摄像头\",\r\n      show: true,\r\n      code: \"camera\"\r\n    },\r\n    {\r\n      label: \"地图\",\r\n      show: visibleObj.map,\r\n      code: \"map\"\r\n    },\r\n    {\r\n      label: \"导航栏\",\r\n      show: visibleObj.nav,\r\n      code: \"nav\"\r\n    }\r\n  ]);\r\n  const wsAlarmType = {\r\n    getAlarm: 110,\r\n    cancelAlarm: 111\r\n  };\r\n  const alarmType = ref<ISelectOption[]>([]);\r\n  const alarmForm = reactive({\r\n    type: \"\"\r\n  });\r\n  return {\r\n    router,\r\n    wsUrl,\r\n    mapObj,\r\n    mapListRef,\r\n    mapIdRef,\r\n    scaleBoundary,\r\n    state,\r\n    status,\r\n    showMenu,\r\n    mapNameRef,\r\n    warningWidth,\r\n    contextmenuTypeRef,\r\n    contxtmenuPosition,\r\n    contextmenuList,\r\n    detailsForm,\r\n    visibleObj,\r\n    monitorListInfo,\r\n    drawerInfo,\r\n    fenceInfo,\r\n    fenceListInfo,\r\n    drawFenceInfo,\r\n    ruleListInfo,\r\n    ruleFormRef,\r\n    ruleItemDetail,\r\n    ruleItemDetailRule,\r\n    ruleDisabledDate,\r\n    alarmInfo,\r\n    alarmListInfo,\r\n    allGroup,\r\n    activeTarget,\r\n    basestation,\r\n    bubble,\r\n    camera,\r\n    area,\r\n    person,\r\n    cacheAlarmObj,\r\n    cacheBasestationObj,\r\n    cacheCameraObj,\r\n    layerPerson,\r\n    layerPosition,\r\n    cacheBubbleObj,\r\n    cacheAreaObj,\r\n    cachePersonObj,\r\n    transferProps,\r\n    allLayer,\r\n    controlButtonList,\r\n    wsAlarmType,\r\n    alarmType,\r\n    alarmForm\r\n  };\r\n}\r\n","\r\nimport {\r\n  defineComponent,\r\n  onMounted,\r\n  onUnmounted,\r\n  reactive,\r\n  ref,\r\n  shallowRef,\r\n  computed,\r\n  watch,\r\n  nextTick,\r\n} from \"vue\";\r\nimport stageApi from \"@/api/stage\";\r\nimport alarmApi from \"@/api/alarm\";\r\nimport commonApi from \"@/api/common\";\r\n\r\nimport { imgUrl } from \"@/utils/urls\";\r\nimport { IResponseCommon, ISelectOption } from \"@/types/index\";\r\n\r\nimport {\r\n  IMapArrItem,\r\n  IDeviceItem,\r\n  IDeviceInfo,\r\n  Nullable,\r\n  IPersonArrItem,\r\n  IMessageClose,\r\n  TLayerItem,\r\n  TVectorgraph,\r\n  IBuildItem,\r\n  ISvgToImageConfig,\r\n  IAreaItem,\r\n  IPos,\r\n  ITrackItem,\r\n  ITrackErrorItem,\r\n  TTrackRes,\r\n} from \"./types/index\";\r\nimport { IBubbleDataItem, TDestoryType } from \"./types/cacheObj\";\r\nimport { IAlarmType } from \"./types/alarm\";\r\nimport { IGetAlarmItem } from \"./types/ws\";\r\nimport {\r\n  IAddEditFenceParams,\r\n  ISetDeviceData,\r\n  ISetDeviceDataItem,\r\n  IRuleItem,\r\n  IUpperPos,\r\n} from \"./types/fence\";\r\n// todo konva 按需引入  https://www.npmjs.com/package/konva Minimal bundle\r\nimport Konva from \"konva\";\r\nimport { Stage } from \"konva/types/Stage\";\r\nimport { ElMessage, ElMessageBox } from \"element-plus\";\r\nimport type { Pane } from \"element-plus/lib/el-tabs/src/tabs.vue\";\r\nimport {\r\n  getOffset,\r\n  screenTocanvas,\r\n  svgToImage,\r\n  guid,\r\n  generateImageDomByType,\r\n  loadImage,\r\n  locateIcon,\r\n  getDateTime,\r\n  getTrackTime,\r\n  strToPos,\r\n  checkTimeGap,\r\n} from \"./utils\";\r\nimport { generatePersonGroup } from \"./utils/shape\";\r\nimport { generatePersonItem } from \"./utils/ws\";\r\nimport { cloneDeep, debounce } from \"lodash\";\r\nimport {\r\n  mainNav,\r\n  personList,\r\n  cameraList,\r\n  basestationList,\r\n  fenceBox,\r\n  contextmenuContent,\r\n  formContent,\r\n  monitorList,\r\n  historyMonitor,\r\n  labelList,\r\n  handle,\r\n  layerPersonList,\r\n  mapChoosen,\r\n  dragableContainer,\r\n  playbackControl,\r\n} from \"./components\";\r\n\r\n// 常量\r\nimport {\r\n  NAV_INFO,\r\n  FENCE,\r\n  ALARM,\r\n  DATAV,\r\n  TITLE_HEIGHT as titleHeight,\r\n  TYPES,\r\n  areaRulesOption,\r\n  formateRuleType,\r\n  bgImageConfig,\r\n  areaColorConfig,\r\n  Hms,\r\n  timeFormateStr,\r\n  warningListWidth,\r\n  getFormTitle,\r\n  DEFAULT_COLORS,\r\n  handleTypeList,\r\n  handleExample,\r\n} from \"./constVariables\";\r\n\r\nimport { computedRem, commonRuleItem, getPagination, customFuncRule } from \"@/utils\";\r\nimport { Shape } from \"konva/types/Shape\";\r\nimport { IELForm } from \"./types/element\";\r\nimport { Image } from \"konva/types/shapes/Image\";\r\nimport {\r\n  setAllDevice,\r\n  setAllScene,\r\n  setAllBuild,\r\n  getBuildByNum,\r\n  getMapByNum,\r\n  getUsername,\r\n  setLoadSNum,\r\n} from \"@/utils/auth\";\r\nimport initData from \"./module/initData\";\r\nimport dayjs from \"dayjs\";\r\nimport { Group } from \"konva/types/Group\";\r\nimport { Animation } from \"konva/types/Animation\";\r\nimport { IFrame } from \"konva/types/types\";\r\n\r\nexport default defineComponent({\r\n  name: \"Content\",\r\n  components: {\r\n    mainNav,\r\n    personList,\r\n    cameraList,\r\n    basestationList,\r\n    fenceBox,\r\n    contextmenuContent,\r\n    formContent,\r\n    monitorList,\r\n    historyMonitor,\r\n    labelList,\r\n    handle,\r\n    layerPersonList,\r\n    mapChoosen,\r\n    dragableContainer,\r\n    playbackControl,\r\n  },\r\n  setup() {\r\n    enum EpauletActionCode {\r\n      /** 标签初始化 */\r\n      HTagInit = 1000,\r\n      /** 单个标签上线 */\r\n      HTagOnline = 1001,\r\n      /** 单个标签下线 */\r\n      HTagOffline = 1002,\r\n      /** 单个标签移动 */\r\n      HTagMove = 1003,\r\n      /** 图层统计 */\r\n      HLayerGroupStatistics = 1004,\r\n      /** 单个标签注销 */\r\n      HTagLogOff = 1005,\r\n      /** 落水报警 */\r\n      HWaterAlarm = 1006,\r\n      /** 每个地图人员数据 */\r\n      HSceneStatistics = 1007,\r\n    }\r\n\r\n    const {\r\n      router,\r\n      wsUrl, // ws 连接地址\r\n      mapObj, // 后端传过来的地图 obj\r\n      mapListRef, // 后端传过来的地图 arr\r\n      mapIdRef,\r\n      scaleBoundary, // 缩放边界值 mminScale maxScale\r\n      state,\r\n      status,\r\n      showMenu,\r\n      mapNameRef,\r\n      warningWidth, // 右侧报警宽度\r\n      contextmenuTypeRef, // 右键查看的类型 TYPES\r\n      contxtmenuPosition, // 右键 位置\r\n      contextmenuList, // 右键shape的菜单\r\n      detailsForm,\r\n      visibleObj,\r\n      monitorListInfo,\r\n      drawerInfo,\r\n      fenceInfo,\r\n      fenceListInfo,\r\n      drawFenceInfo,\r\n      ruleListInfo, // 规则 table\r\n      ruleFormRef,\r\n      ruleItemDetail, // 规则 详情\r\n      ruleItemDetailRule,\r\n      ruleDisabledDate, // 带日期的选择器\r\n      alarmInfo,\r\n      alarmListInfo,\r\n      allGroup,\r\n      activeTarget,\r\n      basestation,\r\n      bubble,\r\n      camera,\r\n      area,\r\n      person,\r\n      cacheAlarmObj,\r\n      cacheBasestationObj,\r\n      cacheCameraObj,\r\n      layerPerson,\r\n      layerPosition,\r\n      cacheBubbleObj,\r\n      cacheAreaObj,\r\n      cachePersonObj,\r\n      transferProps,\r\n      allLayer,\r\n      controlButtonList,\r\n      wsAlarmType,\r\n      alarmType,\r\n      alarmForm,\r\n    } = initData();\r\n\r\n    let clickTimer: Nullable<number> = null;\r\n    let currentContextmenu: Nullable<Shape | Group> = null; // 当前右键的那个shape，因为加了激活的shadow需要清除\r\n\r\n    const trackPlayback = reactive({\r\n      show: false, // 选择轨迹回放时间的弹窗\r\n      // 选择轨迹回放时间的form\r\n      form: {\r\n        date: \"\" as any,\r\n        time: [],\r\n      },\r\n      rules: {\r\n        date: commonRuleItem(\"请选择日期\"),\r\n        time: [commonRuleItem(\"请选择时间\"), customFuncRule(checkTimeGap)],\r\n      },\r\n      disabledDate(time: Date) {\r\n        return time.getTime() > Date.now();\r\n      },\r\n      message: null as any,\r\n      tween: null as any,\r\n      steps: [] as ITrackItem[],\r\n      lineNode: null as any,\r\n    });\r\n\r\n    const playbackObj = reactive({\r\n      sTime: \"\",\r\n      eTime: \"\",\r\n      currentTime: \"\",\r\n      currentIndex: 0,\r\n      len: 0,\r\n      isPlay: true,\r\n    });\r\n\r\n    let trackPlaybackLinePos: number[] = [];\r\n\r\n    // 时间选择器\r\n    function timerPickerChange() {\r\n      if (ruleItemDetail.form.endTime) {\r\n        ruleItemDetail.form.endTime = \"\";\r\n      }\r\n    }\r\n\r\n    const mousePos: IPos = { x: 0, y: 0 };\r\n\r\n    let stage: Nullable<Stage> = null;\r\n    function batchDraw() {\r\n      (stage as Stage).batchDraw();\r\n    }\r\n\r\n    const layer = new Konva.Layer();\r\n    const bgLayer = new Konva.Layer();\r\n    const operationLayer = new Konva.Layer();\r\n\r\n    watch(monitorListInfo.newMonitorList, (val) => {\r\n      let count = 0;\r\n      val.forEach((item: { active: any }) => {\r\n        const active = item.active;\r\n        if (active) {\r\n          count++;\r\n        }\r\n      });\r\n      if (count === 0) {\r\n        visibleObj.monitorListFlag = false;\r\n      }\r\n      monitorListInfo.livePlayCount = count;\r\n      if (count === 1) {\r\n        monitorListInfo.monitorInner = \"monitor-inner-one\";\r\n      } else {\r\n        monitorListInfo.monitorInner = \"monitor-inner-pannel\";\r\n      }\r\n\r\n      if (val.length > monitorListInfo.cameraCount) {\r\n        if (val.length > monitorListInfo.cameraCount * 1000) {\r\n          val.splice(0, val.length - monitorListInfo.cameraCount);\r\n        }\r\n        val.forEach((item: { active: any }, index: number) => {\r\n          if (index < val.length - monitorListInfo.cameraCount) {\r\n            item.active = false;\r\n          }\r\n        });\r\n      }\r\n    });\r\n    watch(monitorListInfo.newHistoryMonitorList, (val) => {\r\n      let count = 0;\r\n      val.forEach((value: { active: any }) => {\r\n        const active = value.active;\r\n        if (active) {\r\n          count++;\r\n        }\r\n      });\r\n      if (count === 0) {\r\n        visibleObj.historyMonitorListFlag = false;\r\n      }\r\n      monitorListInfo.historyPlayCount = count;\r\n      if (count === 1) {\r\n        monitorListInfo.monitorHistoryInner = \"monitor-inner-one\";\r\n      } else {\r\n        monitorListInfo.monitorHistoryInner = \"monitor-inner-pannel\";\r\n      }\r\n\r\n      if (val.length > monitorListInfo.cameraCount) {\r\n        if (val.length > monitorListInfo.cameraCount * 1000) {\r\n          val.splice(0, val.length - monitorListInfo.cameraCount);\r\n        }\r\n        val.forEach((value: { active: any }, index: number) => {\r\n          if (index < val.length - monitorListInfo.cameraCount) {\r\n            value.active = false;\r\n          }\r\n        });\r\n      }\r\n    });\r\n\r\n    let cacheDrawFence: Nullable<Shape> = null;\r\n    /**\r\n     * @description: 绘制电子围栏\r\n     * @param {boolean} isFinished 是否绘制完成\r\n     * @return {*}\r\n     */\r\n    function handleStartDrawFence(isFinished = false) {\r\n      cacheDrawFence?.destroy();\r\n\r\n      const pointsArr = drawFenceInfo.points;\r\n      if (pointsArr.length === 0) {\r\n        batchDraw();\r\n        return;\r\n      }\r\n\r\n      const fenceArea = new Konva.Shape({\r\n        ...areaColorConfig,\r\n        sceneFunc: function (ctx, shape) {\r\n          ctx.beginPath();\r\n          ctx.moveTo(pointsArr[0].x, pointsArr[0].y);\r\n          for (let i = 1; i < pointsArr.length; i++) {\r\n            const { x, y } = pointsArr[i];\r\n            ctx.lineTo(x, y);\r\n          }\r\n          ctx.stroke();\r\n          if (isFinished) {\r\n            ctx.closePath();\r\n          }\r\n          ctx.fillStrokeShape(shape);\r\n        },\r\n      });\r\n      cacheDrawFence = fenceArea;\r\n      allGroup.fenceGroup.add(fenceArea);\r\n      batchDraw();\r\n    }\r\n\r\n    // 电子围栏重新绘制\r\n    function handleRedrawFence() {\r\n      drawFenceInfo.points = [];\r\n      handleStartDrawFence();\r\n    }\r\n\r\n    // 电子围栏撤销\r\n    function handleRevokeFence() {\r\n      const { points } = drawFenceInfo;\r\n      const len = points.length;\r\n      if (len === 0) {\r\n        ElMessage.info(\"还一个点都没有添加噢！\");\r\n      } else if (len === 1 || len === 2) {\r\n        handleRedrawFence();\r\n      } else {\r\n        points.splice(len - 2, 2);\r\n        handleStartDrawFence();\r\n      }\r\n    }\r\n\r\n    // 取消绘制电子围栏\r\n    function handleCancelDrawFence() {\r\n      handleRedrawFence();\r\n      status.isDrawFence = false;\r\n      (drawFenceInfo.message as IMessageClose)?.close();\r\n      drawFenceInfo.points = [];\r\n      drawFenceInfo.clonePoints = [];\r\n      fenceInfo.visible = true;\r\n    }\r\n\r\n    // 完成绘制电子围栏\r\n    function handleFinishDrawFence() {\r\n      const { points } = drawFenceInfo;\r\n      const len = points.length;\r\n      if (len < 4) {\r\n        ElMessage.info(\"最少三个点才能组成一个面\");\r\n      } else {\r\n        (drawFenceInfo.message as IMessageClose).close();\r\n        status.isDrawFence = false;\r\n        points.pop();\r\n        drawFenceInfo.clonePoints = cloneDeep(points);\r\n        handleStartDrawFence(true);\r\n        setTimeout(() => {\r\n          fenceInfo.visible = true;\r\n          handleRedrawFence();\r\n        }, 500);\r\n      }\r\n    }\r\n\r\n    // 清除阴影\r\n    function clearShadowColor() {\r\n      const personOrLabel = [TYPES.labelList, TYPES.person];\r\n\r\n      if (personOrLabel.includes(contextmenuTypeRef.value)) {\r\n        ((currentContextmenu as Group)?.children[0] as Shape)?.shadowColor(\r\n          DEFAULT_COLORS.TRANSPARENT\r\n        );\r\n      } else {\r\n        (currentContextmenu as Shape)?.shadowColor?.(DEFAULT_COLORS.TRANSPARENT);\r\n      }\r\n\r\n      batchDraw();\r\n    }\r\n\r\n    /**\r\n     * @description: 显示右键菜单\r\n     * @param {Event} e window原生e\r\n     * @return {*}\r\n     */\r\n    function showMenuList(e: MouseEvent) {\r\n      const { clientX: x, clientY: y } = e;\r\n      Object.assign(contxtmenuPosition, {\r\n        left: x,\r\n        top: y - titleHeight,\r\n      });\r\n      visibleObj.contextmenu = true;\r\n    }\r\n\r\n    // 隐藏右键菜单\r\n    function hideMenuList() {\r\n      if (visibleObj.contextmenu) {\r\n        visibleObj.contextmenu = false;\r\n        clearShadowColor();\r\n        currentContextmenu = null;\r\n      }\r\n    }\r\n\r\n    function handleStageWheel() {\r\n      (stage as Stage).on(\"wheel\", (e) => {\r\n        const ev: WheelEvent = e.evt;\r\n\r\n        // ts 定义的 没有 wheelDelta 属性\r\n        // const wheelDelta = ev.wheelDelta ? ev.wheelDelta : ev.deltaY * -40;\r\n        const wheelDelta = ev.deltaY * -40;\r\n\r\n        const rateX = (ev.clientX - state.sx) / state.scale;\r\n        const rateY = (ev.clientY - state.sy) / state.scale;\r\n\r\n        if (wheelDelta > 0) {\r\n          state.scale += 0.05;\r\n          state.scale = Number((state.scale + 0.05).toFixed(2));\r\n          if (state.scale >= scaleBoundary.maxScale) {\r\n            state.scale = scaleBoundary.maxScale;\r\n          }\r\n        } else {\r\n          state.scale -= 0.05;\r\n          state.scale = Number((state.scale - 0.05).toFixed(2));\r\n          if (state.scale <= scaleBoundary.minScale) {\r\n            state.scale = scaleBoundary.minScale;\r\n          }\r\n        }\r\n\r\n        state.sx = ev.clientX - state.scale * rateX;\r\n        state.sy = ev.clientY - state.scale * rateY;\r\n\r\n        (stage as Stage).setAttrs({\r\n          x: state.sx,\r\n          y: state.sy,\r\n          scaleX: state.scale,\r\n          scaleY: state.scale,\r\n        });\r\n\r\n        if (status.isDrawFence) {\r\n          handleStartDrawFence();\r\n        }\r\n\r\n        batchDraw();\r\n      });\r\n    }\r\n\r\n    function handleStageMouseDown() {\r\n      (stage as Stage).on(\"mousedown\", (e) => {\r\n        const ev = e.evt;\r\n        if (status.isDrawFence) {\r\n          clickTimer = window.setTimeout(() => {\r\n            const pos = screenTocanvas({ x: ev.clientX, y: ev.clientY }, state);\r\n            drawFenceInfo.points.push(pos);\r\n            handleStartDrawFence();\r\n          }, 300);\r\n\r\n          return;\r\n        }\r\n        status.draggable = true;\r\n        Object.assign(mousePos, {\r\n          x: ev.clientX,\r\n          y: ev.clientY,\r\n        });\r\n        (stage as Stage).container().style.cursor = \"move\";\r\n        hideMenuList();\r\n      });\r\n    }\r\n\r\n    function handleStageMouseUp() {\r\n      (stage as Stage).on(\"mouseup mouseout\", () => {\r\n        if (status.draggable) {\r\n          status.draggable = false;\r\n          (stage as Stage).container().style.cursor = \"default\";\r\n        }\r\n      });\r\n    }\r\n\r\n    function handleStageMouseMove() {\r\n      (stage as Stage).on(\r\n        \"mousemove\",\r\n        debounce((e) => {\r\n          const mouseMoveFunc = () => {\r\n            const ev: MouseEvent = e.evt;\r\n\r\n            if (status.isDrawFence) {\r\n              const { points } = drawFenceInfo;\r\n\r\n              if (points.length >= 1) {\r\n                if (points.length > 1) {\r\n                  points.pop();\r\n                }\r\n                const pos = screenTocanvas({ x: ev.clientX, y: ev.clientY }, state);\r\n                points.push(pos);\r\n                handleStartDrawFence();\r\n              }\r\n              return;\r\n            }\r\n            if (!status.draggable) return;\r\n\r\n            state.sx += ev.clientX - mousePos.x;\r\n            state.sy += ev.clientY - mousePos.y;\r\n\r\n            const maxSx = getOffset(\r\n              {\r\n                x: (stage as Stage).width() * 0.25,\r\n                y: 0,\r\n              },\r\n              {\r\n                x: 0,\r\n                y: 0,\r\n              },\r\n              state.scale\r\n            ).x;\r\n            const minSx = getOffset(\r\n              {\r\n                x: (stage as Stage).width() * 0.75,\r\n                y: 0,\r\n              },\r\n              {\r\n                x: bgImageConfig.width,\r\n                y: 0,\r\n              },\r\n              state.scale\r\n            ).x;\r\n            const maxSy = getOffset(\r\n              {\r\n                x: 0,\r\n                y: titleHeight,\r\n              },\r\n              { x: 0, y: 0 },\r\n              state.scale\r\n            ).y;\r\n            const minSy = getOffset(\r\n              {\r\n                x: 0,\r\n                y: (stage as Stage).height(),\r\n              },\r\n              { x: 0, y: bgImageConfig.height },\r\n              state.scale\r\n            ).y;\r\n\r\n            const midSy = getOffset(\r\n              {\r\n                x: 0,\r\n                y: (stage as Stage).height() / 2,\r\n              },\r\n              {\r\n                x: 0,\r\n                y: bgImageConfig.height / 2,\r\n              },\r\n              state.scale\r\n            ).y;\r\n\r\n            if (maxSx <= minSx) {\r\n              state.sx = maxSx;\r\n            } else if (state.sx > maxSx) {\r\n              state.sx = maxSx;\r\n            } else if (state.sx < minSx) {\r\n              state.sx = minSx;\r\n            }\r\n\r\n            if (maxSy <= minSy) {\r\n              state.sy = maxSy;\r\n            } else if (state.sy > maxSy) {\r\n              state.sy = maxSy;\r\n            } else if (state.sy < minSy) {\r\n              state.sy = minSy;\r\n            }\r\n\r\n            if (state.scale === scaleBoundary.minScale) {\r\n              state.sy = midSy;\r\n            }\r\n\r\n            Object.assign(mousePos, {\r\n              x: ev.clientX,\r\n              y: ev.clientY,\r\n            });\r\n\r\n            (stage as Stage).setAttrs({\r\n              x: state.sx,\r\n              y: state.sy,\r\n            });\r\n\r\n            batchDraw();\r\n          };\r\n          mouseMoveFunc();\r\n        }, 10)\r\n      );\r\n    }\r\n\r\n    function handleStageContextMenu() {\r\n      (stage as Stage).on(\"contextmenu\", (e) => {\r\n        const ev: MouseEvent = e.evt;\r\n        ev.preventDefault();\r\n        clickTimer && clearTimeout(clickTimer);\r\n        if (status.isDrawFence) {\r\n          handleFinishDrawFence();\r\n          return;\r\n        }\r\n      });\r\n    }\r\n\r\n    function stageEventsInit() {\r\n      handleStageWheel();\r\n      handleStageMouseDown();\r\n      handleStageMouseUp();\r\n      handleStageMouseMove();\r\n      handleStageContextMenu();\r\n    }\r\n\r\n    function initStage() {\r\n      stage = new Konva.Stage({\r\n        width: window.innerWidth,\r\n        height: window.innerHeight - titleHeight,\r\n        container: \"container\",\r\n        scale: {\r\n          x: state.scale,\r\n          y: state.scale,\r\n        },\r\n      });\r\n    }\r\n\r\n    function hideDetails() {\r\n      clearShadowColor();\r\n      visibleObj.detailsForm = false;\r\n    }\r\n\r\n    // 保存所有设备\r\n    let deviceAll = reactive<IDeviceItem[]>([]);\r\n\r\n    async function addLayer() {\r\n      (stage as Stage).add(layer).add(bgLayer).add(operationLayer);\r\n\r\n      Object.keys(allGroup).forEach((key) => {\r\n        layer.add(allGroup[key]);\r\n      });\r\n\r\n      bgLayer.moveToBottom();\r\n      allGroup.fenceGroup.moveToBottom();\r\n      operationLayer.moveToTop();\r\n    }\r\n\r\n    async function initAlarmIcon(attrs: { x: number; y: number; id: number }) {\r\n      const { x, y, id } = attrs;\r\n      const alarmIcon = new Konva.Circle({\r\n        x: x,\r\n        y: y,\r\n        radius: 70,\r\n        fill: \"rgba(255,0,0,.7)\",\r\n      });\r\n      cacheAlarmObj[id] = alarmIcon;\r\n      const period = 5000;\r\n      allGroup.alarmGroup.add(alarmIcon);\r\n      let anim: null | Animation = new Konva.Animation((frame) => {\r\n        const scale = Math.sin(((frame as IFrame).time * 2 * Math.PI) / period) + 0.001;\r\n        alarmIcon.scale({ x: scale, y: scale });\r\n      }, layer);\r\n      (anim as Animation).start();\r\n      setTimeout(() => {\r\n        (anim as Animation)?.stop();\r\n        anim = null;\r\n        cacheAlarmObj[id].destroy();\r\n        delete cacheAlarmObj[id];\r\n        batchDraw();\r\n      }, 3000);\r\n    }\r\n\r\n    async function initBasestation(attrs: TLayerItem, show = controlButtonList[0].show) {\r\n      const { x, y, lids } = attrs;\r\n      // todo 等后端返deviceitem 现在为空\r\n      // const deviceArr = JSON.parse(deviceitem) as ISetDeviceDataItem[];\r\n      console.log(\"base attrs\", attrs);\r\n      const imageDom = await generateImageDomByType(attrs);\r\n\r\n      const generate = () => {\r\n        const shape = new Konva.Image({\r\n          x,\r\n          y,\r\n          width: imageDom.width,\r\n          height: imageDom.height,\r\n          image: imageDom,\r\n          shadowColor: DEFAULT_COLORS.TRANSPARENT,\r\n          // shadowBlur: imageDom.width,\r\n          shadowBlur: 20,\r\n          name: lids,\r\n        });\r\n\r\n        shape.on(\"contextmenu\", (e) => {\r\n          console.log(e);\r\n          if (status.isDrawFence) {\r\n            return false;\r\n          }\r\n\r\n          hideDetails();\r\n\r\n          activeTarget.attrs = cloneDeep(e.target.attrs);\r\n          currentContextmenu = shape;\r\n\r\n          contextmenuTypeRef.value = TYPES.basestation;\r\n          showMenuList(e.evt);\r\n\r\n          shape.shadowColor(DEFAULT_COLORS.BLUE);\r\n          batchDraw();\r\n        });\r\n\r\n        allGroup.basestationGroup.add(shape);\r\n        cacheBasestationObj[lids] = shape;\r\n        shape.visible(show);\r\n        batchDraw();\r\n      };\r\n\r\n      loadImage(imageDom, generate);\r\n    }\r\n\r\n    async function initCamera(attrs: TLayerItem, show = controlButtonList[1].show) {\r\n      const { x, y, lids, deviceitem } = attrs;\r\n      const imageDom = await generateImageDomByType(attrs);\r\n\r\n      const deviceArr = JSON.parse(deviceitem) as ISetDeviceDataItem[];\r\n\r\n      const shape = new Konva.Image({\r\n        x,\r\n        y,\r\n        width: imageDom.width,\r\n        height: imageDom.height,\r\n        image: imageDom,\r\n        shadowColor: DEFAULT_COLORS.TRANSPARENT,\r\n        // shadowBlur: imageDom.width,\r\n        shadowBlur: 20,\r\n        // 摄像头应该只有一个id，后续数据可以通过id在deviceAll中找到相应的数据\r\n        name: deviceArr[0].DeviceIdS,\r\n      });\r\n\r\n      shape.on(\"contextmenu\", (e) => {\r\n        console.log(e);\r\n        if (status.isDrawFence) {\r\n          return false;\r\n        }\r\n\r\n        hideDetails();\r\n\r\n        activeTarget.attrs = cloneDeep(e.target.attrs);\r\n\r\n        contextmenuTypeRef.value = TYPES.camera;\r\n        currentContextmenu = shape;\r\n\r\n        showMenuList(e.evt);\r\n        visibleObj.contextmenu = true;\r\n\r\n        shape.shadowColor(DEFAULT_COLORS.BLUE);\r\n        batchDraw();\r\n      });\r\n\r\n      allGroup.cameraGroup.add(shape);\r\n      cacheCameraObj[lids] = shape;\r\n      shape.visible(show);\r\n      batchDraw();\r\n    }\r\n\r\n    async function initBubble(attrs: TVectorgraph) {\r\n      const offsetX = 24;\r\n      const offsetY = 16;\r\n      const OffsetX = 2 * offsetX;\r\n      const OffsetY = 2 * offsetY;\r\n      const { x, y, sname, lids } = attrs;\r\n\r\n      const { W, H, layinfo, Color, IsHaveCount, CountItem } = attrs.defdata;\r\n      const w = W - OffsetX;\r\n      const h = H - OffsetY;\r\n      const group = new Konva.Group({\r\n        x,\r\n        y,\r\n      });\r\n\r\n      const config: ISvgToImageConfig = {\r\n        pathSrc: layinfo,\r\n        width: W,\r\n        height: H,\r\n        color: Color,\r\n      };\r\n\r\n      const imageDom = await svgToImage(config, attrs.ltype === \"标注图层\");\r\n      const image = new Konva.Image({\r\n        image: imageDom,\r\n        name: lids,\r\n        // listening:false,\r\n        // stroke: \"rgba(255,0,0,.5)\",\r\n      });\r\n\r\n      if (!IsHaveCount) {\r\n        const label = new Konva.Text({\r\n          x: W / 2 - offsetX,\r\n          y: (h - 10) / 2,\r\n          text: sname,\r\n          fontSize: 14,\r\n          fill: \"#fff\",\r\n          listening: false,\r\n        });\r\n        label.offsetX(label.width() / 2);\r\n        label.offsetY(label.height() / 2);\r\n        group.add(image).add(label);\r\n      } else {\r\n        const label = new Konva.Text({\r\n          x: W / 2 - offsetX,\r\n          y: H / 8,\r\n          text: sname,\r\n          fontSize: 14,\r\n          fill: \"#fff\",\r\n          listening: false,\r\n        });\r\n        label.offsetX(label.width() / 2);\r\n\r\n        const line = new Konva.Line({\r\n          points: [w * 0.1, h / 2, w * 0.9, h / 2],\r\n          stroke: \"#fff\",\r\n          strokeWidth: 0.5,\r\n          listening: false,\r\n        });\r\n\r\n        const bottomGroup = new Konva.Group({\r\n          x: w / 2,\r\n          y: (h - 10) * 0.7,\r\n          listening: false,\r\n        });\r\n\r\n        cacheBubbleObj[lids] = {\r\n          text: [],\r\n          tagList: [],\r\n        };\r\n\r\n        const len = CountItem.length;\r\n        const gap = 10;\r\n\r\n        CountItem.forEach((item, index) => {\r\n          const cornerGroup = new Konva.Group({\r\n            x: gap * index,\r\n            listening: false,\r\n          });\r\n\r\n          const cornerH = ((h - 10) / 2) * 0.5;\r\n          const cornerRect = new Konva.Rect({\r\n            width: w / 3 / len,\r\n            height: cornerH,\r\n            fill: \"rgba(255,255,255,.6)\",\r\n            cornerRadius: cornerH,\r\n            listening: false,\r\n          });\r\n          cornerRect.offsetX(cornerRect.width() / 2);\r\n\r\n          const cornerText = new Konva.Text({\r\n            x: 0,\r\n            y: cornerH / 2,\r\n            fill: Color,\r\n            text: \"?\",\r\n            name: item,\r\n            listening: false,\r\n          });\r\n          cornerText.offsetX(cornerText.width() / 2);\r\n          cornerText.offsetY(cornerText.height() / 2);\r\n\r\n          cornerGroup.add(cornerRect).add(cornerText);\r\n\r\n          cacheBubbleObj[lids].text.push(cornerText);\r\n\r\n          bottomGroup.add(cornerGroup);\r\n        });\r\n\r\n        group.add(image).add(label).add(line).add(bottomGroup);\r\n\r\n        group.on(\"dblclick\", (e) => {\r\n          console.log(e);\r\n          const { clientX, clientY } = e.evt;\r\n          Object.assign(layerPosition, {\r\n            left: clientX,\r\n            top: clientY - titleHeight,\r\n          });\r\n          // 应该动态取 但是我懒得改了 这个项目应该只有一个\r\n          layerPerson.value = cacheBubbleObj[e.target.attrs.name].tagList[0];\r\n          console.log(\"layerPerson.value\", layerPerson.value);\r\n\r\n          visibleObj.layerPerson = true;\r\n        });\r\n      }\r\n\r\n      allGroup.locateBubbleGroup.add(group);\r\n    }\r\n\r\n    // 回显电子围栏\r\n    function initArea(attrs: IAreaItem) {\r\n      const { areaids, points, areaname, show } = attrs;\r\n      const posArr = JSON.parse(points) as IUpperPos[];\r\n      const group = new Konva.Group({\r\n        visible: show,\r\n      });\r\n      const startPoint = posArr[0];\r\n      const text = new Konva.Text({\r\n        x: startPoint.X + 10,\r\n        y: startPoint.Y + 10,\r\n        text: areaname,\r\n        fill: \"#fff\",\r\n        fontSize: 24,\r\n      });\r\n      const areaItem = new Konva.Shape({\r\n        ...areaColorConfig,\r\n        sceneFunc: function (ctx, shape) {\r\n          ctx.beginPath();\r\n          ctx.moveTo(posArr[0].X, posArr[0].Y);\r\n          for (let i = 1; i < posArr.length; i++) {\r\n            const { X, Y } = posArr[i];\r\n            ctx.lineTo(X, Y);\r\n          }\r\n          ctx.stroke();\r\n          ctx.closePath();\r\n          ctx.fillStrokeShape(shape);\r\n        },\r\n      });\r\n      group.add(areaItem).add(text);\r\n      // 存在就将之前的 销毁 置空\r\n      if (cacheAreaObj[areaids]) {\r\n        cacheAreaObj[areaids].destroy();\r\n        delete cacheAreaObj[areaids];\r\n      }\r\n      allGroup.fenceGroup.add(group);\r\n      cacheAreaObj[areaids] = group;\r\n\r\n      batchDraw();\r\n    }\r\n\r\n    // 修复 右键同一个 shape x y 会变空的问题\r\n    watch(\r\n      () => visibleObj.detailsForm,\r\n      (newVal) => {\r\n        if (newVal === false) {\r\n          detailsForm.formData = {};\r\n          detailsForm.x = 0;\r\n          detailsForm.y = 0;\r\n        }\r\n      }\r\n    );\r\n    // 存储人员image的宽高\r\n    const personImageWH = {\r\n      width: 0,\r\n      height: 0,\r\n    };\r\n    let cachePlaybackPerson: any = null;\r\n    let cacheFollowingPerson: any = null;\r\n    async function initPerson(attrs: IPersonArrItem, initType = 0) {\r\n      const { x, y, name, TagId } = attrs;\r\n\r\n      if (cachePersonObj[TagId] && initType === 0) {\r\n        return;\r\n      }\r\n\r\n      const imageDom = new window.Image();\r\n      imageDom.src = `/images/staff_unchecked${initType + 1}.png`;\r\n      imageDom.onload = () => {\r\n        const group = new Konva.Group({\r\n          x: x + imageDom.width / 2,\r\n          y: y + imageDom.height,\r\n        });\r\n        if (personImageWH.width === 0) {\r\n          personImageWH.width = imageDom.width;\r\n          personImageWH.height = imageDom.height;\r\n        }\r\n        const image = generatePersonGroup(group, imageDom, TagId, name);\r\n        if (initType === 0) {\r\n          cachePersonObj[TagId] = group;\r\n        } else {\r\n          cachePlaybackPerson = group;\r\n        }\r\n\r\n        // 普通初始化\r\n        if (allGroup.personGroup && initType === 0) {\r\n          allGroup.personGroup.add(group);\r\n        } else if (operationLayer && initType) {\r\n          operationLayer.add(group);\r\n          group.moveToTop();\r\n        }\r\n\r\n        if (initType === 0) {\r\n          group.on(\"contextmenu\", (e) => {\r\n            if (status.isPlayBack) {\r\n              ElMessage.info(\"正在轨迹回放，执行其他操作请先关闭轨迹回放\");\r\n              return;\r\n            }\r\n            if (status.isFollowing) {\r\n              ElMessage.info(\"正在实时跟踪，执行其他操作请先关闭轨迹实时跟踪\");\r\n              return;\r\n            }\r\n            console.log(e);\r\n            console.log(e.target.attrs.id);\r\n            if (status.isDrawFence) {\r\n              return false;\r\n            }\r\n            activeTarget.attrs = cloneDeep(e.target.attrs);\r\n            hideDetails();\r\n\r\n            currentContextmenu = group;\r\n            contextmenuTypeRef.value = TYPES.labelList;\r\n            showMenuList(e.evt);\r\n            visibleObj.contextmenu = true;\r\n            image.shadowColor(DEFAULT_COLORS.BLUE);\r\n            batchDraw();\r\n          });\r\n        } else {\r\n          status.isPlayBack = true;\r\n          trackPlayback.message = ElMessage({\r\n            // showClose: true,\r\n            message: \"轨迹回放中...\",\r\n            type: \"warning\",\r\n            duration: 0,\r\n          });\r\n          // eslint-disable-next-line @typescript-eslint/no-use-before-define\r\n          trackPlaybackTween(group, trackPlayback.steps);\r\n        }\r\n        batchDraw();\r\n      };\r\n    }\r\n\r\n    const transferData = ref<any>([]);\r\n    // 获取当前场景下的所有 摄像头\r\n    function getAllMapCamera() {\r\n      return deviceAll.filter(\r\n        (item) => item.dtypecode === \"Camera_IP\" && item.snum === mapIdRef.value\r\n      );\r\n    }\r\n\r\n    async function getCurrentMapCamera(mapId: string) {\r\n      camera.currentMap = camera.all.filter((item) => item.snum === mapId);\r\n      camera.currentMap.forEach((item) => {\r\n        initCamera(item);\r\n      });\r\n    }\r\n\r\n    function getCurrentMapBubble(mapId: string) {\r\n      bubble.currentMap = bubble.all.filter((item) => item.snum === mapId);\r\n      bubble.currentMap.forEach((item) => {\r\n        initBubble(item);\r\n      });\r\n    }\r\n\r\n    function getCurrentMapBasestation(mapId: string) {\r\n      basestation.currentMap = basestation.all.filter((item) => item.snum === mapId);\r\n      basestation.currentMap.forEach((item) => {\r\n        initBasestation(item);\r\n      });\r\n    }\r\n\r\n    const getCurrentMapPerson = (mapId: string) => {\r\n      person.currentMap = person.all.filter(\r\n        (item: any) => item.LocationSceneId === mapId\r\n      );\r\n      console.log(\"currentMap\", person.currentMap);\r\n      person.currentMap.forEach((item) => {\r\n        initPerson(item);\r\n      });\r\n    };\r\n    //\r\n    async function getAllLayer() {\r\n      // eslint-disable-next-line @typescript-eslint/no-use-before-define\r\n      destroyLayer(\"layer\");\r\n\r\n      const params = {\r\n        act: \"kTM5tsxPxjZPbajPzDQ1586422437860\",\r\n        ProductId: \"99999999-9999-9999-9999-999999999999\",\r\n      };\r\n      const res: unknown = await stageApi.getAllLayer(params);\r\n      const { data } = res as IResponseCommon<TLayerItem[]>;\r\n      console.log(\"getAllLayer=>\", data);\r\n\r\n      allLayer.value = data;\r\n\r\n      // layerTypes : 标注图层  | 摄像头图层 | 基站图层\r\n\r\n      // 标注图层\r\n      bubble.all = data.filter((item) => item.ltype === \"标注图层\") as TVectorgraph[];\r\n      getCurrentMapBubble(mapIdRef.value);\r\n\r\n      // 摄像头图层\r\n      camera.all = data.filter((item) => item.ltype === \"摄像头图层\");\r\n      getCurrentMapCamera(mapIdRef.value);\r\n\r\n      // 基站图层\r\n      basestation.all = data.filter(\r\n        (item) => item.ltype === \"基站图层\"\r\n      ) as TVectorgraph[];\r\n      getCurrentMapBasestation(mapIdRef.value);\r\n\r\n      batchDraw();\r\n    }\r\n\r\n    async function getAllBuild() {\r\n      const params = {\r\n        act: \"cRfPNhii9hVXQ6D8C151586425533740\",\r\n      };\r\n      const res: unknown = await stageApi.getAllBuild(params);\r\n\r\n      const { data } = res as IResponseCommon<IBuildItem[]>;\r\n      // 保存建筑信息，报警信息需要根据dnum查询建筑信息\r\n      setAllBuild(data);\r\n      console.log(\"getAllBuild\", data);\r\n    }\r\n\r\n    function getCurrentMapArea(mapId: string) {\r\n      area.currentMap = area.all.filter((item) => item.snum === mapId);\r\n      fenceListInfo.allData = area.currentMap;\r\n      fenceListInfo.tableData = getPagination(\r\n        fenceListInfo.allData,\r\n        fenceListInfo.params.curpage\r\n      );\r\n      fenceListInfo.total = fenceListInfo.allData.length;\r\n\r\n      area.currentMap.forEach((item) => {\r\n        initArea(item);\r\n      });\r\n    }\r\n\r\n    // 只展示当前地图 电子围栏\r\n    // 获取自定义区域 - 电子围栏\r\n    async function getAllHArea() {\r\n      // eslint-disable-next-line @typescript-eslint/no-use-before-define\r\n      destroyLayer(\"area\");\r\n      const params = {\r\n        act: \"KP9NBmF37ejHCChTUhA1586415869244\",\r\n      };\r\n      const res: unknown = await stageApi.getAllHArea(params);\r\n      const { data } = res as IResponseCommon<IAreaItem[]>;\r\n      console.log(\"getAllHArea\", data);\r\n\r\n      area.all = data.map((item) => {\r\n        return {\r\n          ...item,\r\n          show: visibleObj.area,\r\n        };\r\n      }) as IAreaItem[];\r\n      getCurrentMapArea(mapIdRef.value);\r\n    }\r\n    // 获取所有报警信息\r\n    async function getAllAlarm() {\r\n      const param = {\r\n        act: \"6Z6wTPGkfMVF9eLTOXA1611040899987\",\r\n        curpage: alarmListInfo.params.curpage,\r\n        // eslint-disable-next-line @typescript-eslint/camelcase\r\n        sys_showpagesize: alarmListInfo.params.size,\r\n        ShowSceneNum: alarmListInfo.ShowSceneNum,\r\n        SourceType: alarmListInfo.SourceType,\r\n        alarmLevel: alarmListInfo.alarmLevel,\r\n        sTime: alarmListInfo.sTime,\r\n        eTime: alarmListInfo.eTime,\r\n        alarmProgress: alarmListInfo.alarmProgress,\r\n      };\r\n      const res = await commonApi.getCommonApi(param);\r\n      const { result, data } = res as any;\r\n\r\n      if (result.success) {\r\n        data.content.forEach((element: any) => {\r\n          // 开始时间\r\n          const createtime = dayjs(element.CreateTime).format(timeFormateStr);\r\n          element.CreateTime = createtime;\r\n          // 处理时间\r\n          const dealTime = dayjs(element.dealTime).format(timeFormateStr);\r\n          element.dealTime = dealTime;\r\n        });\r\n        alarmListInfo.tableData = data.content;\r\n        alarmListInfo.total = data.count;\r\n      }\r\n    }\r\n    function alarmCurrentChange() {\r\n      alarmListInfo.loading = true;\r\n      getAllAlarm();\r\n      alarmListInfo.loading = false;\r\n    }\r\n    function getAlarmListByCondition() {\r\n      alarmListInfo.params.curpage = 1;\r\n      alarmListInfo.loading = true;\r\n      alarmListInfo.sTime = alarmListInfo.timeRange ? alarmListInfo.timeRange[0] : \"\";\r\n      alarmListInfo.eTime = alarmListInfo.timeRange ? alarmListInfo.timeRange[1] : \"\";\r\n      if (alarmListInfo.timeRange) {\r\n        const sTime = alarmListInfo.timeRange[0];\r\n        const eTime = alarmListInfo.timeRange[1];\r\n        alarmListInfo.sTime = dayjs(sTime).format(timeFormateStr);\r\n        alarmListInfo.eTime = dayjs(eTime).format(timeFormateStr);\r\n      } else {\r\n        alarmListInfo.sTime = \"\";\r\n        alarmListInfo.eTime = \"\";\r\n      }\r\n      getAllAlarm();\r\n      alarmListInfo.loading = false;\r\n    }\r\n\r\n    // 打开报警处理弹框\r\n    function handleHandleAlarm(row: any) {\r\n      console;\r\n      if (row.length > 0) {\r\n        // 批量处理\r\n        let str = \"\";\r\n        alarmInfo.handleAlarmId = \"\";\r\n        row.forEach((item: any) => {\r\n          str += item.IDS + \",\";\r\n        });\r\n        // 去掉最后一个逗号\r\n        if (str.length > 0) {\r\n          str = str.substr(0, str.length - 1);\r\n        }\r\n        alarmInfo.handleAlarmIdArr = str;\r\n      } else {\r\n        alarmInfo.handleAlarmId = row.IDS;\r\n        alarmInfo.handleAlarmIdArr = \"\";\r\n      }\r\n      alarmInfo.handleVisible = true;\r\n      alarmInfo.form.handleContent = \"\";\r\n      alarmInfo.handleExampleVisible = false;\r\n    }\r\n    // 获取点击处理意见模板\r\n    function getHandleExample(row: any) {\r\n      alarmInfo.form.handleContent = row.content;\r\n      alarmInfo.handleExampleVisible = false;\r\n    }\r\n    // 报警处理提交\r\n    async function alarmHandleSubmit() {\r\n      const handleAlarmId = alarmInfo.handleAlarmId;\r\n      const handleAlarmIdArr = alarmInfo.handleAlarmIdArr;\r\n      const handleType = alarmInfo.form.handleType;\r\n      const handleContent = alarmInfo.form.handleContent;\r\n      if (handleAlarmId) {\r\n        // 处理单个报警\r\n        const params = {\r\n          sIDS: handleAlarmId,\r\n          sDealAccount: getUsername(),\r\n          sDealResult: handleContent,\r\n          sDealType: handleType,\r\n          sDealIp: \"127.0.0.1\",\r\n        };\r\n        // 提交接口\r\n        const res: unknown = await alarmApi.dealAlarmItem(params);\r\n        const { success, msg } = res as any;\r\n        if (success) {\r\n          alarmInfo.handleVisible = false;\r\n          ElMessage.success(msg);\r\n          // 获取所有报警列表\r\n          alarmListInfo.handleIds = [handleAlarmId];\r\n          alarmListInfo.tableData.forEach((item: any) => {\r\n            if (item.IDS === handleAlarmId) {\r\n              item.alarmProgress = \"已处理\";\r\n            }\r\n          });\r\n          getAllAlarm();\r\n        } else {\r\n          ElMessage.error(msg);\r\n        }\r\n      } else {\r\n        // 批量处理\r\n        const params = {\r\n          sIDSChar: handleAlarmIdArr,\r\n          sDealAccount: getUsername(),\r\n          sDealResult: handleContent,\r\n          sDealType: handleType,\r\n          sDealIp: \"127.0.0.1\",\r\n        };\r\n        // 提交接口\r\n        const res: unknown = await alarmApi.dealAlarms(params);\r\n        const { success, msg } = res as any;\r\n        if (success) {\r\n          alarmInfo.handleVisible = false;\r\n          ElMessage.success(msg);\r\n          // 获取所有报警列表\r\n          alarmListInfo.handleIds = handleAlarmIdArr.split(\",\");\r\n          alarmListInfo.tableData.forEach((item: any) => {\r\n            alarmListInfo.handleIds.forEach((val: any) => {\r\n              if (item.IDS === val) {\r\n                item.alarmProgress = \"已处理\";\r\n              }\r\n            });\r\n          });\r\n          getAllAlarm();\r\n        } else {\r\n          ElMessage.error(msg);\r\n        }\r\n      }\r\n    }\r\n    // 获取报警总数\r\n    function getAlarmTotal(total: number) {\r\n      alarmInfo.alarmTotal = total;\r\n    }\r\n    // 获取未处理报警总数\r\n    function getAlarmUnHandle(count: number) {\r\n      alarmInfo.alarmUnHandle = count;\r\n    }\r\n    // 右侧报警信息报警详情\r\n    function showAlarmDetail(row: any) {\r\n      alarmInfo.visible = true;\r\n      alarmInfo.form = row;\r\n      const { x, y } = strToPos(alarmInfo.form.SourcePointNum);\r\n      console.log(x, y);\r\n      const left = (x - (20 / 2) * 10) / 6000;\r\n      const top = (y - 20 * 10) / 3000;\r\n      alarmInfo.iconStyle.left = `${left * 100}%`;\r\n      alarmInfo.iconStyle.top = `${top * 100}%`;\r\n\r\n      console.log({\r\n        left,\r\n        top,\r\n      });\r\n    }\r\n\r\n    let cacheBgImage: Nullable<Image> = null; //缓存背景图对象\r\n    /**\r\n     * @description: 加载背景图\r\n     * @param {src}\r\n     * @return {*}\r\n     */\r\n    async function initBgImage(src: string = imgUrl + mapObj[mapIdRef.value].surl) {\r\n      console.log(\"src:\", src);\r\n\r\n      const imageDom = new window.Image();\r\n      imageDom.src = src;\r\n      imageDom.onload = async () => {\r\n        const image = new Konva.Image({\r\n          image: imageDom,\r\n          width: imageDom.width,\r\n          height: imageDom.height,\r\n          // https://konvajs.org/docs/performance/All_Performance_Tips.html 13\r\n          listening: false,\r\n        });\r\n\r\n        state.scale = Number((window.innerWidth / image.width()).toFixed(2));\r\n        scaleBoundary.minScale = state.scale;\r\n\r\n        await bgLayer.add(image);\r\n        (stage as Stage).setAttrs({\r\n          scale: {\r\n            x: state.scale,\r\n            y: state.scale,\r\n          },\r\n        });\r\n\r\n        cacheBgImage = image;\r\n\r\n        image.moveToBottom();\r\n        await batchDraw();\r\n\r\n        // 图片加载成功 才注册 stage 事件\r\n        stageEventsInit();\r\n\r\n        // eslint-disable-next-line @typescript-eslint/no-use-before-define\r\n        getAllDevice();\r\n        getAllLayer();\r\n        getAllBuild();\r\n        getAllHArea();\r\n        // 获取所有报警列表\r\n        getAllAlarm();\r\n        // eslint-disable-next-line @typescript-eslint/no-use-before-define\r\n        initLocationWs();\r\n        // eslint-disable-next-line @typescript-eslint/no-use-before-define\r\n        initAlarmWs();\r\n      };\r\n    }\r\n\r\n    // 背景图更新\r\n    function updataBgImage(mapId: string) {\r\n      const bgImageDom = new window.Image();\r\n      console.log(mapObj);\r\n      bgImageDom.src = imgUrl + mapObj[mapId].surl;\r\n      bgImageDom.onload = () => {\r\n        (cacheBgImage as Image).image(bgImageDom);\r\n        batchDraw();\r\n      };\r\n    }\r\n\r\n    async function initShape(bgSrc?: string) {\r\n      await initBgImage(bgSrc);\r\n    }\r\n\r\n    async function startInit() {\r\n      initStage();\r\n      addLayer();\r\n      initShape();\r\n    }\r\n\r\n    async function getAllMap() {\r\n      const params = {\r\n        act: \"bPxM1k2cWCeMeEIbWZV1586415800673\",\r\n      };\r\n      const res: unknown = await stageApi.getAllScene(params);\r\n\r\n      const { data } = res as IResponseCommon<IMapArrItem[]>;\r\n      console.log(\"getAllMap=>\", data);\r\n      mapListRef.value = data || [];\r\n      mapListRef.value.forEach((value) => {\r\n        mapObj[value.snum] = value;\r\n      });\r\n      // 保存所有场景信息到localStorage中\r\n      setAllScene(mapObj);\r\n      startInit();\r\n    }\r\n\r\n    // nav\r\n    const mainNavRef = ref();\r\n    function navClick(code: string) {\r\n      console.log(\"navCode=>\", code);\r\n      hideMenuList();\r\n      visibleObj.layerPerson = false;\r\n      for (const key in NAV_INFO) {\r\n        if (NAV_INFO[key].code === code) {\r\n          drawerInfo.showList = true;\r\n          drawerInfo.drawerTitle = NAV_INFO[key].title;\r\n          drawerInfo.activeName = key;\r\n          break;\r\n        }\r\n      }\r\n      // 点击电子围栏\r\n      if (FENCE.code === code) {\r\n        fenceListInfo.tableVisible = true;\r\n      }\r\n\r\n      // 点击报警管理\r\n      if (ALARM.code === code) {\r\n        alarmListInfo.tableVisible = true;\r\n      }\r\n\r\n      // 点击数据中心\r\n      if (DATAV.code === code) {\r\n        ElMessage.info(\"暂未开放\");\r\n        // router.push(\"/datav\");\r\n      }\r\n    }\r\n\r\n    function resetNavIndex() {\r\n      mainNavRef.value.resetIndex();\r\n    }\r\n\r\n    // drawer\r\n    /**\r\n     * @description: 设备模块切换设备类型\r\n     * @param {Pane} data\r\n     * @return {*}\r\n     */\r\n    function equipSwitchClick(data: Pane) {\r\n      drawerInfo.showList = true;\r\n      drawerInfo.drawerTitle = NAV_INFO[data.props.name].title;\r\n    }\r\n\r\n    // 电子围栏\r\n    const fenceInfoFormRef = ref();\r\n    // 打开电子围栏 通用\r\n    function openFenceDetail(type = 0) {\r\n      fenceInfo.visible = true;\r\n      fenceInfo.dialogType = type;\r\n      drawFenceInfo.clonePoints = [];\r\n      nextTick(() => {\r\n        (fenceInfoFormRef.value as IELForm).resetFields();\r\n        fenceInfo.form.chosenCamera = [];\r\n      });\r\n    }\r\n    // 点击新增电子围栏\r\n    function handleAddFence() {\r\n      openFenceDetail(0);\r\n    }\r\n    // 点击编辑电子围栏\r\n    let editFenceId = \"\"; // 编辑保存的id\r\n    async function handleEditFence(row: IAreaItem) {\r\n      // console.log(row);\r\n      openFenceDetail(1);\r\n      const { areaids, points, areaname } = row;\r\n      editFenceId = areaids;\r\n\r\n      const params = {\r\n        act: \"WHIHF7U1FtTjZORrI4h1611195385202\",\r\n        LayerIdS: areaids,\r\n        SceneNum: mapIdRef.value,\r\n      };\r\n      const res: unknown = await stageApi.getOnehAreaSetDeivce(params);\r\n      const { data } = res as IResponseCommon<ISetDeviceData>;\r\n\r\n      const deviceArr = JSON.parse(data.deviceitem) as ISetDeviceDataItem[];\r\n      deviceArr.forEach((item) => {\r\n        fenceInfo.form.chosenCamera.push(item.DeviceIdS);\r\n      });\r\n\r\n      fenceInfo.form.name = areaname;\r\n      drawFenceInfo.clonePoints = JSON.parse(points);\r\n    }\r\n    // 触发绘制电子围栏\r\n    function handleFenceDraw() {\r\n      // 隐藏两个dialog\r\n      fenceInfo.visible = false;\r\n      fenceListInfo.tableVisible = false;\r\n\r\n      // 绘制\r\n      drawFenceInfo.message = ElMessage({\r\n        showClose: true,\r\n        message: \"鼠标单击左键新增点，右键可完成绘制\",\r\n        type: \"warning\",\r\n        duration: 0,\r\n      });\r\n\r\n      drawFenceInfo.points = [];\r\n      status.isDrawFence = true;\r\n    }\r\n\r\n    // 新增/编辑 电子围栏 提交按钮点击事件\r\n    function handleSubmitFence() {\r\n      (fenceInfoFormRef.value as IELForm).validate(async (valid: boolean) => {\r\n        if (valid) {\r\n          const chooseDevice: ISetDeviceDataItem[] = fenceInfo.form.chosenCamera.map(\r\n            (item: string) => {\r\n              const index = fenceInfo.allMapCamera.findIndex((i) => i.dids === item);\r\n              return {\r\n                DeviceIdS: item,\r\n                DeviceType: fenceInfo.allMapCamera[index].dname,\r\n              };\r\n            }\r\n          );\r\n          const params: IAddEditFenceParams = {\r\n            act: \"i9YWieOBzym06JamZtI1586422307190\",\r\n            LayerIdS: fenceInfo.dialogType === 0 ? guid() : editFenceId,\r\n            SceneNum: mapIdRef.value,\r\n            CheckSourceID: JSON.stringify(\r\n              drawFenceInfo.clonePoints.map((item) => ({ X: item.x, Y: item.y }))\r\n            ),\r\n            DevicePointRelation:\r\n              fenceInfo.form.chosenCamera.length === 0\r\n                ? \"\"\r\n                : JSON.stringify(chooseDevice),\r\n            CheckSourceUnitName: fenceInfo.form.name,\r\n          };\r\n          const res: unknown = await stageApi.saveHArea(params);\r\n          const { result } = res as IResponseCommon<string>;\r\n          if (result.msg === \"操作成功\") {\r\n            ElMessage.success(result.msg);\r\n            fenceInfo.visible = false;\r\n            getAllHArea();\r\n          }\r\n        }\r\n      });\r\n    }\r\n\r\n    // 删除 电子围栏\r\n    async function handleDelFence(row: IAreaItem) {\r\n      const { areaids } = row;\r\n      const params = {\r\n        act: \"mYfPMH51aE2FMOzxiFd1586422236651\",\r\n        LayerIdS: areaids,\r\n        SceneNum: mapIdRef.value,\r\n      };\r\n      const res: unknown = await stageApi.delHArea(params);\r\n      console.log(res);\r\n      const { result } = res as IResponseCommon<string>;\r\n      if (result.msg) {\r\n        ElMessage.success(result.msg);\r\n        getAllHArea();\r\n      }\r\n    }\r\n\r\n    async function getRules(id: string) {\r\n      ruleListInfo.loading = true;\r\n      const params = {\r\n        act: \"N71kyUJz3OiP2MOZ6Ea1586415957754\",\r\n        LayerIdS: id,\r\n        SceneNum: mapIdRef.value,\r\n      };\r\n      const res: unknown = await stageApi.getRule(params);\r\n      const { data } = res as IResponseCommon<IRuleItem[]>;\r\n      ruleListInfo.allData = data.map((item) => ({\r\n        ...item,\r\n        labelType: formateRuleType(item.ptype),\r\n        loop: item.isloop ? \"是\" : \"否\",\r\n      }));\r\n      ruleListInfo.tableData = getPagination(ruleListInfo.allData, ruleListInfo.curpage);\r\n      ruleListInfo.total = data.length || 0;\r\n      console.log(data);\r\n      ruleListInfo.loading = false;\r\n    }\r\n\r\n    function ruleCurrentChange(page: number) {\r\n      ruleListInfo.loading = true;\r\n      ruleListInfo.tableData = getPagination(ruleListInfo.allData, page);\r\n      ruleListInfo.loading = false;\r\n    }\r\n\r\n    let editPoints = \"\";\r\n    let layerId = \"\"; // 区域编号\r\n    let layerName = \"\"; // 区域名称\r\n    async function handleSeeRules(row: IAreaItem) {\r\n      ruleListInfo.visiable = true;\r\n      const { areaids, points, areaname } = row;\r\n      editPoints = points;\r\n      layerId = areaids;\r\n      layerName = areaname;\r\n      getRules(areaids);\r\n    }\r\n\r\n    function fenceCurrentChange(page: number) {\r\n      fenceListInfo.loading = true;\r\n      fenceListInfo.tableData = getPagination(fenceListInfo.allData, page);\r\n      fenceListInfo.loading = false;\r\n    }\r\n\r\n    function openRule(type = 0) {\r\n      ruleItemDetail.visiable = true;\r\n      ruleItemDetail.dialogType = type;\r\n      ruleItemDetail.form.name = layerName;\r\n      ruleItemDetail.form.memo = \"\";\r\n      ruleItemDetail.form.isLoop = false;\r\n      ruleItemDetail.form.limitedTime = \"\";\r\n      ruleItemDetail.form.startTime = \"\";\r\n      ruleItemDetail.form.endTime = \"\";\r\n      ruleItemDetail.form.permitType = \"\";\r\n      nextTick(() => {\r\n        // ! 无效\r\n        // (ruleFormRef.value as IELForm).resetFields();\r\n        (ruleFormRef.value as IELForm).clearValidate();\r\n      });\r\n    }\r\n    // 新增规则\r\n    function handleAddRule() {\r\n      openRule(0);\r\n      nextTick(() => {\r\n        console.log(ruleItemDetail.form);\r\n      });\r\n    }\r\n    let ruleId = 0; // 编辑\r\n    async function handleEditRule(row: IRuleItem) {\r\n      openRule(1);\r\n      const { stime, ptype, memo, id, etime, isloop, limtime } = row;\r\n      ruleId = id;\r\n\r\n      const { startTime, endTime } = await getDateTime(isloop, stime, etime);\r\n\r\n      ruleItemDetail.form.memo = memo;\r\n      ruleItemDetail.form.isLoop = isloop;\r\n      ruleItemDetail.form.limitedTime = String(limtime);\r\n      ruleItemDetail.form.startTime = startTime;\r\n      ruleItemDetail.form.endTime = endTime;\r\n      ruleItemDetail.form.permitType = String(ptype);\r\n      console.log(ruleItemDetail.form);\r\n\r\n      // ? 有问题\r\n      // const obj = {\r\n      //   memo,\r\n      //   isLoop: isloop,\r\n      //   limitedTime: limtime,\r\n      //   startTime,\r\n      //   endTime,\r\n      //   permitType: String(ptype),\r\n      // };\r\n      //  Object.assign(ruleItemDetail.form, obj);\r\n    }\r\n\r\n    // 新增/编辑 规则 提交按钮点击事件\r\n    function handleSubmitRule() {\r\n      (ruleFormRef.value as IELForm).validate(async (valid: boolean) => {\r\n        if (valid) {\r\n          const {\r\n            memo,\r\n            isLoop,\r\n            limitedTime,\r\n            startTime,\r\n            endTime,\r\n            permitType,\r\n          } = ruleItemDetail.form;\r\n\r\n          const formateTime = (loop: boolean, time1: Date, time2: Date) => {\r\n            const formateStr = loop ? Hms : timeFormateStr;\r\n\r\n            return {\r\n              StartTime: dayjs(time1).format(formateStr),\r\n              EndTime: dayjs(time2).format(formateStr),\r\n            };\r\n          };\r\n\r\n          const { StartTime, EndTime } = formateTime(\r\n            isLoop,\r\n            startTime as Date,\r\n            endTime as Date\r\n          );\r\n\r\n          const params = {\r\n            act: \"QRZNk8BItBSJTT0ikWT1586422170736\",\r\n            LayerIdS: layerId,\r\n            SceneNum: mapIdRef.value,\r\n            ID: ruleItemDetail.dialogType === 0 ? 0 : ruleId,\r\n            CheckSourceUnitName: layerName,\r\n            CheckSourceID: editPoints,\r\n            Memo: memo,\r\n            RuleLocateType: 2,\r\n            PermitType: permitType,\r\n            IsLoopEveryDay: isLoop,\r\n            OwnUserType: \"0,8\",\r\n            OwnParam: \"\",\r\n            LimitedTime: limitedTime || \"0\",\r\n            StartTime,\r\n            EndTime,\r\n          };\r\n          const res: unknown = await stageApi.saveRule(params);\r\n          const { result } = res as IResponseCommon<string>;\r\n          if (result.msg) {\r\n            ElMessage.success(result.msg);\r\n            ruleItemDetail.visiable = false;\r\n            getRules(layerId);\r\n          }\r\n        }\r\n      });\r\n    }\r\n\r\n    // 删除某场景某个自定义区域中的某条规则\r\n    async function handleDelRule(row: IRuleItem) {\r\n      const { id } = row;\r\n      const params = {\r\n        act: \"nBpfTKDXs2nDV7y4dT41586415983980\",\r\n        LayerIdS: layerId,\r\n        SceneNum: mapIdRef.value,\r\n        ID: id,\r\n      };\r\n      const res: unknown = await stageApi.delRule(params);\r\n      const { result } = res as IResponseCommon<string>;\r\n      if (result.msg) {\r\n        ElMessage.success(result.msg);\r\n        getRules(layerId);\r\n      }\r\n    }\r\n\r\n    /**\r\n     * 查看基站/摄像头/标签详情\r\n     */\r\n    function showEquipDetails(data: any, type: string) {\r\n      visibleObj.detailsForm = true;\r\n      detailsForm.formTitle = getFormTitle(type);\r\n      detailsForm.formData = data;\r\n      detailsForm.x = 0;\r\n      detailsForm.y = 0;\r\n      contextmenuTypeRef.value = type;\r\n    }\r\n\r\n    function showDetails(type: string = contextmenuTypeRef.value) {\r\n      visibleObj.detailsForm = false;\r\n      detailsForm.formTitle = getFormTitle(contextmenuTypeRef.value);\r\n      console.log(type);\r\n      if (type === TYPES.labelList) {\r\n        // 人员 -> 页面上移动的标签\r\n        contextmenuTypeRef.value = TYPES.person;\r\n        detailsForm.formTitle = \"人员\";\r\n        console.log(\"activeTarget\", activeTarget);\r\n        const index = person.currentMap.findIndex(\r\n          (item) => item.TagId === activeTarget.attrs.id\r\n        );\r\n        if (index > -1) {\r\n          const personItem = person.currentMap[index];\r\n          console.log(\"personItem\", personItem);\r\n          detailsForm.formData = Object.assign(\r\n            {},\r\n            {\r\n              Username: personItem.name,\r\n              DeviceName: personItem.TagId,\r\n              // eslint-disable-next-line @typescript-eslint/camelcase\r\n              Personnel_category: \"\",\r\n              Position: \"\",\r\n              Fettle: \"\",\r\n            }\r\n          );\r\n          // 获取全部人员\r\n        } else {\r\n          ElMessage.info(\"该用户已下线\");\r\n        }\r\n      } else if (type === TYPES.camera || type === TYPES.basestation) {\r\n        const index = deviceAll.findIndex(\r\n          (item) => item.dids === activeTarget.attrs.name\r\n        );\r\n        console.log(\"camera || basestation\", deviceAll[index], index);\r\n        detailsForm.formData = deviceAll[index];\r\n        detailsForm.x = activeTarget.attrs.x;\r\n        detailsForm.y = activeTarget.attrs.y;\r\n        if (type === TYPES.camera) {\r\n          // 摄像头\r\n          const deviceInfo = JSON.parse(deviceAll[index].extinfo) as IDeviceInfo;\r\n          const { ChanelNum, IsYunTai, Password, UserName } = deviceInfo;\r\n          Object.assign(detailsForm.formData, {\r\n            ChanelNum,\r\n            IsYunTai,\r\n            Password,\r\n            UserName,\r\n          });\r\n        } else {\r\n          // 基站\r\n        }\r\n\r\n        // console.log(\"cameraInfo\", deviceInfo);\r\n      }\r\n\r\n      visibleObj.detailsForm = true;\r\n    }\r\n\r\n    /**\r\n     * @description: 调取实时监控 lfq\r\n     * @param {*} id\r\n     * @return {*}\r\n     */\r\n    async function popMonitorVideo(id: string | number) {\r\n      const params = {\r\n        act: \"fCGtP4nXdRZjr6TYeiN1611196242913\",\r\n        DeviceIdS: id,\r\n      };\r\n      const res: unknown = await commonApi.getCommonApi(params);\r\n      const { result, data } = res as any;\r\n      if (result.success) {\r\n        const active = true;\r\n        monitorListInfo.newMonitorList.push({\r\n          camera: data[0][0],\r\n          active: active,\r\n        });\r\n        monitorListInfo.monitorListFlag = true;\r\n      } else {\r\n        ElMessage.error(\"调取监控失败\");\r\n      }\r\n    }\r\n\r\n    /**\r\n     * @description: 调取历史监控 lfq\r\n     * @param {*} id\r\n     * @return {*}\r\n     */\r\n    async function popHistoryMonitorVideo(id: string | number) {\r\n      const params = {\r\n        act: \"fCGtP4nXdRZjr6TYeiN1611196242913\",\r\n        DeviceIdS: id,\r\n      };\r\n      const res: unknown = await commonApi.getCommonApi(params);\r\n\r\n      const { result, data } = res as any;\r\n      if (result.success) {\r\n        const active = true;\r\n        monitorListInfo.newHistoryMonitorList.push({\r\n          camera: data[0][0],\r\n          active: active,\r\n        });\r\n        monitorListInfo.historyMonitorListFlag = true;\r\n      } else {\r\n        ElMessage.error(\"调取历史监控失败\");\r\n      }\r\n    }\r\n\r\n    /**\r\n     * @description: 查看实时视频 lfq\r\n     * @param {*}\r\n     * @return {*}\r\n     */\r\n    function seeNowVideo(id?: string | number) {\r\n      const cid = id ? id : activeTarget.attrs.name;\r\n      popMonitorVideo(cid);\r\n      visibleObj.monitorListFlag = true;\r\n    }\r\n\r\n    // 关闭所有视频\r\n    function handleCloseAllVideo() {\r\n      monitorListInfo.newMonitorList.splice(0, monitorListInfo.newMonitorList.length);\r\n      visibleObj.monitorListFlag = false;\r\n      clearShadowColor();\r\n    }\r\n\r\n    // 关闭所有历史回放视频\r\n    function handleCloseAllHistoryVideo() {\r\n      monitorListInfo.newHistoryMonitorList.splice(\r\n        0,\r\n        monitorListInfo.newHistoryMonitorList.length\r\n      );\r\n      visibleObj.historyMonitorListFlag = false;\r\n      clearShadowColor();\r\n    }\r\n\r\n    /**\r\n     * @description: 查看历史视频 lfq\r\n     * @param {*}\r\n     * @return {*}\r\n     */\r\n    function seeHistoryVideo(id?: string | number) {\r\n      const cid = id ? id : activeTarget.attrs.name;\r\n      popHistoryMonitorVideo(cid);\r\n      visibleObj.historyMonitorListFlag = true;\r\n    }\r\n\r\n    /**\r\n     * @description: 监控列表 lfq\r\n     * @param {*} id\r\n     * @return {*}\r\n     */\r\n    function watchMonitorListPanelState(id: string | number) {\r\n      const index = monitorListInfo.newMonitorList.findIndex(\r\n        (item) => item.camera.id === id\r\n      );\r\n      monitorListInfo.newMonitorList[index].active = false;\r\n    }\r\n\r\n    /**\r\n     * @description: 历史监控列表 lfq\r\n     * @param {*} id\r\n     * @return {*}\r\n     */\r\n    function watchHistoryMonitorListPanelState(id: string | number) {\r\n      monitorListInfo.newHistoryMonitorList.forEach((value: any) => {\r\n        if (id === value.camera.id) {\r\n          value.active = false;\r\n        }\r\n      });\r\n    }\r\n    // ? 是否可抽离成组件\r\n    const trackPlaybackFormRef = ref(); // 轨迹回放的选择时间 form\r\n    function handleClickTrackPlayback() {\r\n      trackPlayback.show = true;\r\n    }\r\n    // 轨迹回放弹窗打开清空数据\r\n    function handleOpenContextmenu() {\r\n      clearShadowColor();\r\n      (trackPlaybackFormRef.value as IELForm).resetFields();\r\n    }\r\n\r\n    function handleClickSeeTrackPlayback() {\r\n      (trackPlaybackFormRef.value as IELForm).validate(async (valid: boolean) => {\r\n        if (valid) {\r\n          const { sTime, eTime } = getTrackTime(\r\n            trackPlayback.form.date as Date,\r\n            trackPlayback.form.time\r\n          );\r\n          console.log({ sTime, eTime });\r\n          console.log(cachePersonObj[activeTarget.attrs.id]);\r\n          const index = person.currentMap.findIndex(\r\n            (item) => item.TagId === activeTarget.attrs.id\r\n          );\r\n          const personItem = person.currentMap[index];\r\n          console.log(personItem);\r\n          const params = {\r\n            act: \"IFO7HGpIsXDYz62Y0rx1611632994969\",\r\n            PersonnelgId: personItem.ObjData.BindObjSysNum,\r\n            sTime,\r\n            eTime,\r\n          };\r\n          const res: unknown = await commonApi.getCommonApi(params);\r\n          const { data } = res as IResponseCommon<TTrackRes>;\r\n          console.log(\"轨迹回放返回值\", data);\r\n          if (data.length === 0) {\r\n            ElMessage.info(\"该时间段没有运动轨迹\");\r\n          } else {\r\n            if ((data[0] as any).Text) {\r\n              const r = data as ITrackErrorItem[];\r\n              ElMessage.error(r[0].Text);\r\n            } else {\r\n              trackPlayback.steps = data as ITrackItem[];\r\n              trackPlayback.show = false;\r\n              // 动画\r\n              const index = person.currentMap.findIndex(\r\n                (item) => item.TagId === activeTarget.attrs.id\r\n              );\r\n              if (index > -1) {\r\n                const len = trackPlayback.steps.length;\r\n                playbackObj.len = len;\r\n                const sTime = dayjs(trackPlayback.steps[0].LocateTriggerTime).format(Hms);\r\n                const eTime = dayjs(\r\n                  trackPlayback.steps[len - 1].LocateTriggerTime\r\n                ).format(Hms);\r\n                playbackObj.sTime = sTime;\r\n                playbackObj.eTime = eTime;\r\n                initPerson(person.currentMap[index], 1);\r\n              }\r\n            }\r\n          }\r\n        }\r\n      });\r\n    }\r\n    let playRate = 1.0;\r\n    function changeRate(rate: string) {\r\n      playRate = Number(rate);\r\n    }\r\n    function togglePlay(isPlay: boolean) {\r\n      playbackObj.isPlay = isPlay;\r\n      if (isPlay) {\r\n        trackPlayback.tween.play();\r\n      } else {\r\n        trackPlayback.tween.pause();\r\n      }\r\n    }\r\n    // 更新轨迹回放中的点 防止点过多\r\n    function updatePoint(index: number) {\r\n      trackPlaybackLinePos = [];\r\n      const steps = cloneDeep(trackPlayback.steps).splice(0, index);\r\n\r\n      steps.forEach((item) => {\r\n        const { x, y } = strToPos(item.LocatePoint);\r\n        trackPlaybackLinePos.push(x + personImageWH.width / 2, y + personImageWH.height);\r\n      });\r\n    }\r\n    /** 用户点击进度条位置 */\r\n    function changeProcess(index: number) {\r\n      playbackObj.currentIndex = index;\r\n      // 线\r\n      // 先清空\r\n      trackPlaybackLinePos = [];\r\n\r\n      // 拿到前面运动的点\r\n      if (index !== 0) {\r\n        updatePoint(index);\r\n      }\r\n\r\n      togglePlay(true);\r\n    }\r\n\r\n    // 结束轨迹回放\r\n    function playbackClose() {\r\n      trackPlayback.tween = null;\r\n      trackPlayback.message?.close();\r\n      trackPlayback.steps = [];\r\n      trackPlayback.lineNode?.destroy();\r\n      trackPlaybackLinePos = [];\r\n      cachePlaybackPerson?.destroy();\r\n      status.isPlayBack = false;\r\n    }\r\n\r\n    // 绘制轨迹回放的线\r\n    function initMoveLine() {\r\n      trackPlayback.lineNode?.destroy();\r\n      trackPlayback.lineNode = new Konva.Line({\r\n        points: trackPlaybackLinePos,\r\n        stroke: \"rgba(0,0,0,.8)\",\r\n        strokeWidth: 3,\r\n        lineCap: \"round\",\r\n        lineJoin: \"round\",\r\n        name: \"moveLine\",\r\n      });\r\n      operationLayer.add(trackPlayback.lineNode);\r\n      trackPlayback.lineNode.moveToTop();\r\n      trackPlayback.lineNode.moveDown();\r\n      batchDraw();\r\n    }\r\n\r\n    // 轨迹回放动画\r\n    async function trackPlaybackTween(node: any, steps: ITrackItem[]) {\r\n      // 手动结束判断\r\n      if (!status.isPlayBack) {\r\n        return;\r\n      }\r\n      // 判断轨迹回放是否结束\r\n      if (steps.length - 1 === playbackObj.currentIndex) {\r\n        playbackObj.isPlay = false;\r\n        ElMessage.success(\"轨迹回放结束\");\r\n        return;\r\n      }\r\n\r\n      const { SceneNum } = steps[0];\r\n\r\n      const animate = () => {\r\n        const { LocatePoint, LocateTriggerTime } = steps[\r\n          playbackObj.currentIndex\r\n        ] as ITrackItem;\r\n        playbackObj.currentTime = LocateTriggerTime.replace(\"T\", \" \");\r\n        playbackObj.currentIndex++;\r\n        const { x, y } = strToPos(LocatePoint);\r\n        trackPlayback.tween = new Konva.Tween({\r\n          node,\r\n          duration: 0.2 / playRate,\r\n          x,\r\n          y,\r\n          onUpdate: () => {\r\n            const moveX = node.x() + personImageWH.width / 2;\r\n            const moveY = node.y() + personImageWH.height;\r\n            trackPlaybackLinePos.push(moveX, moveY);\r\n            // trackPlaybackLinePos.push(node.x(), node.y());\r\n            // 5 个点产生了204 / 2 个坐标\r\n            initMoveLine();\r\n          },\r\n          onFinish: () => {\r\n            updatePoint(playbackObj.currentIndex);\r\n            trackPlaybackTween(node, steps);\r\n            node.moveToTop();\r\n          },\r\n        });\r\n        trackPlayback.tween.play();\r\n      };\r\n\r\n      if (SceneNum === mapIdRef.value) {\r\n        animate();\r\n      } else {\r\n        ElMessage.info(\"检测到当前人物的初始位置不在该页面中，正在切换中...\");\r\n        // eslint-disable-next-line @typescript-eslint/no-use-before-define\r\n        await changeMap(SceneNum);\r\n        await trackPlaybackTween(node, steps);\r\n      }\r\n    }\r\n\r\n    const followObj = reactive({\r\n      message: null as any,\r\n    });\r\n    // 实时跟踪人员 tagId\r\n    let followPersonId = \"-1\";\r\n    function personFollow() {\r\n      const index = person.currentMap.findIndex(\r\n        (item) => item.TagId === activeTarget.attrs.id\r\n      );\r\n      if (index > -1) {\r\n        const personItem = person.currentMap[index];\r\n        status.isFollowing = true;\r\n        followPersonId = activeTarget.attrs.id;\r\n        cacheFollowingPerson = currentContextmenu;\r\n        followObj.message = ElMessage({\r\n          type: \"warning\",\r\n          message: `${personItem.name}实时跟踪中...`,\r\n          duration: 0,\r\n        });\r\n      } else {\r\n        followPersonId = \"-1\";\r\n        ElMessage.info(\"该用户已下线\");\r\n      }\r\n    }\r\n\r\n    // 左侧边栏\r\n    const leftPannelSearch = shallowRef<string>(\"\");\r\n    // 用户搜索显示的数据 layer + 标签（人员）\r\n    const userSearchRes = ref<any[]>([]);\r\n    // 所有集合\r\n    const allSearchArr = ref<any[]>([]);\r\n    // 过滤出的 基站 和 摄像头 由图层过滤\r\n    const searchDevice = computed(() => {\r\n      return allLayer.value.filter((item) => !item.ltype.includes(\"标注\"));\r\n    });\r\n\r\n    watch(\r\n      [() => searchDevice.value.length,()=>person.all.length],\r\n      () => {\r\n        allSearchArr.value = [...searchDevice.value, ...person.all];\r\n        // eslint-disable-next-line @typescript-eslint/no-use-before-define\r\n        querySearch(leftPannelSearch.value);\r\n      }\r\n    );\r\n\r\n    async function getAllDevice() {\r\n      const params = {\r\n        act: \"Vd95kIrsbON1Z6H27eM1586422577340\",\r\n        TypeCodeChar: \"\",\r\n      };\r\n      const res: unknown = await stageApi.getAllDevice(params);\r\n\r\n      const { data } = res as IResponseCommon<IDeviceItem[]>;\r\n      console.log(\"getAllDevice\", data);\r\n\r\n      deviceAll = data || [];\r\n\r\n      fenceInfo.allMapCamera = getAllMapCamera();\r\n      console.log(fenceInfo.allMapCamera);\r\n\r\n      // 保存所有设备信息到localStorage中\r\n      setAllDevice(deviceAll);\r\n    }\r\n\r\n    function querySearch(name: string) {\r\n      if (name !== \"\" && name !== null) {\r\n        // allSearchArr.value = [...searchDevice.value, ...person.all];\r\n        // console.log(allSearchArr.value)\r\n        userSearchRes.value = allSearchArr.value.filter((item) =>\r\n          item.ltype.includes(name)\r\n        );\r\n      } else {\r\n        userSearchRes.value = allSearchArr.value;\r\n      }\r\n    }\r\n\r\n    // 左侧边栏 switch change 事件\r\n    function controlButtonChange(newVal: boolean, code: string) {\r\n      if (code === \"nav\") {\r\n        visibleObj.nav = newVal;\r\n      }\r\n\r\n      if (code === \"camera\") {\r\n        Object.keys(cacheCameraObj).forEach((key) => {\r\n          cacheCameraObj[key].visible(newVal);\r\n          batchDraw();\r\n        });\r\n      }\r\n      if (code === \"basestation\") {\r\n        Object.keys(cacheBasestationObj).forEach((key) => {\r\n          cacheBasestationObj[key].visible(newVal);\r\n          batchDraw();\r\n        });\r\n      }\r\n\r\n      if (code === \"map\") {\r\n        visibleObj.map = newVal;\r\n      }\r\n    }\r\n\r\n    function closeMapChoosen() {\r\n      visibleObj.map = false;\r\n      const index = controlButtonList.findIndex((item) => item.code === \"map\");\r\n      controlButtonList[index].show = false;\r\n    }\r\n\r\n    function changeMap(mapId: string) {\r\n      console.log(\"mapId\", mapId);\r\n\r\n      if (mapId === mapListRef.value[0].snum) {\r\n        router.push(\"/3d\");\r\n        return;\r\n      }\r\n      if (mapIdRef.value === mapId) {\r\n        return;\r\n      }\r\n      mapIdRef.value = mapId;\r\n      // 1. 背景图更新\r\n      updataBgImage(mapId);\r\n      // 2. 所有绘制的 shape 销毁，重新绘制新的 getAllLayer() 函数\r\n      // eslint-disable-next-line @typescript-eslint/no-use-before-define\r\n      destroyLayer();\r\n      // 2.1 摄像头\r\n      getCurrentMapCamera(mapId);\r\n      // 2.2 基站\r\n      getCurrentMapBasestation(mapId);\r\n      // 2.3 气泡\r\n      getCurrentMapBubble(mapId);\r\n      // 2.4 电子围栏\r\n      getCurrentMapArea(mapId);\r\n      // 2.5 人员\r\n      getCurrentMapPerson(mapId);\r\n      // 2.6 操作图层\r\n      operationLayer.destroyChildren();\r\n      setLoadSNum(mapId);\r\n    }\r\n\r\n    // 左侧边栏 全局搜索\r\n    async function searchChange(e: string) {\r\n      console.log(e);\r\n      if (!e) return;\r\n      const index = userSearchRes.value.findIndex((item) => e === item.lids);\r\n\r\n      // 防止用户下线的情况\r\n      if (index > -1) {\r\n        console.log(userSearchRes.value[index]);\r\n        const searchItem = userSearchRes.value[index];\r\n        const mapNum = searchItem.map ? searchItem.map : searchItem.snum;\r\n\r\n        if (mapNum === mapIdRef.value) {\r\n          const { x, y } = locateIcon({ x: searchItem.x, y: searchItem.y });\r\n          console.log({ x, y });\r\n          (stage as Stage).setAttrs({\r\n            x: x * state.scale,\r\n            y: y * state.scale - titleHeight,\r\n          });\r\n          // todo 高亮 分类型：人员 | layer\r\n          batchDraw();\r\n          console.log({ x: (stage as Stage).x(), y: (stage as Stage).y() });\r\n        } else {\r\n          ElMessageBox.confirm(\"选中的目标不在当前地图，是否跳转？\", \"提示\", {\r\n            confirmButtonText: \"确定\",\r\n            cancelButtonText: \"取消\",\r\n            type: \"info\",\r\n          })\r\n            .then(() => {\r\n              changeMap(mapNum);\r\n            })\r\n            .catch((err) => {\r\n              ElMessage.info(\"已取消跳转\");\r\n              console.error(err);\r\n\r\n              leftPannelSearch.value = \"\";\r\n            });\r\n        }\r\n      } else {\r\n        leftPannelSearch.value = \"\";\r\n        ElMessage.info(\"该用户已下线\");\r\n      }\r\n    }\r\n\r\n    // ws 相关\r\n    let locationWs: Nullable<WebSocket> = null;\r\n    function initLocationWs() {\r\n      const url = wsUrl.location;\r\n      locationWs = new WebSocket(url);\r\n      locationWs.onmessage = async (event) => {\r\n        const data = JSON.parse(event.data);\r\n        if (data.ActionCode === EpauletActionCode.HTagInit) {\r\n          console.log(\"init\", data.Data);\r\n          person.all = (data.Data as IPersonArrItem[]).map((item) =>\r\n            generatePersonItem(item)\r\n          );\r\n\r\n          getCurrentMapPerson(mapIdRef.value);\r\n        }\r\n\r\n        if (data.ActionCode === EpauletActionCode.HTagOnline) {\r\n          const personData = data.Data as IPersonArrItem;\r\n          // 判断上线的人是否存在\r\n          const isIn = person.all.some((item) => item.TagId === personData.TagId);\r\n          if (isIn) return;\r\n          const posItem = generatePersonItem(personData);\r\n          person.all.push(posItem);\r\n          if (mapIdRef.value === personData.LocationSceneId) {\r\n            person.currentMap.push(posItem);\r\n            initPerson(posItem);\r\n          }\r\n          ElMessage.info(`${posItem.name}上线`);\r\n        }\r\n\r\n        if (\r\n          data.ActionCode === EpauletActionCode.HTagOffline ||\r\n          data.ActionCode === EpauletActionCode.HTagLogOff\r\n        ) {\r\n          // 下线返的只有 TagId 有数据\r\n          const personItem = data.Data as IPersonArrItem;\r\n          // console.log(\"下线data=>\", personItem);\r\n\r\n          const index = person.all.findIndex((item) => item.TagId === personItem.TagId);\r\n          if (index > -1) {\r\n            if (person.all[index].map === mapIdRef.value) {\r\n              const currntMapIndex = person.currentMap.findIndex(\r\n                (item) => item.TagId === personItem.TagId\r\n              );\r\n              if (currntMapIndex > -1) {\r\n                person.currentMap.splice(currntMapIndex, 1);\r\n                const node = cachePersonObj[personItem.TagId];\r\n                if (\r\n                  personItem.TagId ===\r\n                  ((cacheFollowingPerson as Group)?.children[0] as Shape).attrs.id\r\n                ) {\r\n                  status.isFollowing = false;\r\n                  ElMessage.info(\"该用户已下线，轨迹跟踪结束\");\r\n                }\r\n                node?.destroy();\r\n                delete cachePersonObj[personItem.TagId];\r\n                batchDraw();\r\n              }\r\n            }\r\n            const name = person.all[index].name;\r\n            person.all.splice(index, 1);\r\n            if (data.ActionCode === EpauletActionCode.HTagOffline) {\r\n              ElMessage.info(`${name}下线`);\r\n            }\r\n          }\r\n        }\r\n\r\n        if (data.ActionCode === EpauletActionCode.HTagMove) {\r\n          const personItem = data.Data as IPersonArrItem;\r\n          const posObj = generatePersonItem(personItem);\r\n          // 判断所有人中是否有当前人物\r\n          const index = person.all.findIndex((item) => item.TagId === posObj.TagId);\r\n\r\n          // const { x: bx, y: by } = person.all[index];\r\n          if (index > -1) {\r\n            // x,y 不变啥也不做\r\n            const item = person.all[index];\r\n            if (item.x === posObj.x && item.y === posObj.y) {\r\n              return;\r\n            }\r\n            Object.assign(item, posObj);\r\n          }\r\n\r\n          // 判断是否是当前地图\r\n          if (personItem.LocationSceneId === mapIdRef.value) {\r\n            const node = cachePersonObj[personItem.TagId];\r\n            node?.to({\r\n              x: posObj.x,\r\n              y: posObj.y,\r\n              duration: 0.2,\r\n            });\r\n            // 判断实时跟踪\r\n            if (status.isFollowing && followPersonId === posObj.TagId) {\r\n              const gx = -(posObj.x * state.scale - window.innerWidth / 2);\r\n              const gy = -(\r\n                posObj.y * state.scale -\r\n                (window.innerHeight - titleHeight) / 2\r\n              );\r\n              (stage as Stage).setAttrs({\r\n                x: gx,\r\n                y: gy,\r\n              });\r\n            }\r\n            batchDraw();\r\n          }\r\n        }\r\n\r\n        if (data.ActionCode === EpauletActionCode.HLayerGroupStatistics) {\r\n          // console.log(\"HLayerGroupStatistics\", data.Data);\r\n          const list = (data.Data as IBubbleDataItem[]) || [];\r\n          list.forEach((item, index: number) => {\r\n            cacheBubbleObj[item.LayerIdS].text[index].text(\r\n              String(item.TagDataList.length || 0)\r\n            );\r\n            cacheBubbleObj[item.LayerIdS].tagList[index] = item.TagDataList || [];\r\n          });\r\n          batchDraw();\r\n        }\r\n\r\n        if (data.ActionCode === EpauletActionCode.HWaterAlarm) {\r\n          console.log(\"落水报警\", data.Data);\r\n        }\r\n        if (data.ActionCode === EpauletActionCode.HSceneStatistics) {\r\n          // console.log(\"每个地图人员数据\", data.Data);\r\n          data.Data.forEach((item: any, index: number) => {\r\n            mapListRef.value[index].pnum = item.TagDataList.length || 0;\r\n          });\r\n        }\r\n      };\r\n\r\n      locationWs.onclose = () => {\r\n        //\r\n      };\r\n    }\r\n    let alarmWs: Nullable<WebSocket> = null;\r\n    const wsAlarmItem = shallowRef<Nullable<IGetAlarmItem>>(null);\r\n    const cancelAlarmId = shallowRef<string>(\"\");\r\n    function initAlarmWs() {\r\n      const url = wsUrl.alarm;\r\n      alarmWs = new WebSocket(url);\r\n      alarmWs.onmessage = async (event) => {\r\n        const data = JSON.parse(event.data);\r\n        // console.log(\"报警数据=>\", data);\r\n        const getData = JSON.parse(data.data);\r\n        // 收到报警\r\n        if (data.actcode === wsAlarmType.getAlarm) {\r\n          const res = getData as IGetAlarmItem;\r\n          // console.log(\"收到报警数据\", res);\r\n          wsAlarmItem.value = res;\r\n          ElMessage.info(\"有新的报警，请及时处理\");\r\n          if (warningWidth.value === warningListWidth) {\r\n            warningWidth.value = \"0\";\r\n          }\r\n        }\r\n\r\n        // 取消报警\r\n        if (data.actcode === wsAlarmType.cancelAlarm) {\r\n          const res = getData as string;\r\n          // console.log(\"收到取消报警数据\", res);\r\n          cancelAlarmId.value = res;\r\n        }\r\n      };\r\n    }\r\n\r\n    function showWarningList() {\r\n      warningWidth.value =\r\n        warningWidth.value !== warningListWidth ? warningListWidth : \"0\";\r\n    }\r\n\r\n    async function getAllAlarmType() {\r\n      const params = {\r\n        act: \"E83yVQOUUMYKt6jRYRI1586428010174\",\r\n      };\r\n      const res: unknown = await alarmApi.getAllAlarmType(params);\r\n      const { data } = res as IResponseCommon<IAlarmType[]>;\r\n      alarmType.value = data.map((item) => ({\r\n        label: item.alarmtype,\r\n        value: item.alarmtype,\r\n      })) as ISelectOption[];\r\n    }\r\n\r\n    /**\r\n     * @description: 电子围栏 点击列中 切换 显示\r\n     * @param {*} show 切换后的值\r\n     * @param {*} areaids 区域id\r\n     * @return {*}\r\n     */\r\n    function changeAreaVisible(show: boolean, areaids: string) {\r\n      // 找到当前视图中的 绘制区域\r\n      const group = cacheAreaObj[areaids];\r\n      group.visible(show);\r\n      // 测试了其他的是指向类型 不用手动更新\r\n      batchDraw();\r\n      ElMessage.success(\"操作成功\");\r\n    }\r\n    // 显示 | 隐藏 当前地图电子围栏\r\n    function toggleAllFenceVisible(show: boolean) {\r\n      fenceListInfo.allData.forEach((item) => {\r\n        if (item.show !== show) {\r\n          item.show = show;\r\n          cacheAreaObj[item.areaids].visible(show);\r\n        }\r\n      });\r\n      batchDraw();\r\n      ElMessage.success(\"操作成功\");\r\n    }\r\n\r\n    // 清空数据 和 删除 shape\r\n    function destroyLayer(type: TDestoryType = \"all\") {\r\n      const destroy = {\r\n        layer: () => {\r\n          // 摄像头\r\n          allGroup.cameraGroup.destroyChildren();\r\n          for (const key in cacheCameraObj) {\r\n            delete cacheCameraObj[key];\r\n          }\r\n          // 基站\r\n          allGroup.basestationGroup.destroyChildren();\r\n          for (const key in cacheBasestationObj) {\r\n            delete cacheCameraObj[key];\r\n          }\r\n          // 气泡\r\n          allGroup.locateBubbleGroup.destroyChildren();\r\n          for (const key in cacheBubbleObj) {\r\n            delete cacheBubbleObj[key];\r\n          }\r\n        },\r\n        area: () => {\r\n          allGroup.fenceGroup.destroyChildren();\r\n          for (const key in cacheAreaObj) {\r\n            delete cacheAreaObj[key];\r\n          }\r\n        },\r\n        person: () => {\r\n          allGroup.personGroup.destroyChildren();\r\n          for (const key in cachePersonObj) {\r\n            delete cachePersonObj[key];\r\n          }\r\n        },\r\n      };\r\n      if (type === \"all\") {\r\n        Object.keys(destroy).map((func) => {\r\n          destroy[func]();\r\n        });\r\n      } else {\r\n        destroy[type]();\r\n      }\r\n    }\r\n\r\n    function handleCloseFollow() {\r\n      status.isFollowing = false;\r\n      followObj.message?.close();\r\n      ((cacheFollowingPerson as Group).children[0] as Shape)?.shadowColor(\r\n        DEFAULT_COLORS.TRANSPARENT\r\n      );\r\n      batchDraw();\r\n    }\r\n\r\n    // 报警详情中 点击 查看位置 定位\r\n    async function handleLocate() {\r\n      console.log(alarmInfo.form);\r\n      await changeMap(alarmInfo.form.ShowSceneNum);\r\n      alarmInfo.visible = false;\r\n      const { x, y } = strToPos(alarmInfo.form.SourcePointNum);\r\n      (stage as Stage).setAttrs({\r\n        x: -(x * state.scale - window.innerWidth / 2),\r\n        y: -(y * state.scale - (window.innerHeight - titleHeight) / 2),\r\n      });\r\n      initAlarmIcon({ x, y, id: alarmInfo.form.Id });\r\n      batchDraw();\r\n    }\r\n\r\n    // 最后\r\n    // window resize\r\n    function handleWindowResize() {\r\n      if (!cacheBgImage) return;\r\n      state.scale = Number((window.innerWidth / cacheBgImage.width()).toFixed(2));\r\n      scaleBoundary.minScale = state.scale;\r\n      state.sx = 0;\r\n      state.sy = 0;\r\n      const attrs = {\r\n        x: state.sx,\r\n        y: state.sy,\r\n        width: window.innerWidth,\r\n        height: window.innerHeight - titleHeight,\r\n        scale: {\r\n          x: state.scale,\r\n          y: state.scale,\r\n        },\r\n      };\r\n      (stage as Stage).setAttrs(attrs);\r\n      batchDraw();\r\n    }\r\n\r\n    const debounceRem = debounce(computedRem, 100);\r\n    const debounceResize = debounce(handleWindowResize, 100);\r\n\r\n    onMounted(() => {\r\n      getAllMap();\r\n      getAllAlarmType();\r\n      computedRem();\r\n      window.addEventListener(\"resize\", debounceRem);\r\n      window.addEventListener(\"resize\", debounceResize);\r\n    });\r\n\r\n    onUnmounted(() => {\r\n      clickTimer && clearTimeout(clickTimer);\r\n      locationWs?.close();\r\n      alarmWs?.close();\r\n      window.removeEventListener(\"resize\", debounceRem);\r\n      document.documentElement.style.fontSize = \"\";\r\n      window.removeEventListener(\"resize\", debounceResize);\r\n    });\r\n\r\n    return {\r\n      warningWidth,\r\n      showWarningList,\r\n      mapIdRef,\r\n      mapNameRef,\r\n      mapListRef,\r\n      showDetails,\r\n      mainNavRef,\r\n      visibleObj,\r\n      status,\r\n      showMenu,\r\n      drawerInfo,\r\n      fenceInfo,\r\n      fenceListInfo,\r\n      ruleListInfo,\r\n      ruleFormRef,\r\n      ruleItemDetail,\r\n      types: TYPES,\r\n      navClick,\r\n      resetNavIndex,\r\n      equipSwitchClick,\r\n      fenceInfoFormRef,\r\n      handleAddFence,\r\n      handleFenceDraw,\r\n      handleEditFence,\r\n      handleSubmitFence,\r\n      handleDelFence,\r\n      fenceCurrentChange,\r\n      drawFenceInfo,\r\n      handleRevokeFence,\r\n      handleRedrawFence,\r\n      handleCancelDrawFence,\r\n      handleFinishDrawFence,\r\n      contextmenuTypeRef,\r\n      contxtmenuPosition,\r\n      contextmenuList,\r\n      detailsForm,\r\n      trackPlayback,\r\n      hideDetails,\r\n      handleClickTrackPlayback,\r\n      handleOpenContextmenu,\r\n      handleClickSeeTrackPlayback,\r\n      seeNowVideo,\r\n      seeHistoryVideo,\r\n      handleCloseAllVideo,\r\n      handleCloseAllHistoryVideo,\r\n      popMonitorVideo,\r\n      popHistoryMonitorVideo,\r\n      watchMonitorListPanelState,\r\n      watchHistoryMonitorListPanelState,\r\n      monitorListInfo,\r\n      showEquipDetails,\r\n      alarmType,\r\n      alarmForm,\r\n      transferProps,\r\n      transferData,\r\n      handleSeeRules,\r\n      handleAddRule,\r\n      handleEditRule,\r\n      handleSubmitRule,\r\n      handleDelRule,\r\n      areaRulesOption,\r\n      ruleCurrentChange,\r\n      ruleDisabledDate,\r\n      timerPickerChange,\r\n      ruleItemDetailRule,\r\n      changeAreaVisible,\r\n      toggleAllFenceVisible,\r\n      layerPerson,\r\n      layerPosition,\r\n      controlButtonList,\r\n      controlButtonChange,\r\n      closeMapChoosen,\r\n      changeMap,\r\n      leftPannelSearch,\r\n      querySearch,\r\n      searchChange,\r\n      searchDevice,\r\n      person,\r\n      userSearchRes,\r\n      alarmInfo,\r\n      alarmListInfo,\r\n      alarmCurrentChange,\r\n      getAlarmListByCondition,\r\n      handleHandleAlarm,\r\n      alarmHandleSubmit,\r\n      getBuildByNum,\r\n      showAlarmDetail,\r\n      getHandleExample,\r\n      wsAlarmItem,\r\n      cancelAlarmId,\r\n      getAlarmTotal,\r\n      getAlarmUnHandle,\r\n      handleTypeList,\r\n      handleExample,\r\n      trackPlaybackFormRef,\r\n      playbackObj,\r\n      changeRate,\r\n      togglePlay,\r\n      changeProcess,\r\n      playbackClose,\r\n      personFollow,\r\n      getMapByNum,\r\n      imgUrl,\r\n      handleCloseFollow,\r\n      handleLocate,\r\n    };\r\n  },\r\n});\r\n","import { render } from \"./index.vue?vue&type=template&id=3bab4490&scoped=true\"\nimport script from \"./index.vue?vue&type=script&lang=ts\"\nexport * from \"./index.vue?vue&type=script&lang=ts\"\n\nimport \"./style/index.scss?vue&type=style&index=0&id=3bab4490&lang=scss&scoped=true\"\nscript.render = render\nscript.__scopeId = \"data-v-3bab4490\"\n\nexport default script","import { render } from \"./index.vue?vue&type=template&id=1a742b00&scoped=true\"\nimport script from \"./index.vue?vue&type=script&lang=js\"\nexport * from \"./index.vue?vue&type=script&lang=js\"\n\nimport \"./index.vue?vue&type=style&index=0&id=1a742b00&lang=scss&scoped=true\"\nscript.render = render\nscript.__scopeId = \"data-v-1a742b00\"\n\nexport default script","/*\r\n * @Description:\r\n * @Author: huxianc\r\n * @Date: 2020-12-11 10:04:13\r\n * @LastEditors: huxianc\r\n * @LastEditTime: 2021-02-02 11:14:54\r\n */\r\nimport { createRouter, createWebHashHistory, RouteRecordRaw } from \"vue-router\";\r\nimport Home from \"../views/Home/index.vue\";\r\n\r\nconst routes: Array<RouteRecordRaw> = [\r\n  {\r\n    path: \"/\",\r\n    name: \"Home\",\r\n    component: Home\r\n  },\r\n  {\r\n    path: \"/login\",\r\n    name: \"Login\",\r\n    component: () =>\r\n      import(/* webpackChunkName: \"login\" */ \"../views/login/index.vue\")\r\n  },\r\n  {\r\n    path: \"/3d\",\r\n    name: \"3D\",\r\n    component: () =>\r\n      import(/* webpackChunkName: \"three\" */ \"../views/three/index.vue\")\r\n  }\r\n];\r\n\r\nconst router = createRouter({\r\n  history: createWebHashHistory(),\r\n  routes,\r\n  scrollBehavior(to, from, savedPosition) {\r\n    if (savedPosition) {\r\n      return savedPosition;\r\n    } else {\r\n      return { top: 0 };\r\n    }\r\n  }\r\n});\r\n\r\nexport default router;\r\n","/*\r\n * @Description:\r\n * @Author: huxianc\r\n * @Date: 2021-01-04 14:02:04\r\n * @LastEditors: huxianc\r\n * @LastEditTime: 2021-01-04 15:19:58\r\n */\r\n\r\ninterface ISettings {\r\n  title: string;\r\n}\r\nconst settings: ISettings = {\r\n  title: \"人员定位及落水报警系统\"\r\n};\r\n\r\nexport default settings;\r\n","/*\r\n * @Description:\r\n * @Author: huxianc\r\n * @Date: 2021-01-04 14:14:24\r\n * @LastEditors: huxianc\r\n * @LastEditTime: 2021-01-19 16:16:25\r\n */\r\nimport router from \"./router\";\r\nimport { RouteLocationNormalized } from \"vue-router\";\r\nimport NProgress from \"nprogress\"; // progress bar\r\nimport \"nprogress/nprogress.css\"; // progress bar\r\nimport defaultSettings from \"./settings\";\r\nimport { getToken } from \"./utils/auth\";\r\n\r\nconst title = defaultSettings.title;\r\nconst getPageTitle = (pageTitle: string) => {\r\n  if (pageTitle) {\r\n    return `${pageTitle} - ${title}`;\r\n  }\r\n  return `${title}`;\r\n};\r\n\r\nconst whiteList = [\"/login\"];\r\n\r\nrouter.beforeEach(\r\n  async (to: RouteLocationNormalized, _: RouteLocationNormalized) => {\r\n    NProgress.start();\r\n\r\n    document.title = getPageTitle(to.meta.title);\r\n\r\n    const hasToken = getToken();\r\n\r\n    if (hasToken) {\r\n      if (to.path === \"/login\") {\r\n        return \"/\";\r\n      }\r\n    } else {\r\n      if (whiteList.includes(to.path)) {\r\n        return true;\r\n      } else {\r\n        return `/login?redirect=${to.path}`;\r\n      }\r\n    }\r\n  }\r\n);\r\n\r\nrouter.afterEach(to => {\r\n  NProgress.done();\r\n});\r\n","<!--\r\n * @Description: \r\n * @Author: huxianc\r\n * @Date: 2020-12-11 10:04:13\r\n * @LastEditors: huxianc\r\n * @LastEditTime: 2020-12-24 14:38:41\r\n-->\r\n<template>\r\n  <router-view></router-view>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  name: \"App\"\r\n};\r\n</script>\r\n","import { render } from \"./App.vue?vue&type=template&id=fbb75044\"\nimport script from \"./App.vue?vue&type=script&lang=js\"\nexport * from \"./App.vue?vue&type=script&lang=js\"\nscript.render = render\n\nexport default script","/*\r\n * @Description:\r\n * @Author: huxianc\r\n * @Date: 2021-01-06 16:44:07\r\n * @LastEditors: liufuqiang\r\n * @LastEditTime: 2021-02-01 16:42:26\r\n */\r\nimport \"dayjs/locale/zh-cn\";\r\nimport locale from \"element-plus/lib/locale\";\r\nimport lang from \"element-plus/lib/locale/lang/zh-cn\";\r\nimport {\r\n  // ElAlert,\r\n  // ElAside,\r\n  // ElAutocomplete,\r\n  // ElAvatar,\r\n  // ElBacktop,\r\n  // ElBadge,\r\n  // ElBreadcrumb,\r\n  // ElBreadcrumbItem,\r\n  ElButton,\r\n  // ElButtonGroup,\r\n  // ElCalendar,\r\n  // ElCard,\r\n  // ElCarousel,\r\n  // ElCarouselItem,\r\n  // ElCascader,\r\n  // ElCascaderPanel,\r\n  ElCheckbox,\r\n  ElCheckboxButton,\r\n  ElCheckboxGroup,\r\n  ElCol,\r\n  // ElCollapse,\r\n  // ElCollapseItem,\r\n  ElCollapseTransition,\r\n  // ElColorPicker,\r\n  // ElContainer,\r\n  ElDatePicker,\r\n  ElDialog,\r\n  // ElDivider,\r\n  ElDrawer,\r\n  ElDropdown,\r\n  ElDropdownItem,\r\n  ElDropdownMenu,\r\n  // ElFooter,\r\n  ElForm,\r\n  ElFormItem,\r\n  // ElHeader,\r\n  ElIcon,\r\n  ElImage,\r\n  ElInput,\r\n  // ElInputNumber,\r\n  // ElLink,\r\n  // ElMain,\r\n  // ElMenu,\r\n  // ElMenuItem,\r\n  // ElMenuItemGroup,\r\n  ElOption,\r\n  // ElOptionGroup,\r\n  // ElPageHeader,\r\n  ElPagination,\r\n  ElPopconfirm,\r\n  // ElPopover,\r\n  // ElPopper,\r\n  // ElProgress,\r\n  // ElRadio,\r\n  // ElRadioButton,\r\n  // ElRadioGroup,\r\n  // ElRate,\r\n  ElRow,\r\n  ElScrollbar,\r\n  ElSelect,\r\n  // ElSlider,\r\n  // ElStep,\r\n  // ElSteps,\r\n  // ElSubmenu,\r\n  ElSwitch,\r\n  ElTabPane,\r\n  ElTable,\r\n  ElTableColumn,\r\n  ElTabs,\r\n  ElTag,\r\n  ElTimePicker,\r\n  ElTimeSelect,\r\n  // ElTimeline,\r\n  // ElTimelineItem,\r\n  ElTooltip,\r\n  ElTransfer,\r\n  // ElTree,\r\n  // ElUpload,\r\n  ElInfiniteScroll,\r\n  ElLoading,\r\n  ElMessage\r\n  // ElMessageBox,\r\n  // ElNotification,\r\n} from \"element-plus\";\r\n\r\nconst components = [\r\n  // ElAlert,\r\n  // ElAside,\r\n  // ElAutocomplete,\r\n  // ElAvatar,\r\n  // ElBacktop,\r\n  // ElBadge,\r\n  // ElBreadcrumb,\r\n  // ElBreadcrumbItem,\r\n  ElButton,\r\n  // ElButtonGroup,\r\n  // ElCalendar,\r\n  // ElCard,\r\n  // ElCarousel,\r\n  // ElCarouselItem,\r\n  // ElCascader,\r\n  // ElCascaderPanel,\r\n  ElCheckbox,\r\n  ElCheckboxButton,\r\n  ElCheckboxGroup,\r\n  ElCol,\r\n  // ElCollapse,\r\n  // ElCollapseItem,\r\n  ElCollapseTransition,\r\n  // ElColorPicker,\r\n  // ElContainer,\r\n  ElDatePicker,\r\n  ElDialog,\r\n  // ElDivider,\r\n  ElDrawer,\r\n  ElDropdown,\r\n  ElDropdownItem,\r\n  ElDropdownMenu,\r\n  // ElFooter,\r\n  ElForm,\r\n  ElFormItem,\r\n  // ElHeader,\r\n  ElIcon,\r\n  ElImage,\r\n  ElInput,\r\n  // ElInputNumber,\r\n  // ElLink,\r\n  // ElMain,\r\n  // ElMenu,\r\n  // ElMenuItem,\r\n  // ElMenuItemGroup,\r\n  ElOption,\r\n  // ElOptionGroup,\r\n  // ElPageHeader,\r\n  ElPagination,\r\n  ElPopconfirm,\r\n  // ElPopover,\r\n  // ElPopper,\r\n  // ElProgress,\r\n  // ElRadio,\r\n  // ElRadioButton,\r\n  // ElRadioGroup,\r\n  // ElRate,\r\n  ElRow,\r\n  ElScrollbar,\r\n  ElSelect,\r\n  // ElSlider,\r\n  // ElStep,\r\n  // ElSteps,\r\n  // ElSubmenu,\r\n  ElSwitch,\r\n  ElTabPane,\r\n  ElTable,\r\n  ElTableColumn,\r\n  ElTabs,\r\n  ElTag,\r\n  ElTimePicker,\r\n  ElTimeSelect,\r\n  // ElTimeline,\r\n  // ElTimelineItem,\r\n  ElTooltip,\r\n  ElTransfer\r\n  // ElTree,\r\n  // ElUpload,\r\n];\r\n\r\nconst plugins = [\r\n  ElInfiniteScroll,\r\n  ElLoading,\r\n  ElMessage\r\n  // ElMessageBox,\r\n  // ElNotification,\r\n];\r\nimport \"../style/element-variables.scss\";\r\n\r\nexport default (app: any) => {\r\n  app.config.globalProperties.$ELEMENT = { size: \"small\" };\r\n\r\n  locale.use(lang);\r\n\r\n  components.forEach(component => {\r\n    app.component(component.name, component);\r\n  });\r\n\r\n  plugins.forEach(plugin => {\r\n    app.use(plugin);\r\n  });\r\n};\r\n","<!--\r\n * @Description: \r\n * @Author: huxianc\r\n * @Date: 2021-02-01 15:32:41\r\n * @LastEditors: huxianc\r\n * @LastEditTime: 2021-02-01 15:47:26\r\n-->\r\n<template>\r\n  <el-table\r\n    v-bind=\"$attrs\"\r\n    element-loading-text=\"拼命加载中\"\r\n    element-loading-spinner=\"el-icon-loading\"\r\n    element-loading-background=\"rgba(0, 0, 0, 0.5)\"\r\n    tooltip-effect=\"dark\"\r\n  >\r\n    <slot />\r\n  </el-table>\r\n</template>\r\n\r\n<script lang=\"ts\">\r\nimport { defineComponent } from \"vue\";\r\n\r\nexport default defineComponent({\r\n  name: \"HdTable\"\r\n});\r\n</script>\r\n","\r\nimport { defineComponent } from \"vue\";\r\n\r\nexport default defineComponent({\r\n  name: \"HdTable\"\r\n});\r\n","import { render } from \"./hd-table.vue?vue&type=template&id=0dfc1cee\"\nimport script from \"./hd-table.vue?vue&type=script&lang=ts\"\nexport * from \"./hd-table.vue?vue&type=script&lang=ts\"\nscript.render = render\n\nexport default script","<!--\r\n * @Description: \r\n * @Author: huxianc\r\n * @Date: 2021-02-01 16:01:22\r\n * @LastEditors: huxianc\r\n * @LastEditTime: 2021-02-08 10:38:44\r\n-->\r\n<template>\r\n  <el-dialog v-model=\"visibleDialog\" v-bind=\"$attrs\" :width=\"width\">\r\n    <slot />\r\n    <template v-if=\"showFooterButtons\" #footer>\r\n      <el-button @click=\"handleCancel\" plain>取 消</el-button>\r\n      <el-button\r\n        type=\"primary\"\r\n        @click=\"handleConfirm\"\r\n        :disabled=\"confirmButtonDisabled\"\r\n        >提 交</el-button\r\n      >\r\n    </template>\r\n  </el-dialog>\r\n</template>\r\n\r\n<script lang=\"ts\">\r\nimport { computed, defineComponent } from \"vue\";\r\n\r\nexport default defineComponent({\r\n  name: \"HdDialog\",\r\n  inheritAttrs: false,\r\n  props: {\r\n    visible: {\r\n      type: Boolean,\r\n      default: false\r\n    },\r\n    showFooterButtons: {\r\n      type: Boolean,\r\n      default: false\r\n    },\r\n    width: {\r\n      type: String,\r\n      default: \"80%\"\r\n    },\r\n    confirmButtonDisabled: {\r\n      type: Boolean,\r\n      default: false\r\n    }\r\n  },\r\n  emits: [\"update:visible\", \"confirm\", \"cancel\"],\r\n  setup(props, { emit }) {\r\n    const visibleDialog = computed({\r\n      get: () => props.visible,\r\n      set: val => {\r\n        emit(\"update:visible\", val);\r\n      }\r\n    });\r\n\r\n    function handleConfirm() {\r\n      emit(\"confirm\");\r\n    }\r\n\r\n    function handleCancel() {\r\n      emit(\"cancel\");\r\n    }\r\n\r\n    return {\r\n      visibleDialog,\r\n      handleConfirm,\r\n      handleCancel\r\n    };\r\n  }\r\n});\r\n</script>\r\n\r\n<style scoped></style>\r\n","\r\nimport { computed, defineComponent } from \"vue\";\r\n\r\nexport default defineComponent({\r\n  name: \"HdDialog\",\r\n  inheritAttrs: false,\r\n  props: {\r\n    visible: {\r\n      type: Boolean,\r\n      default: false\r\n    },\r\n    showFooterButtons: {\r\n      type: Boolean,\r\n      default: false\r\n    },\r\n    width: {\r\n      type: String,\r\n      default: \"80%\"\r\n    },\r\n    confirmButtonDisabled: {\r\n      type: Boolean,\r\n      default: false\r\n    }\r\n  },\r\n  emits: [\"update:visible\", \"confirm\", \"cancel\"],\r\n  setup(props, { emit }) {\r\n    const visibleDialog = computed({\r\n      get: () => props.visible,\r\n      set: val => {\r\n        emit(\"update:visible\", val);\r\n      }\r\n    });\r\n\r\n    function handleConfirm() {\r\n      emit(\"confirm\");\r\n    }\r\n\r\n    function handleCancel() {\r\n      emit(\"cancel\");\r\n    }\r\n\r\n    return {\r\n      visibleDialog,\r\n      handleConfirm,\r\n      handleCancel\r\n    };\r\n  }\r\n});\r\n","import { render } from \"./hd-dialog.vue?vue&type=template&id=49e66c25\"\nimport script from \"./hd-dialog.vue?vue&type=script&lang=ts\"\nexport * from \"./hd-dialog.vue?vue&type=script&lang=ts\"\nscript.render = render\n\nexport default script","/*\r\n * @Description:\r\n * @Author: huxianc\r\n * @Date: 2021-02-01 15:39:29\r\n * @LastEditors: huxianc\r\n * @LastEditTime: 2021-02-01 16:03:40\r\n */\r\nimport { HdTable, HdTableColumn, HdDialog } from \"../components/hd\";\r\n\r\nconst components = [HdTable, HdTableColumn, HdDialog];\r\n\r\nexport default (app: any) => {\r\n  components.forEach(component => {\r\n    app.component(component.name, component);\r\n  });\r\n};\r\n","/*\r\n * @Description: \r\n * @Author: huxianc\r\n * @Date: 2021-01-18 09:13:10\r\n * @LastEditors: huxianc\r\n * @LastEditTime: 2021-01-18 09:17:08\r\n */\r\nimport type { ObjectDirective } from \"vue\"\r\n\r\nconst debounceClick:ObjectDirective<any> = {\r\n  mounted: function(el, binding) {\r\n    let timer: number|null = null;\r\n    el.addEventListener('click', () => {\r\n      if (timer) {\r\n        clearTimeout(timer)\r\n      }\r\n      timer = window.setTimeout(() => {\r\n        binding.value()\r\n      }, 1000)\r\n    })\r\n  }\r\n}\r\n\r\nexport default debounceClick","/*\r\n * @Description:\r\n * @Author: huxianc\r\n * @Date: 2020-12-11 10:04:13\r\n * @LastEditors: huxianc\r\n * @LastEditTime: 2021-02-01 15:42:59\r\n */\r\nimport \"normalize.css\";\r\nimport { createApp } from \"vue\";\r\nimport router from \"./router\";\r\nimport \"./permission\";\r\n// import store from \"./store\";\r\nimport App from \"./App.vue\";\r\n\r\nimport element from \"./plugins/element-plus\";\r\n\r\nimport \"./style/index.scss\";\r\nimport hd from \"./plugins/hd-element\";\r\n\r\n// iconfont\r\nimport \"@/assets/fonts/iconfont/iconfont.css\";\r\n\r\n// vue-svgicon\r\nimport { VueSvgIconPlugin } from \"@yzfe/vue3-svgicon\";\r\nimport \"@yzfe/svgicon/lib/svgicon.css\";\r\n\r\n// directive\r\nimport debounceClick from \"./directive/debounce-click\";\r\n\r\nconst app = createApp(App);\r\nelement(app);\r\nhd(app);\r\napp.directive(\"debounce-click\", debounceClick);\r\napp\r\n  .use(VueSvgIconPlugin, { tagName: \"svg-icon\" })\r\n  // .use(store)\r\n  .use(router)\r\n  // .use(ElementPlus, { locale })\r\n  .mount(\"#app\");\r\n","/*\r\n * @Description:\r\n * @Author: huxianc\r\n * @Date: 2020-12-24 14:48:07\r\n * @LastEditors: liufuqiang\r\n * @LastEditTime: 2021-02-09 10:11:54\r\n */\r\nimport { ICommonRule, ICustomFuncRule } from \"@/types\";\r\nimport { cloneDeep } from \"lodash\";\r\n// 第三方引入\r\nimport dayjs from \"dayjs\";\r\n\r\nexport function computedRem() {\r\n  const docEl = document.documentElement;\r\n  let width = document.body.clientWidth || document.documentElement.clientWidth;\r\n  width = width > 2400 ? 2400 : width;\r\n  docEl.style.fontSize = width / 190 + \"px\";\r\n}\r\n\r\n/**\r\n * @description: 公用的rule表单验证规则\r\n * @param {string} msg 提示错误\r\n * @return {object} IRule\r\n */\r\nexport function commonRuleItem(msg: string): ICommonRule {\r\n  return {\r\n    required: true,\r\n    message: msg,\r\n    trigger: [\"blur\", \"change\"]\r\n  };\r\n}\r\n\r\n/**\r\n * @description: 自定义函数验证\r\n * @param {function} func 自定义函数\r\n * @return {IRule} IRule\r\n */\r\nexport function customFuncRule(func: Function): ICustomFuncRule {\r\n  return {\r\n    required: true,\r\n    validator: func,\r\n    trigger: \"blur\"\r\n  };\r\n}\r\n/**\r\n * @description: 验证正整数\r\n */\r\nexport function checkPositiveInteger(\r\n  rule: any,\r\n  value: string,\r\n  callback: Function\r\n) {\r\n  if (value === \"0\" || value === \"\") {\r\n    return callback(new Error(\"请输入大于0的正整数\"));\r\n  }\r\n  if (!/(^[1-9]\\d*$)/.test(value)) {\r\n    callback(new Error(\"只能输入正整数！\"));\r\n  } else {\r\n    callback();\r\n  }\r\n}\r\n/**\r\n * @description: 前端自定义分页\r\n * @param allArr 原数组\r\n * @param page 当前页\r\n * @param prop 筛选参数\r\n * @param key 筛选值\r\n * @param size 每页显示条数\r\n * @return arr 当前页数据数组\r\n */\r\nexport function getPagination(\r\n  allArr: any[],\r\n  page: number,\r\n  prop = \"\",\r\n  key = \"\",\r\n  size = 10\r\n) {\r\n  // const len = arguments.length;\r\n  if (prop || key) {\r\n    allArr = cloneDeep(allArr.filter((item: any) => item[prop].includes(key)));\r\n  }\r\n  const arr = allArr.slice((page - 1) * size, (page - 1) * size + size);\r\n\r\n  return arr;\r\n}\r\n/**\r\n * @description: 前端自定义分页获取数量\r\n * @param allArr 原数组\r\n * @param prop 筛选参数\r\n * @param key 筛选值\r\n * @return count 筛选总数\r\n */\r\nexport function getPagintionCount(allArr: any[], prop = \"\", key = \"\") {\r\n  const len = arguments.length;\r\n  if (len > 1) {\r\n    allArr = cloneDeep(allArr.filter((item: any) => item[prop].includes(key)));\r\n  }\r\n\r\n  return allArr.length;\r\n}\r\n/**\r\n * @description: 获取指定时间到现在的间隔时间\r\n * @param createtime 指定时间\r\n * @return diffTime 间隔时间\r\n */\r\nexport function getIntervalTime(createtime: string) {\r\n  const year = dayjs(new Date()).diff(dayjs(createtime), \"year\");\r\n  const month = dayjs(new Date()).diff(dayjs(createtime), \"month\");\r\n  const week = dayjs(new Date()).diff(dayjs(createtime), \"week\");\r\n  const day = dayjs(new Date()).diff(dayjs(createtime), \"day\");\r\n  const hour = dayjs(new Date()).diff(dayjs(createtime), \"hour\");\r\n  const minute = dayjs(new Date()).diff(dayjs(createtime), \"minute\");\r\n  const second = dayjs(new Date()).diff(dayjs(createtime), \"second\");\r\n  let diffTime = \"\";\r\n  if (year > 0) {\r\n    diffTime = `${year}年前`;\r\n  } else {\r\n    if (month > 0 && month <= 12) {\r\n      diffTime = `${month}月前`;\r\n    } else {\r\n      if (week > 0 && week <= 4) {\r\n        diffTime = `${week}周前`;\r\n      } else {\r\n        if (day > 0 && day <= 7) {\r\n          diffTime = `${day}天前`;\r\n        } else {\r\n          if (hour > 0 && hour <= 24) {\r\n            diffTime = `${hour}小时前`;\r\n          } else {\r\n            if (minute > 0 && minute <= 60) {\r\n              diffTime = `${minute}分钟前`;\r\n            } else {\r\n              if (second > 0 && second <= 60) {\r\n                diffTime = `${second}秒前`;\r\n              } else {\r\n                diffTime = \"刚刚\";\r\n              }\r\n            }\r\n          }\r\n        }\r\n      }\r\n    }\r\n  }\r\n  return diffTime;\r\n}\r\n","\n            const data = {\"name\":\"exit-fullscreen\",\"data\":{\"width\":\"128\",\"height\":\"128\",\"viewBox\":\"0 0 128 128\",\"data\":\"<path pid=\\\"0\\\" d=\\\"M49.217 41.329l-.136-35.24c-.06-2.715-2.302-4.345-5.022-4.405h-3.65c-2.712-.06-4.866 2.303-4.806 5.016l.152 19.164-24.151-23.79a6.698 6.698 0 00-9.499 0 6.76 6.76 0 000 9.526l23.93 23.713-18.345.074c-2.712-.069-5.228 1.813-5.64 5.02v3.462c.069 2.721 2.31 4.97 5.022 5.03l35.028-.207c.052.005.087.025.133.025l2.457.054a4.626 4.626 0 003.436-1.38c.88-.874 1.205-2.096 1.169-3.462l-.262-2.465c0-.048.182-.081.182-.136h.002zm52.523 51.212l18.32-.073c2.713.06 5.224-1.609 5.64-4.815v-3.462c-.068-2.722-2.317-4.97-5.021-5.04l-34.58.21c-.053 0-.086-.021-.138-.021l-2.451-.06a4.64 4.64 0 00-3.445 1.381c-.885.868-1.201 2.094-1.174 3.46l.27 2.46c.005.06-.177.095-.177.141l.141 34.697c.069 2.713 2.31 4.338 5.022 4.397l3.45.006c2.705.062 4.867-2.31 4.8-5.026l-.153-18.752 24.151 23.946a6.69 6.69 0 009.494 0 6.747 6.747 0 000-9.523L101.74 92.54v.001zM48.125 80.662a4.636 4.636 0 00-3.437-1.382l-2.457.06c-.05 0-.082.022-.137.022l-35.025-.21c-2.712.07-4.957 2.318-5.022 5.04v3.462c.409 3.206 2.925 4.874 5.633 4.814l18.554.06-24.132 23.928c-2.62 2.626-2.62 6.89 0 9.524a6.694 6.694 0 009.496 0l24.155-23.79-.155 18.866c-.06 2.722 2.094 5.093 4.801 5.025h3.65c2.72-.069 4.962-1.685 5.022-4.406l.141-34.956c0-.05-.182-.082-.182-.136l.262-2.46c.03-1.366-.286-2.592-1.166-3.46h-.001zM80.08 47.397a4.62 4.62 0 003.443 1.374l2.45-.054c.055 0 .088-.02.143-.028l35.08.21c2.712-.062 4.953-2.312 5.021-5.033l.009-3.463c-.417-3.211-2.937-5.084-5.64-5.025l-18.615-.073 23.917-23.715c2.63-2.623 2.63-6.879.008-9.513a6.691 6.691 0 00-9.494 0L92.251 26.016l.155-19.312c.065-2.713-2.097-5.085-4.802-5.025h-3.45c-2.713.069-4.954 1.693-5.022 4.406l-.139 35.247c0 .054.18.088.18.136l-.267 2.465c-.028 1.366.288 2.588 1.174 3.463v.001z\\\"/>\"}}\n        \n                module.exports = data\n                ","export * from \"-!../../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./dragableContainer.vue?vue&type=style&index=0&id=419a4d42&scoped=true&lang=css\""],"sourceRoot":""}