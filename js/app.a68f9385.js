(function(e){function t(t){for(var a,r,l=t[0],i=t[1],u=t[2],s=0,d=[];s<l.length;s++)r=l[s],Object.prototype.hasOwnProperty.call(o,r)&&o[r]&&d.push(o[r][0]),o[r]=0;for(a in i)Object.prototype.hasOwnProperty.call(i,a)&&(e[a]=i[a]);f&&f(t);while(d.length)d.shift()();return c.push.apply(c,u||[]),n()}function n(){for(var e,t=0;t<c.length;t++){for(var n=c[t],a=!0,r=1;r<n.length;r++){var l=n[r];0!==o[l]&&(a=!1)}a&&(c.splice(t--,1),e=i(i.s=n[0]))}return e}var a={},r={app:0},o={app:0},c=[];function l(e){return i.p+"js/"+({login:"login",three:"three"}[e]||e)+"."+{login:"de679eea",three:"d76abad2"}[e]+".js"}function i(t){if(a[t])return a[t].exports;var n=a[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,i),n.l=!0,n.exports}i.e=function(e){var t=[],n={login:1,three:1};r[e]?t.push(r[e]):0!==r[e]&&n[e]&&t.push(r[e]=new Promise((function(t,n){for(var a="css/"+({login:"login",three:"three"}[e]||e)+"."+{login:"1654d2a3",three:"938ce9b7"}[e]+".css",o=i.p+a,c=document.getElementsByTagName("link"),l=0;l<c.length;l++){var u=c[l],s=u.getAttribute("data-href")||u.getAttribute("href");if("stylesheet"===u.rel&&(s===a||s===o))return t()}var d=document.getElementsByTagName("style");for(l=0;l<d.length;l++){u=d[l],s=u.getAttribute("data-href");if(s===a||s===o)return t()}var f=document.createElement("link");f.rel="stylesheet",f.type="text/css",f.onload=t,f.onerror=function(t){var a=t&&t.target&&t.target.src||o,c=new Error("Loading CSS chunk "+e+" failed.\n("+a+")");c.code="CSS_CHUNK_LOAD_FAILED",c.request=a,delete r[e],f.parentNode.removeChild(f),n(c)},f.href=o;var m=document.getElementsByTagName("head")[0];m.appendChild(f)})).then((function(){r[e]=0})));var a=o[e];if(0!==a)if(a)t.push(a[2]);else{var c=new Promise((function(t,n){a=o[e]=[t,n]}));t.push(a[2]=c);var u,s=document.createElement("script");s.charset="utf-8",s.timeout=120,i.nc&&s.setAttribute("nonce",i.nc),s.src=l(e);var d=new Error;u=function(t){s.onerror=s.onload=null,clearTimeout(f);var n=o[e];if(0!==n){if(n){var a=t&&("load"===t.type?"missing":t.type),r=t&&t.target&&t.target.src;d.message="Loading chunk "+e+" failed.\n("+a+": "+r+")",d.name="ChunkLoadError",d.type=a,d.request=r,n[1](d)}o[e]=void 0}};var f=setTimeout((function(){u({type:"timeout",target:s})}),12e4);s.onerror=s.onload=u,document.head.appendChild(s)}return Promise.all(t)},i.m=e,i.c=a,i.d=function(e,t,n){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},i.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)i.d(n,a,function(t){return e[t]}.bind(null,a));return n},i.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="",i.oe=function(e){throw console.error(e),e};var u=window["webpackJsonp"]=window["webpackJsonp"]||[],s=u.push.bind(u);u.push=t,u=u.slice();for(var d=0;d<u.length;d++)t(u[d]);var f=s;c.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("cd49")},"0572":function(e,t,n){},"06b7":function(e,t,n){"use strict";n("4f28")},1084:function(e,t,n){"use strict";n("20bc")},1294:function(e,t,n){},"15a1":function(e,t,n){"use strict";n("caad"),n("d3b7"),n("7f17"),n("f3fc");var a=n("6573"),r=n.n(a),o=(n("96cf"),n("1da1")),c=n("bc3a"),l=n.n(c),i=n("9de4"),u=n("4328"),s=n.n(u),d=n("6ac5"),f=l.a.create({baseURL:i["b"],headers:{"Content-Type":"application/x-www-form-urlencoded"},timeout:5e3}),m=["/alarm/deal","/alarm/dealall"];f.interceptors.request.use(function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if("/tbs/dologin"===t.url){e.next=4;break}return e.next=3,Object(d["e"])();case 3:t.headers.visittoken=e.sent;case 4:return m.includes(t.url)?(t.baseURL=i["a"],t.headers["Content-Type"]="application/json"):t.data=s.a.stringify(t.data),e.abrupt("return",t);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),(function(e){return Promise.reject(e)})),f.interceptors.response.use((function(e){var t=e.data;return t.result&&!1===t.result.success?(r()({message:t.result.msg||"Error",type:"error",duration:5e3}),Promise.reject(new Error(t.result.msg||"Error"))):t}),(function(e){return r()({message:e.message,type:"error",duration:5e3}),Promise.reject(e)})),t["a"]=f},"1e39":function(e,t,n){},"1e4a":function(e,t,n){"use strict";n.d(t,"i",(function(){return o})),n.d(t,"g",(function(){return l})),n.d(t,"e",(function(){return i})),n.d(t,"a",(function(){return u})),n.d(t,"c",(function(){return s})),n.d(t,"h",(function(){return d})),n.d(t,"b",(function(){return f})),n.d(t,"d",(function(){return m})),n.d(t,"n",(function(){return b})),n.d(t,"l",(function(){return O})),n.d(t,"o",(function(){return h})),n.d(t,"m",(function(){return j})),n.d(t,"k",(function(){return v})),n.d(t,"j",(function(){return g})),n.d(t,"f",(function(){return y})),n.d(t,"s",(function(){return w})),n.d(t,"t",(function(){return V})),n.d(t,"p",(function(){return N})),n.d(t,"r",(function(){return C})),n.d(t,"q",(function(){return k}));n("c740"),n("d81d");var a,r=n("ade3"),o={basestation:"basestation",labelList:"labelList",person:"person",camera:"camera"},c="List",l={camera:{name:"摄像头",code:[o.camera]+c,title:"摄像头列表"},basestation:{name:"基站管理",code:[o.basestation]+c,title:"基站列表"},labelList:{name:"标签信息",code:[o.labelList]+c,title:"标签列表"},person:{name:"人员信息",code:[o.person]+c,title:"人员列表"}},i={name:"电子围栏",code:"fence"},u={name:"报警管理",code:"alarm"},s={name:"统计中心",code:"datav"},d=60,f=(a={},Object(r["a"])(a,o.basestation,[{label:"查看详情",clickCode:"showDetails"}]),Object(r["a"])(a,o.labelList,[{label:"查看详情",clickCode:"showDetails"},{label:"轨迹回放",clickCode:"trackPlayback"},{label:"实时跟踪",clickCode:"follow"}]),Object(r["a"])(a,o.camera,[{label:"查看详情",clickCode:"showDetails"},{label:"查看实时视频",clickCode:"seeNowVideo"},{label:"查看历史视频",clickCode:"seeHistoryVideo"}]),a),m={BLUE:"rgba(32, 162, 255, 1)",RED:"rgba(255, 32, 32, 1)",TRANSPARENT:"rgba(0,0,0,0)"},b={top:"M140,12a5,5,0,0,0-5-5H76L70,0,64,7H5a5,5,0,0,0-5,5V62a5,5,0,0,0,5,5H135a5,5,0,0,0,5-5Z",bottom:"M0,55a5,5,0,0,0,5,5H64l6,7,6-7h59a5,5,0,0,0,5-5V5a5,5,0,0,0-5-5H5A5,5,0,0,0,0,5Z",left:"M146,55a5,5,0,0,1-5,5H11a5,5,0,0,1-5-5V36L0,30l6-6V5a5,5,0,0,1,5-5H141a5,5,0,0,1,5,5Z",right:"M0,5A5,5,0,0,1,5,0H135a5,5,0,0,1,5,5V24l6,6-6,6V55a5,5,0,0,1-5,5H5a5,5,0,0,1-5-5Z"},p=["禁止进入","禁止外出","聚集报警","允许进入","允许外出","进入且限制停留时长","外出且限制停留时长"],O=p.map((function(e,t){return{label:e,value:String(t+1)}})),h=function(e){e=String(e);var t=O.findIndex((function(t){return t.value===e}));return O[t].label},j={width:6e3,height:3e3},v={stroke:"red",fill:"rgba(0,255,0,0.1)",strokeWidth:3,perfectDrawEnabled:!1},g="YYYY-MM-DD",y="HH:mm:ss",w=g+" "+y,V="-350px",N=function(e){var t,n=(t={},Object(r["a"])(t,o.camera,"摄像头"),Object(r["a"])(t,o.basestation,"基站"),Object(r["a"])(t,o.labelList,"标签"),Object(r["a"])(t,o.person,"人员"),t);return n[e]},C=[{id:1,content:"正常报警"},{id:2,content:"测试报警"},{id:3,content:"误报警"}],k=[{id:1,content:"正常报警，已处理完成！"},{id:2,content:"测试报警，已处理完成！"},{id:3,content:"误报警，已处理完成！"}]},"1ebc":function(e,t,n){},"20bc":function(e,t,n){},2772:function(e,t,n){},"32a8":function(e,t,n){},"3f53":function(e,t,n){"use strict";n("7b60")},"431e":function(e,t,n){"use strict";n("f4b5")},"4f28":function(e,t,n){},5095:function(e,t,n){"use strict";n("75d1")},"50fe":function(e,t,n){},6993:function(e,t,n){"use strict";n("2772")},"6ac5":function(e,t,n){"use strict";n.d(t,"e",(function(){return l})),n.d(t,"o",(function(){return i})),n.d(t,"q",(function(){return d})),n.d(t,"f",(function(){return f})),n.d(t,"p",(function(){return b})),n.d(t,"l",(function(){return O})),n.d(t,"r",(function(){return j})),n.d(t,"g",(function(){return v})),n.d(t,"m",(function(){return y})),n.d(t,"n",(function(){return V})),n.d(t,"c",(function(){return N})),n.d(t,"j",(function(){return k})),n.d(t,"a",(function(){return x})),n.d(t,"k",(function(){return S})),n.d(t,"d",(function(){return D})),n.d(t,"i",(function(){return B})),n.d(t,"b",(function(){return L})),n.d(t,"h",(function(){return R}));n("96cf");var a=n("1da1"),r=n("a78e"),o=n.n(r),c="hd-water-key";function l(){return o.a.get(c)}function i(e){return o.a.set(c,e)}function u(){return o.a.remove(c)}var s="username";function d(e){return localStorage.setItem(s,e)}function f(){return localStorage.getItem(s)||""}var m="useraccount";function b(e){return localStorage.setItem(m,e)}var p="bnum";function O(e){return localStorage.setItem(p,e)}var h="serveritem";function j(e){return localStorage.setItem(h,JSON.stringify(e))}function v(){return JSON.parse(localStorage.getItem(h))||[]}var g="homesnum";function y(e){return localStorage.setItem(g,e)}var w="loadsnum";function V(e){return localStorage.setItem(w,e)}function N(){return localStorage.getItem(w)||""}var C="deviceAll";function k(e){return localStorage.setItem(C,JSON.stringify(e))}function x(){return JSON.parse(localStorage.getItem(C))||[]}var T="sceneAll";function S(e){return localStorage.setItem(T,JSON.stringify(e))}function D(e){var t=localStorage.getItem("sceneAll"),n=JSON.parse(t),a=n[e]?n[e]:"";return a}var I="buildingAll";function B(e){return localStorage.setItem(I,JSON.stringify(e))}function L(e){var t=localStorage.getItem(I),n=JSON.parse(t),a=n[e]?n[e]:"";return a}function R(e){return _.apply(this,arguments)}function _(){return _=Object(a["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,u();case 2:localStorage.clear(),t.push("/login");case 4:case"end":return e.stop()}}),e)}))),_.apply(this,arguments)}},"6c65":function(e,t,n){"use strict";var a=n("15a1");t["a"]={getAllScene:function(e){return Object(a["a"])({url:"/tbs/getscene",method:"post",data:e})},getAllDevice:function(e){return Object(a["a"])({url:"/tbs/getdevice",method:"post",data:e})},getAllLayer:function(e){return Object(a["a"])({url:"/tbs/getlayer",method:"post",data:e})},getAllBuild:function(e){return Object(a["a"])({url:"/tbs/getbuild",method:"post",data:e})},getAllHArea:function(e){return Object(a["a"])({url:"/tbs/getharea",method:"post",data:e})},saveHArea:function(e){return Object(a["a"])({url:"/tbs/saveharea",method:"post",data:e})},getOnehAreaSetDeivce:function(e){return Object(a["a"])({url:"/tbs/getonehareasetdeivce",method:"post",data:e})},delHArea:function(e){return Object(a["a"])({url:"/tbs/delharea",method:"post",data:e})},saveRule:function(e){return Object(a["a"])({url:"/tbs/saverule",method:"post",data:e})},getRule:function(e){return Object(a["a"])({url:"/tbs/getrule",method:"post",data:e})},delRule:function(e){return Object(a["a"])({url:"/tbs/delrule",method:"post",data:e})}}},"6d03":function(e,t,n){"use strict";n("9c77")},"73c7":function(e,t,n){},"75d1":function(e,t,n){},"77d9":function(e,t,n){"use strict";n("50fe")},"7adc":function(e,t,n){"use strict";var a=n("7a23"),r=Object(a["withScopeId"])("data-v-c9dd7a0e");Object(a["pushScopeId"])("data-v-c9dd7a0e");var o={class:"header"},c={class:"side left"},l=Object(a["createVNode"])("i",{class:"el-icon-time"},null,-1),i={class:"time"},u=Object(a["createVNode"])("div",{class:"side center"},"人员定位及落水报警系统",-1),s={class:"right"};Object(a["popScopeId"])();var d=r((function(e,t,n,r,d,f){var m=Object(a["resolveComponent"])("header-bar");return Object(a["openBlock"])(),Object(a["createBlock"])("header",null,[Object(a["createVNode"])("div",o,[Object(a["createVNode"])("div",c,[l,Object(a["createVNode"])("span",i,Object(a["toDisplayString"])(e.now),1)]),u,Object(a["createVNode"])("div",s,[Object(a["createVNode"])(m)])])])})),f=n("5a0c"),m=n.n(f),b=Object(a["withScopeId"])("data-v-6f2b119c");Object(a["pushScopeId"])("data-v-6f2b119c");var p={class:"right-menu"},O=Object(a["createVNode"])("div",{class:"avatar-wrapper"},[Object(a["createVNode"])("i",{class:"el-icon-user-solid user-avatar"}),Object(a["createVNode"])("i",{class:"el-icon-caret-bottom"})],-1),h=Object(a["createTextVNode"])("3d"),j=Object(a["createVNode"])("span",{style:{display:"block"}},"注销",-1);Object(a["popScopeId"])();var v=b((function(e,t,n,r,o,c){var l=Object(a["resolveComponent"])("screenfull"),i=Object(a["resolveComponent"])("el-dropdown-item"),u=Object(a["resolveComponent"])("router-link"),s=Object(a["resolveComponent"])("el-dropdown-menu"),d=Object(a["resolveComponent"])("el-dropdown");return Object(a["openBlock"])(),Object(a["createBlock"])("div",p,[Object(a["createVNode"])(l,{id:"screenfull",class:"right-menu-item hover-effect"}),Object(a["createVNode"])(d,{class:"avatar-container right-menu-item hover-effect",trigger:"click"},{dropdown:b((function(){return[Object(a["createVNode"])(s,null,{default:b((function(){return[Object(a["createVNode"])(u,{to:"/3d"},{default:b((function(){return[Object(a["createVNode"])(i,null,{default:b((function(){return[h]})),_:1})]})),_:1}),Object(a["createVNode"])(i,{divided:"",onClick:e.logOut},{default:b((function(){return[j]})),_:1},8,["onClick"])]})),_:1})]})),default:b((function(){return[O]})),_:1})])}));function g(e,t,n,r,o,c){var l=Object(a["resolveComponent"])("svg-icon");return Object(a["openBlock"])(),Object(a["createBlock"])("div",null,[Object(a["createVNode"])(l,{onClick:e.click,data:e.isFullscreen?e.exitFullscreen:e.fullscreen},null,8,["onClick","data"])])}n("7f17"),n("f3fc");var y=n("6573"),w=n.n(y),V=n("93bf"),N=n.n(V),C=n("9921"),k=n.n(C),x=n("dbc7"),T=n.n(x),S=Object(a["defineComponent"])({name:"screenfull",setup:function(){var e=Object(a["shallowRef"])(!1),t=function(){e.value=N.a.isFullscreen},n=function(){N.a.isEnabled&&N.a.on("change",t)},r=function(){N.a.isEnabled&&N.a.off("change",t)},o=function(){if(!N.a.isEnabled)return w.a.warning("您的浏览器不支持全屏"),!1;N.a.toggle()};return Object(a["onMounted"])((function(){n()})),Object(a["onUnmounted"])((function(){r()})),{isFullscreen:e,click:o,fullscreen:k.a,exitFullscreen:T.a}}});S.render=g;var D=S,I=n("6ac5"),B=n("6c02"),L=Object(a["defineComponent"])({name:"HeaderBar",components:{Screenfull:D},setup:function(){var e=Object(B["c"])(),t=function(){return Object(I["h"])(e)};return{logOut:t}}});n("8734"),n("947d");L.render=v,L.__scopeId="data-v-6f2b119c";var R=L,_=n("1e4a"),P=Object(a["defineComponent"])({name:"Head",components:{HeaderBar:R},setup:function(){var e=Object(a["shallowRef"])(m()().format(_["s"])),t=null;return Object(a["onMounted"])((function(){t=setInterval((function(){e.value=m()().format(_["s"])}))})),Object(a["onUnmounted"])((function(){t&&clearInterval(t)})),{now:e}}});n("77d9");P.render=d,P.__scopeId="data-v-c9dd7a0e";t["a"]=P},"7b60":function(e,t,n){},8682:function(e,t,n){},8734:function(e,t,n){"use strict";n("1ebc")},8889:function(e,t,n){},"8b64":function(e,t,n){"use strict";n("0572")},"8e1f":function(e,t,n){},"90d4":function(e,t,n){"use strict";n("8682")},"947d":function(e,t,n){"use strict";n("73c7")},"97d2":function(e,t,n){"use strict";n("8889")},9921:function(e,t){const n={name:"fullscreen",data:{width:"128",height:"128",viewBox:"0 0 128 128",data:'<path pid="0" d="M38.47 52L52 38.462l-23.648-23.67L43.209 0H.035L0 43.137l14.757-14.865L38.47 52zm74.773 47.726L89.526 76 76 89.536l23.648 23.672L84.795 128h43.174L128 84.863l-14.757 14.863zM89.538 52l23.668-23.648L128 43.207V.038L84.866 0 99.73 14.76 76 38.472 89.538 52zM38.46 76L14.792 99.651 0 84.794v43.173l43.137.033-14.865-14.757L52 89.53 38.46 76z"/>'}};e.exports=n},"9c77":function(e,t,n){},"9de4":function(e,t,n){"use strict";n.d(t,"b",(function(){return l})),n.d(t,"a",(function(){return i})),n.d(t,"d",(function(){return u})),n.d(t,"c",(function(){return s}));var a="http://10.1.200.223:",r="http://10.1.200.27:",o=a+"39000/",c=r+"9529/",l=o+"api",i=c+"api",u=a+"39001/",s="ws://10.1.200.246:8888/rtsp"},a876:function(e,t,n){"use strict";n("de79")},c00b:function(e,t,n){},ca0f:function(e,t,n){},cc86:function(e,t,n){"use strict";n("1e39")},ccc7:function(e,t,n){"use strict";n("32a8")},cd49:function(e,t,n){"use strict";n.r(t);n("e260"),n("e6cf"),n("cca6"),n("a79d"),n("f5df1");var a=n("7a23"),r=(n("d3b7"),n("6c02")),o=Object(a["withScopeId"])("data-v-1a742b00");Object(a["pushScopeId"])("data-v-1a742b00");var c={class:"home-container"};Object(a["popScopeId"])();var l=o((function(e,t,n,r,o,l){var i=Object(a["resolveComponent"])("headerComponent"),u=Object(a["resolveComponent"])("mainComponent");return Object(a["openBlock"])(),Object(a["createBlock"])("div",c,[Object(a["createVNode"])(i),Object(a["createVNode"])(u)])})),i=n("7adc"),u=(n("99af"),n("d81d"),n("b0c0"),Object(a["withScopeId"])("data-v-3bab4490"));Object(a["pushScopeId"])("data-v-3bab4490");var s={class:"home-wrapper"},d=Object(a["createVNode"])("div",{id:"container"},null,-1),f={class:"drawer-container"},m={class:"drawer-header"},b={class:"drawer-title"},p={style:{"margin-bottom":"10px"}},O=Object(a["createTextVNode"])("新增"),h=Object(a["createTextVNode"])("全部显示"),j=Object(a["createTextVNode"])("全部隐藏"),v=Object(a["createTextVNode"])("编辑"),g=Object(a["createTextVNode"])("规则"),y=Object(a["createTextVNode"])("删除"),w={style:{"margin-bottom":"10px"}},V=Object(a["createTextVNode"])("新增"),N=Object(a["createTextVNode"])("编辑"),C=Object(a["createTextVNode"])("删除"),k=Object(a["createTextVNode"])("普通"),x=Object(a["createTextVNode"])("紧急"),T=Object(a["createTextVNode"])("危急"),S=Object(a["createTextVNode"])("处理"),D=Object(a["createTextVNode"])("详情"),I=Object(a["createTextVNode"])("查看位置"),B={class:"alarm-detail"},L={class:"monitor-content"},R={class:"left-content"},_={class:"content-controller"},P={class:"alarm-info-data"},A=Object(a["createTextVNode"])(" 报警类型： "),F={style:{color:"#ff7352"}},M=Object(a["createTextVNode"])(" 报警时间： "),E={style:{color:"#ff7352"}},H=Object(a["createTextVNode"])("报警等级： "),U=Object(a["createTextVNode"])("普通"),z=Object(a["createTextVNode"])("紧急"),G=Object(a["createTextVNode"])("危急"),W=Object(a["createTextVNode"])(" 触发人员： "),Y={style:{color:"#d9354e"}},q={class:"alarm-area"},X={class:"right-content",ref:"listBar"},J={class:"description"},Z=Object(a["createTextVNode"])(" 处理状态： "),$={class:"alarm-ps"},K=Object(a["createVNode"])("p",{style:{"font-size":"1.6rem","margin-bottom":"0.4rem"}},"备注:",-1),Q=Object(a["createVNode"])("p",{style:{"text-indent":"1rem"}},null,-1),ee={class:"right-content-head"},te=Object(a["createTextVNode"])(" 历史轨迹 "),ne=Object(a["createTextVNode"])("人员位置"),ae={class:"right-content-head"},re=Object(a["createTextVNode"])("查看位置"),oe={class:"right-content-head"},ce=Object(a["createVNode"])("p",null,"详情描述：",-1),le={key:0,class:"el-icon el-icon-document"},ie={class:"dialog-footer"},ue=Object(a["createTextVNode"])("取 消"),se=Object(a["createTextVNode"])("确 定"),de={class:"warning-wrap"},fe={class:"warning-content"},me=Object(a["createVNode"])("br",null,null,-1),be=Object(a["createVNode"])("span",{class:"icon iconfont"},"",-1),pe={class:"control-panel"},Oe={class:"control-wrap"},he={class:"control-title o-h"},je={class:"data-display-item"},ve=Object(a["createVNode"])("div",{class:"title"},[Object(a["createVNode"])("span",{class:"icon iconfont"},""),Object(a["createVNode"])("span",null,"人员信息")],-1),ge={class:"display-content"},ye={class:"data-item"},we={class:"count"},Ve=Object(a["createVNode"])("div",{class:"name"},"总上线人数",-1),Ne={class:"data-item"},Ce={class:"count"},ke=Object(a["createVNode"])("div",{class:"name"},"当前上线人数",-1),xe={class:"data-display-item"},Te=Object(a["createVNode"])("div",{class:"title"},[Object(a["createVNode"])("span",{class:"icon iconfont big"},""),Object(a["createVNode"])("span",null,"报警信息")],-1),Se={class:"display-content"},De={class:"data-item"},Ie={class:"count"},Be=Object(a["createVNode"])("div",{class:"name"},"报警总数",-1),Le={class:"data-item warn"},Re={class:"count"},_e=Object(a["createVNode"])("div",{class:"name"},"待处理",-1),Pe={class:"control-buttons-container"},Ae={class:"button-label"},Fe=Object(a["createTextVNode"])("关闭实时跟踪");Object(a["popScopeId"])();var Me=u((function(e,t,n,r,o,c){var l=Object(a["resolveComponent"])("main-nav"),i=Object(a["resolveComponent"])("el-collapse-transition"),Me=Object(a["resolveComponent"])("camera-list"),Ee=Object(a["resolveComponent"])("el-tab-pane"),He=Object(a["resolveComponent"])("basestation-list"),Ue=Object(a["resolveComponent"])("label-list"),ze=Object(a["resolveComponent"])("person-list"),Ge=Object(a["resolveComponent"])("el-tabs"),We=Object(a["resolveComponent"])("el-drawer"),Ye=Object(a["resolveComponent"])("el-button"),qe=Object(a["resolveComponent"])("hd-table-column"),Xe=Object(a["resolveComponent"])("el-switch"),Je=Object(a["resolveComponent"])("el-table-column"),Ze=Object(a["resolveComponent"])("el-popconfirm"),$e=Object(a["resolveComponent"])("hd-table"),Ke=Object(a["resolveComponent"])("el-pagination"),Qe=Object(a["resolveComponent"])("el-dialog"),et=Object(a["resolveComponent"])("el-input"),tt=Object(a["resolveComponent"])("el-form-item"),nt=Object(a["resolveComponent"])("el-col"),at=Object(a["resolveComponent"])("el-row"),rt=Object(a["resolveComponent"])("el-transfer"),ot=Object(a["resolveComponent"])("el-form"),ct=Object(a["resolveComponent"])("hd-dialog"),lt=Object(a["resolveComponent"])("fence-box"),it=Object(a["resolveComponent"])("el-option"),ut=Object(a["resolveComponent"])("el-select"),st=Object(a["resolveComponent"])("el-time-picker"),dt=Object(a["resolveComponent"])("el-date-picker"),ft=Object(a["resolveComponent"])("el-tag"),mt=Object(a["resolveComponent"])("el-table"),bt=Object(a["resolveComponent"])("contextmenu-content"),pt=Object(a["resolveComponent"])("form-content"),Ot=Object(a["resolveComponent"])("dragable-container"),ht=Object(a["resolveComponent"])("monitor-list"),jt=Object(a["resolveComponent"])("history-monitor"),vt=Object(a["resolveComponent"])("playback-control"),gt=Object(a["resolveComponent"])("handle"),yt=Object(a["resolveComponent"])("layer-person-list"),wt=Object(a["resolveComponent"])("map-choosen"),Vt=Object(a["resolveDirective"])("loading");return Object(a["openBlock"])(),Object(a["createBlock"])("main",s,[d,Object(a["createVNode"])(i,null,{default:u((function(){return[Object(a["withDirectives"])(Object(a["createVNode"])(l,{ref:"mainNavRef",onNavClick:e.navClick},null,8,["onNavClick"]),[[a["vShow"],e.visibleObj.nav&&e.showMenu]])]})),_:1}),Object(a["createVNode"])(We,{modelValue:e.drawerInfo.showList,"onUpdate:modelValue":t[3]||(t[3]=function(t){return e.drawerInfo.showList=t}),direction:"rtl",size:"50%","with-header":!1,onClose:e.resetNavIndex,"append-to-body":""},{default:u((function(){return[Object(a["createVNode"])("div",f,[Object(a["createVNode"])("div",m,[Object(a["createVNode"])("div",b,Object(a["toDisplayString"])(e.drawerInfo.drawerTitle),1),Object(a["createVNode"])("i",{class:"el-icon-close close-btn",onClick:t[1]||(t[1]=function(t){return e.drawerInfo.showList=!1})})]),Object(a["createVNode"])(Ge,{modelValue:e.drawerInfo.activeName,"onUpdate:modelValue":t[2]||(t[2]=function(t){return e.drawerInfo.activeName=t}),type:"card",onTabClick:e.equipSwitchClick},{default:u((function(){return[Object(a["createVNode"])(Ee,{label:"摄像头",name:e.types.camera},{default:u((function(){return[e.drawerInfo.activeName===e.types.camera?(Object(a["openBlock"])(),Object(a["createBlock"])(Me,{key:0,"form-data":e.detailsForm.formData,onSeeNowVideo:e.seeNowVideo,onSeeHistoryVideo:e.seeHistoryVideo,onShowEquipDetails:e.showEquipDetails},null,8,["form-data","onSeeNowVideo","onSeeHistoryVideo","onShowEquipDetails"])):Object(a["createCommentVNode"])("",!0)]})),_:1},8,["name"]),Object(a["createVNode"])(Ee,{label:"基站",name:e.types.basestation},{default:u((function(){return[e.drawerInfo.activeName===e.types.basestation?(Object(a["openBlock"])(),Object(a["createBlock"])(He,{key:0,"form-data":e.detailsForm.formData,onShowEquipDetails:e.showEquipDetails},null,8,["form-data","onShowEquipDetails"])):Object(a["createCommentVNode"])("",!0)]})),_:1},8,["name"]),Object(a["createVNode"])(Ee,{label:"标签",name:e.types.labelList},{default:u((function(){return[e.drawerInfo.activeName===e.types.labelList?(Object(a["openBlock"])(),Object(a["createBlock"])(Ue,{key:0,"form-data":e.detailsForm.formData,wsAllLabel:e.person.all,onShowEquipDetails:e.showEquipDetails},null,8,["form-data","wsAllLabel","onShowEquipDetails"])):Object(a["createCommentVNode"])("",!0)]})),_:1},8,["name"]),Object(a["createVNode"])(Ee,{label:"人员",name:e.types.person},{default:u((function(){return[e.drawerInfo.activeName===e.types.person?(Object(a["openBlock"])(),Object(a["createBlock"])(ze,{key:0,"form-data":e.detailsForm.formData,wsAllLabel:e.person.all,onShowEquipDetails:e.showEquipDetails},null,8,["form-data","wsAllLabel","onShowEquipDetails"])):Object(a["createCommentVNode"])("",!0)]})),_:1},8,["name"])]})),_:1},8,["modelValue","onTabClick"])])]})),_:1},8,["modelValue","onClose"]),Object(a["createVNode"])(Qe,{title:"电子围栏",modelValue:e.fenceListInfo.tableVisible,"onUpdate:modelValue":t[7]||(t[7]=function(t){return e.fenceListInfo.tableVisible=t}),width:"50%"},{default:u((function(){return[Object(a["createVNode"])("div",p,[Object(a["createVNode"])(Ye,{type:"primary",onClick:e.handleAddFence},{default:u((function(){return[O]})),_:1},8,["onClick"]),e.fenceListInfo.tableData.length>0?(Object(a["openBlock"])(),Object(a["createBlock"])(a["Fragment"],{key:0},[Object(a["createVNode"])(Ye,{type:"primary",onClick:t[4]||(t[4]=function(t){return e.toggleAllFenceVisible(!0)})},{default:u((function(){return[h]})),_:1}),Object(a["createVNode"])(Ye,{type:"primary",onClick:t[5]||(t[5]=function(t){return e.toggleAllFenceVisible(!1)})},{default:u((function(){return[j]})),_:1})],64)):Object(a["createCommentVNode"])("",!0)]),Object(a["withDirectives"])(Object(a["createVNode"])($e,{data:e.fenceListInfo.tableData},{default:u((function(){return[Object(a["createVNode"])(qe,{prop:"areaname",label:"围栏名称"}),Object(a["createVNode"])(Je,{label:"显示",width:"",align:"center"},{default:u((function(t){var n=t.row;return[Object(a["createVNode"])(Xe,{modelValue:n.show,"onUpdate:modelValue":function(e){return n.show=e},onChange:function(t){return e.changeAreaVisible(t,n.areaids)}},null,8,["modelValue","onUpdate:modelValue","onChange"])]})),_:1}),Object(a["createVNode"])(Je,{label:"操作",width:"250",align:"center"},{default:u((function(t){var n=t.row;return[Object(a["createVNode"])(Ye,{type:"primary",size:"mini",onClick:function(t){return e.handleEditFence(n)}},{default:u((function(){return[v]})),_:2},1032,["onClick"]),Object(a["createVNode"])(Ye,{type:"primary",size:"mini",onClick:function(t){return e.handleSeeRules(n)}},{default:u((function(){return[g]})),_:2},1032,["onClick"]),Object(a["createVNode"])(Ze,{title:"确定删除电子围栏 ".concat(n.areaname," ？"),onConfirm:function(t){return e.handleDelFence(n)},effect:"dark"},{reference:u((function(){return[Object(a["createVNode"])(Ye,{type:"danger",size:"mini",style:{"margin-left":"10px"}},{default:u((function(){return[y]})),_:1})]})),_:2},1032,["title","onConfirm"])]})),_:1})]})),_:1},8,["data"]),[[Vt,e.fenceListInfo.loading]]),Object(a["withDirectives"])(Object(a["createVNode"])(Ke,{"current-page":e.fenceListInfo.params.curpage,"onUpdate:current-page":t[6]||(t[6]=function(t){return e.fenceListInfo.params.curpage=t}),layout:"total, prev, pager, next, jumper",total:e.fenceListInfo.total,background:"",onCurrentChange:e.fenceCurrentChange},null,8,["current-page","total","onCurrentChange"]),[[a["vShow"],e.fenceListInfo.total]])]})),_:1},8,["modelValue"]),Object(a["createVNode"])(ct,{title:"".concat(0===e.fenceInfo.dialogType?"新增":"编辑","电子围栏"),modelValue:e.fenceInfo.visible,"onUpdate:modelValue":t[10]||(t[10]=function(t){return e.fenceInfo.visible=t}),width:"800px",showFooterButtons:"","close-on-click-modal":!1,confirmButtonDisabled:!e.drawFenceInfo.clonePoints.length,onConfirm:e.handleSubmitFence,onCancel:t[11]||(t[11]=function(t){return e.fenceInfo.visible=!1})},{default:u((function(){return[Object(a["createVNode"])(ot,{ref:"fenceInfoFormRef",model:e.fenceInfo.form,rules:e.fenceInfo.rules,"label-width":"120px"},{default:u((function(){return[Object(a["createVNode"])(at,{gutter:0},{default:u((function(){return[Object(a["createVNode"])(nt,{span:12,offset:0},{default:u((function(){return[Object(a["createVNode"])(tt,{label:"电子围栏名称：",prop:"name"},{default:u((function(){return[Object(a["createVNode"])(et,{modelValue:e.fenceInfo.form.name,"onUpdate:modelValue":t[8]||(t[8]=function(t){return e.fenceInfo.form.name=t}),modelModifiers:{trim:!0},clearable:"",style:{"max-width":"200px"},placeholder:"请输入电子围栏名称"},null,8,["modelValue"])]})),_:1})]})),_:1})]})),_:1}),Object(a["createVNode"])(tt,{label:"选择关联设备："},{default:u((function(){return[Object(a["createVNode"])(rt,{modelValue:e.fenceInfo.form.chosenCamera,"onUpdate:modelValue":t[9]||(t[9]=function(t){return e.fenceInfo.form.chosenCamera=t}),filterable:"","filter-placeholder":"请输入名称",data:e.fenceInfo.allMapCamera,titles:["可选择设备","已选择设备"],props:e.transferProps},{default:u((function(e){var t=e.option;return[Object(a["createVNode"])("span",null,Object(a["toDisplayString"])(t.dname),1)]})),_:1},8,["modelValue","data","props"])]})),_:1}),Object(a["createVNode"])(tt,{label:"绘制地图：",required:""},{default:u((function(){return[Object(a["createVNode"])(Ye,{type:"success",size:"mini",onClick:e.handleFenceDraw},{default:u((function(){return[Object(a["createTextVNode"])(Object(a["toDisplayString"])("".concat(0===e.drawFenceInfo.clonePoints.length?"开始":"重新","绘制")),1)]})),_:1},8,["onClick"])]})),_:1})]})),_:1},8,["model","rules"])]})),_:1},8,["title","modelValue","confirmButtonDisabled","onConfirm"]),Object(a["createVNode"])(i,null,{default:u((function(){return[e.status.isDrawFence?(Object(a["openBlock"])(),Object(a["createBlock"])(lt,{key:0,onRevoke:e.handleRevokeFence,onRedraw:e.handleRedrawFence,onCancel:e.handleCancelDrawFence,onFinish:e.handleFinishDrawFence},null,8,["onRevoke","onRedraw","onCancel","onFinish"])):Object(a["createCommentVNode"])("",!0)]})),_:1}),Object(a["createVNode"])(ct,{title:"规则列表",modelValue:e.ruleListInfo.visiable,"onUpdate:modelValue":t[13]||(t[13]=function(t){return e.ruleListInfo.visiable=t})},{default:u((function(){return[Object(a["createVNode"])("div",w,[Object(a["createVNode"])(Ye,{type:"primary",onClick:e.handleAddRule},{default:u((function(){return[V]})),_:1},8,["onClick"])]),Object(a["withDirectives"])(Object(a["createVNode"])($e,{data:e.ruleListInfo.tableData},{default:u((function(){return[Object(a["createVNode"])(qe,{label:"规则类型",prop:"labelType"}),Object(a["createVNode"])(qe,{label:"是否每日循环",prop:"loop"}),Object(a["createVNode"])(qe,{label:"开始时间",width:"",align:"center",prop:"stime"}),Object(a["createVNode"])(qe,{label:"结束时间",width:"",align:"center",prop:"etime"}),Object(a["createVNode"])(Je,{label:"操作",width:"210",align:"center"},{default:u((function(t){var n=t.row;return[Object(a["createVNode"])(Ye,{type:"primary",size:"mini",onClick:function(t){return e.handleEditRule(n)}},{default:u((function(){return[N]})),_:2},1032,["onClick"]),Object(a["createVNode"])(Ze,{title:"确定删除该规则？",onConfirm:function(t){return e.handleDelRule(n)},effect:"dark"},{reference:u((function(){return[Object(a["createVNode"])(Ye,{type:"danger",size:"mini",style:{"margin-left":"10px"}},{default:u((function(){return[C]})),_:1})]})),_:2},1032,["onConfirm"])]})),_:1})]})),_:1},8,["data"]),[[Vt,e.ruleListInfo.loading]]),Object(a["withDirectives"])(Object(a["createVNode"])(Ke,{"current-page":e.ruleListInfo.curpage,"onUpdate:current-page":t[12]||(t[12]=function(t){return e.ruleListInfo.curpage=t}),layout:"total, prev, pager, next, jumper",total:e.ruleListInfo.total,background:"",onCurrentChange:e.ruleCurrentChange},null,8,["current-page","total","onCurrentChange"]),[[a["vShow"],e.ruleListInfo.total]])]})),_:1},8,["modelValue"]),Object(a["createVNode"])(ct,{title:(0===e.ruleItemDetail.dialogType?"新增":"编辑")+"规则",modelValue:e.ruleItemDetail.visiable,"onUpdate:modelValue":t[23]||(t[23]=function(t){return e.ruleItemDetail.visiable=t}),width:"60%","close-on-click-modal":!1,showFooterButtons:"",onConfirm:e.handleSubmitRule,onCancel:t[24]||(t[24]=function(t){return e.ruleItemDetail.visiable=!1})},{default:u((function(){return[Object(a["createVNode"])(ot,{ref:"ruleFormRef",model:e.ruleItemDetail.form,rules:e.ruleItemDetailRule,"label-width":"100px"},{default:u((function(){return[Object(a["createVNode"])(at,{gutter:20},{default:u((function(){return[Object(a["createVNode"])(nt,{span:12,offset:0},{default:u((function(){return[Object(a["createVNode"])(tt,{label:"每天循环："},{default:u((function(){return[Object(a["createVNode"])(Xe,{modelValue:e.ruleItemDetail.form.isLoop,"onUpdate:modelValue":t[14]||(t[14]=function(t){return e.ruleItemDetail.form.isLoop=t})},null,8,["modelValue"])]})),_:1})]})),_:1}),Object(a["createVNode"])(nt,{span:12,offset:0},{default:u((function(){return[Object(a["createVNode"])(tt,{label:"规则类型：",prop:"permitType"},{default:u((function(){return[Object(a["createVNode"])(ut,{modelValue:e.ruleItemDetail.form.permitType,"onUpdate:modelValue":t[15]||(t[15]=function(t){return e.ruleItemDetail.form.permitType=t}),placeholder:"请选择规则类型",clearable:""},{default:u((function(){return[(Object(a["openBlock"])(!0),Object(a["createBlock"])(a["Fragment"],null,Object(a["renderList"])(e.areaRulesOption,(function(e){return Object(a["openBlock"])(),Object(a["createBlock"])(it,{key:e.value,label:e.label,value:e.value},null,8,["label","value"])})),128))]})),_:1},8,["modelValue"])]})),_:1})]})),_:1})]})),_:1}),"6"===e.ruleItemDetail.form.permitType||"7"===e.ruleItemDetail.form.permitType?(Object(a["openBlock"])(),Object(a["createBlock"])(at,{key:0,gutter:20},{default:u((function(){return[Object(a["createVNode"])(nt,{span:12,offset:0},{default:u((function(){return[Object(a["createVNode"])(tt,{label:"限时时长：",prop:"limitedTime"},{default:u((function(){return[Object(a["createVNode"])(et,{modelValue:e.ruleItemDetail.form.limitedTime,"onUpdate:modelValue":t[16]||(t[16]=function(t){return e.ruleItemDetail.form.limitedTime=t}),modelModifiers:{trim:!0},placeholder:"请输入大于0的正整数",clearable:"",style:{"max-width":"200px"}},null,8,["modelValue"])]})),_:1})]})),_:1})]})),_:1})):Object(a["createCommentVNode"])("",!0),e.ruleItemDetail.form.isLoop?(Object(a["openBlock"])(),Object(a["createBlock"])(at,{key:1,gutter:20},{default:u((function(){return[Object(a["createVNode"])(nt,{span:12,offset:0},{default:u((function(){return[Object(a["createVNode"])(tt,{label:"开始时间：",prop:"startTime"},{default:u((function(){return[Object(a["createVNode"])(st,{modelValue:e.ruleItemDetail.form.startTime,"onUpdate:modelValue":t[17]||(t[17]=function(t){return e.ruleItemDetail.form.startTime=t}),placeholder:"开始时间",onChange:e.timerPickerChange},null,8,["modelValue","onChange"])]})),_:1})]})),_:1}),Object(a["createVNode"])(nt,{span:12,offset:0},{default:u((function(){return[Object(a["createVNode"])(tt,{label:"结束时间：",prop:"endTime"},{default:u((function(){return[Object(a["createVNode"])(st,{modelValue:e.ruleItemDetail.form.endTime,"onUpdate:modelValue":t[18]||(t[18]=function(t){return e.ruleItemDetail.form.endTime=t}),placeholder:"结束时间"},null,8,["modelValue"])]})),_:1})]})),_:1})]})),_:1})):(Object(a["openBlock"])(),Object(a["createBlock"])(at,{key:2,gutter:20},{default:u((function(){return[Object(a["createVNode"])(nt,{span:12,offset:0},{default:u((function(){return[Object(a["createVNode"])(tt,{label:"开始时间：",prop:"startTime"},{default:u((function(){return[Object(a["createVNode"])(dt,{modelValue:e.ruleItemDetail.form.startTime,"onUpdate:modelValue":t[19]||(t[19]=function(t){return e.ruleItemDetail.form.startTime=t}),type:"datetime",placeholder:"选择开始日期时间",onChange:t[20]||(t[20]=function(t){return e.ruleItemDetail.form.endTime=""})},null,8,["modelValue"])]})),_:1})]})),_:1}),Object(a["createVNode"])(nt,{span:12,offset:0},{default:u((function(){return[Object(a["createVNode"])(tt,{label:"结束时间：",prop:"endTime"},{default:u((function(){return[Object(a["createVNode"])(dt,{modelValue:e.ruleItemDetail.form.endTime,"onUpdate:modelValue":t[21]||(t[21]=function(t){return e.ruleItemDetail.form.endTime=t}),type:"datetime",placeholder:"选择结束日期时间",disabled:!e.ruleItemDetail.form.startTime,disabledDate:e.ruleDisabledDate},null,8,["modelValue","disabled","disabledDate"])]})),_:1})]})),_:1})]})),_:1})),Object(a["createVNode"])(at,{gutter:0},{default:u((function(){return[Object(a["createVNode"])(nt,{span:24,offset:0},{default:u((function(){return[Object(a["createVNode"])(tt,{label:"备注："},{default:u((function(){return[Object(a["createVNode"])(et,{modelValue:e.ruleItemDetail.form.memo,"onUpdate:modelValue":t[22]||(t[22]=function(t){return e.ruleItemDetail.form.memo=t}),type:"textarea"},null,8,["modelValue"])]})),_:1})]})),_:1})]})),_:1})]})),_:1},8,["model","rules"])]})),_:1},8,["title","modelValue","onConfirm"]),Object(a["createVNode"])(Qe,{title:"报警管理",modelValue:e.alarmListInfo.tableVisible,"onUpdate:modelValue":t[30]||(t[30]=function(t){return e.alarmListInfo.tableVisible=t}),width:"65%"},{default:u((function(){return[Object(a["createVNode"])(ot,{model:e.alarmListInfo.params,"label-width":"80px",inline:!0},{default:u((function(){return[Object(a["createVNode"])(tt,{label:""},{default:u((function(){return[Object(a["createVNode"])(ut,{modelValue:e.alarmListInfo.SourceType,"onUpdate:modelValue":t[25]||(t[25]=function(t){return e.alarmListInfo.SourceType=t}),placeholder:"全部类型",style:{width:"160px"},clearable:"",filterable:"",onChange:e.getAlarmListByCondition},{default:u((function(){return[(Object(a["openBlock"])(!0),Object(a["createBlock"])(a["Fragment"],null,Object(a["renderList"])(e.alarmType,(function(e){return Object(a["openBlock"])(),Object(a["createBlock"])(it,{key:e.value,label:e.label,value:e.value},null,8,["label","value"])})),128))]})),_:1},8,["modelValue","onChange"])]})),_:1}),Object(a["createVNode"])(tt,{label:""},{default:u((function(){return[Object(a["createVNode"])(dt,{modelValue:e.alarmListInfo.timeRange,"onUpdate:modelValue":t[26]||(t[26]=function(t){return e.alarmListInfo.timeRange=t}),type:"datetimerange","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期",onChange:e.getAlarmListByCondition},null,8,["modelValue","onChange"])]})),_:1}),Object(a["createVNode"])(tt,{label:""},{default:u((function(){return[Object(a["createVNode"])(ut,{modelValue:e.alarmListInfo.alarmLevel,"onUpdate:modelValue":t[27]||(t[27]=function(t){return e.alarmListInfo.alarmLevel=t}),placeholder:"全部等级",style:{width:"120px"},clearable:"",filterable:"",onChange:e.getAlarmListByCondition},{default:u((function(){return[Object(a["createVNode"])(it,{label:"普通",value:"0"}),Object(a["createVNode"])(it,{label:"紧急",value:"1"}),Object(a["createVNode"])(it,{label:"危急",value:"2"})]})),_:1},8,["modelValue","onChange"])]})),_:1}),Object(a["createVNode"])(tt,{label:""},{default:u((function(){return[Object(a["createVNode"])(ut,{modelValue:e.alarmListInfo.alarmProgress,"onUpdate:modelValue":t[28]||(t[28]=function(t){return e.alarmListInfo.alarmProgress=t}),placeholder:"全部状态",style:{width:"120px"},clearable:"",filterable:"",onChange:e.getAlarmListByCondition},{default:u((function(){return[Object(a["createVNode"])(it,{label:"未处理",value:"未处理"}),Object(a["createVNode"])(it,{label:"已处理",value:"已处理"})]})),_:1},8,["modelValue","onChange"])]})),_:1})]})),_:1},8,["model"]),Object(a["withDirectives"])(Object(a["createVNode"])($e,{data:e.alarmListInfo.tableData,"header-cell-style":{"text-align":"center"}},{default:u((function(){return[Object(a["createVNode"])(qe,{label:"类型",prop:"SourceType",width:"100"}),Object(a["createVNode"])(Je,{label:"等级",width:"90",align:"center","show-overflow-tooltip":""},{default:u((function(e){var t=e.row;return[0===t.alarmLevel?(Object(a["openBlock"])(),Object(a["createBlock"])(ft,{key:0},{default:u((function(){return[k]})),_:1})):Object(a["createCommentVNode"])("",!0),1===t.alarmLevel?(Object(a["openBlock"])(),Object(a["createBlock"])(ft,{key:1,type:"warning"},{default:u((function(){return[x]})),_:1})):Object(a["createCommentVNode"])("",!0),2===t.alarmLevel?(Object(a["openBlock"])(),Object(a["createBlock"])(ft,{key:2,type:"danger"},{default:u((function(){return[T]})),_:1})):Object(a["createCommentVNode"])("",!0)]})),_:1}),Object(a["createVNode"])(Je,{label:"状态",width:"90",align:"center","show-overflow-tooltip":""},{default:u((function(e){var t=e.row;return["未处理"===t.alarmProgress?(Object(a["openBlock"])(),Object(a["createBlock"])(ft,{key:0,type:"danger"},{default:u((function(){return[Object(a["createTextVNode"])(Object(a["toDisplayString"])(t.alarmProgress),1)]})),_:2},1024)):Object(a["createCommentVNode"])("",!0),"已处理"===t.alarmProgress?(Object(a["openBlock"])(),Object(a["createBlock"])(ft,{key:1,type:"success"},{default:u((function(){return[Object(a["createTextVNode"])(Object(a["toDisplayString"])(t.alarmProgress),1)]})),_:2},1024)):Object(a["createCommentVNode"])("",!0)]})),_:1}),Object(a["createVNode"])(qe,{prop:"alarmContent",label:"内容",width:"","show-overflow-tooltip":""}),Object(a["createVNode"])(qe,{prop:"CreateTime",label:"时间",width:"155"}),Object(a["createVNode"])(Je,{label:"操作",width:"240",align:"center"},{default:u((function(t){var n=t.row;return["未处理"===n.alarmProgress?(Object(a["openBlock"])(),Object(a["createBlock"])(Ye,{key:0,type:"primary",size:"mini",onClick:function(t){return e.handleHandleAlarm(n)}},{default:u((function(){return[S]})),_:2},1032,["onClick"])):Object(a["createCommentVNode"])("",!0),Object(a["createVNode"])(Ye,{type:"primary",size:"mini",onClick:function(t){return e.showAlarmDetail(n)}},{default:u((function(){return[D]})),_:2},1032,["onClick"]),Object(a["createVNode"])(Ze,{title:"确定跳转到报警位置 ？",effect:"dark"},{reference:u((function(){return[Object(a["createVNode"])(Ye,{type:"primary",size:"mini"},{default:u((function(){return[I]})),_:1})]})),_:1})]})),_:1})]})),_:1},8,["data"]),[[Vt,e.alarmListInfo.loading]]),Object(a["withDirectives"])(Object(a["createVNode"])(Ke,{"current-page":e.alarmListInfo.params.curpage,"onUpdate:current-page":t[29]||(t[29]=function(t){return e.alarmListInfo.params.curpage=t}),"page-size":e.alarmListInfo.params.size,layout:"total, prev, pager, next, jumper",total:e.alarmListInfo.total,background:"",onCurrentChange:e.alarmCurrentChange},null,8,["current-page","page-size","total","onCurrentChange"]),[[a["vShow"],e.alarmListInfo.total]])]})),_:1},8,["modelValue"]),Object(a["createVNode"])(Qe,{title:"报警详情",modelValue:e.alarmInfo.visible,"onUpdate:modelValue":t[31]||(t[31]=function(t){return e.alarmInfo.visible=t}),width:"1000px"},{default:u((function(){return[Object(a["createVNode"])("div",B,[Object(a["createVNode"])("div",L,[Object(a["createVNode"])("div",R,[Object(a["createVNode"])("div",_,[Object(a["createVNode"])("ul",P,[Object(a["createVNode"])("li",null,[Object(a["createVNode"])("span",null,[A,Object(a["createVNode"])("span",F,Object(a["toDisplayString"])(e.alarmInfo.form.SourceType),1)]),Object(a["createVNode"])("span",null,[M,Object(a["createVNode"])("span",E,Object(a["toDisplayString"])(e.alarmInfo.form.CreateTime),1)])]),Object(a["createVNode"])("li",null,[Object(a["createVNode"])("span",null,[H,0===e.alarmInfo.form.alarmLevel?(Object(a["openBlock"])(),Object(a["createBlock"])(ft,{key:0},{default:u((function(){return[U]})),_:1})):Object(a["createCommentVNode"])("",!0),1===e.alarmInfo.form.alarmLevel?(Object(a["openBlock"])(),Object(a["createBlock"])(ft,{key:1,type:"warning"},{default:u((function(){return[z]})),_:1})):Object(a["createCommentVNode"])("",!0),2===e.alarmInfo.form.alarmLevel?(Object(a["openBlock"])(),Object(a["createBlock"])(ft,{key:2,type:"danger"},{default:u((function(){return[G]})),_:1})):Object(a["createCommentVNode"])("",!0)]),Object(a["createVNode"])("span",null,[W,Object(a["createVNode"])("span",Y,Object(a["toDisplayString"])(e.alarmInfo.form.SourceName),1)])]),Object(a["createVNode"])("li",null,[Object(a["createVNode"])("span",null," 所在地图："+Object(a["toDisplayString"])(e.getMapByNum(e.alarmInfo.form.ShowSceneNum).sname),1),Object(a["createVNode"])("span",null," 位置坐标："+Object(a["toDisplayString"])(e.alarmInfo.form.SourcePointNum),1)])])]),Object(a["createVNode"])("div",q,[Object(a["createVNode"])("img",{src:"".concat(e.imgUrl,"/").concat(e.getMapByNum(e.alarmInfo.form.ShowSceneNum).surl),alt:"",ref:"mapImg"},null,8,["src"]),Object(a["createVNode"])("span",{class:"icon iconfont pointImg",ref:"pointImg",style:e.alarmInfo.iconStyle},"",4)])]),Object(a["createVNode"])("ul",X,[Object(a["createVNode"])("li",J,[Object(a["createVNode"])("div",null,[Z,"未处理"===e.alarmInfo.form.alarmProgress?(Object(a["openBlock"])(),Object(a["createBlock"])(ft,{key:0,type:"danger",style:{width:"fit-content"}},{default:u((function(){return[Object(a["createTextVNode"])(Object(a["toDisplayString"])(e.alarmInfo.form.alarmProgress),1)]})),_:1})):Object(a["createCommentVNode"])("",!0),"已处理"===e.alarmInfo.form.alarmProgress?(Object(a["openBlock"])(),Object(a["createBlock"])(ft,{key:1,type:"success"},{default:u((function(){return[Object(a["createTextVNode"])(Object(a["toDisplayString"])(e.alarmInfo.form.alarmProgress),1)]})),_:1})):Object(a["createCommentVNode"])("",!0)]),Object(a["withDirectives"])(Object(a["createVNode"])("div",null," 处理用户："+Object(a["toDisplayString"])(e.alarmInfo.form.dealAccount),513),[[a["vShow"],e.alarmInfo.form.dealAccount]]),Object(a["withDirectives"])(Object(a["createVNode"])("div",null," 处理时间："+Object(a["toDisplayString"])(e.alarmInfo.form.dealTime),513),[[a["vShow"],e.alarmInfo.form.dealAccount]])]),Object(a["withDirectives"])(Object(a["createVNode"])("li",$,[K,Q],512),[[a["vShow"],e.alarmInfo.form.SourceName]]),Object(a["createVNode"])("li",ee,[Object(a["createVNode"])(Ye,{size:"mini",type:"info"},{default:u((function(){return[te]})),_:1}),Object(a["createVNode"])(Ze,{title:"确定跳转到人员实时位置 ？",effect:"dark"},{reference:u((function(){return[Object(a["createVNode"])(Ye,{type:"primary",size:"mini"},{default:u((function(){return[ne]})),_:1})]})),_:1})]),Object(a["createVNode"])("li",ae,[Object(a["createVNode"])(Ze,{title:"确定跳转到报警位置 ？",effect:"dark",onConfirm:e.handleLocate},{reference:u((function(){return[Object(a["createVNode"])(Ye,{type:"primary",size:"mini"},{default:u((function(){return[re]})),_:1})]})),_:1},8,["onConfirm"])]),Object(a["createVNode"])("li",oe,[Object(a["createVNode"])("div",null,[ce,Object(a["createVNode"])("p",null,Object(a["toDisplayString"])(e.alarmInfo.form.alarmContent),1)])])],512)])])]})),_:1},8,["modelValue"]),Object(a["createVNode"])(Qe,{title:"报警处理",modelValue:e.alarmInfo.handleVisible,"onUpdate:modelValue":t[36]||(t[36]=function(t){return e.alarmInfo.handleVisible=t}),width:"30%","close-on-click-modal":!1},{footer:u((function(){return[Object(a["createVNode"])("span",ie,[Object(a["createVNode"])(Ye,{onClick:t[35]||(t[35]=function(t){return e.alarmInfo.handleVisible=!1})},{default:u((function(){return[ue]})),_:1}),Object(a["createVNode"])(Ye,{type:"primary",onClick:e.alarmHandleSubmit},{default:u((function(){return[se]})),_:1},8,["onClick"])])]})),default:u((function(){return[Object(a["createVNode"])(ot,{"abel-width":"100px",rules:e.alarmInfo.rules},{default:u((function(){return[Object(a["createVNode"])(tt,{label:"处理类型"},{default:u((function(){return[Object(a["createVNode"])(ut,{modelValue:e.alarmInfo.form.handleType,"onUpdate:modelValue":t[32]||(t[32]=function(t){return e.alarmInfo.form.handleType=t}),placeholder:"处理类型",clearable:"",filterable:""},{default:u((function(){return[(Object(a["openBlock"])(!0),Object(a["createBlock"])(a["Fragment"],null,Object(a["renderList"])(e.handleTypeList,(function(e){return Object(a["openBlock"])(),Object(a["createBlock"])(it,{key:e.id,label:e.content,value:e.content},null,8,["label","value"])})),128))]})),_:1},8,["modelValue"])]})),_:1}),Object(a["createVNode"])(tt,{label:"处理结果"},{default:u((function(){return[Object(a["createVNode"])("div",null,[Object(a["createVNode"])(et,{type:"textarea",style:{width:"80%"},rows:4,placeholder:"请输入处理结果",modelValue:e.alarmInfo.form.handleContent,"onUpdate:modelValue":t[33]||(t[33]=function(t){return e.alarmInfo.form.handleContent=t}),onFocus:t[34]||(t[34]=function(t){return e.alarmInfo.handleExampleVisible=!0})},null,8,["modelValue"]),e.alarmInfo.handleExampleVisible?(Object(a["openBlock"])(),Object(a["createBlock"])("i",le,"模板")):Object(a["createCommentVNode"])("",!0),e.alarmInfo.handleExampleVisible?(Object(a["openBlock"])(),Object(a["createBlock"])(mt,{key:1,data:e.handleExample,onRowClick:e.getHandleExample,"show-header":!1},{default:u((function(){return[Object(a["createVNode"])(Je,{width:"60",property:"id"}),Object(a["createVNode"])(Je,{property:"content"})]})),_:1},8,["data","onRowClick"])):Object(a["createCommentVNode"])("",!0)])]})),_:1})]})),_:1},8,["rules"])]})),_:1},8,["modelValue"]),e.visibleObj.contextmenu?(Object(a["openBlock"])(),Object(a["createBlock"])(bt,{key:0,type:e.contextmenuTypeRef,"contxtmenu-position":e.contxtmenuPosition,"contextmenu-list":e.contextmenuList,onClicked:t[37]||(t[37]=function(t){return e.visibleObj.contextmenu=!1}),onSeeNowVideo:e.seeNowVideo,onSeeHistoryVideo:e.seeHistoryVideo,onShowDetails:e.showDetails,onTrackPlayback:e.handleClickTrackPlayback,onFollow:e.personFollow},null,8,["type","contxtmenu-position","contextmenu-list","onSeeNowVideo","onSeeHistoryVideo","onShowDetails","onTrackPlayback","onFollow"])):Object(a["createCommentVNode"])("",!0),Object(a["createVNode"])(Ot,{modelValue:e.visibleObj.detailsForm,"onUpdate:modelValue":t[38]||(t[38]=function(t){return e.visibleObj.detailsForm=t}),title:e.detailsForm.formTitle,onClose:e.hideDetails},{default:u((function(){return[Object(a["createVNode"])(pt,{"form-data":e.detailsForm.formData,"form-type":e.contextmenuTypeRef,x:e.detailsForm.x,y:e.detailsForm.y},null,8,["form-data","form-type","x","y"])]})),_:1},8,["modelValue","title","onClose"]),Object(a["createVNode"])(Ot,{modelValue:e.visibleObj.monitorListFlag,"onUpdate:modelValue":t[39]||(t[39]=function(t){return e.visibleObj.monitorListFlag=t}),width:768,onClose:e.handleCloseAllVideo,title:"实时视频"},{default:u((function(){return[(Object(a["openBlock"])(!0),Object(a["createBlock"])(a["Fragment"],null,Object(a["renderList"])(e.monitorListInfo.newMonitorList,(function(t,n){return Object(a["withDirectives"])((Object(a["openBlock"])(),Object(a["createBlock"])("div",{key:n,class:e.monitorListInfo.monitorInner},[Object(a["createVNode"])(ht,{ref:"monitorListPanelRef","camera-data":t,onChangeMonitorListPanelState:function(n){return e.watchMonitorListPanelState(t.camera.id)},cameraData:t,livePlayCount:e.monitorListInfo.livePlayCount},null,8,["camera-data","onChangeMonitorListPanelState","cameraData","livePlayCount"])],2)),[[a["vShow"],t.active]])})),128))]})),_:1},8,["modelValue","onClose"]),Object(a["createVNode"])(Ot,{modelValue:e.visibleObj.historyMonitorListFlag,"onUpdate:modelValue":t[40]||(t[40]=function(t){return e.visibleObj.historyMonitorListFlag=t}),width:768,title:"历史视频",onClose:e.handleCloseAllHistoryVideo},{default:u((function(){return[(Object(a["openBlock"])(!0),Object(a["createBlock"])(a["Fragment"],null,Object(a["renderList"])(e.monitorListInfo.newHistoryMonitorList,(function(t,n){return Object(a["withDirectives"])((Object(a["openBlock"])(),Object(a["createBlock"])("div",{key:n,class:e.monitorListInfo.monitorHistoryInner},[Object(a["createVNode"])(jt,{ref:"hitoryMonitorListPanelRef","history-camera-data":t,onChangeHistoryMonitorListPanelState:function(n){return e.watchHistoryMonitorListPanelState(t.camera.id)},historyCameraData:t,historyPlayCount:e.monitorListInfo.historyPlayCount},null,8,["history-camera-data","onChangeHistoryMonitorListPanelState","historyCameraData","historyPlayCount"])],2)),[[a["vShow"],t.active]])})),128))]})),_:1},8,["modelValue","onClose"]),Object(a["createVNode"])(ct,{title:"选择轨迹回放时间",modelValue:e.trackPlayback.show,"onUpdate:modelValue":t[43]||(t[43]=function(t){return e.trackPlayback.show=t}),width:"600px","close-on-click-modal":!1,center:"",showFooterButtons:"",onOpened:e.handleOpenContextmenu,onConfirm:e.handleClickSeeTrackPlayback,onCancel:t[44]||(t[44]=function(t){return e.trackPlayback.show=!1})},{default:u((function(){return[Object(a["createVNode"])(ot,{ref:"trackPlaybackFormRef",model:e.trackPlayback.form,rules:e.trackPlayback.rules,"label-width":"100px",size:"small"},{default:u((function(){return[Object(a["createVNode"])(tt,{label:"选择日期：",prop:"date"},{default:u((function(){return[Object(a["createVNode"])(dt,{modelValue:e.trackPlayback.form.date,"onUpdate:modelValue":t[41]||(t[41]=function(t){return e.trackPlayback.form.date=t}),type:"date",placeholder:"选择日期",disabledDate:e.trackPlayback.disabledDate},null,8,["modelValue","disabledDate"])]})),_:1}),Object(a["createVNode"])(tt,{label:"时间范围：",prop:"time"},{default:u((function(){return[Object(a["createVNode"])(st,{"is-range":"",modelValue:e.trackPlayback.form.time,"onUpdate:modelValue":t[42]||(t[42]=function(t){return e.trackPlayback.form.time=t}),"range-separator":"至","start-placeholder":"开始时间","end-placeholder":"结束时间",placeholder:"选择时间范围"},null,8,["modelValue"])]})),_:1})]})),_:1},8,["model","rules"])]})),_:1},8,["modelValue","onOpened","onConfirm"]),e.status.isPlayBack?(Object(a["openBlock"])(),Object(a["createBlock"])(vt,{key:1,sTime:e.playbackObj.sTime,eTime:e.playbackObj.eTime,currentTime:e.playbackObj.currentTime,currentIndex:e.playbackObj.currentIndex,len:e.playbackObj.len,isPlay:e.playbackObj.isPlay,onChangeRate:e.changeRate,onTogglePlay:e.togglePlay,onClose:e.playbackClose,onChangeProcess:e.changeProcess},null,8,["sTime","eTime","currentTime","currentIndex","len","isPlay","onChangeRate","onTogglePlay","onClose","onChangeProcess"])):Object(a["createCommentVNode"])("",!0),Object(a["createVNode"])("div",{class:"warning-container",style:{right:e.warningWidth}},[Object(a["createVNode"])("div",de,[Object(a["createVNode"])("div",{class:"warning-show-button",onClick:t[45]||(t[45]=function(){return e.showWarningList&&e.showWarningList.apply(e,arguments)})},"报警列表"),Object(a["createVNode"])("div",fe,[Object(a["createVNode"])(ot,{model:e.fenceListInfo.params,"label-width":"80px",inline:!0},{default:u((function(){return[Object(a["createVNode"])(ut,{modelValue:e.alarmForm.type,"onUpdate:modelValue":t[46]||(t[46]=function(t){return e.alarmForm.type=t}),placeholder:"全部",clearable:"",filterable:"",style:{width:"98%"},onChange:t[47]||(t[47]=function(){})},{default:u((function(){return[(Object(a["openBlock"])(!0),Object(a["createBlock"])(a["Fragment"],null,Object(a["renderList"])(e.alarmType,(function(e){return Object(a["openBlock"])(),Object(a["createBlock"])(it,{key:e.value,label:e.label,value:e.value},null,8,["label","value"])})),128))]})),_:1},8,["modelValue"]),me,Object(a["createVNode"])(a["Transition"],{name:"slide-fade"},{default:u((function(){return[Object(a["createVNode"])(gt,{alarmType:e.alarmForm.type,wsAlarmItem:e.wsAlarmItem,handleIds:e.alarmListInfo.handleIds,onGetAlarmTotal:e.getAlarmTotal,onGetAlarmUnHandle:e.getAlarmUnHandle,onShowAlarmDetail:e.showAlarmDetail,onShowHandlePannel:e.handleHandleAlarm,cancelId:e.cancelAlarmId},null,8,["alarmType","wsAlarmItem","handleIds","onGetAlarmTotal","onGetAlarmUnHandle","onShowAlarmDetail","onShowHandlePannel","cancelId"])]})),_:1})]})),_:1},8,["model"])])])],4),e.visibleObj.layerPerson?(Object(a["openBlock"])(),Object(a["createBlock"])(yt,{key:2,"person-list":e.layerPerson,"mouse-position":e.layerPosition},null,8,["person-list","mouse-position"])):Object(a["createCommentVNode"])("",!0),Object(a["withDirectives"])(Object(a["createVNode"])("div",{class:"control-menu",onClick:t[48]||(t[48]=function(t){return e.visibleObj.controlPannel=!e.visibleObj.controlPannel})},[be],512),[[a["vShow"],!e.visibleObj.controlPannel&&e.showMenu]]),Object(a["withDirectives"])(Object(a["createVNode"])("div",pe,[Object(a["createVNode"])("div",Oe,[Object(a["createVNode"])("i",{class:"el-icon-close close-btn",onClick:t[49]||(t[49]=function(t){return e.visibleObj.controlPannel=e.fasle})}),Object(a["createVNode"])("div",he,Object(a["toDisplayString"])(e.mapNameRef),1),Object(a["createVNode"])(ut,{modelValue:e.leftPannelSearch,"onUpdate:modelValue":t[50]||(t[50]=function(t){return e.leftPannelSearch=t}),modelModifiers:{trim:!0},"remote-method":e.querySearch,filterable:"","default-first-option":"",remote:"",size:"small",placeholder:"全局搜索",class:"search-select",onChange:e.searchChange,clearable:""},{default:u((function(){return[(Object(a["openBlock"])(!0),Object(a["createBlock"])(a["Fragment"],null,Object(a["renderList"])(e.userSearchRes,(function(e){return Object(a["openBlock"])(),Object(a["createBlock"])(it,{key:e.lids,value:e.lids,label:e.ltype},null,8,["value","label"])})),128))]})),_:1},8,["modelValue","remote-method","onChange"]),Object(a["createVNode"])("div",je,[ve,Object(a["createVNode"])("div",ge,[Object(a["createVNode"])("div",ye,[Object(a["createVNode"])("div",we,Object(a["toDisplayString"])(e.person.all.length),1),Ve]),Object(a["createVNode"])("div",Ne,[Object(a["createVNode"])("div",Ce,Object(a["toDisplayString"])(e.person.currentMap.length),1),ke])])]),Object(a["createVNode"])("div",xe,[Te,Object(a["createVNode"])("div",Se,[Object(a["createVNode"])("div",De,[Object(a["createVNode"])("div",Ie,Object(a["toDisplayString"])(e.alarmInfo.alarmTotal),1),Be]),Object(a["createVNode"])("div",Le,[Object(a["createVNode"])("div",Re,Object(a["toDisplayString"])(e.alarmInfo.alarmUnHandle),1),_e])])]),Object(a["createVNode"])("div",Pe,[(Object(a["openBlock"])(!0),Object(a["createBlock"])(a["Fragment"],null,Object(a["renderList"])(e.controlButtonList,(function(t,n){return Object(a["openBlock"])(),Object(a["createBlock"])("div",{class:"control-button-item",key:"button-".concat(n)},[Object(a["createVNode"])("div",Ae,Object(a["toDisplayString"])(t.label),1),Object(a["createVNode"])(Xe,{modelValue:t.show,"onUpdate:modelValue":function(e){return t.show=e},onChange:function(n){return e.controlButtonChange(n,t.code)},size:"mini"},null,8,["modelValue","onUpdate:modelValue","onChange"])])})),128))])])],512),[[a["vShow"],e.visibleObj.controlPannel&&e.showMenu]]),Object(a["createVNode"])(Ot,{modelValue:e.visibleObj.map,"onUpdate:modelValue":t[51]||(t[51]=function(t){return e.visibleObj.map=t}),title:"选择地图",width:800,onClose:e.closeMapChoosen},{default:u((function(){return[Object(a["createVNode"])(wt,{"map-list":e.mapListRef,"map-id":e.mapIdRef,onChangeMap:e.changeMap},null,8,["map-list","map-id","onChangeMap"])]})),_:1},8,["modelValue","onClose"]),e.status.isFollowing?(Object(a["openBlock"])(),Object(a["createBlock"])(Ye,{key:3,class:"close-follow",type:"primary",onClick:e.handleCloseFollow},{default:u((function(){return[Fe]})),_:1},8,["onClick"])):Object(a["createCommentVNode"])("",!0)])})),Ee=(n("4de4"),n("c740"),n("4160"),n("caad"),n("45fc"),n("a434"),n("a9e3"),n("b680"),n("b64b"),n("ac1f"),n("2532"),n("5319"),n("1276"),n("159b"),n("0769"),n("f3fc"),n("31b0")),He=n.n(Ee),Ue=n("2909"),ze=(n("96cf"),n("1da1")),Ge=(n("7f17"),n("6573")),We=n.n(Ge),Ye=n("5530"),qe=n("b047"),Xe=n.n(qe),Je=n("0644"),Ze=n.n(Je),$e=n("6c65"),Ke=n("15a1"),Qe={getAllAlarmType:function(e){return Object(Ke["a"])({url:"/tbs/getalarmtype",method:"post",data:e})},dealAlarmItem:function(e){return Object(Ke["a"])({url:"/alarm/deal",method:"post",data:e})},dealAlarms:function(e){return Object(Ke["a"])({url:"/alarm/dealall",method:"post",data:e})}},et={getCommonApi:function(e){return Object(Ke["a"])({url:"/rcaec/bigwa",method:"post",data:e})}},tt=n("9de4"),nt=n("362d"),at=n.n(nt),rt=(n("25f0"),n("3835")),ot=n("1e4a"),ct=n("6ac5"),lt=n("5a0c"),it=n.n(lt);function ut(e,t,n){return{x:e.x-t.x*n,y:e.y-t.y*n}}function st(e,t){var n=e.offsetWidth,a=e.offsetHeight,r=window.innerWidth,o=window.innerHeight,c={left:t.left,top:t.top};return t.left+n>r&&(c.left=r-n),t.top+a+ot["h"]>o&&(c.top=o-ot["h"]-a),c}function dt(e,t){var n=t.sx,a=t.sy,r=t.scale;return{x:(e.x-n)/r,y:(e.y-ot["h"]-a)/r}}function ft(e){var t=e.split(",").map((function(e){return Number(e)})),n=Object(rt["a"])(t,2),a=n[0],r=n[1];return{x:a,y:r}}function mt(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=e.pathSrc,a=e.width,r=e.height,o=e.color,c=document.createElementNS("http://www.w3.org/2000/svg","svg");c.setAttribute("width","".concat(a)),c.setAttribute("height","".concat(r)),c.setAttribute("x","0"),c.setAttribute("y","0"),c.setAttribute("viewBox","0 0 ".concat(t?a:"1024"," ").concat(t?r:"1024"));var l=document.createElementNS("http://www.w3.org/2000/svg","path");l.setAttribute("d",t?ot["n"].bottom:n),l.setAttribute("width","100%"),l.setAttribute("height","100%"),l.setAttribute("fill","".concat(o)),c.appendChild(l);var i=(new XMLSerializer).serializeToString(c),u=window.btoa(i),s=new window.Image;return s.src="data:image/svg+xml;base64,".concat(u),s}function bt(){function e(){return(65536*(1+Math.random())|0).toString(16).substring(1)}return e()+e()+"-"+e()+"-"+e()+"-"+e()+"-"+e()+e()+e()}function pt(e){return Ot.apply(this,arguments)}function Ot(){return Ot=Object(ze["a"])(regeneratorRuntime.mark((function e(t){var n,a,r,o,c,l,i,u,s,d,f,m;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(n=t.defdata.layrestype,"3"!==n){e.next=11;break}return a=t,r=a.defdata,o=r.layinfo,c=r.W,l=r.H,i=r.Color,u={pathSrc:o,width:c,height:l,color:i},e.next=7,mt(u);case 7:return s=e.sent,e.abrupt("return",s);case 11:return d=t,f=d.defdata.layinfo,m=new window.Image,m.src=tt["d"]+f,e.abrupt("return",m);case 16:case"end":return e.stop()}}),e)}))),Ot.apply(this,arguments)}function ht(e,t){0===e.width?e.onload=function(){t()}:t()}var jt=function(){var e;(function(e){e[e["location"]=3]="location",e[e["Alarm"]=1]="Alarm",e[e["Trans"]=199]="Trans"})(e||(e={}));var t={location:"",alarm:""},n=Object(ct["g"])();return n.forEach((function(n){n.servertype===e.location&&(t.location="ws://".concat(n.serverip,":").concat(n.serverport,"/").concat(e[3])),n.servertype===e.Alarm&&(t.alarm="ws://".concat(n.serverip,":").concat(n.serverport,"/").concat(e[1]))})),t};function vt(e){var t=ot["m"].width/2,n=ot["m"].height/2,a=e.x,r=e.y;return{x:t-a,y:n-r}}var gt=function(e,t,n){if(e){var a=it()(new Date).format(ot["j"]);return{startTime:new Date("".concat(a," ").concat(t)),endTime:new Date("".concat(a," ").concat(n))}}return{startTime:new Date(t),endTime:new Date(n)}};function yt(e,t){var n=it()(e).format(ot["j"]),a="".concat(n," ").concat(it()(t[0]).format(ot["f"])),r="".concat(n," ").concat(it()(t[1]).format(ot["f"]));return{sTime:a,eTime:r}}var wt=function(e,t,n){var a=(t[1].getTime()-t[0].getTime())/36e5;a>1?n(new Error("轨迹回放时间不能超过一小时")):n()};function Vt(e,t,n,a){var r=new at.a.Image({width:t.width,height:t.height,image:t,shadowColor:ot["d"].TRANSPARENT,shadowBlur:20,id:String(n)}),o=14,c=.4*t.height,l=new at.a.Rect({width:t.width,height:c,y:-c-5,fill:"rgba(0,0,0,.7)",cornerRadius:c}),i=new at.a.Text({x:t.width/2,y:-o-5,text:a,fontSize:o,fill:"#fff",id:String(n)});return i.offsetX(i.width()/2),i.offsetY(i.height()/2-2.5),e.add(r).add(l).add(i),r}var Nt=function(e){var t=ft(e.LocationPoint),n=t.x,a=t.y;return Object(Ye["a"])(Object(Ye["a"])({},e),{},{x:n,y:a,name:e.ObjData.BindObjName,map:e.LocationSceneId,lids:e.TagId,ltype:e.ObjData.BindObjName})},Ct=Object(a["withScopeId"])("data-v-80ca9b2a"),kt=Ct((function(e,t,n,r,o,c){return Object(a["openBlock"])(),Object(a["createBlock"])("nav",null,[Object(a["createVNode"])("ul",null,[(Object(a["openBlock"])(!0),Object(a["createBlock"])(a["Fragment"],null,Object(a["renderList"])(e.navList,(function(t,n){return Object(a["openBlock"])(),Object(a["createBlock"])("li",{key:t.name,class:{active:n===e.navIndex},onClick:function(a){return e.handleNavClick(t,n)}},[Object(a["createVNode"])("span",{class:"icon iconfont",innerHTML:t.icon},null,8,["innerHTML"]),Object(a["createVNode"])("div",null,Object(a["toDisplayString"])(t.name),1)],10,["onClick"])})),128))])])})),xt=Object(a["defineComponent"])({name:"MainNav",emits:["navClick"],setup:function(e,t){var n=t.emit,r=[{name:"主页",icon:"&#xe61d;",code:"index"},Object(Ye["a"])({icon:"&#xe61a;"},ot["e"]),Object(Ye["a"])({icon:"&#xe7e8;"},ot["g"][ot["i"].camera]),Object(Ye["a"])({icon:"&#xe603;"},ot["g"][ot["i"].basestation]),Object(Ye["a"])({icon:"&#xe6d8;"},ot["g"][ot["i"].labelList]),Object(Ye["a"])({icon:"&#xe60d;"},ot["g"][ot["i"].person]),Object(Ye["a"])({icon:"&#xe624;"},ot["a"]),Object(Ye["a"])({icon:"&#xe61e;"},ot["c"])],o=Object(a["shallowRef"])(0);function c(e,t){o.value!==t&&(o.value=t);var a=e.code;a&&n("navClick",a)}function l(){o.value=0}return{navList:r,navIndex:o,handleNavClick:c,resetIndex:l}}});n("90d4");xt.render=kt,xt.__scopeId="data-v-80ca9b2a";var Tt=xt,St=(n("841c"),Object(a["createTextVNode"])("搜索")),Dt={key:0,style:{color:"#3dd1ff"}},It={key:1},Bt=Object(a["createTextVNode"])("详情"),Lt=Object(a["createTextVNode"])("实时位置");function Rt(e,t,n,r,o,c){var l=Object(a["resolveComponent"])("el-input"),i=Object(a["resolveComponent"])("el-form-item"),u=Object(a["resolveComponent"])("el-button"),s=Object(a["resolveComponent"])("el-form"),d=Object(a["resolveComponent"])("hd-table-column"),f=Object(a["resolveComponent"])("el-table-column"),m=Object(a["resolveComponent"])("el-popconfirm"),b=Object(a["resolveComponent"])("hd-table"),p=Object(a["resolveComponent"])("el-pagination"),O=Object(a["resolveDirective"])("loading");return Object(a["openBlock"])(),Object(a["createBlock"])("div",null,[Object(a["createVNode"])(s,{model:e.params,"label-width":"80px",inline:!0,size:"small"},{default:Object(a["withCtx"])((function(){return[Object(a["createVNode"])(i,{label:"人员姓名"},{default:Object(a["withCtx"])((function(){return[Object(a["createVNode"])(l,{modelValue:e.params.search,"onUpdate:modelValue":t[1]||(t[1]=function(t){return e.params.search=t}),modelModifiers:{trim:!0},clearable:"",onChange:e.search},null,8,["modelValue","onChange"])]})),_:1}),Object(a["createVNode"])(i,null,{default:Object(a["withCtx"])((function(){return[Object(a["createVNode"])(u,{type:"primary",onClick:e.search},{default:Object(a["withCtx"])((function(){return[St]})),_:1},8,["onClick"])]})),_:1})]})),_:1},8,["model"]),Object(a["withDirectives"])(Object(a["createVNode"])(b,{data:e.tableData},{default:Object(a["withCtx"])((function(){return[Object(a["createVNode"])(d,{label:"设备",prop:"DeviceName"}),Object(a["createVNode"])(d,{label:"姓名",prop:"Username"}),Object(a["createVNode"])(d,{label:"职位",prop:"Position"}),Object(a["createVNode"])(d,{width:"80",label:"工号",prop:"Job_number"}),Object(a["createVNode"])(d,{width:"80",label:"房号",prop:"Room_number"}),Object(a["createVNode"])(f,{width:"155",label:"位置","show-overflow-tooltip":"",align:"center"},{default:Object(a["withCtx"])((function(t){var n=t.row;return[n.snum?(Object(a["openBlock"])(),Object(a["createBlock"])("span",Dt,Object(a["toDisplayString"])(e.getMapByNum(n.snum).sname),1)):Object(a["createCommentVNode"])("",!0),n.snum?Object(a["createCommentVNode"])("",!0):(Object(a["openBlock"])(),Object(a["createBlock"])("span",It," 未上线 "))]})),_:1}),Object(a["createVNode"])(f,{width:"170",label:"操作",align:"center"},{default:Object(a["withCtx"])((function(t){var n=t.row;return[Object(a["createVNode"])(u,{size:"mini",type:"primary",onClick:function(t){return e.handleDetail(n)}},{default:Object(a["withCtx"])((function(){return[Bt]})),_:2},1032,["onClick"]),Object(a["createVNode"])(m,{title:"确定跳转到人员实时位置 ？",effect:"dark"},{reference:Object(a["withCtx"])((function(){return[Object(a["createVNode"])(u,{type:"primary",size:"mini"},{default:Object(a["withCtx"])((function(){return[Lt]})),_:1})]})),_:1})]})),_:1})]})),_:1},8,["data"]),[[O,e.loading]]),Object(a["withDirectives"])(Object(a["createVNode"])(p,{background:"","current-page":e.params.page,"onUpdate:current-page":t[2]||(t[2]=function(t){return e.params.page=t}),layout:"total, prev, pager, next, jumper",total:e.total,onCurrentChange:e.changePage},null,8,["current-page","total","onCurrentChange"]),[[a["vShow"],e.total&&e.tableData&&e.tableData.length]])])}var _t=n("d257"),Pt="clicked",At=Object(a["defineComponent"])({name:"LabelList",props:{wsAllLabel:{type:Array}},emits:["showEquipDetails",Pt],setup:function(e,t){var n=t.emit,r=Object(a["reactive"])({page:1,prop:"Username",search:""}),o=[],c=Object(a["shallowRef"])(!1),l=Object(a["ref"])([]),i=Object(a["shallowRef"])(0);function u(){l.value=Object(_t["f"])(o,r.page,r.prop,r.search),i.value=Object(_t["g"])(o,r.prop,r.search),c.value=!1}function s(){return d.apply(this,arguments)}function d(){return d=Object(ze["a"])(regeneratorRuntime.mark((function t(){var n,a,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return c.value=!0,n={act:"rYVwSSwhmDcZRL0yQbO1611304770982"},t.next=4,et.getCommonApi(n);case 4:a=t.sent,r=a.data,r.forEach((function(t){e.wsAllLabel&&e.wsAllLabel.forEach((function(e){e.name===t.Username&&(t.snum=e.LocationSceneId)}))})),o=r,u();case 9:case"end":return t.stop()}}),t)}))),d.apply(this,arguments)}function f(e){n("showEquipDetails",e,ot["i"].person),n(Pt)}function m(e){return b.apply(this,arguments)}function b(){return b=Object(ze["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:r.page=t,u();case 2:case"end":return e.stop()}}),e)}))),b.apply(this,arguments)}function p(){return O.apply(this,arguments)}function O(){return O=Object(ze["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:r.page=1,u();case 2:case"end":return e.stop()}}),e)}))),O.apply(this,arguments)}return Object(a["onMounted"])((function(){s()})),{params:r,loading:c,tableData:l,total:i,changePage:m,search:p,getMapByNum:ct["d"],handleDetail:f}}});At.render=Rt;var Ft=At,Mt=Object(a["createTextVNode"])("搜索"),Et=Object(a["createTextVNode"])("详情"),Ht=Object(a["createTextVNode"])("实时视频"),Ut=Object(a["createTextVNode"])("历史回放");function zt(e,t,n,r,o,c){var l=Object(a["resolveComponent"])("el-input"),i=Object(a["resolveComponent"])("el-form-item"),u=Object(a["resolveComponent"])("el-button"),s=Object(a["resolveComponent"])("el-form"),d=Object(a["resolveComponent"])("hd-table-column"),f=Object(a["resolveComponent"])("el-table-column"),m=Object(a["resolveComponent"])("hd-table"),b=Object(a["resolveComponent"])("el-pagination"),p=Object(a["resolveDirective"])("loading");return Object(a["openBlock"])(),Object(a["createBlock"])("div",null,[Object(a["createVNode"])(s,{model:e.params,"label-width":"80px",inline:!0,size:"small"},{default:Object(a["withCtx"])((function(){return[Object(a["createVNode"])(i,{label:"摄像头IP"},{default:Object(a["withCtx"])((function(){return[Object(a["createVNode"])(l,{modelValue:e.params.search,"onUpdate:modelValue":t[1]||(t[1]=function(t){return e.params.search=t}),modelModifiers:{trim:!0},clearable:"",onChange:e.search},null,8,["modelValue","onChange"])]})),_:1}),Object(a["createVNode"])(i,null,{default:Object(a["withCtx"])((function(){return[Object(a["createVNode"])(u,{type:"primary",onClick:e.search},{default:Object(a["withCtx"])((function(){return[Mt]})),_:1},8,["onClick"])]})),_:1})]})),_:1},8,["model"]),Object(a["withDirectives"])(Object(a["createVNode"])(m,{data:e.tableData},{default:Object(a["withCtx"])((function(){return[Object(a["createVNode"])(d,{label:"IP",prop:"dnum",width:"110"}),Object(a["createVNode"])(d,{label:"名称",prop:"dname"}),Object(a["createVNode"])(f,{label:"位置","show-overflow-tooltip":"",align:"center"},{default:Object(a["withCtx"])((function(t){var n=t.row;return[Object(a["createTextVNode"])(Object(a["toDisplayString"])(e.getMapByNum(n.snum).sname),1)]})),_:1}),Object(a["createVNode"])(f,{width:"300",label:"操作",align:"center"},{default:Object(a["withCtx"])((function(t){var n=t.row;return[Object(a["createVNode"])(u,{size:"mini",type:"primary",onClick:function(t){return e.handleDetail(n)}},{default:Object(a["withCtx"])((function(){return[Et]})),_:2},1032,["onClick"]),Object(a["createVNode"])(u,{size:"mini",type:"primary",onClick:function(t){return e.seeNowVideo(n)}},{default:Object(a["withCtx"])((function(){return[Ht]})),_:2},1032,["onClick"]),Object(a["createVNode"])(u,{size:"mini",type:"primary",onClick:function(t){return e.seeHistoryVideo(n)}},{default:Object(a["withCtx"])((function(){return[Ut]})),_:2},1032,["onClick"])]})),_:1})]})),_:1},8,["data"]),[[p,e.loading]]),Object(a["withDirectives"])(Object(a["createVNode"])(b,{background:"","current-page":e.params.page,"onUpdate:current-page":t[2]||(t[2]=function(t){return e.params.page=t}),layout:"total, prev, pager, next, jumper",total:e.total,onCurrentChange:e.changePage},null,8,["current-page","total","onCurrentChange"]),[[a["vShow"],e.total&&e.tableData&&e.tableData.length]])])}var Gt="clicked",Wt=Object(a["defineComponent"])({name:"CameraList",emits:["showEquipDetails","seeNowVideo","seeHistoryVideo",Gt],setup:function(e,t){var n=t.emit,r=Object(a["reactive"])({page:1,prop:"dnum",search:""}),o=Object(a["shallowRef"])(!1),c=Object(a["ref"])([]),l=Object(a["shallowRef"])(0);function i(){return u.apply(this,arguments)}function u(){return u=Object(ze["a"])(regeneratorRuntime.mark((function e(){var t,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:o.value=!0,t=Object(ct["a"])(),n=t.filter((function(e){return"Camera_IP"===e.dtypecode})),n.forEach((function(e){if(e.extinfo){var t=JSON.parse(e.extinfo);e.UserName=t.UserName,e.Password=t.Password,e.ChanelNum=t.ChanelNum,e.IsYunTai=t.IsYunTai,e.IsCameraPhoto=t.IsCameraPhoto,e.x=t.xcoordinate,e.y=t.ycoordinate}})),c.value=Object(_t["f"])(n,r.page,r.prop,r.search),l.value=Object(_t["g"])(n,r.prop,r.search),o.value=!1;case 7:case"end":return e.stop()}}),e)}))),u.apply(this,arguments)}function s(e){n("showEquipDetails",e,ot["i"].camera),n(Gt)}function d(e){return f.apply(this,arguments)}function f(){return f=Object(ze["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:r.page=t,i();case 2:case"end":return e.stop()}}),e)}))),f.apply(this,arguments)}function m(){return b.apply(this,arguments)}function b(){return b=Object(ze["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:r.page=1,i();case 2:case"end":return e.stop()}}),e)}))),b.apply(this,arguments)}function p(e){n("seeNowVideo",e.dids)}function O(e){n("seeHistoryVideo",e.dids)}return Object(a["onMounted"])((function(){i()})),{params:r,loading:o,tableData:c,total:l,changePage:d,search:m,getMapByNum:ct["d"],handleDetail:s,seeNowVideo:p,seeHistoryVideo:O}}});Wt.render=zt;var Yt=Wt,qt=Object(a["withScopeId"])("data-v-519e38a4");Object(a["pushScopeId"])("data-v-519e38a4");var Xt={class:"station"},Jt=Object(a["createTextVNode"])("搜索"),Zt={class:"tips"},$t={class:"direction-light"},Kt={class:"direction-light"};Object(a["popScopeId"])();var Qt=qt((function(e,t,n,r,o,c){var l=Object(a["resolveComponent"])("el-input"),i=Object(a["resolveComponent"])("el-form-item"),u=Object(a["resolveComponent"])("el-button"),s=Object(a["resolveComponent"])("el-form"),d=Object(a["resolveComponent"])("el-pagination");return Object(a["openBlock"])(),Object(a["createBlock"])("div",Xt,[Object(a["createVNode"])(s,{model:e.params,"label-width":"80px",inline:!0,size:"small"},{default:qt((function(){return[Object(a["createVNode"])(i,{label:"基站编号"},{default:qt((function(){return[Object(a["createVNode"])(l,{modelValue:e.params.dnum,"onUpdate:modelValue":t[1]||(t[1]=function(t){return e.params.dnum=t}),modelModifiers:{trim:!0},clearable:"",onChange:e.search},null,8,["modelValue","onChange"])]})),_:1}),Object(a["createVNode"])(i,null,{default:qt((function(){return[Object(a["createVNode"])(u,{type:"primary",onClick:e.search},{default:qt((function(){return[Jt]})),_:1},8,["onClick"])]})),_:1})]})),_:1},8,["model"]),Object(a["createVNode"])("div",Zt,[(Object(a["openBlock"])(!0),Object(a["createBlock"])(a["Fragment"],null,Object(a["renderList"])(e.tips,(function(e){return Object(a["openBlock"])(),Object(a["createBlock"])("div",{key:e.label},[Object(a["createVNode"])("span",{class:"icon iconfont",innerHTML:e.icon,style:{color:e.color}},null,12,["innerHTML"]),Object(a["createVNode"])("span",null,Object(a["toDisplayString"])(e.label),1)])})),128))]),Object(a["createVNode"])("div",{class:"station-list clearfix",onTouchstart:t[2]||(t[2]=function(){return e.getFirstY&&e.getFirstY.apply(e,arguments)}),ref:"listBar"},[(Object(a["openBlock"])(!0),Object(a["createBlock"])(a["Fragment"],null,Object(a["renderList"])(e.tableData,(function(t){return Object(a["openBlock"])(),Object(a["createBlock"])("div",{key:t.id,onClick:function(n){return e.handleDetail(t)},class:["station-item",t.isSelected?"checked":"item"]},[Object(a["createVNode"])("div",$t,[Object(a["createVNode"])("span",{class:"icon iconfont",style:e.style[t.uwbt3checking||0]},"",4),Object(a["createVNode"])("span",{class:"icon iconfont",style:e.style[t.uwbr4checking||0]},"",4),Object(a["createVNode"])("span",{class:"icon iconfont",style:e.style[t.rfidchecking||0]},"",4)]),Object(a["createVNode"])("div",Kt,[Object(a["createVNode"])("span",{class:"icon iconfont",style:e.style[t.uwbt3checking||0]},"T3",4),Object(a["createVNode"])("span",{class:"icon iconfont",style:e.style[t.uwbr4checking||0]},"R4",4),Object(a["createVNode"])("span",{class:"icon iconfont",style:e.style[t.rfidchecking||0]},"RFID",4)]),Object(a["createVNode"])("span",{class:"icon iconfont item-square",style:e.timeStyle[e.styleFilter(t)]},"",4),Object(a["createVNode"])("p",{title:t.dnum},Object(a["toDisplayString"])(t.dnum),9,["title"]),Object(a["createVNode"])("p",{title:t.dtype},Object(a["toDisplayString"])(t.dtype),9,["title"]),Object(a["createVNode"])("p",{title:t.version},Object(a["toDisplayString"])(t.version),9,["title"])],10,["onClick"])})),128))],544),Object(a["withDirectives"])(Object(a["createVNode"])(d,{background:"","current-page":e.params.page,"onUpdate:current-page":t[3]||(t[3]=function(t){return e.params.page=t}),layout:"total, prev, pager, next, jumper",total:e.total,onCurrentChange:e.changePage},null,8,["current-page","total","onCurrentChange"]),[[a["vShow"],e.total&&e.tableData&&e.tableData.length]])])})),en=(n("2ca0"),"clicked"),tn=Object(a["defineComponent"])({name:"BasestationList",emits:["showEquipDetails",en],setup:function(e,t){var n=t.emit,r=Object(a["reactive"])({timeStyle:[{color:"#0066ff"},{color:"#707070"}],style:[{color:"#FF0000"},{color:"#00FF00"},{color:"#0000FF"},{color:"#FFFF00"},{color:"#00FFFF"},{color:"#FF00FF"}],timeTipsStyle:[{color:"#0066ff"},{color:"#707070"}]}),o=Object(a["ref"])([{icon:"&#xe628;",label:"自检失败",color:"#FF0000"},{icon:"&#xe628;",label:"读ID成功",color:"#00FF00"},{icon:"&#xe628;",label:"自检成功",color:"#0000FF"},{icon:"&#xe628;",label:"设备功能关闭",color:"#FFFF00"},{icon:"&#xe628;",label:"运行过程检测ID失败",color:"#00FFFF"},{icon:"&#xe666;",label:"有效",color:"#0066ff"},{icon:"&#xe666;",label:"失效",color:"#707070"}]),c=Object(a["reactive"])({page:1,pagesize:10,dtype:"基站",dnum:""}),l=Object(a["shallowRef"])(!1),i=Object(a["ref"])([]),u=Object(a["shallowRef"])(0);function s(){return d.apply(this,arguments)}function d(){return d=Object(ze["a"])(regeneratorRuntime.mark((function e(){var t,n,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return l.value=!0,t={act:"mKQQKGa49xhcOWaBjDI1612407197459",curpage:c.page,sys_showpagesize:c.pagesize,dtype:c.dtype,dnum:c.dnum},e.next=4,et.getCommonApi(t);case 4:n=e.sent,a=n.data,a.content.forEach((function(e){if(e.eattribute){var t=e.eattribute.split(",");t.forEach((function(t){var n=t.split("|"),a=["status","hearttime","softver","hardwarever","version","starttype","checkState","maxstr","uwbr4checking","uwbt3checking","rfidchecking","pattern"];a.forEach((function(t){e[t]||n[0]!==t||(e[t]=n[1].split(":")[1])}))}))}var n=e.extinfo;n&&(n=n.startsWith("{")?JSON.parse(n):JSON.parse(JSON.stringify(n)),e.x=n.xcoordinate,e.y=n.ycoordinate)})),i.value=a.content,u.value=a.count,l.value=!1;case 10:case"end":return e.stop()}}),e)}))),d.apply(this,arguments)}function f(e){return"在线"==e.status?0:1}function m(e){n("showEquipDetails",e,ot["i"].basestation),n(en)}function b(e){return p.apply(this,arguments)}function p(){return p=Object(ze["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:c.page=t,s();case 2:case"end":return e.stop()}}),e)}))),p.apply(this,arguments)}function O(){return h.apply(this,arguments)}function h(){return h=Object(ze["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:c.page=1,s();case 2:case"end":return e.stop()}}),e)}))),h.apply(this,arguments)}return Object(a["onMounted"])((function(){s()})),Object(Ye["a"])(Object(Ye["a"])({},Object(a["toRefs"])(r)),{},{tips:o,params:c,loading:l,tableData:i,total:u,handleDetail:m,changePage:b,search:O,getMapByNum:ct["d"],styleFilter:f})}});n("06b7");tn.render=Qt,tn.__scopeId="data-v-519e38a4";var nn=tn,an={class:"fence-box"};function rn(e,t,n,r,o,c){return Object(a["openBlock"])(),Object(a["createBlock"])("ul",an,[(Object(a["openBlock"])(!0),Object(a["createBlock"])(a["Fragment"],null,Object(a["renderList"])(e.list,(function(t,n){return Object(a["openBlock"])(),Object(a["createBlock"])("li",{key:n,class:{active:0===n},onClick:function(n){return e.handleClick(t)}},Object(a["toDisplayString"])(t.label),11,["onClick"])})),128))])}var on=Object(a["defineComponent"])({name:"fenceBox",emits:["revoke","redraw","cancel","finish"],setup:function(e,t){var n=t.emit,a=[{label:"绘制"},{label:"撤销",code:"revoke"},{label:"重新绘制",code:"redraw"},{label:"取消",code:"cancel"},{label:"完成",code:"finish"}],r=function(e){e.code&&n(e.code)};return{list:a,handleClick:r}}});on.render=rn;var cn=on,ln=Object(a["withScopeId"])("data-v-856d70f6"),un=ln((function(e,t,n,r,o,c){return Object(a["withDirectives"])((Object(a["openBlock"])(),Object(a["createBlock"])("div",{ref:"contextMenuRef",class:["context-menu",{hidden:e.hiddenRef}],style:e.styleAttrs?e.styleAttrs:{}},[(Object(a["openBlock"])(!0),Object(a["createBlock"])(a["Fragment"],null,Object(a["renderList"])(e.contextmenuList,(function(t){return Object(a["openBlock"])(),Object(a["createBlock"])("div",{key:t.label,class:"menu-item",onClick:function(n){return e.handleClickContentmenu(t.clickCode)}},Object(a["toDisplayString"])(t.label),9,["onClick"])})),128))],6)),[[a["vShow"],e.contextmenuList.length]])})),sn="showDetails",dn="trackPlayback",fn="clicked",mn="seeNowVideo",bn="seeHistoryVideo",pn="follow",On=[sn,dn,fn,mn,bn,pn],hn=Object(a["defineComponent"])({props:{type:{type:String,default:ot["i"].basestation},contextmenuList:{type:Array,default:function(){return[]}},contxtmenuPosition:{type:Object,default:function(){return{}}}},emits:On,setup:function(e,t){var n=t.emit,r=Object(a["shallowReactive"])({x:0,y:0}),o=Object(a["shallowRef"])(!0),c=Object(a["ref"])();function l(t){On.includes(t)&&n(t,e.type),n(fn)}function i(){Object(a["nextTick"])((function(){var t=st(c.value,e.contxtmenuPosition),n={};for(var a in t)n[a]=t[a]+"px";Object.assign(r,n),o.value=!1}))}return Object(a["watch"])((function(){return e.contxtmenuPosition}),(function(){i()})),Object(a["onMounted"])((function(){i()})),{contextMenuRef:c,styleAttrs:r,hiddenRef:o,handleClickContentmenu:l}}});n("ccc7");hn.render=un,hn.__scopeId="data-v-856d70f6";var jn=hn,vn={class:"form-content-pannel"},gn={key:0,class:"person-img"},yn={class:"detail-content"};function wn(e,t,n,r,o,c){var l=Object(a["resolveComponent"])("el-image"),i=Object(a["resolveComponent"])("label-item"),u=Object(a["resolveComponent"])("personItem"),s=Object(a["resolveComponent"])("basestationItem"),d=Object(a["resolveComponent"])("cameraItem"),f=Object(a["resolveComponent"])("el-form-item"),m=Object(a["resolveComponent"])("el-col"),b=Object(a["resolveComponent"])("el-row"),p=Object(a["resolveComponent"])("el-form");return Object(a["openBlock"])(),Object(a["createBlock"])("div",vn,[e.formType===e.types.person?(Object(a["openBlock"])(),Object(a["createBlock"])("div",gn,[Object(a["createVNode"])(l,{src:e.form.Photo||e.form.src},null,8,["src"])])):Object(a["createCommentVNode"])("",!0),Object(a["createVNode"])("div",yn,[e.formData?(Object(a["openBlock"])(),Object(a["createBlock"])(p,{key:0,ref:"formContentRef",model:e.form,"label-width":"110px",size:"small"},{default:Object(a["withCtx"])((function(){return[e.formType===e.types.labelList?(Object(a["openBlock"])(),Object(a["createBlock"])(i,{key:0,deviceData:e.form},null,8,["deviceData"])):e.formType===e.types.person?(Object(a["openBlock"])(),Object(a["createBlock"])(u,{key:1,deviceData:e.form},null,8,["deviceData"])):e.formType===e.types.basestation?(Object(a["openBlock"])(),Object(a["createBlock"])(s,{key:2,deviceData:e.form},null,8,["deviceData"])):(Object(a["openBlock"])(),Object(a["createBlock"])(d,{key:3,deviceData:e.form},null,8,["deviceData"])),Object(a["createVNode"])(b,{gutter:0},{default:Object(a["withCtx"])((function(){return[Object(a["createVNode"])(m,{span:24,offset:0},{default:Object(a["withCtx"])((function(){return[Object(a["createVNode"])(f,{label:"备注："},{default:Object(a["withCtx"])((function(){return[Object(a["createTextVNode"])(Object(a["toDisplayString"])(e.form.desc),1)]})),_:1})]})),_:1})]})),_:1})]})),_:1},8,["model"])):Object(a["createCommentVNode"])("",!0)])])}var Vn=Object(a["createTextVNode"])("在线"),Nn=Object(a["createTextVNode"])("离线");function Cn(e,t,n,r,o,c){var l=Object(a["resolveComponent"])("el-form-item"),i=Object(a["resolveComponent"])("el-col"),u=Object(a["resolveComponent"])("el-tag"),s=Object(a["resolveComponent"])("el-row");return Object(a["openBlock"])(),Object(a["createBlock"])(s,null,{default:Object(a["withCtx"])((function(){return[Object(a["createVNode"])(i,{span:12,offset:0},{default:Object(a["withCtx"])((function(){return[Object(a["createVNode"])(l,{label:"编号："},{default:Object(a["withCtx"])((function(){return[Object(a["createTextVNode"])(Object(a["toDisplayString"])(e.dnum),1)]})),_:1})]})),_:1}),Object(a["createVNode"])(i,{span:12,offset:0},{default:Object(a["withCtx"])((function(){return[Object(a["createVNode"])(l,{label:"在线状态："},{default:Object(a["withCtx"])((function(){return["在线"==e.status?(Object(a["openBlock"])(),Object(a["createBlock"])(u,{key:0},{default:Object(a["withCtx"])((function(){return[Vn]})),_:1})):Object(a["createCommentVNode"])("",!0),"离线"!=e.status&&e.status?Object(a["createCommentVNode"])("",!0):(Object(a["openBlock"])(),Object(a["createBlock"])(u,{key:1,type:"info"},{default:Object(a["withCtx"])((function(){return[Nn]})),_:1}))]})),_:1})]})),_:1}),Object(a["createVNode"])(i,{span:12,offset:0},{default:Object(a["withCtx"])((function(){return[Object(a["createVNode"])(l,{label:"名称："},{default:Object(a["withCtx"])((function(){return[Object(a["createTextVNode"])(Object(a["toDisplayString"])(e.dname),1)]})),_:1})]})),_:1}),Object(a["createVNode"])(i,{span:12,offset:0},{default:Object(a["withCtx"])((function(){return[Object(a["createVNode"])(l,{label:"类型："},{default:Object(a["withCtx"])((function(){return[Object(a["createTextVNode"])(Object(a["toDisplayString"])(e.dtype),1)]})),_:1})]})),_:1}),Object(a["createVNode"])(i,{span:12,offset:0},{default:Object(a["withCtx"])((function(){return[Object(a["createVNode"])(l,{label:"位置："},{default:Object(a["withCtx"])((function(){return[Object(a["createTextVNode"])(Object(a["toDisplayString"])(e.getMapByNum(e.snum).sname||"未上线"),1)]})),_:1})]})),_:1}),Object(a["createVNode"])(i,{span:12,offset:0},{default:Object(a["withCtx"])((function(){return[Object(a["createVNode"])(l,{label:"最后心跳："},{default:Object(a["withCtx"])((function(){return[Object(a["createTextVNode"])(Object(a["toDisplayString"])(e.hearttime),1)]})),_:1})]})),_:1}),Object(a["createVNode"])(i,{span:12,offset:0},{default:Object(a["withCtx"])((function(){return[Object(a["createVNode"])(l,{label:"电压："},{default:Object(a["withCtx"])((function(){return[Object(a["createTextVNode"])(Object(a["toDisplayString"])(e.voltage),1)]})),_:1})]})),_:1}),Object(a["createVNode"])(i,{span:12,offset:0},{default:Object(a["withCtx"])((function(){return[Object(a["createVNode"])(l,{label:"手环电压："},{default:Object(a["withCtx"])((function(){return[Object(a["createTextVNode"])(Object(a["toDisplayString"])(e.bracelet_voltage),1)]})),_:1})]})),_:1}),Object(a["createVNode"])(i,{span:24,offset:0},{default:Object(a["withCtx"])((function(){return[Object(a["createVNode"])(l,{label:"当前报警："},{default:Object(a["withCtx"])((function(){return[Object(a["createTextVNode"])(Object(a["toDisplayString"])(e.currentalarm),1)]})),_:1})]})),_:1})]})),_:1})}var kn=Object(a["defineComponent"])({name:"LabelItem",props:{deviceData:{type:Object}},setup:function(e){var t=Object(a["reactive"])({dname:"",dnum:"",dtype:"",status:"",hearttime:"",currentalarm:"",voltage:0,bracelet_voltage:0});return Object(a["watch"])((function(){return e.deviceData}),(function(e){Object.assign(t,e)}),{immediate:!0,deep:!0}),Object(Ye["a"])(Object(Ye["a"])({},Object(a["toRefs"])(t)),{},{getMapByNum:ct["d"]})}});kn.render=Cn;var xn=kn;function Tn(e,t,n,r,o,c){var l=Object(a["resolveComponent"])("el-form-item"),i=Object(a["resolveComponent"])("el-col"),u=Object(a["resolveComponent"])("el-row");return Object(a["openBlock"])(),Object(a["createBlock"])(u,null,{default:Object(a["withCtx"])((function(){return[Object(a["createVNode"])(i,{span:12,offset:0},{default:Object(a["withCtx"])((function(){return[Object(a["createVNode"])(l,{label:"姓名："},{default:Object(a["withCtx"])((function(){return[Object(a["createTextVNode"])(Object(a["toDisplayString"])(e.Username),1)]})),_:1})]})),_:1}),Object(a["createVNode"])(i,{span:12,offset:0},{default:Object(a["withCtx"])((function(){return[Object(a["createVNode"])(l,{label:"标签："},{default:Object(a["withCtx"])((function(){return[Object(a["createTextVNode"])(Object(a["toDisplayString"])(e.DeviceName||"未绑定"),1)]})),_:1})]})),_:1}),Object(a["createVNode"])(i,{span:12,offset:0},{default:Object(a["withCtx"])((function(){return[Object(a["createVNode"])(l,{label:"类型："},{default:Object(a["withCtx"])((function(){return[Object(a["createTextVNode"])(Object(a["toDisplayString"])(e.Personnel_category),1)]})),_:1})]})),_:1}),Object(a["createVNode"])(i,{span:12,offset:0},{default:Object(a["withCtx"])((function(){return[Object(a["createVNode"])(l,{label:"职位："},{default:Object(a["withCtx"])((function(){return[Object(a["createTextVNode"])(Object(a["toDisplayString"])(e.Position),1)]})),_:1})]})),_:1}),Object(a["createVNode"])(i,{span:12,offset:0},{default:Object(a["withCtx"])((function(){return[Object(a["createVNode"])(l,{label:"状态："},{default:Object(a["withCtx"])((function(){return[Object(a["createTextVNode"])(Object(a["toDisplayString"])(0===e.Fettle?"上船":"离船"),1)]})),_:1})]})),_:1})]})),_:1})}var Sn=Object(a["defineComponent"])({name:"PersonItem",props:{deviceData:{type:Object}},setup:function(e){var t=Object(a["reactive"])({Username:"",DeviceName:"",Photo:"",src:"",Personnel_category:"",Position:"",Fettle:"",BraceletVoltage:""});return Object(a["watch"])((function(){return e.deviceData}),(function(e){Object.assign(t,e)}),{immediate:!0,deep:!0}),Object(Ye["a"])({},Object(a["toRefs"])(t))}});Sn.render=Tn;var Dn=Sn,In=Object(a["createTextVNode"])("在线"),Bn=Object(a["createTextVNode"])("离线"),Ln={key:0},Rn={key:1},_n={key:2},Pn={key:3},An={key:4},Fn={key:0},Mn={key:1},En={key:2},Hn={key:3},Un={key:4},zn={key:0},Gn={key:1},Wn={key:2},Yn={key:3},qn={key:4},Xn={key:0},Jn={key:1};function Zn(e,t,n,r,o,c){var l=Object(a["resolveComponent"])("el-form-item"),i=Object(a["resolveComponent"])("el-col"),u=Object(a["resolveComponent"])("el-tag"),s=Object(a["resolveComponent"])("el-row");return Object(a["openBlock"])(),Object(a["createBlock"])(s,null,{default:Object(a["withCtx"])((function(){return[Object(a["createVNode"])(i,{span:12,offset:0},{default:Object(a["withCtx"])((function(){return[Object(a["createVNode"])(l,{label:"基站编号："},{default:Object(a["withCtx"])((function(){return[Object(a["createTextVNode"])(Object(a["toDisplayString"])(e.dnum),1)]})),_:1})]})),_:1}),Object(a["createVNode"])(i,{span:12,offset:0},{default:Object(a["withCtx"])((function(){return[Object(a["createVNode"])(l,{label:"在线状态："},{default:Object(a["withCtx"])((function(){return["在线"==e.status?(Object(a["openBlock"])(),Object(a["createBlock"])(u,{key:0},{default:Object(a["withCtx"])((function(){return[In]})),_:1})):Object(a["createCommentVNode"])("",!0),"离线"!=e.status&&e.status?Object(a["createCommentVNode"])("",!0):(Object(a["openBlock"])(),Object(a["createBlock"])(u,{key:1,type:"info"},{default:Object(a["withCtx"])((function(){return[Bn]})),_:1}))]})),_:1})]})),_:1}),Object(a["createVNode"])(i,{span:12,offset:0},{default:Object(a["withCtx"])((function(){return[Object(a["createVNode"])(l,{label:"基站名称："},{default:Object(a["withCtx"])((function(){return[Object(a["createTextVNode"])(Object(a["toDisplayString"])(e.dname),1)]})),_:1})]})),_:1}),Object(a["createVNode"])(i,{span:12,offset:0},{default:Object(a["withCtx"])((function(){return[Object(a["createVNode"])(l,{label:"基站类型："},{default:Object(a["withCtx"])((function(){return[Object(a["createTextVNode"])(Object(a["toDisplayString"])(e.dtype),1)]})),_:1})]})),_:1}),Object(a["createVNode"])(i,{span:12,offset:0},{default:Object(a["withCtx"])((function(){return[Object(a["createVNode"])(l,{label:"硬件版本："},{default:Object(a["withCtx"])((function(){return[Object(a["createTextVNode"])(Object(a["toDisplayString"])(e.hardwarever),1)]})),_:1})]})),_:1}),Object(a["createVNode"])(i,{span:12,offset:0},{default:Object(a["withCtx"])((function(){return[Object(a["createVNode"])(l,{label:"软件版本："},{default:Object(a["withCtx"])((function(){return[Object(a["createTextVNode"])(Object(a["toDisplayString"])(e.version||""),1)]})),_:1})]})),_:1}),Object(a["createVNode"])(i,{span:12,offset:0},{default:Object(a["withCtx"])((function(){return[Object(a["createVNode"])(l,{label:"基站x："},{default:Object(a["withCtx"])((function(){return[Object(a["createTextVNode"])(Object(a["toDisplayString"])(e.x),1)]})),_:1})]})),_:1}),Object(a["createVNode"])(i,{span:12,offset:0},{default:Object(a["withCtx"])((function(){return[Object(a["createVNode"])(l,{label:"基站y："},{default:Object(a["withCtx"])((function(){return[Object(a["createTextVNode"])(Object(a["toDisplayString"])(e.y),1)]})),_:1})]})),_:1}),Object(a["createVNode"])(i,{span:12,offset:0},{default:Object(a["withCtx"])((function(){return[Object(a["createVNode"])(l,{label:"UWBR4："},{default:Object(a["withCtx"])((function(){return[0==e.uwbr4checking?(Object(a["openBlock"])(),Object(a["createBlock"])("span",Ln,"自检失败")):Object(a["createCommentVNode"])("",!0),1==e.uwbr4checking?(Object(a["openBlock"])(),Object(a["createBlock"])("span",Rn,"读ID成功")):Object(a["createCommentVNode"])("",!0),2==e.uwbr4checking?(Object(a["openBlock"])(),Object(a["createBlock"])("span",_n,"自检成功")):Object(a["createCommentVNode"])("",!0),3==e.uwbr4checking?(Object(a["openBlock"])(),Object(a["createBlock"])("span",Pn,"设备功能关闭")):Object(a["createCommentVNode"])("",!0),4==e.uwbr4checking?(Object(a["openBlock"])(),Object(a["createBlock"])("span",An,"运行过程检测ID失败")):Object(a["createCommentVNode"])("",!0)]})),_:1})]})),_:1}),Object(a["createVNode"])(i,{span:12,offset:0},{default:Object(a["withCtx"])((function(){return[Object(a["createVNode"])(l,{label:"UWBT3："},{default:Object(a["withCtx"])((function(){return[0==e.uwbt3checking?(Object(a["openBlock"])(),Object(a["createBlock"])("span",Fn,"自检失败")):Object(a["createCommentVNode"])("",!0),1==e.uwbt3checking?(Object(a["openBlock"])(),Object(a["createBlock"])("span",Mn,"读ID成功")):Object(a["createCommentVNode"])("",!0),2==e.uwbt3checking?(Object(a["openBlock"])(),Object(a["createBlock"])("span",En,"自检成功")):Object(a["createCommentVNode"])("",!0),3==e.uwbt3checking?(Object(a["openBlock"])(),Object(a["createBlock"])("span",Hn,"设备功能关闭")):Object(a["createCommentVNode"])("",!0),4==e.uwbt3checking?(Object(a["openBlock"])(),Object(a["createBlock"])("span",Un,"运行过程检测ID失败")):Object(a["createCommentVNode"])("",!0)]})),_:1})]})),_:1}),Object(a["createVNode"])(i,{span:12,offset:0},{default:Object(a["withCtx"])((function(){return[Object(a["createVNode"])(l,{label:"RFID："},{default:Object(a["withCtx"])((function(){return[0==e.rfidchecking?(Object(a["openBlock"])(),Object(a["createBlock"])("span",zn,"自检失败")):Object(a["createCommentVNode"])("",!0),1==e.rfidchecking?(Object(a["openBlock"])(),Object(a["createBlock"])("span",Gn,"读ID成功")):Object(a["createCommentVNode"])("",!0),2==e.rfidchecking?(Object(a["openBlock"])(),Object(a["createBlock"])("span",Wn,"自检成功")):Object(a["createCommentVNode"])("",!0),3==e.rfidchecking?(Object(a["openBlock"])(),Object(a["createBlock"])("span",Yn,"设备功能关闭")):Object(a["createCommentVNode"])("",!0),4==e.rfidchecking?(Object(a["openBlock"])(),Object(a["createBlock"])("span",qn,"运行过程检测ID失败")):Object(a["createCommentVNode"])("",!0)]})),_:1})]})),_:1}),Object(a["createVNode"])(i,{span:12,offset:0},{default:Object(a["withCtx"])((function(){return[Object(a["createVNode"])(l,{label:"模式："},{default:Object(a["withCtx"])((function(){return[Object(a["createTextVNode"])(Object(a["toDisplayString"])(e.pattern),1)]})),_:1})]})),_:1}),Object(a["createVNode"])(i,{span:24,offset:0},{default:Object(a["withCtx"])((function(){return[Object(a["createVNode"])(l,{label:"自检状态："},{default:Object(a["withCtx"])((function(){return[0==e.checkState?(Object(a["openBlock"])(),Object(a["createBlock"])("span",Xn,"自检成功")):Object(a["createCommentVNode"])("",!0),1==e.checkState?(Object(a["openBlock"])(),Object(a["createBlock"])("span",Jn,"自检失败")):Object(a["createCommentVNode"])("",!0)]})),_:1})]})),_:1})]})),_:1})}var $n=Object(a["defineComponent"])({name:"BasestationItem",props:{deviceData:{type:Object}},setup:function(e){var t=Object(a["reactive"])({dname:"",dnum:"",x:"",y:"",dtype:"",status:"",hardwarever:"",version:"",starttype:0,checkState:0,uwbr4checking:0,uwbt3checking:0,rfidchecking:0,pattern:""});return Object(a["watch"])((function(){return e.deviceData}),(function(e){Object.assign(t,e)}),{immediate:!0,deep:!0}),Object(Ye["a"])({},Object(a["toRefs"])(t))}});$n.render=Zn;var Kn=$n,Qn=Object(a["createTextVNode"])(" ****** ");function ea(e,t,n,r,o,c){var l=Object(a["resolveComponent"])("el-form-item"),i=Object(a["resolveComponent"])("el-col"),u=Object(a["resolveComponent"])("el-row");return Object(a["openBlock"])(),Object(a["createBlock"])(u,null,{default:Object(a["withCtx"])((function(){return[Object(a["createVNode"])(i,{span:24,offset:0},{default:Object(a["withCtx"])((function(){return[Object(a["createVNode"])(l,{label:"摄像头名称："},{default:Object(a["withCtx"])((function(){return[Object(a["createTextVNode"])(Object(a["toDisplayString"])(e.DeviceName||e.dname),1)]})),_:1})]})),_:1}),Object(a["createVNode"])(i,{span:12,offset:0},{default:Object(a["withCtx"])((function(){return[Object(a["createVNode"])(l,{label:"摄像头ip："},{default:Object(a["withCtx"])((function(){return[Object(a["createTextVNode"])(Object(a["toDisplayString"])(e.DeviceNum||e.dnum),1)]})),_:1})]})),_:1}),Object(a["createVNode"])(i,{span:12,offset:0},{default:Object(a["withCtx"])((function(){return[Object(a["createVNode"])(l,{label:"所在位置："},{default:Object(a["withCtx"])((function(){return[Object(a["createTextVNode"])(Object(a["toDisplayString"])(e.getMapByNum(e.snum).sname),1)]})),_:1})]})),_:1}),Object(a["createVNode"])(i,{span:12,offset:0},{default:Object(a["withCtx"])((function(){return[Object(a["createVNode"])(l,{label:"用户名："},{default:Object(a["withCtx"])((function(){return[Object(a["createTextVNode"])(Object(a["toDisplayString"])(e.UserName),1)]})),_:1})]})),_:1}),Object(a["createVNode"])(i,{span:12,offset:0},{default:Object(a["withCtx"])((function(){return[Object(a["createVNode"])(l,{label:"密码："},{default:Object(a["withCtx"])((function(){return[Qn]})),_:1})]})),_:1}),Object(a["createVNode"])(i,{span:12,offset:0},{default:Object(a["withCtx"])((function(){return[Object(a["createVNode"])(l,{label:"通道号："},{default:Object(a["withCtx"])((function(){return[Object(a["createTextVNode"])(Object(a["toDisplayString"])(e.ChanelNum),1)]})),_:1})]})),_:1}),Object(a["createVNode"])(i,{span:12,offset:0},{default:Object(a["withCtx"])((function(){return[Object(a["createVNode"])(l,{label:"是否云台："},{default:Object(a["withCtx"])((function(){return[Object(a["createTextVNode"])(Object(a["toDisplayString"])(e.IsYunTai?"是":"否"),1)]})),_:1})]})),_:1}),Object(a["createVNode"])(i,{span:12,offset:0},{default:Object(a["withCtx"])((function(){return[Object(a["createVNode"])(l,{label:"摄像头x："},{default:Object(a["withCtx"])((function(){return[Object(a["createTextVNode"])(Object(a["toDisplayString"])(e.x),1)]})),_:1})]})),_:1}),Object(a["createVNode"])(i,{span:12,offset:0},{default:Object(a["withCtx"])((function(){return[Object(a["createVNode"])(l,{label:"摄像头y："},{default:Object(a["withCtx"])((function(){return[Object(a["createTextVNode"])(Object(a["toDisplayString"])(e.y),1)]})),_:1})]})),_:1})]})),_:1})}var ta=Object(a["defineComponent"])({name:"CameraItem",props:{deviceData:{type:Object}},setup:function(e){var t=Object(a["reactive"])({DeviceName:"",DeviceNum:"",dname:"",dnum:"",bnum:"",snum:"",UserName:"",Password:"",ChanelNum:0,IsYunTai:!1,IsCameraPhoto:"",x:"",y:""});return Object(a["watch"])((function(){return e.deviceData}),(function(e){Object.assign(t,e)}),{immediate:!0,deep:!0}),Object(Ye["a"])(Object(Ye["a"])({},Object(a["toRefs"])(t)),{},{getMapByNum:ct["d"]})}});ta.render=ea;var na=ta,aa=Object(a["defineComponent"])({name:"FormContent",props:{formType:{type:String,default:ot["i"].person},x:{type:Number,default:0},y:{type:Number,default:0},formData:{type:Object,default:function(){return{}}}},components:{labelItem:xn,personItem:Dn,basestationItem:Kn,cameraItem:na},setup:function(e){var t=Object(a["ref"])(),n=Object(a["reactive"])({roomNum:"1",src:"/images/staff_big.png",dname:"",dnum:"",x:"",y:"",dtype:"",status:"",hardwarever:"",version:"",starttype:0,checkState:0,uwbr4checking:0,uwbt3checking:0,rfidchecking:0,pattern:"",currentalarm:"",voltage:0,bracelet_voltage:0,UserName:"",Password:"",ChanelNum:0,IsYunTai:!1,IsCameraPhoto:"",AlarmMappingLayerIdS:"",BrandCode:"",BrandName:"",BuildingName:"",BuildingNum:"",CreateTime:"",DeviceName:"",DeviceNum:"",DeviceObjProperty:"",DeviceSelfPointRelation:"",DeviceType:"",DeviceTypeCode:"",InstallSceneNum:"",IsUse:!0,OwnAlarmSourceCode:"",PDeviceIds:"",SceneName:"",shapeName:"",desc:""}),r=Ze()(n),o=ot["i"];return Object(a["watch"])((function(){return e.formData}),(function(t){t&&(Object.assign(n,r),Object.assign(n,t),n.x="0"!==String(e.x)?String(e.x):n.x,n.y="0"!==String(e.y)?String(e.y):n.y)}),{immediate:!0,deep:!0}),Object(a["watch"])((function(){return e.x}),(function(e){isNaN(e)||(n.x=String(e))})),Object(a["watch"])((function(){return e.y}),(function(e){isNaN(e)||(n.y=String(e))})),{formContentRef:t,form:n,types:o}}});n("6d03");aa.render=wn;var ra=aa,oa={class:"fence-box"};function ca(e,t,n,r,o,c){return Object(a["openBlock"])(),Object(a["createBlock"])("ul",oa,[(Object(a["openBlock"])(!0),Object(a["createBlock"])(a["Fragment"],null,Object(a["renderList"])(o.list,(function(e,t){return Object(a["openBlock"])(),Object(a["createBlock"])("li",{key:t,onClick:function(n){return c.handleClick(e,t)}},Object(a["toDisplayString"])(e.label),9,["onClick"])})),128))])}var la={name:"FenceBox",data:function(){return{list:[{label:"取消"},{label:"完成"}]}},methods:{handleClick:function(e,t){var n={0:"cancel",1:"finish"};this.$emit(n[t])}}};la.render=ca;var ia=Object(a["withScopeId"])("data-v-297d393a");Object(a["pushScopeId"])("data-v-297d393a");var ua={key:0,class:"canvas-container"};Object(a["popScopeId"])();var sa=ia((function(e,t,n,r,o,c){return n.visible?(Object(a["openBlock"])(),Object(a["createBlock"])("div",ua,[Object(a["createVNode"])("canvas",{id:"water-alarm-canvas",ref:"waterAlarmCanvas",onClick:t[1]||(t[1]=function(){return c.clickHandler&&c.clickHandler.apply(c,arguments)})},null,512),Object(a["createVNode"])("i",{class:"el-icon-close hidden-icon",onClick:t[2]||(t[2]=function(){return c.hiddenBox&&c.hiddenBox.apply(c,arguments)})})])):Object(a["createCommentVNode"])("",!0)})),da=(n("cb29"),{name:"WaterAlarm",props:{visible:{type:Boolean,default:!1}},data:function(){return{ctx:null,radarR:60,radarR1:150,shipImg:null,shipDeg:0,alpha:.1,personPosArr:[[100,100],[400,100]]}},mounted:function(){this.visible&&this.init()},methods:{init:function(){var e=this,t=this.$el,n=t.clientWidth,a=t.clientHeight;this.$refs.waterAlarmCanvas.width=n,this.$refs.waterAlarmCanvas.height=a,this.ctx=this.$refs.waterAlarmCanvas.getContext("2d"),this.shipImg=new Image,this.shipImg.src="/images/car.png",this.shipImg.onload=function(){var t={ctx:e.ctx,shipImg:e.shipImg,shipWidth:60,shipHeight:60,shipDeg:e.shipDeg,radarR:e.radarR,radarR1:e.radarR1,alpha:e.alpha,personPosArr:e.personPosArr};e.drawScene(t),e.animate()}},animate:function(){if(this.visible){requestAnimationFrame(this.animate);var e={ctx:this.ctx,shipImg:this.shipImg,shipWidth:60,shipHeight:60,shipDeg:this.shipDeg,radarR:this.radarR,radarR1:this.radarR1,alpha:this.alpha,personPosArr:this.personPosArr};this.drawScene(e),this.shipDeg=Math.random()*Math.PI*2,this.radarR=this.radarR>300?0:++this.radarR,this.radarR1=this.radarR1>300?0:++this.radarR1,this.alpha+=.01,this.alpha=this.alpha>1?.1:this.alpha}},drawScene:function(e){var t=e.ctx,n=e.shipImg,a=e.shipWidth,r=e.shipHeight,o=e.shipDeg,c=e.radarR,l=e.radarR1,i=e.alpha,u=e.personPosArr,s=this.$refs.waterAlarmCanvas,d=s.width,f=s.height;t.clearRect(0,0,d,f),this.drawBasicIcon(t,d,f),this.drawRadar({ctx:t,pos:[d/2,f/2],r:c}),this.drawRadar({ctx:t,pos:[d/2,f/2],r:l}),this.drawPerson(t,u,i),t.save(),t.translate(d/2,f/2),t.rotate(o),t.drawImage(n,-a/2,-r/2,a,r),t.restore()},drawBasicIcon:function(e,t,n){e.beginPath(),e.fillStyle="#2CA3FF",e.arc(t/2,n/2,t/2,0,2*Math.PI),e.fill(),e.closePath(),e.beginPath(),e.lineCap="round",e.strokeStyle="#fff",e.lineWidth=4,e.moveTo(0,n/2),e.lineTo(t,n/2),e.moveTo(t/2,0),e.lineTo(t/2,n),e.stroke(),e.closePath(),e.beginPath(),e.strokeStyle="#ffffff";for(var a=0;a<6;a++)e.arc(t/2,n/2,50*a,0,2*Math.PI);e.lineWidth=2,e.stroke(),e.closePath()},drawRadar:function(e){var t=e.ctx,n=e.pos,a=e.r;t.beginPath();var r=t.createRadialGradient(n[0],n[1],0,n[0],n[1],a);r.addColorStop(0,"rgba(200,0,0,1.0)"),r.addColorStop(1,"rgba(200,0,0,0.1)"),t.fillStyle=r,t.arc(n[0],n[1],a,0,2*Math.PI),t.fill(),t.closePath()},drawPerson:function(e,t,n){e.beginPath(),e.fillStyle="rgba(255,0,0,".concat(n,")"),t.forEach((function(t){e.arc(t[0],t[1],4,0,2*Math.PI)})),e.fill(),e.closePath()},hiddenBox:function(){this.$emit("update:visible",!1)},clickHandler:function(e){for(var t=this.personPosArr,n=e.offsetX,a=e.offsetY,r=0,o=t.length;r<o;r++)if(n>t[r][0]-4&&n<t[r][0]+4&&a>t[r][1]-4&&a<t[r][1]+4)return void this.$message("落水人员被点击了")}}});n("8b64");da.render=sa,da.__scopeId="data-v-297d393a";var fa={ref:"monitorListPanelRef",class:"historical-mon"},ma={class:"top-title"},ba={style:{width:"10%"}},pa=Object(a["createTextVNode"])(">"),Oa={ref:"playerRef",class:"live-video",muted:"",autoplay:"",controls:"true",style:{"object-fit":"fill"}};function ha(e,t,n,r,o,c){var l=Object(a["resolveComponent"])("el-switch");return Object(a["openBlock"])(),Object(a["createBlock"])("div",null,[Object(a["createVNode"])("div",fa,[Object(a["createVNode"])("div",ma,[Object(a["createVNode"])("span",null,Object(a["toDisplayString"])(e.cameraName),1),Object(a["createVNode"])("div",ba,[Object(a["createVNode"])(l,{modelValue:e.cameraHigh,"onUpdate:modelValue":t[1]||(t[1]=function(t){return e.cameraHigh=t}),class:"switchStyle","active-text":"高清","inactive-text":"清晰","active-value":!0,"inactive-value":!1,"active-color":"#13ce66","inactive-color":"rgba(67, 67, 122, 1)",onChange:t[2]||(t[2]=function(t){return e.changSwitch(t,e.cameraHigh)})},{default:Object(a["withCtx"])((function(){return[pa]})),_:1},8,["modelValue"])]),Object(a["createVNode"])("button",{onClick:t[3]||(t[3]=function(){return e.hidden&&e.hidden.apply(e,arguments)}),onTouchstart:t[4]||(t[4]=Object(a["withModifiers"])((function(){return e.hidden&&e.hidden.apply(e,arguments)}),["stop","prevent"]))},null,32)]),Object(a["createVNode"])("div",{class:"h5videowrapper h5container",style:e.getStyle()},[Object(a["withDirectives"])(Object(a["createVNode"])("span",null,"视频加载中...",512),[[a["vShow"],e.isLoading]]),Object(a["createVNode"])("video",Oa,null,512)],4)],512)])}var ja=n("7566"),va={mounted:function(e,t){var n=t.value.split(","),a=Object(rt["a"])(n,2),r=a[0],o=a[1],c=e.querySelector("."+r),l=e.querySelector("."+o);c.style.cssText+=";cursor:move;",l.style.cssText+=";top:5rem;";var i=function(){return function(e,t){return getComputedStyle(e,null)[t]}}();c.onmousedown=function(e){var t=e.clientX-c.offsetLeft,n=e.clientY-c.offsetTop,a=l.offsetWidth,r=l.offsetHeight,o=document.body.clientWidth,u=document.body.clientHeight-ot["h"]+20,s=l.offsetLeft,d=o-l.offsetLeft-a,f=l.offsetTop,m=u-l.offsetTop-r,b=i(l,"left"),p=i(l,"top");b.includes("%")?(b=+document.body.clientWidth*(+b.replace(/%/g,"")/100),p=+document.body.clientHeight*(+p.replace(/%/g,"")/100)):(b=+b.replace(/\px/g,""),p=+p.replace(/\px/g,"")),document.onmousemove=function(e){var a=e.clientX-t,r=e.clientY-n;-a>s?a=-s:a>d&&(a=d),-r>f?r=-f:r>m&&(r=m),l.style.cssText+=";left:".concat(a+b,"px;top:").concat(r+p,"px;")},document.onmouseup=function(){document.onmousemove=null,document.onmouseup=null}}}},ga=va,ya=ga,wa="changeMonitorListPanelState",Va=Object(a["defineComponent"])({name:"MonitorList",directives:{dragDialog:ya},props:{cameraData:{type:Object,required:!0},livePlayCount:{type:Number,required:!0}},emits:[wa],setup:function(e,t){var n=t.emit,r=Object(a["ref"])(),o=Object(a["reactive"])({playList:{},monitorPanelState:!1,serverHost:"",cameraId:0,cameraName:"",cameraHigh:!1,subtype:2,isLoading:!1}),c=Object(a["toRefs"])(o),l=Object(a["ref"])();function i(e,t){if(ja["a"].isSupported()){var n=l.value;if(n){o.isLoading=!0;var a=e.camera.id;o.cameraId=a,o.cameraName=e.camera.name;var c="rtsp://".concat(e.camera.username,":").concat(e.camera.password,"@").concat(e.camera.ip,"?channel=1&subtype=").concat(t);"海康"===e.camera.brand||"海康威视"===e.camera.brand?c="rtsp://".concat(e.camera.username,":").concat(e.camera.password,"@").concat(e.camera.ip,"/Streaming/Channels/10").concat(t):"大华"===e.camera.brand&&(c="rtsp://".concat(e.camera.username,":").concat(e.camera.password,"@").concat(e.camera.ip,"?channel=1&subtype=").concat(t)),r.value=e.camera.player;var u="".concat(tt["c"],"/").concat(a,"/?url=").concat(encodeURIComponent(c),"}&brand=").concat(e.camera.brand);r.value=ja["a"].createPlayer({type:"flv",isLive:!0,enableStashBuffer:!1,autoCleanupMaxBackwardDuration:60,autoCleanupMinBackwardDuration:30,statisticsInfoReportInterval:2e3,stashInitialSize:131072,enableDurationMonitor:!0,enableVideoFrozenMonitor:!0,enableConstVideoViewSize:!0,url:u});var s=r.value;s.on(ja["a"].Events.METADATA_ARRIVED,(function(){o.isLoading=!1})),s.enableVideoStateMonitor(!0),s.on(ja["a"].Events.VIDEO_RESOLUTION_CHANGED,(function(){i(o.playList,o.subtype)})),s.on(ja["a"].Events.MEDIA_SOURCE_ENDED,(function(){i(o.playList,o.subtype)})),s.on(ja["a"].Events.MEDIA_SOURCE_CLOSE,(function(){}));var d=!1;n.addEventListener("pause",(function(){d=!0})),n.addEventListener("play",(function(){d=!1})),s.on(ja["a"].Events.NETWORK_ERROR,(function(){We.a.error("网络异常，无法加载该视频")})),s.on(ja["a"].Events.MEDIA_ERROR,(function(){})),s.on(ja["a"].Events.VIDEO_FROZEN,(function(){d||i(o.playList,o.subtype)})),s.on(ja["a"].Events.ERROR,(function(e,t){d||i(o.playList,o.subtype)})),r.value.attachMediaElement(n);try{r.value.load(),r.value.play()}catch(f){}}}}function u(){return 1===e.livePlayCount?"width:100%; height:100%":"width:100%; height:26rem"}function s(){"undefined"!==typeof r.value&&null!=r.value.e&&null!=r.value&&(r.value.pause(),r.value.unload(),r.value.detachMediaElement(),r.value.destroy()),n(wa,o.cameraId)}function d(e,t){o.cameraHigh=t,o.cameraHigh?o.subtype=1:o.subtype=2,"undefined"!==typeof r.value&&null!=r.value.e&&null!=r.value&&(r.value.pause(),r.value.unload(),r.value.detachMediaElement(),r.value.destroy()),Object(a["nextTick"])((function(){i(o.playList,o.subtype)}))}function f(e){e&&(o.playList=e,Object(a["nextTick"])((function(){e.active?i(e,o.subtype):"undefined"!==typeof r.value&&null!=r.value.e&&null!=r.value&&(r.value.pause(),r.value.unload(),r.value.detachMediaElement(),r.value.destroy())})))}return Object(a["onUnmounted"])((function(){"undefined"!==typeof r.value&&null!=r.value.e&&null!=r.value&&(r.value.pause(),r.value.unload(),r.value.detachMediaElement(),r.value.destroy())})),Object(a["onMounted"])((function(){f(e.cameraData)})),Object(Ye["a"])(Object(Ye["a"])({},c),{},{getStyle:u,hidden:s,changSwitch:d,playerRef:l})}});n("6993");Va.render=ha;var Na=Va,Ca=Object(a["withScopeId"])("data-v-64dc0cc8");Object(a["pushScopeId"])("data-v-64dc0cc8");var ka={ref:"hsitoryMonitorListPanelRef",class:"historical-mon"},xa={class:"top-title"},Ta={class:"video-controls"},Sa={class:""},Da={class:"time"},Ia={ref:"innerBarRef",class:"inner-bar"},Ba={class:"time"},La={class:"rate"},Ra={class:"rate-list"},_a={key:0,class:"block",style:{width:"100%"}},Pa={style:{width:"38%",float:"left"}},Aa={style:{width:"30%",float:"left"}},Fa={style:{width:"30%","padding-left":"10px",float:"left"}};Object(a["popScopeId"])();var Ma=Ca((function(e,t,n,r,o,c){var l=Object(a["resolveComponent"])("el-date-picker"),i=Object(a["resolveComponent"])("el-time-picker");return Object(a["openBlock"])(),Object(a["createBlock"])("div",ka,[Object(a["createVNode"])("div",xa,[Object(a["createVNode"])("span",null,Object(a["toDisplayString"])(e.cameraName),1),Object(a["createVNode"])("button",{onClick:t[1]||(t[1]=function(){return e.hidden&&e.hidden.apply(e,arguments)}),onTouchstart:t[2]||(t[2]=Object(a["withModifiers"])((function(){return e.hidden&&e.hidden.apply(e,arguments)}),["stop","prevent"]))},null,32)]),Object(a["createVNode"])("div",{class:"h5videowrapper h5container",style:e.getStyle()},[Object(a["withDirectives"])(Object(a["createVNode"])("span",null,"视频加载中...",512),[[a["vShow"],e.isLoading]]),Object(a["createVNode"])("video",{ref:"playerRef",class:"history-video",autoplay:"",controls:"true",style:{width:"100%",height:"100%","object-fit":"fill"},onTimeupdate:t[3]||(t[3]=function(){return e.handleVideoProgress&&e.handleVideoProgress.apply(e,arguments)})},null,544)],4),Object(a["withDirectives"])(Object(a["createVNode"])("div",Ta,[Object(a["createVNode"])("div",Sa,[Object(a["withDirectives"])(Object(a["createVNode"])("span",{class:"icon iconfont",onClick:t[4]||(t[4]=function(t){return e.changePlayStatus(!0)})},"",512),[[a["vShow"],!e.playStatus]]),Object(a["withDirectives"])(Object(a["createVNode"])("span",{class:"icon iconfont",onClick:t[5]||(t[5]=function(t){return e.changePlayStatus(!1)})},"",512),[[a["vShow"],e.playStatus]])]),Object(a["createVNode"])("span",Da,Object(a["toDisplayString"])(0!=e.currentTime?e.currentTime:""),1),Object(a["createVNode"])("div",{ref:"progressBarRef",class:"progress",onClick:t[6]||(t[6]=function(){return e.handleProgress&&e.handleProgress.apply(e,arguments)})},[Object(a["createVNode"])("div",Ia,null,512)],512),Object(a["createVNode"])("span",Ba,Object(a["toDisplayString"])(e.eTime),1),Object(a["createVNode"])("div",La,[Object(a["createVNode"])("span",null,"×"+Object(a["toDisplayString"])(e.currentRate),1),Object(a["createVNode"])("ul",Ra,[Object(a["createVNode"])("li",{onClick:t[7]||(t[7]=function(t){return e.changeRate(5)})},"5.0"),Object(a["createVNode"])("li",{onClick:t[8]||(t[8]=function(t){return e.changeRate(4)})},"4.0"),Object(a["createVNode"])("li",{onClick:t[9]||(t[9]=function(t){return e.changeRate(3)})},"3.0"),Object(a["createVNode"])("li",{onClick:t[10]||(t[10]=function(t){return e.changeRate(2)})},"2.0"),Object(a["createVNode"])("li",{onClick:t[11]||(t[11]=function(t){return e.changeRate(1.5)})},"1.5"),Object(a["createVNode"])("li",{onClick:t[12]||(t[12]=function(t){return e.changeRate(1.2)})},"1.2"),Object(a["createVNode"])("li",{onClick:t[13]||(t[13]=function(t){return e.changeRate(1)})},"1.0"),Object(a["createVNode"])("li",{onClick:t[14]||(t[14]=function(t){return e.changeRate(.5)})},"0.5"),Object(a["createVNode"])("li",{onClick:t[15]||(t[15]=function(t){return e.changeRate(.2)})},"0.2")])])],512),[[a["vShow"],e.players]]),e.timePicker?(Object(a["openBlock"])(),Object(a["createBlock"])("div",_a,[Object(a["createVNode"])("div",Pa,[Object(a["createVNode"])(l,{modelValue:e.day,"onUpdate:modelValue":t[16]||(t[16]=function(t){return e.day=t}),type:"date","value-format":"timestamp",placeholder:"选择日期"},null,8,["modelValue"])]),Object(a["createVNode"])("div",Aa,[Object(a["createVNode"])(i,{modelValue:e.sTime,"onUpdate:modelValue":t[17]||(t[17]=function(t){return e.sTime=t}),"value-format":"HH:mm:ss",style:{width:"100%"},placeholder:"开始时间"},null,8,["modelValue"])]),Object(a["createVNode"])("div",Fa,[Object(a["createVNode"])(i,{modelValue:e.eTime,"onUpdate:modelValue":t[18]||(t[18]=function(t){return e.eTime=t}),"value-format":"HH:mm:ss",style:{width:"100%"},placeholder:"结束时间"},null,8,["modelValue"])]),Object(a["createVNode"])("button",{class:"el-button el-button--medium el-button--info",style:{width:"100%","background-color":"#02163a"},onClick:t[19]||(t[19]=function(){return e.searchVideo&&e.searchVideo.apply(e,arguments)})}," 查询回放 ")])):Object(a["createCommentVNode"])("",!0)],512)})),Ea="changeHistoryMonitorListPanelState",Ha=Object(a["defineComponent"])({name:"HistpryMonitor",props:{historyCameraData:{type:Object,required:!0},historyPlayCount:{type:Number,required:!0}},emits:[Ea],setup:function(e,t){var n=t.emit,r=Object(a["ref"])(),o=Object(a["ref"])(),c=Object(a["ref"])(),l=Object(a["ref"])(),i=Object(a["reactive"])({playList:{},day:"",sTime:0,eTime:0,startTime:0,endTime:0,playStatus:!1,timePicker:!0,currentTime:0,overTime:0,currentRate:1,currentId:"",cameraId:0,cameraName:"",isLoading:!1}),u=Object(a["toRefs"])(i),s=Object(a["computed"])((function(){var e=i.sTime.toString().split(":"),t=i.eTime.toString().split(":"),n=36e5*(t[0]-e[0])+6e4*(t[1]-e[1])+1e3*(t[2]-e[2]);return n})),d=Object(a["computed"])((function(){return o.value[0].clientWidth})),f=Object(a["computed"])((function(){var e=i.sTime.toString().split(":");return i.day+36e5*e[0]+6e4*e[1]+1e3*e[2]}));function m(e){var t=parseFloat(e),n=new Date(t).getFullYear(),a=new Date(t).getMonth()+1,r=new Date(t).getDate(),o=new Date(t).getHours(),c=new Date(t).getMinutes(),l=new Date(t).getSeconds();return"".concat(n).concat(a>9?a:"0"+a).concat(r>9?r:"0"+r,"T").concat(o>9?o:"0"+o).concat(c>9?c:"0"+c).concat(l>9?l:"0"+l,"Z")}function b(e){var t=parseFloat(e),n=new Date(t).getFullYear(),a=new Date(t).getMonth()+1,r=new Date(t).getDate(),o=new Date(t).getHours(),c=new Date(t).getMinutes(),l=new Date(t).getSeconds();return"".concat(n,"_").concat(a>9?a:"0"+a,"_").concat(r>9?r:"0"+r,"_").concat(o>9?o:"0"+o,"_").concat(c>9?c:"0"+c,"_").concat(l>9?l:"0"+l)}function p(e){if(ja["a"].isSupported()){var t=Object(a["ref"])(),n=t.value;if(!i.startTime&&!i.endTime&&!e.startTime&&!e.endTime)return;if(i.startTime=e.startTime?e.startTime:i.startTime,i.endTime=e.endTime?e.endTime:i.endTime,e.startTime&&e.endTime?i.timePicker=!1:i.timePicker=!0,n){i.isLoading=!0;var r=e.camera.id;i.cameraId=r,i.cameraName=e.camera.name;var o="";if("海康"==e.camera.brand||"海康威视"==e.camera.brand){var c=m(i.startTime.toString()),u=m(i.endTime.toString());o="rtsp://".concat(e.camera.nvr_username," : ").concat(e.camera.nvr_password,"@").concat(e.camera.nvr_ip,"/Streaming/tracks/").concat(e.camera.nvr_channel,"01/?starttime=").concat(c,'&endtime=" +\n              ').concat(u,"&codecType=h264&subtype=1")}else if("大华"==e.camera.brand){var s=b(i.startTime.toString()).replace(/-/g,"_").replace(/:/g,"_").replace(/ /g,"_"),d=b(i.endTime.toString()).replace(/-/g,"_").replace(/:/g,"_").replace(/ /g,"_");o="rtsp://".concat(e.camera.nvr_username," : ").concat(e.camera.nvr_password,"@").concat(e.camera.nvr_ip,"/cam/playback?channel=").concat(e.camera.nvr_channel,"&subtype=1&starttime=").concat(s,'&endtime=" +\n              ').concat(d)}l.value=e.camera.player,e.camera.id!=i.currentId&&(i.currentTime=0,i.eTime=0,i.currentRate=1),i.currentId=e.camera.id;var f="".concat(tt["c"],"/").concat(r,"/?url=").concat(encodeURIComponent(o),"}&brand=").concat(e.camera.brand);l.value=ja["a"].createPlayer({type:"flv",isLive:!1,hasVideo:!0,url:f});var p=l.value;p.on(ja["a"].Events.METADATA_ARRIVED,(function(){i.isLoading=!1,i.playStatus=!0})),n.addEventListener("pause",(function(){i.playStatus=!0})),n.addEventListener("play",(function(){i.playStatus=!1})),l.value.attachMediaElement(n);try{l.value.load(),l.value.play()}catch(O){}}}}function O(){return 1===e.historyPlayCount?"width:100%; height:100%":"width:100%; height:26rem"}function h(){"undefined"!==typeof l.value&&null!=l.value.e&&null!=l.value&&(l.value.pause(),l.value.unload(),l.value.detachMediaElement(),l.value.destroy()),n(Ea,i.cameraId)}function j(e){var t=parseFloat(e),n=new Date(t).getFullYear(),a=new Date(t).getMonth()+1,r=new Date(t).getDate();return"".concat(n,"-").concat(a>9?a:"0"+a,"-").concat(r>9?r:"0"+r)}function v(){i.sTime&&i.eTime&&i.day?(i.startTime=new Date(Date.parse(j(i.day)+" "+i.sTime)).getTime(),i.endTime=new Date(Date.parse(j(i.day)+" "+i.eTime)).getTime(),p(i.playList)):We.a.error("请选择时间段查询")}function g(e){var t=Object(a["ref"])();e?t.value[0].play():t.value[0].pause(),i.playStatus=e}function y(e){var t=parseFloat(e),n=new Date(t).getHours(),a=new Date(t).getMinutes(),r=new Date(t).getSeconds();return"".concat(n>9?n:"0"+n,":").concat(a>9?a:"0"+a,":").concat(r>9?r:"0"+r)}function w(e){if(i.sTime&&i.eTime&&i.day){r.value[0].style.width=e.offsetX+"px";var t=Math.floor(e.offsetX/o.value[0].offsetWidth*s.value),n=i.sTime.toString().split(":");i.startTime=Number(i.day+36e5*Number(n[0])+6e4*Number(n[1])+1e3*Number(n[2])+t),p(i.playList)}else We.a.error("请选择时间段查询")}function V(e){i.currentTime=Number(y(1e3*e.target.currentTime+i.startTime+"")),r.value[0].style.width=(1e3*e.target.currentTime+i.startTime-f.value)/(i.endTime-i.startTime)*d.value+"px"}function N(e){i.currentRate=e,c.value[0].playbackRate=e}return Object(a["onUnmounted"])((function(){"undefined"!==typeof l.value&&null!=l.value.e&&null!=l.value&&(l.value.pause(),l.value.unload(),l.value.detachMediaElement(),l.value.destroy())})),Object(a["watch"])(e.historyCameraData,(function(e){e&&(i.playList=e,Object(a["nextTick"])((function(){e.active?p(e):"undefined"!==typeof l.value&&null!=l.value.e&&null!=l.value&&(l.value.pause(),l.value.unload(),l.value.detachMediaElement(),l.value.destroy())})))})),Object(Ye["a"])(Object(Ye["a"])({},u),{},{handleProgress:w,getStyle:O,hidden:h,searchVideo:v,changePlayStatus:g,handleVideoProgress:V,changeRate:N})}});n("cc86");Ha.render=Ma,Ha.__scopeId="data-v-64dc0cc8";var Ua=Ha;function za(e,t){return Object(a["openBlock"])(),Object(a["createBlock"])("div",null," 1 ")}const Ga={};Ga.render=za;var Wa=Object(a["createTextVNode"])("搜索"),Ya={style:{color:"#f00"}},qa=Object(a["createVNode"])("span",{class:"icon iconfont"},"",-1),Xa={style:{color:"#0f0"}},Ja=Object(a["createVNode"])("img",{src:"/images/power.png",style:{width:"16px"},alt:""},null,-1),Za={style:{color:"#0f0"}},$a=Object(a["createVNode"])("span",{class:"icon iconfont"},"",-1),Ka={key:0,style:{color:"#3dd1ff"}},Qa={key:1},er=Object(a["createTextVNode"])("详情");function tr(e,t,n,r,o,c){var l=Object(a["resolveComponent"])("el-input"),i=Object(a["resolveComponent"])("el-form-item"),u=Object(a["resolveComponent"])("el-button"),s=Object(a["resolveComponent"])("el-form"),d=Object(a["resolveComponent"])("hd-table-column"),f=Object(a["resolveComponent"])("el-table-column"),m=Object(a["resolveComponent"])("hd-table"),b=Object(a["resolveComponent"])("el-pagination"),p=Object(a["resolveDirective"])("loading");return Object(a["openBlock"])(),Object(a["createBlock"])("div",null,[Object(a["createVNode"])(s,{model:e.params,"label-width":"80px",inline:!0,size:"small"},{default:Object(a["withCtx"])((function(){return[Object(a["createVNode"])(i,{label:"标签编号"},{default:Object(a["withCtx"])((function(){return[Object(a["createVNode"])(l,{modelValue:e.params.dnum,"onUpdate:modelValue":t[1]||(t[1]=function(t){return e.params.dnum=t}),modelModifiers:{trim:!0},clearable:"",onChange:e.search},null,8,["modelValue","onChange"])]})),_:1}),Object(a["createVNode"])(i,null,{default:Object(a["withCtx"])((function(){return[Object(a["createVNode"])(u,{type:"primary",onClick:e.search},{default:Object(a["withCtx"])((function(){return[Wa]})),_:1},8,["onClick"])]})),_:1})]})),_:1},8,["model"]),Object(a["withDirectives"])(Object(a["createVNode"])(m,{data:e.tableData},{default:Object(a["withCtx"])((function(){return[Object(a["createVNode"])(d,{label:"编号",prop:"dnum",width:"110"}),Object(a["createVNode"])(d,{label:"名称",prop:"dname"}),Object(a["createVNode"])(d,{label:"类型",prop:"dtype"}),Object(a["createVNode"])(f,{label:"电量","show-overflow-tooltip":"",align:"center"},{default:Object(a["withCtx"])((function(e){var t=e.row;return[Object(a["withDirectives"])(Object(a["createVNode"])("div",Ya,[qa],512),[[a["vShow"],t.voltage<3.55||!t.voltage]]),Object(a["withDirectives"])(Object(a["createVNode"])("div",Xa,[Ja],512),[[a["vShow"],t.voltage>=3.55&&t.voltage<3.65]]),Object(a["withDirectives"])(Object(a["createVNode"])("div",Za,[$a],512),[[a["vShow"],t.voltage>=3.65]])]})),_:1}),Object(a["createVNode"])(f,{width:"180",label:"位置","show-overflow-tooltip":"",align:"center"},{default:Object(a["withCtx"])((function(t){var n=t.row;return[n.snum?(Object(a["openBlock"])(),Object(a["createBlock"])("span",Ka,Object(a["toDisplayString"])(e.getMapByNum(n.snum).sname),1)):Object(a["createCommentVNode"])("",!0),n.snum?Object(a["createCommentVNode"])("",!0):(Object(a["openBlock"])(),Object(a["createBlock"])("span",Qa," 未上线 "))]})),_:1}),Object(a["createVNode"])(f,{width:"120",label:"操作",align:"center"},{default:Object(a["withCtx"])((function(t){var n=t.row;return[Object(a["createVNode"])(u,{size:"mini",type:"primary",onClick:function(t){return e.handleDetail(n)}},{default:Object(a["withCtx"])((function(){return[er]})),_:2},1032,["onClick"])]})),_:1})]})),_:1},8,["data"]),[[p,e.loading]]),Object(a["withDirectives"])(Object(a["createVNode"])(b,{background:"","current-page":e.params.page,"onUpdate:current-page":t[2]||(t[2]=function(t){return e.params.page=t}),layout:"total, prev, pager, next, jumper",total:e.total,onCurrentChange:e.changePage},null,8,["current-page","total","onCurrentChange"]),[[a["vShow"],e.total&&e.tableData&&e.tableData.length]])])}function nr(e,t,n,r,o,c){var l=Object(a["resolveComponent"])("el-table-column");return Object(a["openBlock"])(),Object(a["createBlock"])(l,Object(a["mergeProps"])(e.$attrs,{align:"center","show-overflow-tooltip":""}),null,16)}var ar=Object(a["defineComponent"])({name:"HdTableColumn"});ar.render=nr;var rr=ar,or="clicked",cr=Object(a["defineComponent"])({components:{hdTableColumn:rr},name:"Label",props:{wsAllLabel:{type:Array}},emits:["showEquipDetails",or],setup:function(e,t){var n=t.emit,r=Object(a["reactive"])({page:1,pagesize:10,dtype:"肩章",dnum:""}),o=Object(a["shallowRef"])(!1),c=Object(a["ref"])([]),l=Object(a["shallowRef"])(0);function i(){return u.apply(this,arguments)}function u(){return u=Object(ze["a"])(regeneratorRuntime.mark((function t(){var n,a,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return o.value=!0,n={act:"mKQQKGa49xhcOWaBjDI1612407197459",curpage:r.page,sys_showpagesize:r.pagesize,dtype:r.dtype,dnum:r.dnum},t.next=4,et.getCommonApi(n);case 4:a=t.sent,i=a.data,i.content.forEach((function(t){if(e.wsAllLabel&&e.wsAllLabel.forEach((function(e){e.TagId===t.dnum&&(t.snum=e.LocationSceneId)})),t.eattribute){var n=t.eattribute.split(",");n.forEach((function(e){var n=e.split("|"),a=["status","hearttime","currentalarm","voltage","bracelet_voltage"];a.forEach((function(e){t[e]||n[0]!==e||(t[e]=n[1].split(":")[1])}))}))}})),c.value=i.content,l.value=i.count,o.value=!1;case 10:case"end":return t.stop()}}),t)}))),u.apply(this,arguments)}function s(e){n("showEquipDetails",e,ot["i"].labelList),n(or)}function d(e){return f.apply(this,arguments)}function f(){return f=Object(ze["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:r.page=t,i();case 2:case"end":return e.stop()}}),e)}))),f.apply(this,arguments)}function m(){return b.apply(this,arguments)}function b(){return b=Object(ze["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:r.page=1,i();case 2:case"end":return e.stop()}}),e)}))),b.apply(this,arguments)}return Object(a["onMounted"])((function(){i()})),{params:r,loading:o,tableData:c,total:l,changePage:d,search:m,getMapByNum:ct["d"],handleDetail:s}}});cr.render=tr;var lr=cr,ir=Object(a["withScopeId"])("data-v-144529ed");Object(a["pushScopeId"])("data-v-144529ed");var ur={class:"handle-class"},sr=Object(a["createTextVNode"])(" 未处理 "),dr=Object(a["createTextVNode"])(" 已处理 "),fr={class:"danger-level"},mr=Object(a["createTextVNode"])(" 全部 "),br=Object(a["createTextVNode"])(" 危急 "),pr=Object(a["createTextVNode"])(" 严重 "),Or=Object(a["createTextVNode"])(" 普通 "),hr={ref:"alarmBarRef",name:"warn-items",class:"alarm-list"},jr={style:{"line-height":"2.6rem"}},vr=Object(a["createTextVNode"])("  - "),gr=Object(a["createVNode"])("br",null,null,-1),yr={class:"bot-bar"},wr=Object(a["createTextVNode"])(" 查看报警位置 "),Vr=Object(a["createTextVNode"])(" 查看详情 "),Nr=Object(a["createTextVNode"])(" 处理 "),Cr={class:"tips"},kr=Object(a["createVNode"])("p",null,"已经到底啦！",-1),xr={class:"set-bar"},Tr=Object(a["createTextVNode"])("  "),Sr=Object(a["createTextVNode"])("  "),Dr=Object(a["createTextVNode"])(" 一键处理 "),Ir={class:"loader loader--style2",title:"1"},Br=Object(a["createVNode"])("svg",{version:"1.1",id:"loader-1",xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",x:"0px",y:"0px",width:"40px",height:"40px",viewBox:"0 0 50 50",style:{"enable-background":"new 0 0 50 50"},"xml:space":"preserve"},[Object(a["createVNode"])("path",{fill:"#000",d:"M25.251,6.461c-10.318,0-18.683,8.365-18.683,18.683h4.068c0-8.071,6.543-14.615,14.615-14.615V6.461z"},[Object(a["createVNode"])("animateTransform",{attributeType:"xml",attributeName:"transform",type:"rotate",from:"0 25 25",to:"360 25 25",dur:"0.6s",repeatCount:"indefinite"})])],-1);Object(a["popScopeId"])();var Lr=ir((function(e,t,n,r,o,c){var l=Object(a["resolveComponent"])("el-button"),i=Object(a["resolveComponent"])("ElCheckbox"),u=Object(a["resolveComponent"])("el-popconfirm");return Object(a["openBlock"])(),Object(a["createBlock"])("div",{class:"handle",onScrollCapture:t[8]||(t[8]=function(t){return e.lazyLoad(t)})},[Object(a["createVNode"])("div",ur,[Object(a["createVNode"])(l,{class:"未处理"==e.flag?"active":"",onClick:t[1]||(t[1]=function(t){return e.handleStatus("未处理")})},{default:ir((function(){return[sr]})),_:1},8,["class"]),Object(a["createVNode"])(l,{class:"已处理"==e.flag?"active":"",onClick:t[2]||(t[2]=function(t){return e.handleStatus("已处理")})},{default:ir((function(){return[dr]})),_:1},8,["class"])]),Object(a["createVNode"])("div",fr,[Object(a["createVNode"])(l,{class:e.status[3],onClick:t[3]||(t[3]=function(t){return e.handleLevel(3)})},{default:ir((function(){return[mr]})),_:1},8,["class"]),Object(a["createVNode"])(l,{class:e.status[2],onClick:t[4]||(t[4]=function(t){return e.handleLevel(2)})},{default:ir((function(){return[br]})),_:1},8,["class"]),Object(a["createVNode"])(l,{class:e.status[1],onClick:t[5]||(t[5]=function(t){return e.handleLevel(1)})},{default:ir((function(){return[pr]})),_:1},8,["class"]),Object(a["createVNode"])(l,{class:e.status[0],onClick:t[6]||(t[6]=function(t){return e.handleLevel(0)})},{default:ir((function(){return[Or]})),_:1},8,["class"])]),Object(a["createVNode"])("ul",hr,[(Object(a["openBlock"])(!0),Object(a["createBlock"])(a["Fragment"],null,Object(a["renderList"])(e.showAlarms,(function(t){return Object(a["openBlock"])(),Object(a["createBlock"])("li",{key:t.Id,ref:"itemsRef",class:["active",t.isSelected?"checked":"item"],onClick:function(n){return e.checkAlarm(t)}},[Object(a["createVNode"])("div",{class:"top-bar",style:1==t.status?"filter:grayscale(0.5)":""},[Object(a["createVNode"])("span",{style:e.styleArr[t.alarmLevel],class:"alarm-level"},Object(a["toDisplayString"])(e.alarmLevel(t.alarmLevel)),5),Object(a["createVNode"])("p",null,[Object(a["createVNode"])("span",jr,Object(a["toDisplayString"])(t.CreateTime),1),vr,Object(a["createVNode"])("strong",{style:e.colorStyleArr[t.alarmLevel]},Object(a["toDisplayString"])(t.SourceType),5),gr,Object(a["createVNode"])("span",{style:e.colorStyleArr[t.alarmLevel]},Object(a["toDisplayString"])(t.alarmContent),5)])],4),Object(a["createVNode"])("div",yr,[Object(a["createVNode"])("span",null,Object(a["toDisplayString"])(t.diffTime),1),Object(a["withDirectives"])(Object(a["createVNode"])(l,{size:"mini",onClick:Object(a["withModifiers"])((function(n){return e.viewToAlarm(t)}),["stop"])},{default:ir((function(){return[wr]})),_:2},1032,["onClick"]),[[a["vShow"],t.map]]),Object(a["createVNode"])(l,{size:"mini",onClick:Object(a["withModifiers"])((function(n){return e.alarmDetail(t)}),["stop"])},{default:ir((function(){return[Vr]})),_:2},1032,["onClick"]),Object(a["withDirectives"])(Object(a["createVNode"])(l,{size:"mini",onClick:Object(a["withModifiers"])((function(n){return e.showHandlePannel(t)}),["stop"])},{default:ir((function(){return[Nr]})),_:2},1032,["onClick"]),[[a["vShow"],"未处理"==e.flag]])])],10,["onClick"])})),128)),Object(a["withDirectives"])(Object(a["createVNode"])("li",Cr,[kr],512),[[a["vShow"],!e.loading]])],512),Object(a["createVNode"])("div",xr,[Object(a["withDirectives"])(Object(a["createVNode"])("span",null,"已选择"+Object(a["toDisplayString"])(e.checkedNum),513),[[a["vShow"],e.checkedNum>0]]),Tr,Object(a["withDirectives"])(Object(a["createVNode"])(i,{label:"全选",modelValue:e.checkAll,"onUpdate:modelValue":t[7]||(t[7]=function(t){return e.checkAll=t}),onChange:e.handleCheckAllChange},null,8,["modelValue","onChange"]),[[a["vShow"],"未处理"==e.flag]]),Sr,Object(a["createVNode"])(u,{title:"确定一键处理所有选中报警 ？",onConfirm:e.handleAll,effect:"dark"},{reference:ir((function(){return[Object(a["withDirectives"])(Object(a["createVNode"])(l,{size:"mini",class:"single-line"},{default:ir((function(){return[Dr]})),_:1},512),[[a["vShow"],"已处理"!=e.flag]])]})),_:1},8,["onConfirm"]),Object(a["createVNode"])("span",null,"共"+Object(a["toDisplayString"])(e.total)+"条",1),Object(a["createVNode"])("div",null,[Object(a["withDirectives"])(Object(a["createVNode"])("span",Ir,[Br],512),[[a["vShow"],e.loading]])])])],32)})),Rr=(n("fb6a"),Object(a["defineComponent"])({name:"Handle",props:{alarmType:{required:!1,default:""},wsAlarmItem:{type:Object},handleIds:{required:!1,default:[]},cancelId:{type:String}},emits:["showAlarmDetail","showHandlePannel","getAlarmTotal","getAlarmUnHandle"],setup:function(e,t){var n=t.emit,r=Object(a["reactive"])({status:["","","","active"],showAlarms:[],alarms:[],styleArr:[{background:"#00A67B"},{background:"#FF7352"},{background:"#D9354E"}],colorStyleArr:[{color:"#52f3c8"},{color:"#FF7352"},{color:"#D9354E"}],flag:"未处理",size:10,page:1,loading:!1,oldY:void 0,disposeStatus:"未处理",typeid:"",alarmLevel:"",alarmTypeArr:[],alarmTypeName:"全部类型",total:0,static:{total:0,unHandle:0},checkAll:!1}),o=Object(a["ref"])(),c=Object(a["ref"])(),l=Object(a["toRefs"])(r);function i(){return u.apply(this,arguments)}function u(){return u=Object(ze["a"])(regeneratorRuntime.mark((function e(){var t,a,o;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t={act:"6Z6wTPGkfMVF9eLTOXA1611040899987",curpage:1,sys_showpagesize:10,ShowSceneNum:"",SourceType:"",alarmLevel:"",sTime:"",eTime:"",alarmProgress:""},e.next=3,et.getCommonApi(t);case 3:a=e.sent,o=a.data,r.static.total=o.count,n("getAlarmTotal",r.static.total);case 7:case"end":return e.stop()}}),e)}))),u.apply(this,arguments)}function s(){return d.apply(this,arguments)}function d(){return d=Object(ze["a"])(regeneratorRuntime.mark((function e(){var t,a,o;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t={act:"6Z6wTPGkfMVF9eLTOXA1611040899987",curpage:1,sys_showpagesize:10,ShowSceneNum:"",SourceType:"",alarmLevel:"",sTime:"",eTime:"",alarmProgress:"未处理"},e.next=3,et.getCommonApi(t);case 3:a=e.sent,o=a.data,r.static.unHandle=o.count,n("getAlarmUnHandle",r.static.unHandle);case 7:case"end":return e.stop()}}),e)}))),d.apply(this,arguments)}function f(){return m.apply(this,arguments)}function m(){return m=Object(ze["a"])(regeneratorRuntime.mark((function t(){var n,a,o,c;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n={act:"6Z6wTPGkfMVF9eLTOXA1611040899987",curpage:r.page,sys_showpagesize:r.size,ShowSceneNum:"",SourceType:e.alarmType,alarmLevel:r.alarmLevel,sTime:"",eTime:"",alarmProgress:r.disposeStatus},t.next=3,et.getCommonApi(n);case 3:a=t.sent,o=a.result,c=a.data,o.success&&(c.content.forEach((function(e){var t=it()(e.CreateTime).format(ot["s"]);e.CreateTime=t,e.diffTime=Object(_t["e"])(t);var n=it()(e.dealTime).format(ot["s"]);e.dealTime=n,e.isSelected=!1})),r.showAlarms=[].concat(Object(Ue["a"])(r.showAlarms),Object(Ue["a"])(c.content)),r.total=c.count),r.loading=!1;case 7:case"end":return t.stop()}}),t)}))),m.apply(this,arguments)}function b(e){var t=["普通","严重","危急"];return t[e]}function p(e){r.checkAll=!1,r.loading=!0,r.disposeStatus!=e?(r.page=1,r.flag=e,r.disposeStatus=e,r.showAlarms=[],f()):r.loading=!1}function O(e){var t=o.value&&o.value.offsetHeight,n=c.value.offsetHeight;e.target.scrollTop>t*r.page*r.size-n&&(r.page+=1,r.loading=!0,f())}function h(e){r.checkAll=!1,r.loading=!0,r.alarmLevel===e||""===r.alarmLevel&&3===e?r.loading=!1:(r.status=["","","",""],r.status[e]="active",r.alarmLevel=3===e?"":e,r.page=1,r.showAlarms=[],f())}function j(e){n("showAlarmDetail",e)}function v(){var e=r.showAlarms.filter((function(e){return e.isSelected}));0!==e.length?n("showHandlePannel",e):We.a.error("请选择要处理的报警信息！")}function g(e){n("showHandlePannel",e)}function y(e){r.showAlarms.forEach((function(t){t.Id!==e.Id||(t.isSelected=!e.isSelected)}))}function w(){r.showAlarms.forEach((function(e){e.isSelected=r.checkAll}))}Object(a["watch"])((function(){return e.wsAlarmItem}),(function(e){if(e){var t={isSelected:!1,status:!1,alarmLevel:e.AlarmLevel,CreateTime:it()(new Date).format(ot["s"]),diffTime:Object(_t["e"])(it()(new Date).format(ot["s"])),SourceType:e.AlarmSourceType,alarmContent:e.AlarmContent,SourceName:e.AlarmSourceName,alarmProgress:"未处理"};r.showAlarms=[t].concat(Object(Ue["a"])(r.showAlarms)),r.static.unHandle++,n("getAlarmUnHandle",r.static.unHandle),r.static.total++,n("getAlarmTotal",r.static.total)}})),Object(a["watch"])((function(){return e.handleIds}),(function(e){r.showAlarms.slice().forEach((function(t,a){e.forEach((function(e){t.IDS==e&&(r.static.unHandle--,n("getAlarmUnHandle",r.static.unHandle),r.showAlarms.length<r.size&&(r.page=1,r.showAlarms=[],f()),r.showAlarms.splice(a,1),r.total--)}))}))}));var V=Object(a["computed"])((function(){var e=r.showAlarms.filter((function(e){return e.isSelected}));return e.length}));return Object(a["onMounted"])((function(){f(),i(),s()})),Object(a["watch"])((function(){return e.alarmType}),(function(){Object(a["nextTick"])((function(){r.page=1,r.showAlarms=[],f()}))})),Object(Ye["a"])(Object(Ye["a"])({},l),{},{itemsRef:o,alarmBarRef:c,alarmLevel:b,handleStatus:p,lazyLoad:O,handleLevel:h,alarmDetail:j,handleAll:v,showHandlePannel:g,checkAlarm:y,handleCheckAllChange:w,checkedNum:V})}}));n("3f53");Rr.render=Lr,Rr.__scopeId="data-v-144529ed";var _r=Rr,Pr=Object(a["withScopeId"])("data-v-78a92eb4"),Ar=Pr((function(e,t,n,r,o,c){var l=Object(a["resolveComponent"])("el-scrollbar");return Object(a["withDirectives"])((Object(a["openBlock"])(),Object(a["createBlock"])("div",{ref:"listRef",class:["person-list-container",{hidden:e.hiddenRef}],style:e.styleAttrs?e.styleAttrs:{}},[Object(a["createVNode"])(l,{style:{"max-height":"400px"}},{default:Pr((function(){return[(Object(a["openBlock"])(!0),Object(a["createBlock"])(a["Fragment"],null,Object(a["renderList"])(e.personList,(function(t){return Object(a["openBlock"])(),Object(a["createBlock"])("div",{key:t.TagId,class:"person-item",onClick:function(n){return e.handleClick(t)}},Object(a["toDisplayString"])(t.BindObjName),9,["onClick"])})),128))]})),_:1})],6)),[[a["vShow"],e.personList.length]])})),Fr="clicked",Mr=Object(a["defineComponent"])({props:{personList:{type:Array,default:function(){return[]}},mousePosition:{type:Object,default:function(){return{}}}},emits:[Fr],setup:function(e,t){var n=t.emit,r=Object(a["shallowReactive"])({x:0,y:0}),o=Object(a["shallowRef"])(!0),c=Object(a["ref"])();function l(){Object(a["nextTick"])((function(){var t=st(c.value,e.mousePosition),n={};for(var a in t)n[a]=t[a]+"px";Object.assign(r,n),o.value=!1}))}function i(e){n(Fr,e)}return Object(a["watch"])((function(){return e.mousePosition}),(function(){l()})),Object(a["onMounted"])((function(){l()})),{styleAttrs:r,hiddenRef:o,listRef:c,handleClick:i}}});n("1084");Mr.render=Ar,Mr.__scopeId="data-v-78a92eb4";var Er=Mr,Hr=Object(a["withScopeId"])("data-v-3f9cbe41");Object(a["pushScopeId"])("data-v-3f9cbe41");var Ur={class:"map-content"},zr={class:"o-h"},Gr={class:"num"};Object(a["popScopeId"])();var Wr=Hr((function(e,t,n,r,o,c){return Object(a["openBlock"])(),Object(a["createBlock"])("div",Ur,[(Object(a["openBlock"])(!0),Object(a["createBlock"])(a["Fragment"],null,Object(a["renderList"])(e.mapList,(function(t){return Object(a["openBlock"])(),Object(a["createBlock"])("div",{key:t.snum,class:["map-item",{active:t.snum===e.mapId}],onClick:function(n){return e.changeMap(t.snum)}},[Object(a["createVNode"])("img",{src:e.imgUrl+t.surl,alt:t.sname},null,8,["src","alt"]),Object(a["createVNode"])("span",zr,Object(a["toDisplayString"])(t.sname),1),Object(a["createVNode"])("div",Gr,Object(a["toDisplayString"])(t.pnum||0),1)],10,["onClick"])})),128))])})),Yr="changeMap",qr=Object(a["defineComponent"])({name:"MapChoosen",props:{mapId:{type:String,required:!0},mapList:{type:Object,default:function(){return[]}}},emits:[Yr],setup:function(e,t){var n=t.emit;function a(t){t!==e.mapId&&n(Yr,t)}return{imgUrl:tt["d"],changeMap:a}}});n("431e");qr.render=Wr,qr.__scopeId="data-v-3f9cbe41";var Xr=qr,Jr={class:"fence-box"};function Zr(e,t,n,r,o,c){return Object(a["openBlock"])(),Object(a["createBlock"])("ul",Jr,[(Object(a["openBlock"])(!0),Object(a["createBlock"])(a["Fragment"],null,Object(a["renderList"])(e.list,(function(t,n){return Object(a["openBlock"])(),Object(a["createBlock"])("li",{key:n,class:{active:0===n},onClick:function(a){return e.handleClick(t,n)}},Object(a["toDisplayString"])(t.label),11,["onClick"])})),128))])}var $r={1:"revoke",2:"redraw",3:"cancel",4:"finish"},Kr=Object(a["defineComponent"])({name:"AlarmContent",emits:Object.keys($r).map((function(e){return $r[e]})),setup:function(e,t){var n=t.emit,a=[{label:"绘制"},{label:"撤销"},{label:"重新绘制"},{label:"取消"},{label:"完成"}];function r(e,t){n($r[t])}return{list:a,handleClick:r}}});Kr.render=Zr;var Qr=Object(a["withScopeId"])("data-v-419a4d42");Object(a["pushScopeId"])("data-v-419a4d42");var eo={key:0},to={class:"form-header"},no={class:"form-title"},ao={class:"form-body"};Object(a["popScopeId"])();var ro=Qr((function(e,t,n,r,o,c){var l=Object(a["resolveDirective"])("drag-dialog");return e.modelValue?Object(a["withDirectives"])((Object(a["openBlock"])(),Object(a["createBlock"])("div",eo,[Object(a["createVNode"])("div",{class:"custom-form",style:e.styles},[Object(a["createVNode"])("div",to,[Object(a["createVNode"])("div",no,Object(a["toDisplayString"])(e.title),1),Object(a["createVNode"])("i",{class:"closebtx el-icon-close",onClick:t[1]||(t[1]=function(){return e.handleClickHeaderClose&&e.handleClickHeaderClose.apply(e,arguments)})})]),Object(a["createVNode"])("div",ao,[Object(a["renderSlot"])(e.$slots,"default")])],4)],512)),[[l,"form-header,custom-form"]]):Object(a["createCommentVNode"])("",!0)})),oo="close",co=Object(a["defineComponent"])({name:"DragableContainer",directives:{"drag-dialog":ya},props:{title:{type:String,default:"可拖拽表单"},modelValue:{type:Boolean,default:!1},width:{type:Number}},emits:[oo],setup:function(e,t){var n=t.emit;function r(){n(oo)}var o=Object(a["computed"])((function(){return e.width?"历史视频"===e.title||"选择地图"===e.title?{width:e.width+"px",left:"23.5%"}:{width:e.width+"px","z-index":9001}:"历史视频"===e.title||"选择地图"===e.title?{left:"23.5%"}:{"z-index":9001}}));return{handleClickHeaderClose:r,styles:o}}});n("ef39");co.render=ro,co.__scopeId="data-v-419a4d42";var lo=co,io=Object(a["withScopeId"])("data-v-7e848c89");Object(a["pushScopeId"])("data-v-7e848c89");var uo={class:"playback-control"},so={class:"playback-container"};Object(a["popScopeId"])();var fo=io((function(e,t,n,r,o,c){var l=Object(a["resolveComponent"])("el-option"),i=Object(a["resolveComponent"])("el-select");return Object(a["openBlock"])(),Object(a["createBlock"])("div",uo,[Object(a["createVNode"])("div",so,[Object(a["createVNode"])("span",null,Object(a["toDisplayString"])(e.sTime),1),Object(a["createVNode"])("div",{class:"process-container",onClick:t[1]||(t[1]=function(){return e.handleClick&&e.handleClick.apply(e,arguments)}),ref:"processRef"},[Object(a["createVNode"])("div",{class:"process-bar",style:{width:"".concat(e.currentIndex/e.len*100,"%")}},null,4),Object(a["createVNode"])("div",{class:"process-time",style:{left:"".concat(e.currentIndex/e.len*100,"%")}},Object(a["toDisplayString"])(e.currentTime),5)],512),Object(a["createVNode"])("span",null,Object(a["toDisplayString"])(e.eTime),1),Object(a["createVNode"])("span",{class:"video-icon",onClick:t[2]||(t[2]=function(){return e.togglePlay&&e.togglePlay.apply(e,arguments)})},[Object(a["createVNode"])("i",{class:["el-icon-video-".concat(e.isPlay?"pause":"play")]},null,2)]),Object(a["createVNode"])(i,{modelValue:e.playRateRef,"onUpdate:modelValue":t[3]||(t[3]=function(t){return e.playRateRef=t}),onChange:e.changeRate,size:"mini",style:{width:"70px",margin:"0 0.5rem"}},{default:io((function(){return[(Object(a["openBlock"])(!0),Object(a["createBlock"])(a["Fragment"],null,Object(a["renderList"])(e.options,(function(e){return Object(a["openBlock"])(),Object(a["createBlock"])(l,{key:e.value,label:e.label,value:e.value},null,8,["label","value"])})),128))]})),_:1},8,["modelValue","onChange"]),Object(a["createVNode"])("span",{class:"end",onClick:t[4]||(t[4]=function(){return e.handleClose&&e.handleClose.apply(e,arguments)})},"结束回放")])])})),mo="changeRate",bo="togglePlay",po="close",Oo="changeProcess",ho=Object(a["defineComponent"])({props:{sTime:{type:String,default:"12"},eTime:{type:String,default:"13"},currentTime:{type:String,default:"14"},currentIndex:{type:Number,default:0},len:{type:Number,default:10},isPlay:{type:Boolean,default:!0}},emits:[mo,bo,po,Oo],setup:function(e,t){var n=t.emit,r=Object(a["shallowRef"])("1.0"),o=Object(a["ref"])([{label:"0.5",value:"0.5"},{label:"1.0",value:"1.0"},{label:"1.5",value:"1.5"},{label:"2.0",value:"2.0"},{label:"3.0",value:"3.0"},{label:"4.0",value:"4.0"},{label:"5.0",value:"5.0"}]),c=Object(a["ref"])();function l(e){n(mo,e)}function i(){n(bo,!e.isPlay)}function u(){n(po)}function s(t){var a=t.offsetX;a<0&&(a=0),0===a&&n(Oo,0);var r=c.value.offsetWidth;if(a>r&&(a=r),a===r&&n(Oo,e.len-1),a>0&&a<r){var o=a/r,l=Math.floor(e.len*o);n(Oo,l)}}return{processRef:c,playRateRef:r,options:o,changeRate:l,togglePlay:i,handleClose:u,handleClick:s}}});n("97d2");ho.render=fo,ho.__scopeId="data-v-7e848c89";var jo=ho;function vo(){var e=Object(r["c"])(),t=function(){return Object(ct["h"])(e)},n=jt(),o=Object(a["reactive"])({}),c=Object(a["ref"])([]),l=Object(a["shallowRef"])(Object(ct["c"])()||"");l.value||(We.a.info("请重新登录"),t());var i={minScale:0,maxScale:2},u=Object(a["reactive"])({scale:0,sx:0,sy:0}),s=Object(a["shallowReactive"])({isPlayBack:!1,isFollowing:!1,draggable:!1,isDrawFence:!1}),d=Object(a["computed"])((function(){return!s.isDrawFence&&!s.isFollowing&&!s.isPlayBack})),f=Object(a["computed"])((function(){var e;return(null===(e=o[l.value])||void 0===e?void 0:e.sname)||""})),m=Object(a["shallowRef"])(ot["t"]),b=Object(a["shallowRef"])(ot["i"].basestation),p=Object(a["shallowReactive"])({left:0,top:0}),O=Object(a["computed"])((function(){return ot["b"][b.value]})),h=Object(a["reactive"])({show:!1,formTitle:"",formData:null,x:0,y:0}),j=Object(a["shallowReactive"])({nav:!0,waterAlarmPanel:!1,contextmenu:!1,detailsForm:!1,monitorListFlag:!1,historyMonitorListFlag:!1,area:!0,layerPerson:!1,map:!1,controlPannel:!0}),v=Object(a["reactive"])({monitorInner:"monitor-inner-pannel",monitorHistoryInner:"monitor-inner-pannel",newMonitorList:[],newHistoryMonitorList:[],cameraCount:4,liveCameraCount:1,historyCameraCount:1,livePlayCount:1,historyPlayCount:1,monitorListFlag:!1,historyMonitorListFlag:!1}),g=Object(a["reactive"])({showList:!1,drawerTitle:ot["g"][ot["i"].basestation].title,activeName:ot["i"].basestation}),y=Object(a["reactive"])({visible:!1,dialogType:0,form:{name:"",chosenCamera:[]},allMapCamera:[],rules:{name:Object(_t["b"])("请输入电子围栏名称")}}),w=Object(a["reactive"])({tableVisible:!1,params:{curpage:1},loading:!1,allData:[],tableData:[],total:0}),V=Object(a["reactive"])({message:null,points:[],clonePoints:[]}),N=Object(a["reactive"])({visiable:!1,loading:!1,allData:[],tableData:[],total:0,curpage:1}),C=Object(a["ref"])(),k=Object(a["reactive"])({visiable:!1,dialogType:0,form:{name:"",memo:"",isLoop:!1,limitedTime:"",startTime:"",endTime:"",permitType:""}}),x=function(e,t,n){if(k.form.isLoop){var a=it()(new Date).format(ot["j"]),r=it()(t).format(ot["f"]),o=it()(k.form.startTime).format(ot["f"]),c=new Date("".concat(a," ").concat(o)),l=new Date("".concat(a," ").concat(r));if(c.getTime()>l.getTime())return n(new Error("结束时间不能小于开始时间"));n()}else n()},T={name:Object(_t["b"])("请输入规则名称"),limitedTime:Object(_t["d"])(_t["a"]),permitType:Object(_t["b"])("请选择规则类型"),startTime:Object(_t["b"])("请选择开始时间"),endTime:[Object(_t["b"])("请选择结束时间"),Object(_t["d"])(x)]},S=Object(a["computed"])((function(){return function(e){return!!k.form.startTime&&e.getTime()<k.form.startTime.getTime()}})),D=Object(a["reactive"])({visible:!1,dialogType:0,handleVisible:!1,handleAlarmId:"",handleAlarmIdArr:"",handleExampleVisible:!1,form:{CreateTime:"",IDS:"",Id:0,SceneName:"",ShowSceneNum:"",SourceDbOrDeviceIdS:"",SourceName:"",SourcePointNum:"",SourceType:"",alarmContent:"",alarmLevel:0,alarmProgress:"",dealAccount:"",dealMemo:"",dealTime:"",handleContent:"",handleType:""},iconStyle:{left:"0",top:"0"},alarmTotal:0,alarmUnHandle:0,rules:{handleType:Object(_t["b"])("请选择处理类型"),handleContent:Object(_t["b"])("请填写处理结果")}}),I=Object(a["reactive"])({tableVisible:!1,params:{curpage:1,size:10},loading:!1,allData:[],tableData:[],total:0,ShowSceneNum:"",SourceType:"",alarmLevel:"",sTime:"",eTime:"",timeRange:"",alarmProgress:"",handleIds:[]}),B={cameraGroup:new at.a.Group({name:"cameraGroup"}),basestationGroup:new at.a.Group({name:"basestationGroup"}),personGroup:new at.a.Group({name:"personGroup"}),fenceGroup:new at.a.Group({name:"fenceGroup"}),locateBubbleGroup:new at.a.Group({name:"locateBubbleGroup"}),alarmGroup:new at.a.Group({name:"alarmGroup"})},L=Object(a["reactive"])({attrs:{x:0,y:0}}),R={all:[],currentMap:[]},_={all:[],currentMap:[]},P={all:[],currentMap:[]},A={all:[],currentMap:[]},F=Object(a["reactive"])({all:[],currentMap:[]}),M={},E={},H={},U=Object(a["ref"])([]),z=Object(a["shallowReactive"])({left:0,top:0}),G={},W={},Y={},q={label:"dname",key:"dids"},X=Object(a["ref"])([]),J=Object(a["reactive"])([{label:"基站",show:!0,code:"basestation"},{label:"摄像头",show:!0,code:"camera"},{label:"地图",show:j.map,code:"map"},{label:"导航栏",show:j.nav,code:"nav"}]),Z={getAlarm:110,cancelAlarm:111},$=Object(a["ref"])([]),K=Object(a["reactive"])({type:""});return{router:e,wsUrl:n,mapObj:o,mapListRef:c,mapIdRef:l,scaleBoundary:i,state:u,status:s,showMenu:d,mapNameRef:f,warningWidth:m,contextmenuTypeRef:b,contxtmenuPosition:p,contextmenuList:O,detailsForm:h,visibleObj:j,monitorListInfo:v,drawerInfo:g,fenceInfo:y,fenceListInfo:w,drawFenceInfo:V,ruleListInfo:N,ruleFormRef:C,ruleItemDetail:k,ruleItemDetailRule:T,ruleDisabledDate:S,alarmInfo:D,alarmListInfo:I,allGroup:B,activeTarget:L,basestation:R,bubble:_,camera:P,area:A,person:F,cacheAlarmObj:M,cacheBasestationObj:E,cacheCameraObj:H,layerPerson:U,layerPosition:z,cacheBubbleObj:G,cacheAreaObj:W,cachePersonObj:Y,transferProps:q,allLayer:X,controlButtonList:J,wsAlarmType:Z,alarmType:$,alarmForm:K}}var go=Object(a["defineComponent"])({name:"Content",components:{mainNav:Tt,personList:Ft,cameraList:Yt,basestationList:nn,fenceBox:cn,contextmenuContent:jn,formContent:ra,monitorList:Na,historyMonitor:Ua,labelList:lr,handle:_r,layerPersonList:Er,mapChoosen:Xr,dragableContainer:lo,playbackControl:jo},setup:function(){var e;(function(e){e[e["HTagInit"]=1e3]="HTagInit",e[e["HTagOnline"]=1001]="HTagOnline",e[e["HTagOffline"]=1002]="HTagOffline",e[e["HTagMove"]=1003]="HTagMove",e[e["HLayerGroupStatistics"]=1004]="HLayerGroupStatistics",e[e["HTagLogOff"]=1005]="HTagLogOff",e[e["HWaterAlarm"]=1006]="HWaterAlarm",e[e["HSceneStatistics"]=1007]="HSceneStatistics"})(e||(e={}));var t=vo(),n=t.router,r=t.wsUrl,o=t.mapObj,c=t.mapListRef,l=t.mapIdRef,i=t.scaleBoundary,u=t.state,s=t.status,d=t.showMenu,f=t.mapNameRef,m=t.warningWidth,b=t.contextmenuTypeRef,p=t.contxtmenuPosition,O=t.contextmenuList,h=t.detailsForm,j=t.visibleObj,v=t.monitorListInfo,g=t.drawerInfo,y=t.fenceInfo,w=t.fenceListInfo,V=t.drawFenceInfo,N=t.ruleListInfo,C=t.ruleFormRef,k=t.ruleItemDetail,x=t.ruleItemDetailRule,T=t.ruleDisabledDate,S=t.alarmInfo,D=t.alarmListInfo,I=t.allGroup,B=t.activeTarget,L=t.basestation,R=t.bubble,_=t.camera,P=t.area,A=t.person,F=t.cacheAlarmObj,M=t.cacheBasestationObj,E=t.cacheCameraObj,H=t.layerPerson,U=t.layerPosition,z=t.cacheBubbleObj,G=t.cacheAreaObj,W=t.cachePersonObj,Y=t.transferProps,q=t.allLayer,X=t.controlButtonList,J=t.wsAlarmType,Z=t.alarmType,$=t.alarmForm,K=null,Q=null,ee=Object(a["reactive"])({show:!1,form:{date:"",time:[]},rules:{date:Object(_t["b"])("请选择日期"),time:[Object(_t["b"])("请选择时间"),Object(_t["d"])(wt)]},disabledDate:function(e){return e.getTime()>Date.now()},message:null,tween:null,steps:[],lineNode:null}),te=Object(a["reactive"])({sTime:"",eTime:"",currentTime:"",currentIndex:0,len:0,isPlay:!0}),ne=[];function ae(){k.form.endTime&&(k.form.endTime="")}var re={x:0,y:0},oe=null;function ce(){oe.batchDraw()}var le=new at.a.Layer,ie=new at.a.Layer,ue=new at.a.Layer;Object(a["watch"])(v.newMonitorList,(function(e){var t=0;e.forEach((function(e){var n=e.active;n&&t++})),0===t&&(j.monitorListFlag=!1),v.livePlayCount=t,v.monitorInner=1===t?"monitor-inner-one":"monitor-inner-pannel",e.length>v.cameraCount&&(e.length>1e3*v.cameraCount&&e.splice(0,e.length-v.cameraCount),e.forEach((function(t,n){n<e.length-v.cameraCount&&(t.active=!1)})))})),Object(a["watch"])(v.newHistoryMonitorList,(function(e){var t=0;e.forEach((function(e){var n=e.active;n&&t++})),0===t&&(j.historyMonitorListFlag=!1),v.historyPlayCount=t,v.monitorHistoryInner=1===t?"monitor-inner-one":"monitor-inner-pannel",e.length>v.cameraCount&&(e.length>1e3*v.cameraCount&&e.splice(0,e.length-v.cameraCount),e.forEach((function(t,n){n<e.length-v.cameraCount&&(t.active=!1)})))}));var se=null;function de(){var e,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];null===(e=se)||void 0===e||e.destroy();var n=V.points;if(0!==n.length){var a=new at.a.Shape(Object(Ye["a"])(Object(Ye["a"])({},ot["k"]),{},{sceneFunc:function(e,a){e.beginPath(),e.moveTo(n[0].x,n[0].y);for(var r=1;r<n.length;r++){var o=n[r],c=o.x,l=o.y;e.lineTo(c,l)}e.stroke(),t&&e.closePath(),e.fillStrokeShape(a)}}));se=a,I.fenceGroup.add(a),ce()}else ce()}function fe(){V.points=[],de()}function me(){var e=V.points,t=e.length;0===t?We.a.info("还一个点都没有添加噢！"):1===t||2===t?fe():(e.splice(t-2,2),de())}function be(){var e;fe(),s.isDrawFence=!1,null===(e=V.message)||void 0===e||e.close(),V.points=[],V.clonePoints=[],y.visible=!0}function pe(){var e=V.points,t=e.length;t<4?We.a.info("最少三个点才能组成一个面"):(V.message.close(),s.isDrawFence=!1,e.pop(),V.clonePoints=Ze()(e),de(!0),setTimeout((function(){y.visible=!0,fe()}),500))}function Oe(){var e,t,n,a,r=[ot["i"].labelList,ot["i"].person];r.includes(b.value)?null===(e=Q)||void 0===e||null===(t=e.children[0])||void 0===t||t.shadowColor(ot["d"].TRANSPARENT):null===(n=Q)||void 0===n||null===(a=n.shadowColor)||void 0===a||a.call(n,ot["d"].TRANSPARENT);ce()}function he(e){var t=e.clientX,n=e.clientY;Object.assign(p,{left:t,top:n-ot["h"]}),j.contextmenu=!0}function je(){j.contextmenu&&(j.contextmenu=!1,Oe(),Q=null)}function ve(){oe.on("wheel",(function(e){var t=e.evt,n=-40*t.deltaY,a=(t.clientX-u.sx)/u.scale,r=(t.clientY-u.sy)/u.scale;n>0?(u.scale+=.05,u.scale=Number((u.scale+.05).toFixed(2)),u.scale>=i.maxScale&&(u.scale=i.maxScale)):(u.scale-=.05,u.scale=Number((u.scale-.05).toFixed(2)),u.scale<=i.minScale&&(u.scale=i.minScale)),u.sx=t.clientX-u.scale*a,u.sy=t.clientY-u.scale*r,oe.setAttrs({x:u.sx,y:u.sy,scaleX:u.scale,scaleY:u.scale}),s.isDrawFence&&de(),ce()}))}function ge(){oe.on("mousedown",(function(e){var t=e.evt;s.isDrawFence?K=window.setTimeout((function(){var e=dt({x:t.clientX,y:t.clientY},u);V.points.push(e),de()}),300):(s.draggable=!0,Object.assign(re,{x:t.clientX,y:t.clientY}),oe.container().style.cursor="move",je())}))}function ye(){oe.on("mouseup mouseout",(function(){s.draggable&&(s.draggable=!1,oe.container().style.cursor="default")}))}function we(){oe.on("mousemove",Xe()((function(e){var t=function(){var t=e.evt;if(s.isDrawFence){var n=V.points;if(n.length>=1){n.length>1&&n.pop();var a=dt({x:t.clientX,y:t.clientY},u);n.push(a),de()}}else if(s.draggable){u.sx+=t.clientX-re.x,u.sy+=t.clientY-re.y;var r=ut({x:.25*oe.width(),y:0},{x:0,y:0},u.scale).x,o=ut({x:.75*oe.width(),y:0},{x:ot["m"].width,y:0},u.scale).x,c=ut({x:0,y:ot["h"]},{x:0,y:0},u.scale).y,l=ut({x:0,y:oe.height()},{x:0,y:ot["m"].height},u.scale).y,d=ut({x:0,y:oe.height()/2},{x:0,y:ot["m"].height/2},u.scale).y;r<=o||u.sx>r?u.sx=r:u.sx<o&&(u.sx=o),c<=l||u.sy>c?u.sy=c:u.sy<l&&(u.sy=l),u.scale===i.minScale&&(u.sy=d),Object.assign(re,{x:t.clientX,y:t.clientY}),oe.setAttrs({x:u.sx,y:u.sy}),ce()}};t()}),10))}function Ve(){oe.on("contextmenu",(function(e){var t=e.evt;t.preventDefault(),K&&clearTimeout(K),s.isDrawFence&&pe()}))}function Ne(){ve(),ge(),ye(),we(),Ve()}function Ce(){oe=new at.a.Stage({width:window.innerWidth,height:window.innerHeight-ot["h"],container:"container",scale:{x:u.scale,y:u.scale}})}function ke(){Oe(),j.detailsForm=!1}var xe=Object(a["reactive"])([]);function Te(){return Se.apply(this,arguments)}function Se(){return Se=Object(ze["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:oe.add(le).add(ie).add(ue),Object.keys(I).forEach((function(e){le.add(I[e])})),ie.moveToBottom(),I.fenceGroup.moveToBottom(),ue.moveToTop();case 5:case"end":return e.stop()}}),e)}))),Se.apply(this,arguments)}function De(e){return Ie.apply(this,arguments)}function Ie(){return Ie=Object(ze["a"])(regeneratorRuntime.mark((function e(t){var n,a,r,o,c,l;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:n=t.x,a=t.y,r=t.id,o=new at.a.Circle({x:n,y:a,radius:70,fill:"rgba(255,0,0,.7)"}),F[r]=o,c=5e3,I.alarmGroup.add(o),l=new at.a.Animation((function(e){var t=Math.sin(2*e.time*Math.PI/c)+.001;o.scale({x:t,y:t})}),le),l.start(),setTimeout((function(){var e;null===(e=l)||void 0===e||e.stop(),l=null,F[r].destroy(),delete F[r],ce()}),3e3);case 8:case"end":return e.stop()}}),e)}))),Ie.apply(this,arguments)}function Be(e){return Le.apply(this,arguments)}function Le(){return Le=Object(ze["a"])(regeneratorRuntime.mark((function e(t){var n,a,r,o,c,l,i=arguments;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=i.length>1&&void 0!==i[1]?i[1]:X[0].show,a=t.x,r=t.y,o=t.lids,e.next=4,pt(t);case 4:c=e.sent,l=function(){var e=new at.a.Image({x:a,y:r,width:c.width,height:c.height,image:c,shadowColor:ot["d"].TRANSPARENT,shadowBlur:20,name:o});e.on("contextmenu",(function(t){if(s.isDrawFence)return!1;ke(),B.attrs=Ze()(t.target.attrs),Q=e,b.value=ot["i"].basestation,he(t.evt),e.shadowColor(ot["d"].BLUE),ce()})),I.basestationGroup.add(e),M[o]=e,e.visible(n),ce()},ht(c,l);case 7:case"end":return e.stop()}}),e)}))),Le.apply(this,arguments)}function Re(e){return _e.apply(this,arguments)}function _e(){return _e=Object(ze["a"])(regeneratorRuntime.mark((function e(t){var n,a,r,o,c,l,i,u,d=arguments;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=d.length>1&&void 0!==d[1]?d[1]:X[1].show,a=t.x,r=t.y,o=t.lids,c=t.deviceitem,e.next=4,pt(t);case 4:l=e.sent,i=JSON.parse(c),u=new at.a.Image({x:a,y:r,width:l.width,height:l.height,image:l,shadowColor:ot["d"].TRANSPARENT,shadowBlur:20,name:i[0].DeviceIdS}),u.on("contextmenu",(function(e){if(s.isDrawFence)return!1;ke(),B.attrs=Ze()(e.target.attrs),b.value=ot["i"].camera,Q=u,he(e.evt),j.contextmenu=!0,u.shadowColor(ot["d"].BLUE),ce()})),I.cameraGroup.add(u),E[o]=u,u.visible(n),ce();case 12:case"end":return e.stop()}}),e)}))),_e.apply(this,arguments)}function Pe(e){return Ae.apply(this,arguments)}function Ae(){return Ae=Object(ze["a"])(regeneratorRuntime.mark((function e(t){var n,a,r,o,c,l,i,u,s,d,f,m,b,p,O,h,v,g,y,w,V,N,C,k,x,T,S;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=24,a=16,r=2*n,o=2*a,c=t.x,l=t.y,i=t.sname,u=t.lids,s=t.defdata,d=s.W,f=s.H,m=s.layinfo,b=s.Color,p=s.IsHaveCount,O=s.CountItem,h=d-r,v=f-o,g=new at.a.Group({x:c,y:l}),y={pathSrc:m,width:d,height:f,color:b},e.next=12,mt(y,"标注图层"===t.ltype);case 12:w=e.sent,V=new at.a.Image({image:w,name:u}),p?(C=new at.a.Text({x:d/2-n,y:f/8,text:i,fontSize:14,fill:"#fff",listening:!1}),C.offsetX(C.width()/2),k=new at.a.Line({points:[.1*h,v/2,.9*h,v/2],stroke:"#fff",strokeWidth:.5,listening:!1}),x=new at.a.Group({x:h/2,y:.7*(v-10),listening:!1}),z[u]={text:[],tagList:[]},T=O.length,S=10,O.forEach((function(e,t){var n=new at.a.Group({x:S*t,listening:!1}),a=(v-10)/2*.5,r=new at.a.Rect({width:h/3/T,height:a,fill:"rgba(255,255,255,.6)",cornerRadius:a,listening:!1});r.offsetX(r.width()/2);var o=new at.a.Text({x:0,y:a/2,fill:b,text:"?",name:e,listening:!1});o.offsetX(o.width()/2),o.offsetY(o.height()/2),n.add(r).add(o),z[u].text.push(o),x.add(n)})),g.add(V).add(C).add(k).add(x),g.on("dblclick",(function(e){var t=e.evt,n=t.clientX,a=t.clientY;Object.assign(U,{left:n,top:a-ot["h"]}),H.value=z[e.target.attrs.name].tagList[0],j.layerPerson=!0}))):(N=new at.a.Text({x:d/2-n,y:(v-10)/2,text:i,fontSize:14,fill:"#fff",listening:!1}),N.offsetX(N.width()/2),N.offsetY(N.height()/2),g.add(V).add(N)),I.locateBubbleGroup.add(g);case 16:case"end":return e.stop()}}),e)}))),Ae.apply(this,arguments)}function Fe(e){var t=e.areaids,n=e.points,a=e.areaname,r=e.show,o=JSON.parse(n),c=new at.a.Group({visible:r}),l=o[0],i=new at.a.Text({x:l.X+10,y:l.Y+10,text:a,fill:"#fff",fontSize:24}),u=new at.a.Shape(Object(Ye["a"])(Object(Ye["a"])({},ot["k"]),{},{sceneFunc:function(e,t){e.beginPath(),e.moveTo(o[0].X,o[0].Y);for(var n=1;n<o.length;n++){var a=o[n],r=a.X,c=a.Y;e.lineTo(r,c)}e.stroke(),e.closePath(),e.fillStrokeShape(t)}}));c.add(u).add(i),G[t]&&(G[t].destroy(),delete G[t]),I.fenceGroup.add(c),G[t]=c,ce()}Object(a["watch"])((function(){return j.detailsForm}),(function(e){!1===e&&(h.formData={},h.x=0,h.y=0)}));var Me={width:0,height:0},Ee=null,Ge=null;function qe(e){return Je.apply(this,arguments)}function Je(){return Je=Object(ze["a"])(regeneratorRuntime.mark((function e(t){var n,a,r,o,c,l,i=arguments;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(n=i.length>1&&void 0!==i[1]?i[1]:0,a=t.x,r=t.y,o=t.name,c=t.TagId,!W[c]||0!==n){e.next=4;break}return e.abrupt("return");case 4:l=new window.Image,l.src="/images/staff_unchecked".concat(n+1,".png"),l.onload=function(){var e=new at.a.Group({x:a+l.width/2,y:r+l.height});0===Me.width&&(Me.width=l.width,Me.height=l.height);var t=Vt(e,l,c,o);0===n?W[c]=e:Ee=e,I.personGroup&&0===n?I.personGroup.add(e):ue&&n&&(ue.add(e),e.moveToTop()),0===n?e.on("contextmenu",(function(n){if(s.isPlayBack)We.a.info("正在轨迹回放，执行其他操作请先关闭轨迹回放");else if(s.isFollowing)We.a.info("正在实时跟踪，执行其他操作请先关闭轨迹实时跟踪");else{if(s.isDrawFence)return!1;B.attrs=Ze()(n.target.attrs),ke(),Q=e,b.value=ot["i"].labelList,he(n.evt),j.contextmenu=!0,t.shadowColor(ot["d"].BLUE),ce()}})):(s.isPlayBack=!0,ee.message=We()({message:"轨迹回放中...",type:"warning",duration:0}),ta(e,ee.steps)),ce()};case 7:case"end":return e.stop()}}),e)}))),Je.apply(this,arguments)}var Ke=Object(a["ref"])([]);function nt(){return xe.filter((function(e){return"Camera_IP"===e.dtypecode&&e.snum===l.value}))}function rt(e){return lt.apply(this,arguments)}function lt(){return lt=Object(ze["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:_.currentMap=_.all.filter((function(e){return e.snum===t})),_.currentMap.forEach((function(e){Re(e)}));case 2:case"end":return e.stop()}}),e)}))),lt.apply(this,arguments)}function st(e){R.currentMap=R.all.filter((function(t){return t.snum===e})),R.currentMap.forEach((function(e){Pe(e)}))}function Ot(e){L.currentMap=L.all.filter((function(t){return t.snum===e})),L.currentMap.forEach((function(e){Be(e)}))}var jt=function(e){A.currentMap=A.all.filter((function(t){return t.LocationSceneId===e})),A.currentMap.forEach((function(e){qe(e)}))};function Ct(){return kt.apply(this,arguments)}function kt(){return kt=Object(ze["a"])(regeneratorRuntime.mark((function e(){var t,n,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return Sa("layer"),t={act:"kTM5tsxPxjZPbajPzDQ1586422437860",ProductId:"99999999-9999-9999-9999-999999999999"},e.next=4,$e["a"].getAllLayer(t);case 4:n=e.sent,a=n.data,q.value=a,R.all=a.filter((function(e){return"标注图层"===e.ltype})),st(l.value),_.all=a.filter((function(e){return"摄像头图层"===e.ltype})),rt(l.value),L.all=a.filter((function(e){return"基站图层"===e.ltype})),Ot(l.value),ce();case 14:case"end":return e.stop()}}),e)}))),kt.apply(this,arguments)}function xt(){return Tt.apply(this,arguments)}function Tt(){return Tt=Object(ze["a"])(regeneratorRuntime.mark((function e(){var t,n,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t={act:"cRfPNhii9hVXQ6D8C151586425533740"},e.next=3,$e["a"].getAllBuild(t);case 3:n=e.sent,a=n.data,Object(ct["i"])(a);case 6:case"end":return e.stop()}}),e)}))),Tt.apply(this,arguments)}function St(e){P.currentMap=P.all.filter((function(t){return t.snum===e})),w.allData=P.currentMap,w.tableData=Object(_t["f"])(w.allData,w.params.curpage),w.total=w.allData.length,P.currentMap.forEach((function(e){Fe(e)}))}function Dt(){return It.apply(this,arguments)}function It(){return It=Object(ze["a"])(regeneratorRuntime.mark((function e(){var t,n,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return Sa("area"),t={act:"KP9NBmF37ejHCChTUhA1586415869244"},e.next=4,$e["a"].getAllHArea(t);case 4:n=e.sent,a=n.data,P.all=a.map((function(e){return Object(Ye["a"])(Object(Ye["a"])({},e),{},{show:j.area})})),St(l.value);case 8:case"end":return e.stop()}}),e)}))),It.apply(this,arguments)}function Bt(){return Lt.apply(this,arguments)}function Lt(){return Lt=Object(ze["a"])(regeneratorRuntime.mark((function e(){var t,n,a,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t={act:"6Z6wTPGkfMVF9eLTOXA1611040899987",curpage:D.params.curpage,sys_showpagesize:D.params.size,ShowSceneNum:D.ShowSceneNum,SourceType:D.SourceType,alarmLevel:D.alarmLevel,sTime:D.sTime,eTime:D.eTime,alarmProgress:D.alarmProgress},e.next=3,et.getCommonApi(t);case 3:n=e.sent,a=n.result,r=n.data,a.success&&(r.content.forEach((function(e){var t=it()(e.CreateTime).format(ot["s"]);e.CreateTime=t;var n=it()(e.dealTime).format(ot["s"]);e.dealTime=n})),D.tableData=r.content,D.total=r.count);case 6:case"end":return e.stop()}}),e)}))),Lt.apply(this,arguments)}function Rt(){D.loading=!0,Bt(),D.loading=!1}function Pt(){if(D.params.curpage=1,D.loading=!0,D.sTime=D.timeRange?D.timeRange[0]:"",D.eTime=D.timeRange?D.timeRange[1]:"",D.timeRange){var e=D.timeRange[0],t=D.timeRange[1];D.sTime=it()(e).format(ot["s"]),D.eTime=it()(t).format(ot["s"])}else D.sTime="",D.eTime="";Bt(),D.loading=!1}function At(e){if(console,e.length>0){var t="";S.handleAlarmId="",e.forEach((function(e){t+=e.IDS+","})),t.length>0&&(t=t.substr(0,t.length-1)),S.handleAlarmIdArr=t}else S.handleAlarmId=e.IDS,S.handleAlarmIdArr="";S.handleVisible=!0,S.form.handleContent="",S.handleExampleVisible=!1}function Ft(e){S.form.handleContent=e.content,S.handleExampleVisible=!1}function Mt(){return Et.apply(this,arguments)}function Et(){return Et=Object(ze["a"])(regeneratorRuntime.mark((function e(){var t,n,a,r,o,c,l,i,u,s,d,f;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t=S.handleAlarmId,n=S.handleAlarmIdArr,a=S.form.handleType,r=S.form.handleContent,!t){e.next=13;break}return o={sIDS:t,sDealAccount:Object(ct["f"])(),sDealResult:r,sDealType:a,sDealIp:"127.0.0.1"},e.next=8,Qe.dealAlarmItem(o);case 8:c=e.sent,l=c.success,i=c.msg,l?(S.handleVisible=!1,We.a.success(i),D.handleIds=[t],D.tableData.forEach((function(e){e.IDS===t&&(e.alarmProgress="已处理")})),Bt()):We.a.error(i),e.next=19;break;case 13:return u={sIDSChar:n,sDealAccount:Object(ct["f"])(),sDealResult:r,sDealType:a,sDealIp:"127.0.0.1"},e.next=16,Qe.dealAlarms(u);case 16:s=e.sent,d=s.success,f=s.msg,d?(S.handleVisible=!1,We.a.success(f),D.handleIds=n.split(","),D.tableData.forEach((function(e){D.handleIds.forEach((function(t){e.IDS===t&&(e.alarmProgress="已处理")}))})),Bt()):We.a.error(f);case 19:case"end":return e.stop()}}),e)}))),Et.apply(this,arguments)}function Ht(e){S.alarmTotal=e}function Ut(e){S.alarmUnHandle=e}function zt(e){S.visible=!0,S.form=e;var t=ft(S.form.SourcePointNum),n=t.x,a=t.y,r=(n-100)/6e3,o=(a-200)/3e3;S.iconStyle.left="".concat(100*r,"%"),S.iconStyle.top="".concat(100*o,"%")}var Gt=null;function Wt(){return Yt.apply(this,arguments)}function Yt(){return Yt=Object(ze["a"])(regeneratorRuntime.mark((function e(){var t,n,a=arguments;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:t=a.length>0&&void 0!==a[0]?a[0]:tt["d"]+o[l.value].surl,n=new window.Image,n.src=t,n.onload=Object(ze["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t=new at.a.Image({image:n,width:n.width,height:n.height,listening:!1}),u.scale=Number((window.innerWidth/t.width()).toFixed(2)),i.minScale=u.scale,e.next=5,ie.add(t);case 5:return oe.setAttrs({scale:{x:u.scale,y:u.scale}}),Gt=t,t.moveToBottom(),e.next=10,ce();case 10:Ne(),sa(),Ct(),xt(),Dt(),Bt(),va(),Va();case 18:case"end":return e.stop()}}),e)})));case 4:case"end":return e.stop()}}),e)}))),Yt.apply(this,arguments)}function qt(e){var t=new window.Image;t.src=tt["d"]+o[e].surl,t.onload=function(){Gt.image(t),ce()}}function Xt(e){return Jt.apply(this,arguments)}function Jt(){return Jt=Object(ze["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Wt(t);case 2:case"end":return e.stop()}}),e)}))),Jt.apply(this,arguments)}function Zt(){return $t.apply(this,arguments)}function $t(){return $t=Object(ze["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:Ce(),Te(),Xt();case 3:case"end":return e.stop()}}),e)}))),$t.apply(this,arguments)}function Kt(){return Qt.apply(this,arguments)}function Qt(){return Qt=Object(ze["a"])(regeneratorRuntime.mark((function e(){var t,n,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t={act:"bPxM1k2cWCeMeEIbWZV1586415800673"},e.next=3,$e["a"].getAllScene(t);case 3:n=e.sent,a=n.data,c.value=a||[],c.value.forEach((function(e){o[e.snum]=e})),Object(ct["k"])(o),Zt();case 9:case"end":return e.stop()}}),e)}))),Qt.apply(this,arguments)}var en=Object(a["ref"])();function tn(e){for(var t in je(),j.layerPerson=!1,ot["g"])if(ot["g"][t].code===e){g.showList=!0,g.drawerTitle=ot["g"][t].title,g.activeName=t;break}ot["e"].code===e&&(w.tableVisible=!0),ot["a"].code===e&&(D.tableVisible=!0),ot["c"].code===e&&We.a.info("暂未开放")}function nn(){en.value.resetIndex()}function an(e){g.showList=!0,g.drawerTitle=ot["g"][e.props.name].title}var rn=Object(a["ref"])();function on(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;y.visible=!0,y.dialogType=e,V.clonePoints=[],Object(a["nextTick"])((function(){rn.value.resetFields(),y.form.chosenCamera=[]}))}function cn(){on(0)}var ln="";function un(e){return sn.apply(this,arguments)}function sn(){return sn=Object(ze["a"])(regeneratorRuntime.mark((function e(t){var n,a,r,o,c,i,u;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return on(1),n=t.areaids,a=t.points,r=t.areaname,ln=n,o={act:"WHIHF7U1FtTjZORrI4h1611195385202",LayerIdS:n,SceneNum:l.value},e.next=6,$e["a"].getOnehAreaSetDeivce(o);case 6:c=e.sent,i=c.data,u=JSON.parse(i.deviceitem),u.forEach((function(e){y.form.chosenCamera.push(e.DeviceIdS)})),y.form.name=r,V.clonePoints=JSON.parse(a);case 12:case"end":return e.stop()}}),e)}))),sn.apply(this,arguments)}function dn(){y.visible=!1,w.tableVisible=!1,V.message=We()({showClose:!0,message:"鼠标单击左键新增点，右键可完成绘制",type:"warning",duration:0}),V.points=[],s.isDrawFence=!0}function fn(){rn.value.validate(function(){var e=Object(ze["a"])(regeneratorRuntime.mark((function e(t){var n,a,r,o;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!t){e.next=8;break}return n=y.form.chosenCamera.map((function(e){var t=y.allMapCamera.findIndex((function(t){return t.dids===e}));return{DeviceIdS:e,DeviceType:y.allMapCamera[t].dname}})),a={act:"i9YWieOBzym06JamZtI1586422307190",LayerIdS:0===y.dialogType?bt():ln,SceneNum:l.value,CheckSourceID:JSON.stringify(V.clonePoints.map((function(e){return{X:e.x,Y:e.y}}))),DevicePointRelation:0===y.form.chosenCamera.length?"":JSON.stringify(n),CheckSourceUnitName:y.form.name},e.next=5,$e["a"].saveHArea(a);case 5:r=e.sent,o=r.result,"操作成功"===o.msg&&(We.a.success(o.msg),y.visible=!1,Dt());case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}function mn(e){return bn.apply(this,arguments)}function bn(){return bn=Object(ze["a"])(regeneratorRuntime.mark((function e(t){var n,a,r,o;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=t.areaids,a={act:"mYfPMH51aE2FMOzxiFd1586422236651",LayerIdS:n,SceneNum:l.value},e.next=4,$e["a"].delHArea(a);case 4:r=e.sent,o=r.result,o.msg&&(We.a.success(o.msg),Dt());case 7:case"end":return e.stop()}}),e)}))),bn.apply(this,arguments)}function pn(e){return On.apply(this,arguments)}function On(){return On=Object(ze["a"])(regeneratorRuntime.mark((function e(t){var n,a,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return N.loading=!0,n={act:"N71kyUJz3OiP2MOZ6Ea1586415957754",LayerIdS:t,SceneNum:l.value},e.next=4,$e["a"].getRule(n);case 4:a=e.sent,r=a.data,N.allData=r.map((function(e){return Object(Ye["a"])(Object(Ye["a"])({},e),{},{labelType:Object(ot["o"])(e.ptype),loop:e.isloop?"是":"否"})})),N.tableData=Object(_t["f"])(N.allData,N.curpage),N.total=r.length||0,N.loading=!1;case 10:case"end":return e.stop()}}),e)}))),On.apply(this,arguments)}function hn(e){N.loading=!0,N.tableData=Object(_t["f"])(N.allData,e),N.loading=!1}var jn="",vn="",gn="";function yn(e){return wn.apply(this,arguments)}function wn(){return wn=Object(ze["a"])(regeneratorRuntime.mark((function e(t){var n,a,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:N.visiable=!0,n=t.areaids,a=t.points,r=t.areaname,jn=a,vn=n,gn=r,pn(n);case 6:case"end":return e.stop()}}),e)}))),wn.apply(this,arguments)}function Vn(e){w.loading=!0,w.tableData=Object(_t["f"])(w.allData,e),w.loading=!1}function Nn(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;k.visiable=!0,k.dialogType=e,k.form.name=gn,k.form.memo="",k.form.isLoop=!1,k.form.limitedTime="",k.form.startTime="",k.form.endTime="",k.form.permitType="",Object(a["nextTick"])((function(){C.value.clearValidate()}))}function Cn(){Nn(0),Object(a["nextTick"])((function(){}))}var kn=0;function xn(e){return Tn.apply(this,arguments)}function Tn(){return Tn=Object(ze["a"])(regeneratorRuntime.mark((function e(t){var n,a,r,o,c,l,i,u,s,d;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return Nn(1),n=t.stime,a=t.ptype,r=t.memo,o=t.id,c=t.etime,l=t.isloop,i=t.limtime,kn=o,e.next=5,gt(l,n,c);case 5:u=e.sent,s=u.startTime,d=u.endTime,k.form.memo=r,k.form.isLoop=l,k.form.limitedTime=String(i),k.form.startTime=s,k.form.endTime=d,k.form.permitType=String(a);case 14:case"end":return e.stop()}}),e)}))),Tn.apply(this,arguments)}function Sn(){C.value.validate(function(){var e=Object(ze["a"])(regeneratorRuntime.mark((function e(t){var n,a,r,o,c,i,u,s,d,f,m,b,p,O;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!t){e.next=10;break}return n=k.form,a=n.memo,r=n.isLoop,o=n.limitedTime,c=n.startTime,i=n.endTime,u=n.permitType,s=function(e,t,n){var a=e?ot["f"]:ot["s"];return{StartTime:it()(t).format(a),EndTime:it()(n).format(a)}},d=s(r,c,i),f=d.StartTime,m=d.EndTime,b={act:"QRZNk8BItBSJTT0ikWT1586422170736",LayerIdS:vn,SceneNum:l.value,ID:0===k.dialogType?0:kn,CheckSourceUnitName:gn,CheckSourceID:jn,Memo:a,RuleLocateType:2,PermitType:u,IsLoopEveryDay:r,OwnUserType:"0,8",OwnParam:"",LimitedTime:o||"0",StartTime:f,EndTime:m},e.next=7,$e["a"].saveRule(b);case 7:p=e.sent,O=p.result,O.msg&&(We.a.success(O.msg),k.visiable=!1,pn(vn));case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}function Dn(e){return In.apply(this,arguments)}function In(){return In=Object(ze["a"])(regeneratorRuntime.mark((function e(t){var n,a,r,o;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=t.id,a={act:"nBpfTKDXs2nDV7y4dT41586415983980",LayerIdS:vn,SceneNum:l.value,ID:n},e.next=4,$e["a"].delRule(a);case 4:r=e.sent,o=r.result,o.msg&&(We.a.success(o.msg),pn(vn));case 7:case"end":return e.stop()}}),e)}))),In.apply(this,arguments)}function Bn(e,t){j.detailsForm=!0,h.formTitle=Object(ot["p"])(t),h.formData=e,h.x=0,h.y=0,b.value=t}function Ln(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:b.value;if(j.detailsForm=!1,h.formTitle=Object(ot["p"])(b.value),e===ot["i"].labelList){b.value=ot["i"].person,h.formTitle="人员";var t=A.currentMap.findIndex((function(e){return e.TagId===B.attrs.id}));if(t>-1){var n=A.currentMap[t];h.formData=Object.assign({},{Username:n.name,DeviceName:n.TagId,Personnel_category:"",Position:"",Fettle:""})}else We.a.info("该用户已下线")}else if(e===ot["i"].camera||e===ot["i"].basestation){var a=xe.findIndex((function(e){return e.dids===B.attrs.name}));if(h.formData=xe[a],h.x=B.attrs.x,h.y=B.attrs.y,e===ot["i"].camera){var r=JSON.parse(xe[a].extinfo),o=r.ChanelNum,c=r.IsYunTai,l=r.Password,i=r.UserName;Object.assign(h.formData,{ChanelNum:o,IsYunTai:c,Password:l,UserName:i})}}j.detailsForm=!0}function Rn(e){return _n.apply(this,arguments)}function _n(){return _n=Object(ze["a"])(regeneratorRuntime.mark((function e(t){var n,a,r,o,c;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n={act:"fCGtP4nXdRZjr6TYeiN1611196242913",DeviceIdS:t},e.next=3,et.getCommonApi(n);case 3:a=e.sent,r=a.result,o=a.data,r.success?(c=!0,v.newMonitorList.push({camera:o[0][0],active:c}),v.monitorListFlag=!0):We.a.error("调取监控失败");case 6:case"end":return e.stop()}}),e)}))),_n.apply(this,arguments)}function Pn(e){return An.apply(this,arguments)}function An(){return An=Object(ze["a"])(regeneratorRuntime.mark((function e(t){var n,a,r,o,c;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n={act:"fCGtP4nXdRZjr6TYeiN1611196242913",DeviceIdS:t},e.next=3,et.getCommonApi(n);case 3:a=e.sent,r=a.result,o=a.data,r.success?(c=!0,v.newHistoryMonitorList.push({camera:o[0][0],active:c}),v.historyMonitorListFlag=!0):We.a.error("调取历史监控失败");case 6:case"end":return e.stop()}}),e)}))),An.apply(this,arguments)}function Fn(e){var t=e||B.attrs.name;Rn(t),j.monitorListFlag=!0}function Mn(){v.newMonitorList.splice(0,v.newMonitorList.length),j.monitorListFlag=!1,Oe()}function En(){v.newHistoryMonitorList.splice(0,v.newHistoryMonitorList.length),j.historyMonitorListFlag=!1,Oe()}function Hn(e){var t=e||B.attrs.name;Pn(t),j.historyMonitorListFlag=!0}function Un(e){var t=v.newMonitorList.findIndex((function(t){return t.camera.id===e}));v.newMonitorList[t].active=!1}function zn(e){v.newHistoryMonitorList.forEach((function(t){e===t.camera.id&&(t.active=!1)}))}var Gn=Object(a["ref"])();function Wn(){ee.show=!0}function Yn(){Oe(),Gn.value.resetFields()}function qn(){Gn.value.validate(function(){var e=Object(ze["a"])(regeneratorRuntime.mark((function e(t){var n,a,r,o,c,l,i,u,s,d,f,m,b;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!t){e.next=10;break}return n=yt(ee.form.date,ee.form.time),a=n.sTime,r=n.eTime,o=A.currentMap.findIndex((function(e){return e.TagId===B.attrs.id})),c=A.currentMap[o],l={act:"IFO7HGpIsXDYz62Y0rx1611632994969",PersonnelgId:c.ObjData.BindObjSysNum,sTime:a,eTime:r},e.next=7,et.getCommonApi(l);case 7:i=e.sent,u=i.data,0===u.length?We.a.info("该时间段没有运动轨迹"):u[0].Text?(s=u,We.a.error(s[0].Text)):(ee.steps=u,ee.show=!1,d=A.currentMap.findIndex((function(e){return e.TagId===B.attrs.id})),d>-1&&(f=ee.steps.length,te.len=f,m=it()(ee.steps[0].LocateTriggerTime).format(ot["f"]),b=it()(ee.steps[f-1].LocateTriggerTime).format(ot["f"]),te.sTime=m,te.eTime=b,qe(A.currentMap[d],1)));case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}var Xn=1;function Jn(e){Xn=Number(e)}function Zn(e){te.isPlay=e,e?ee.tween.play():ee.tween.pause()}function $n(e){ne=[];var t=Ze()(ee.steps).splice(0,e);t.forEach((function(e){var t=ft(e.LocatePoint),n=t.x,a=t.y;ne.push(n+Me.width/2,a+Me.height)}))}function Kn(e){te.currentIndex=e,ne=[],0!==e&&$n(e),Zn(!0)}function Qn(){var e,t,n;ee.tween=null,null===(e=ee.message)||void 0===e||e.close(),ee.steps=[],null===(t=ee.lineNode)||void 0===t||t.destroy(),ne=[],null===(n=Ee)||void 0===n||n.destroy(),s.isPlayBack=!1}function ea(){var e;null===(e=ee.lineNode)||void 0===e||e.destroy(),ee.lineNode=new at.a.Line({points:ne,stroke:"rgba(0,0,0,.8)",strokeWidth:3,lineCap:"round",lineJoin:"round",name:"moveLine"}),ue.add(ee.lineNode),ee.lineNode.moveToTop(),ee.lineNode.moveDown(),ce()}function ta(e,t){return na.apply(this,arguments)}function na(){return na=Object(ze["a"])(regeneratorRuntime.mark((function e(t,n){var a,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(s.isPlayBack){e.next=2;break}return e.abrupt("return");case 2:if(n.length-1!==te.currentIndex){e.next=6;break}return te.isPlay=!1,We.a.success("轨迹回放结束"),e.abrupt("return");case 6:if(a=n[0].SceneNum,r=function(){var e=n[te.currentIndex],a=e.LocatePoint,r=e.LocateTriggerTime;te.currentTime=r.replace("T"," "),te.currentIndex++;var o=ft(a),c=o.x,l=o.y;ee.tween=new at.a.Tween({node:t,duration:.2/Xn,x:c,y:l,onUpdate:function(){var e=t.x()+Me.width/2,n=t.y()+Me.height;ne.push(e,n),ea()},onFinish:function(){$n(te.currentIndex),ta(t,n),t.moveToTop()}}),ee.tween.play()},a!==l.value){e.next=12;break}r(),e.next=17;break;case 12:return We.a.info("检测到当前人物的初始位置不在该页面中，正在切换中..."),e.next=15,pa(a);case 15:return e.next=17,ta(t,n);case 17:case"end":return e.stop()}}),e)}))),na.apply(this,arguments)}var aa=Object(a["reactive"])({message:null}),ra="-1";function oa(){var e=A.currentMap.findIndex((function(e){return e.TagId===B.attrs.id}));if(e>-1){var t=A.currentMap[e];s.isFollowing=!0,ra=B.attrs.id,Ge=Q,aa.message=We()({type:"warning",message:"".concat(t.name,"实时跟踪中..."),duration:0})}else ra="-1",We.a.info("该用户已下线")}var ca=Object(a["shallowRef"])(""),la=Object(a["ref"])([]),ia=Object(a["ref"])([]),ua=Object(a["computed"])((function(){return q.value.filter((function(e){return!e.ltype.includes("标注")}))}));function sa(){return da.apply(this,arguments)}function da(){return da=Object(ze["a"])(regeneratorRuntime.mark((function e(){var t,n,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t={act:"Vd95kIrsbON1Z6H27eM1586422577340",TypeCodeChar:""},e.next=3,$e["a"].getAllDevice(t);case 3:n=e.sent,a=n.data,xe=a||[],y.allMapCamera=nt(),Object(ct["j"])(xe);case 8:case"end":return e.stop()}}),e)}))),da.apply(this,arguments)}function fa(e){la.value=""!==e&&null!==e?ia.value.filter((function(t){return t.ltype.includes(e)})):ia.value}function ma(e,t){"nav"===t&&(j.nav=e),"camera"===t&&Object.keys(E).forEach((function(t){E[t].visible(e),ce()})),"basestation"===t&&Object.keys(M).forEach((function(t){M[t].visible(e),ce()})),"map"===t&&(j.map=e)}function ba(){j.map=!1;var e=X.findIndex((function(e){return"map"===e.code}));X[e].show=!1}function pa(e){e!==c.value[0].snum?l.value!==e&&(l.value=e,qt(e),Sa(),rt(e),Ot(e),st(e),St(e),jt(e),ue.destroyChildren(),Object(ct["n"])(e)):n.push("/3d")}function Oa(e){return ha.apply(this,arguments)}function ha(){return ha=Object(ze["a"])(regeneratorRuntime.mark((function e(t){var n,a,r,o,c,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t){e.next=2;break}return e.abrupt("return");case 2:n=la.value.findIndex((function(e){return t===e.lids})),n>-1?(a=la.value[n],r=a.map?a.map:a.snum,r===l.value?(o=vt({x:a.x,y:a.y}),c=o.x,i=o.y,oe.setAttrs({x:c*u.scale,y:i*u.scale-ot["h"]}),ce()):He.a.confirm("选中的目标不在当前地图，是否跳转？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"info"}).then((function(){pa(r)})).catch((function(e){We.a.info("已取消跳转"),ca.value=""}))):(ca.value="",We.a.info("该用户已下线"));case 4:case"end":return e.stop()}}),e)}))),ha.apply(this,arguments)}Object(a["watch"])([function(){return ua.value.length},function(){return A.all.length}],(function(){ia.value=[].concat(Object(Ue["a"])(ua.value),Object(Ue["a"])(A.all)),fa(ca.value)}));var ja=null;function va(){var t=r.location;ja=new WebSocket(t),ja.onmessage=function(){var t=Object(ze["a"])(regeneratorRuntime.mark((function t(n){var a,r,o,i,d,f,m,b,p,O,h,j,v,g,y,w,V,N;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(a=JSON.parse(n.data),a.ActionCode===e.HTagInit&&(A.all=a.Data.map((function(e){return Nt(e)})),jt(l.value)),a.ActionCode!==e.HTagOnline){t.next=11;break}if(r=a.Data,o=A.all.some((function(e){return e.TagId===r.TagId})),!o){t.next=7;break}return t.abrupt("return");case 7:i=Nt(r),A.all.push(i),l.value===r.LocationSceneId&&(A.currentMap.push(i),qe(i)),We.a.info("".concat(i.name,"上线"));case 11:if(a.ActionCode!==e.HTagOffline&&a.ActionCode!==e.HTagLogOff||(d=a.Data,f=A.all.findIndex((function(e){return e.TagId===d.TagId})),f>-1&&(A.all[f].map===l.value&&(m=A.currentMap.findIndex((function(e){return e.TagId===d.TagId})),m>-1&&(A.currentMap.splice(m,1),p=W[d.TagId],d.TagId===(null===(b=Ge)||void 0===b?void 0:b.children[0].attrs.id)&&(s.isFollowing=!1,We.a.info("该用户已下线，轨迹跟踪结束")),null===p||void 0===p||p.destroy(),delete W[d.TagId],ce())),O=A.all[f].name,A.all.splice(f,1),a.ActionCode===e.HTagOffline&&We.a.info("".concat(O,"下线")))),a.ActionCode!==e.HTagMove){t.next=22;break}if(h=a.Data,j=Nt(h),v=A.all.findIndex((function(e){return e.TagId===j.TagId})),!(v>-1)){t.next=21;break}if(g=A.all[v],g.x!==j.x||g.y!==j.y){t.next=20;break}return t.abrupt("return");case 20:Object.assign(g,j);case 21:h.LocationSceneId===l.value&&(y=W[h.TagId],null===y||void 0===y||y.to({x:j.x,y:j.y,duration:.2}),s.isFollowing&&ra===j.TagId&&(w=-(j.x*u.scale-window.innerWidth/2),V=-(j.y*u.scale-(window.innerHeight-ot["h"])/2),oe.setAttrs({x:w,y:V})),ce());case 22:a.ActionCode===e.HLayerGroupStatistics&&(N=a.Data||[],N.forEach((function(e,t){z[e.LayerIdS].text[t].text(String(e.TagDataList.length||0)),z[e.LayerIdS].tagList[t]=e.TagDataList||[]})),ce()),a.ActionCode,e.HWaterAlarm,a.ActionCode===e.HSceneStatistics&&a.Data.forEach((function(e,t){c.value[t].pnum=e.TagDataList.length||0}));case 25:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),ja.onclose=function(){}}var ga=null,ya=Object(a["shallowRef"])(null),wa=Object(a["shallowRef"])("");function Va(){var e=r.alarm;ga=new WebSocket(e),ga.onmessage=function(){var e=Object(ze["a"])(regeneratorRuntime.mark((function e(t){var n,a,r,o;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:n=JSON.parse(t.data),a=JSON.parse(n.data),n.actcode===J.getAlarm&&(r=a,ya.value=r,We.a.info("有新的报警，请及时处理"),m.value===ot["t"]&&(m.value="0")),n.actcode===J.cancelAlarm&&(o=a,wa.value=o);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}function Na(){m.value=m.value!==ot["t"]?ot["t"]:"0"}function Ca(){return ka.apply(this,arguments)}function ka(){return ka=Object(ze["a"])(regeneratorRuntime.mark((function e(){var t,n,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t={act:"E83yVQOUUMYKt6jRYRI1586428010174"},e.next=3,Qe.getAllAlarmType(t);case 3:n=e.sent,a=n.data,Z.value=a.map((function(e){return{label:e.alarmtype,value:e.alarmtype}}));case 6:case"end":return e.stop()}}),e)}))),ka.apply(this,arguments)}function xa(e,t){var n=G[t];n.visible(e),ce(),We.a.success("操作成功")}function Ta(e){w.allData.forEach((function(t){t.show!==e&&(t.show=e,G[t.areaids].visible(e))})),ce(),We.a.success("操作成功")}function Sa(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"all",t={layer:function(){for(var e in I.cameraGroup.destroyChildren(),E)delete E[e];for(var t in I.basestationGroup.destroyChildren(),M)delete E[t];for(var n in I.locateBubbleGroup.destroyChildren(),z)delete z[n]},area:function(){for(var e in I.fenceGroup.destroyChildren(),G)delete G[e]},person:function(){for(var e in I.personGroup.destroyChildren(),W)delete W[e]}};"all"===e?Object.keys(t).map((function(e){t[e]()})):t[e]()}function Da(){var e,t;s.isFollowing=!1,null===(e=aa.message)||void 0===e||e.close(),null===(t=Ge.children[0])||void 0===t||t.shadowColor(ot["d"].TRANSPARENT),ce()}function Ia(){return Ba.apply(this,arguments)}function Ba(){return Ba=Object(ze["a"])(regeneratorRuntime.mark((function e(){var t,n,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,pa(S.form.ShowSceneNum);case 2:S.visible=!1,t=ft(S.form.SourcePointNum),n=t.x,a=t.y,oe.setAttrs({x:-(n*u.scale-window.innerWidth/2),y:-(a*u.scale-(window.innerHeight-ot["h"])/2)}),De({x:n,y:a,id:S.form.Id}),ce();case 7:case"end":return e.stop()}}),e)}))),Ba.apply(this,arguments)}function La(){if(Gt){u.scale=Number((window.innerWidth/Gt.width()).toFixed(2)),i.minScale=u.scale,u.sx=0,u.sy=0;var e={x:u.sx,y:u.sy,width:window.innerWidth,height:window.innerHeight-ot["h"],scale:{x:u.scale,y:u.scale}};oe.setAttrs(e),ce()}}var Ra=Xe()(_t["c"],100),_a=Xe()(La,100);return Object(a["onMounted"])((function(){Kt(),Ca(),Object(_t["c"])(),window.addEventListener("resize",Ra),window.addEventListener("resize",_a)})),Object(a["onUnmounted"])((function(){var e,t;K&&clearTimeout(K),null===(e=ja)||void 0===e||e.close(),null===(t=ga)||void 0===t||t.close(),window.removeEventListener("resize",Ra),document.documentElement.style.fontSize="",window.removeEventListener("resize",_a)})),{warningWidth:m,showWarningList:Na,mapIdRef:l,mapNameRef:f,mapListRef:c,showDetails:Ln,mainNavRef:en,visibleObj:j,status:s,showMenu:d,drawerInfo:g,fenceInfo:y,fenceListInfo:w,ruleListInfo:N,ruleFormRef:C,ruleItemDetail:k,types:ot["i"],navClick:tn,resetNavIndex:nn,equipSwitchClick:an,fenceInfoFormRef:rn,handleAddFence:cn,handleFenceDraw:dn,handleEditFence:un,handleSubmitFence:fn,handleDelFence:mn,fenceCurrentChange:Vn,drawFenceInfo:V,handleRevokeFence:me,handleRedrawFence:fe,handleCancelDrawFence:be,handleFinishDrawFence:pe,contextmenuTypeRef:b,contxtmenuPosition:p,contextmenuList:O,detailsForm:h,trackPlayback:ee,hideDetails:ke,handleClickTrackPlayback:Wn,handleOpenContextmenu:Yn,handleClickSeeTrackPlayback:qn,seeNowVideo:Fn,seeHistoryVideo:Hn,handleCloseAllVideo:Mn,handleCloseAllHistoryVideo:En,popMonitorVideo:Rn,popHistoryMonitorVideo:Pn,watchMonitorListPanelState:Un,watchHistoryMonitorListPanelState:zn,monitorListInfo:v,showEquipDetails:Bn,alarmType:Z,alarmForm:$,transferProps:Y,transferData:Ke,handleSeeRules:yn,handleAddRule:Cn,handleEditRule:xn,handleSubmitRule:Sn,handleDelRule:Dn,areaRulesOption:ot["l"],ruleCurrentChange:hn,ruleDisabledDate:T,timerPickerChange:ae,ruleItemDetailRule:x,changeAreaVisible:xa,toggleAllFenceVisible:Ta,layerPerson:H,layerPosition:U,controlButtonList:X,controlButtonChange:ma,closeMapChoosen:ba,changeMap:pa,leftPannelSearch:ca,querySearch:fa,searchChange:Oa,searchDevice:ua,person:A,userSearchRes:la,alarmInfo:S,alarmListInfo:D,alarmCurrentChange:Rt,getAlarmListByCondition:Pt,handleHandleAlarm:At,alarmHandleSubmit:Mt,getBuildByNum:ct["b"],showAlarmDetail:zt,getHandleExample:Ft,wsAlarmItem:ya,cancelAlarmId:wa,getAlarmTotal:Ht,getAlarmUnHandle:Ut,handleTypeList:ot["r"],handleExample:ot["q"],trackPlaybackFormRef:Gn,playbackObj:te,changeRate:Jn,togglePlay:Zn,changeProcess:Kn,playbackClose:Qn,personFollow:oa,getMapByNum:ct["d"],imgUrl:tt["d"],handleCloseFollow:Da,handleLocate:Ia}}});n("a876");go.render=Me,go.__scopeId="data-v-3bab4490";var yo=go,wo={components:{headerComponent:i["a"],mainComponent:yo}};n("5095");wo.render=l,wo.__scopeId="data-v-1a742b00";var Vo=wo,No=[{path:"/",name:"Home",component:Vo},{path:"/login",name:"Login",component:function(){return n.e("login").then(n.bind(null,"9ed6"))}},{path:"/3d",name:"3D",component:function(){return n.e("three").then(n.bind(null,"539a"))}}],Co=Object(r["a"])({history:Object(r["b"])(),routes:No,scrollBehavior:function(e,t,n){return n||{top:0}}}),ko=Co,xo=n("323e"),To=n.n(xo),So=(n("a5d8"),{title:"人员定位及落水报警系统"}),Do=So,Io=Do.title,Bo=function(e){return e?"".concat(e," - ").concat(Io):"".concat(Io)},Lo=["/login"];function Ro(e,t,n,r,o,c){var l=Object(a["resolveComponent"])("router-view");return Object(a["openBlock"])(),Object(a["createBlock"])(l)}ko.beforeEach(function(){var e=Object(ze["a"])(regeneratorRuntime.mark((function e(t,n){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(To.a.start(),document.title=Bo(t.meta.title),a=Object(ct["e"])(),!a){e.next=8;break}if("/login"!==t.path){e.next=6;break}return e.abrupt("return","/");case 6:e.next=13;break;case 8:if(!Lo.includes(t.path)){e.next=12;break}return e.abrupt("return",!0);case 12:return e.abrupt("return","/login?redirect=".concat(t.path));case 13:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),ko.afterEach((function(e){To.a.done()}));var _o={name:"App"};_o.render=Ro;var Po=_o,Ao=(n("5415"),n("d559")),Fo=n.n(Ao),Mo=(n("17fe"),n("6740")),Eo=n.n(Mo),Ho=(n("5160"),n("fa2e")),Uo=n.n(Ho),zo=(n("163d"),n("f440")),Go=n.n(zo),Wo=(n("5397"),n("5481")),Yo=n.n(Wo),qo=(n("5bf7"),n("6feb")),Xo=n.n(qo),Jo=(n("9fb0"),n("ab51")),Zo=n.n(Jo),$o=(n("398c"),n("b27e")),Ko=n.n($o),Qo=(n("4062"),n("1970")),ec=n.n(Qo),tc=(n("71ec"),n("e1fa")),nc=n.n(tc),ac=(n("43ea"),n("424b")),rc=n.n(ac),oc=(n("24da"),n("70b5")),cc=n.n(oc),lc=(n("accc"),n("d197")),ic=n.n(lc),uc=(n("08eb"),n("ba7e")),sc=n.n(uc),dc=(n("47b1"),n("5a1e")),fc=n.n(dc),mc=(n("d709"),n("3779")),bc=n.n(mc),pc=(n("8989"),n("f5c0")),Oc=n.n(pc),hc=(n("42dc"),n("19ec")),jc=n.n(hc),vc=(n("34c0"),n("aff9")),gc=n.n(vc),yc=(n("f60d"),n("a1dd")),wc=n.n(yc),Vc=(n("3bc8"),n("ee0f")),Nc=n.n(Vc),Cc=(n("0bd6"),n("05c2")),kc=n.n(Cc),xc=(n("8ac7"),n("e661")),Tc=n.n(xc),Sc=(n("8c51"),n("6560")),Dc=n.n(Sc),Ic=(n("9792"),n("6142")),Bc=n.n(Ic),Lc=(n("163c"),n("fa2a")),Rc=n.n(Lc),_c=(n("19b8"),n("5c97")),Pc=n.n(_c),Ac=(n("d37b"),n("4c63")),Fc=n.n(Ac),Mc=(n("5deb"),n("550a")),Ec=n.n(Mc),Hc=(n("3728"),n("cb75")),Uc=n.n(Hc),zc=(n("828f"),n("015f")),Gc=n.n(zc),Wc=(n("e33e"),n("c83f")),Yc=n.n(Wc),qc=(n("0832"),n("b462")),Xc=n.n(qc),Jc=(n("dc92"),n("43f9")),Zc=n.n(Jc),$c=(n("4af4"),n("44fb")),Kc=n.n($c),Qc=(n("a471"),n("51d4")),el=n.n(Qc),tl=n("3ef0"),nl=n.n(tl),al=(n("1294"),[Kc.a,Zc.a,Xc.a,Yc.a,Gc.a,Uc.a,Ec.a,Fc.a,Pc.a,Rc.a,Bc.a,Dc.a,Tc.a,kc.a,Nc.a,wc.a,gc.a,jc.a,Oc.a,bc.a,fc.a,sc.a,ic.a,cc.a,rc.a,nc.a,ec.a,Ko.a,Zo.a,Xo.a,Yo.a,Go.a,Uo.a]),rl=[Eo.a,Fo.a,We.a],ol=function(e){e.config.globalProperties.$ELEMENT={size:"small"},el.a.use(nl.a),al.forEach((function(t){e.component(t.name,t)})),rl.forEach((function(t){e.use(t)}))};n("8e1f");function cl(e,t,n,r,o,c){var l=Object(a["resolveComponent"])("el-table");return Object(a["openBlock"])(),Object(a["createBlock"])(l,Object(a["mergeProps"])(e.$attrs,{"element-loading-text":"拼命加载中","element-loading-spinner":"el-icon-loading","element-loading-background":"rgba(0, 0, 0, 0.5)","tooltip-effect":"dark"}),{default:Object(a["withCtx"])((function(){return[Object(a["renderSlot"])(e.$slots,"default")]})),_:3},16)}var ll=Object(a["defineComponent"])({name:"HdTable"});ll.render=cl;var il=ll,ul=Object(a["createTextVNode"])("取 消"),sl=Object(a["createTextVNode"])("提 交");function dl(e,t,n,r,o,c){var l=Object(a["resolveComponent"])("el-button"),i=Object(a["resolveComponent"])("el-dialog");return Object(a["openBlock"])(),Object(a["createBlock"])(i,Object(a["mergeProps"])({modelValue:e.visibleDialog,"onUpdate:modelValue":t[1]||(t[1]=function(t){return e.visibleDialog=t})},e.$attrs,{width:e.width}),Object(a["createSlots"])({default:Object(a["withCtx"])((function(){return[Object(a["renderSlot"])(e.$slots,"default")]})),_:2},[e.showFooterButtons?{name:"footer",fn:Object(a["withCtx"])((function(){return[Object(a["createVNode"])(l,{onClick:e.handleCancel,plain:""},{default:Object(a["withCtx"])((function(){return[ul]})),_:1},8,["onClick"]),Object(a["createVNode"])(l,{type:"primary",onClick:e.handleConfirm,disabled:e.confirmButtonDisabled},{default:Object(a["withCtx"])((function(){return[sl]})),_:1},8,["onClick","disabled"])]}))}:void 0]),1040,["modelValue","width"])}var fl=Object(a["defineComponent"])({name:"HdDialog",inheritAttrs:!1,props:{visible:{type:Boolean,default:!1},showFooterButtons:{type:Boolean,default:!1},width:{type:String,default:"80%"},confirmButtonDisabled:{type:Boolean,default:!1}},emits:["update:visible","confirm","cancel"],setup:function(e,t){var n=t.emit,r=Object(a["computed"])({get:function(){return e.visible},set:function(e){n("update:visible",e)}});function o(){n("confirm")}function c(){n("cancel")}return{visibleDialog:r,handleConfirm:o,handleCancel:c}}});fl.render=dl;var ml=fl,bl=[il,rr,ml],pl=function(e){bl.forEach((function(t){e.component(t.name,t)}))},Ol=(n("c00b"),n("b5a0")),hl=(n("ebcf"),{mounted:function(e,t){var n=null;e.addEventListener("click",(function(){n&&clearTimeout(n),n=window.setTimeout((function(){t.value()}),1e3)}))}}),jl=hl,vl=Object(a["createApp"])(Po);ol(vl),pl(vl),vl.directive("debounce-click",jl),vl.use(Ol["a"],{tagName:"svg-icon"}).use(ko).mount("#app")},d257:function(e,t,n){"use strict";n.d(t,"c",(function(){return l})),n.d(t,"b",(function(){return i})),n.d(t,"d",(function(){return u})),n.d(t,"a",(function(){return s})),n.d(t,"f",(function(){return d})),n.d(t,"g",(function(){return f})),n.d(t,"e",(function(){return m}));n("4de4"),n("caad"),n("fb6a"),n("2532");var a=n("0644"),r=n.n(a),o=n("5a0c"),c=n.n(o);function l(){var e=document.documentElement,t=document.body.clientWidth||document.documentElement.clientWidth;t=t>2400?2400:t,e.style.fontSize=t/190+"px"}function i(e){return{required:!0,message:e,trigger:["blur","change"]}}function u(e){return{required:!0,validator:e,trigger:"blur"}}function s(e,t,n){if("0"===t||""===t)return n(new Error("请输入大于0的正整数"));/(^[1-9]\d*$)/.test(t)?n():n(new Error("只能输入正整数！"))}function d(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:10;(n||a)&&(e=r()(e.filter((function(e){return e[n].includes(a)}))));var c=e.slice((t-1)*o,(t-1)*o+o);return c}function f(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",a=arguments.length;return a>1&&(e=r()(e.filter((function(e){return e[t].includes(n)})))),e.length}function m(e){var t=c()(new Date).diff(c()(e),"year"),n=c()(new Date).diff(c()(e),"month"),a=c()(new Date).diff(c()(e),"week"),r=c()(new Date).diff(c()(e),"day"),o=c()(new Date).diff(c()(e),"hour"),l=c()(new Date).diff(c()(e),"minute"),i=c()(new Date).diff(c()(e),"second"),u="";return u=t>0?"".concat(t,"年前"):n>0&&n<=12?"".concat(n,"月前"):a>0&&a<=4?"".concat(a,"周前"):r>0&&r<=7?"".concat(r,"天前"):o>0&&o<=24?"".concat(o,"小时前"):l>0&&l<=60?"".concat(l,"分钟前"):i>0&&i<=60?"".concat(i,"秒前"):"刚刚",u}},dbc7:function(e,t){const n={name:"exit-fullscreen",data:{width:"128",height:"128",viewBox:"0 0 128 128",data:'<path pid="0" d="M49.217 41.329l-.136-35.24c-.06-2.715-2.302-4.345-5.022-4.405h-3.65c-2.712-.06-4.866 2.303-4.806 5.016l.152 19.164-24.151-23.79a6.698 6.698 0 00-9.499 0 6.76 6.76 0 000 9.526l23.93 23.713-18.345.074c-2.712-.069-5.228 1.813-5.64 5.02v3.462c.069 2.721 2.31 4.97 5.022 5.03l35.028-.207c.052.005.087.025.133.025l2.457.054a4.626 4.626 0 003.436-1.38c.88-.874 1.205-2.096 1.169-3.462l-.262-2.465c0-.048.182-.081.182-.136h.002zm52.523 51.212l18.32-.073c2.713.06 5.224-1.609 5.64-4.815v-3.462c-.068-2.722-2.317-4.97-5.021-5.04l-34.58.21c-.053 0-.086-.021-.138-.021l-2.451-.06a4.64 4.64 0 00-3.445 1.381c-.885.868-1.201 2.094-1.174 3.46l.27 2.46c.005.06-.177.095-.177.141l.141 34.697c.069 2.713 2.31 4.338 5.022 4.397l3.45.006c2.705.062 4.867-2.31 4.8-5.026l-.153-18.752 24.151 23.946a6.69 6.69 0 009.494 0 6.747 6.747 0 000-9.523L101.74 92.54v.001zM48.125 80.662a4.636 4.636 0 00-3.437-1.382l-2.457.06c-.05 0-.082.022-.137.022l-35.025-.21c-2.712.07-4.957 2.318-5.022 5.04v3.462c.409 3.206 2.925 4.874 5.633 4.814l18.554.06-24.132 23.928c-2.62 2.626-2.62 6.89 0 9.524a6.694 6.694 0 009.496 0l24.155-23.79-.155 18.866c-.06 2.722 2.094 5.093 4.801 5.025h3.65c2.72-.069 4.962-1.685 5.022-4.406l.141-34.956c0-.05-.182-.082-.182-.136l.262-2.46c.03-1.366-.286-2.592-1.166-3.46h-.001zM80.08 47.397a4.62 4.62 0 003.443 1.374l2.45-.054c.055 0 .088-.02.143-.028l35.08.21c2.712-.062 4.953-2.312 5.021-5.033l.009-3.463c-.417-3.211-2.937-5.084-5.64-5.025l-18.615-.073 23.917-23.715c2.63-2.623 2.63-6.879.008-9.513a6.691 6.691 0 00-9.494 0L92.251 26.016l.155-19.312c.065-2.713-2.097-5.085-4.802-5.025h-3.45c-2.713.069-4.954 1.693-5.022 4.406l-.139 35.247c0 .054.18.088.18.136l-.267 2.465c-.028 1.366.288 2.588 1.174 3.463v.001z"/>'}};e.exports=n},de79:function(e,t,n){},ef39:function(e,t,n){"use strict";n("ca0f")},f4b5:function(e,t,n){}});
//# sourceMappingURL=app.a68f9385.js.map