(function(e){function t(t){for(var a,r,i=t[0],l=t[1],u=t[2],s=0,d=[];s<i.length;s++)r=i[s],Object.prototype.hasOwnProperty.call(o,r)&&o[r]&&d.push(o[r][0]),o[r]=0;for(a in l)Object.prototype.hasOwnProperty.call(l,a)&&(e[a]=l[a]);f&&f(t);while(d.length)d.shift()();return c.push.apply(c,u||[]),n()}function n(){for(var e,t=0;t<c.length;t++){for(var n=c[t],a=!0,r=1;r<n.length;r++){var i=n[r];0!==o[i]&&(a=!1)}a&&(c.splice(t--,1),e=l(l.s=n[0]))}return e}var a={},r={app:0},o={app:0},c=[];function i(e){return l.p+"js/"+({about:"about",login:"login"}[e]||e)+"."+{about:"8f084398",login:"bc9e85bc"}[e]+".js"}function l(t){if(a[t])return a[t].exports;var n=a[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,l),n.l=!0,n.exports}l.e=function(e){var t=[],n={login:1};r[e]?t.push(r[e]):0!==r[e]&&n[e]&&t.push(r[e]=new Promise((function(t,n){for(var a="css/"+({about:"about",login:"login"}[e]||e)+"."+{about:"31d6cfe0",login:"69f1ce78"}[e]+".css",o=l.p+a,c=document.getElementsByTagName("link"),i=0;i<c.length;i++){var u=c[i],s=u.getAttribute("data-href")||u.getAttribute("href");if("stylesheet"===u.rel&&(s===a||s===o))return t()}var d=document.getElementsByTagName("style");for(i=0;i<d.length;i++){u=d[i],s=u.getAttribute("data-href");if(s===a||s===o)return t()}var f=document.createElement("link");f.rel="stylesheet",f.type="text/css",f.onload=t,f.onerror=function(t){var a=t&&t.target&&t.target.src||o,c=new Error("Loading CSS chunk "+e+" failed.\n("+a+")");c.code="CSS_CHUNK_LOAD_FAILED",c.request=a,delete r[e],f.parentNode.removeChild(f),n(c)},f.href=o;var p=document.getElementsByTagName("head")[0];p.appendChild(f)})).then((function(){r[e]=0})));var a=o[e];if(0!==a)if(a)t.push(a[2]);else{var c=new Promise((function(t,n){a=o[e]=[t,n]}));t.push(a[2]=c);var u,s=document.createElement("script");s.charset="utf-8",s.timeout=120,l.nc&&s.setAttribute("nonce",l.nc),s.src=i(e);var d=new Error;u=function(t){s.onerror=s.onload=null,clearTimeout(f);var n=o[e];if(0!==n){if(n){var a=t&&("load"===t.type?"missing":t.type),r=t&&t.target&&t.target.src;d.message="Loading chunk "+e+" failed.\n("+a+": "+r+")",d.name="ChunkLoadError",d.type=a,d.request=r,n[1](d)}o[e]=void 0}};var f=setTimeout((function(){u({type:"timeout",target:s})}),12e4);s.onerror=s.onload=u,document.head.appendChild(s)}return Promise.all(t)},l.m=e,l.c=a,l.d=function(e,t,n){l.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},l.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},l.t=function(e,t){if(1&t&&(e=l(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(l.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)l.d(n,a,function(t){return e[t]}.bind(null,a));return n},l.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return l.d(t,"a",t),t},l.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},l.p="",l.oe=function(e){throw console.error(e),e};var u=window["webpackJsonp"]=window["webpackJsonp"]||[],s=u.push.bind(u);u.push=t,u=u.slice();for(var d=0;d<u.length;d++)t(u[d]);var f=s;c.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("cd49")},"0194":function(e,t,n){"use strict";n("1d5e")},"0572":function(e,t,n){},1294:function(e,t,n){},"15a1":function(e,t,n){"use strict";n("caad"),n("d3b7"),n("7f17"),n("f3fc");var a=n("6573"),r=n.n(a),o=(n("96cf"),n("1da1")),c=n("bc3a"),i=n.n(c),l=n("9de4"),u=n("4328"),s=n.n(u),d=n("6ac5"),f=i.a.create({baseURL:l["a"],headers:{"Content-Type":"application/x-www-form-urlencoded"},timeout:5e3}),p=["/alarm/deal","/alarm/dealall"];f.interceptors.request.use(function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t.data=s.a.stringify(t.data),"/tbs/dologin"===t.url){e.next=5;break}return e.next=4,Object(d["c"])();case 4:t.headers.visittoken=e.sent;case 5:return p.includes(t.url)&&(t.headers["Content-Type"]="application/json"),e.abrupt("return",t);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),(function(e){return console.log(e),Promise.reject(e)})),f.interceptors.response.use((function(e){var t=e.data;return!1===t.result.success?(r()({message:t.result.msg||"Error",type:"error",duration:5e3}),Promise.reject(new Error(t.result.msg||"Error"))):t}),(function(e){return console.log("err"+e),r()({message:e.message,type:"error",duration:5e3}),Promise.reject(e)})),t["a"]=f},"1d5e":function(e,t,n){},"1e39":function(e,t,n){},"23fc":function(e,t,n){},"24bc":function(e,t,n){},2772:function(e,t,n){},"300e":function(e,t,n){},"3ab4":function(e,t,n){"use strict";n("94bc")},5843:function(e,t,n){},6993:function(e,t,n){"use strict";n("2772")},"6ac5":function(e,t,n){"use strict";n.d(t,"c",(function(){return c})),n.d(t,"j",(function(){return i})),n.d(t,"e",(function(){return l})),n.d(t,"l",(function(){return s})),n.d(t,"k",(function(){return f})),n.d(t,"g",(function(){return m})),n.d(t,"m",(function(){return h})),n.d(t,"d",(function(){return v})),n.d(t,"h",(function(){return j})),n.d(t,"i",(function(){return w})),n.d(t,"b",(function(){return y})),n.d(t,"f",(function(){return N})),n.d(t,"a",(function(){return C}));var a=n("a78e"),r=n.n(a),o="hd-water-key";function c(){return r.a.get(o)}function i(e){return r.a.set(o,e)}function l(){return r.a.remove(o)}var u="username";function s(e){return localStorage.setItem(u,e)}var d="useraccount";function f(e){return localStorage.setItem(d,e)}var p="bnum";function m(e){return localStorage.setItem(p,e)}var b="serveritem";function h(e){return localStorage.setItem(b,JSON.stringify(e))}function v(){return JSON.parse(localStorage.getItem(b))||[]}var O="homesnum";function j(e){return localStorage.setItem(O,e)}var g="loadsnum";function w(e){return localStorage.setItem(g,e)}function y(){return localStorage.getItem(g)||""}var V="deviceAll";function N(e){return localStorage.setItem(V,JSON.stringify(e))}function C(){return JSON.parse(localStorage.getItem(V))||[]}},7154:function(e,t,n){"use strict";n("24bc")},"71ca":function(e,t,n){"use strict";n("5843")},"8b64":function(e,t,n){"use strict";n("0572")},"8e1f":function(e,t,n){e.exports={menuText:"#bfcbd9",menuActiveText:"#409eff",subMenuActiveText:"#f4f4f5",menuBg:"#304156",menuHover:"#263445",subMenuBg:"#1f2d3d",subMenuHover:"#001528",sideBarWidth:"210px"}},"94bc":function(e,t,n){},9921:function(e,t){const n={name:"fullscreen",data:{width:"128",height:"128",viewBox:"0 0 128 128",data:'<path pid="0" d="M38.47 52L52 38.462l-23.648-23.67L43.209 0H.035L0 43.137l14.757-14.865L38.47 52zm74.773 47.726L89.526 76 76 89.536l23.648 23.672L84.795 128h43.174L128 84.863l-14.757 14.863zM89.538 52l23.668-23.648L128 43.207V.038L84.866 0 99.73 14.76 76 38.472 89.538 52zM38.46 76L14.792 99.651 0 84.794v43.173l43.137.033-14.865-14.757L52 89.53 38.46 76z"/>'}};e.exports=n},"9de4":function(e,t,n){"use strict";n.d(t,"a",(function(){return o})),n.d(t,"c",(function(){return c})),n.d(t,"b",(function(){return i}));var a="http://10.1.200.223:",r=a+"39000/",o=r+"api",c=a+"39001/",i="ws://10.1.200.246:8888/rtsp"},aa02:function(e,t,n){"use strict";n("f50a")},af5b:function(e,t,n){"use strict";n("ec90")},be1d:function(e,t,n){"use strict";n("300e")},c002:function(e,t,n){"use strict";n("23fc")},c00b:function(e,t,n){},cc86:function(e,t,n){"use strict";n("1e39")},cd49:function(e,t,n){"use strict";n.r(t);n("e260"),n("e6cf"),n("cca6"),n("a79d"),n("f5df1");var a=n("7a23"),r=(n("d3b7"),n("6c02")),o=Object(a["withScopeId"])("data-v-45d78b5a");Object(a["pushScopeId"])("data-v-45d78b5a");var c={class:"home-container"};Object(a["popScopeId"])();var i=o((function(e,t,n,r,o,i){var l=Object(a["resolveComponent"])("headerComponent"),u=Object(a["resolveComponent"])("mainComponent");return Object(a["openBlock"])(),Object(a["createBlock"])("div",c,[Object(a["createVNode"])(l),Object(a["createVNode"])(u)])})),l=Object(a["withScopeId"])("data-v-096fc136");Object(a["pushScopeId"])("data-v-096fc136");var u={class:"header"},s={class:"side left"},d=Object(a["createVNode"])("i",{class:"el-icon-time"},null,-1),f={class:"time"},p=Object(a["createVNode"])("div",{class:"side center"},"人员定位及落水报警系统",-1),m={class:"right"};Object(a["popScopeId"])();var b=l((function(e,t,n,r,o,c){var i=Object(a["resolveComponent"])("header-bar");return Object(a["openBlock"])(),Object(a["createBlock"])("header",null,[Object(a["createVNode"])("div",u,[Object(a["createVNode"])("div",s,[d,Object(a["createVNode"])("span",f,Object(a["toDisplayString"])(e.now),1)]),p,Object(a["createVNode"])("div",m,[Object(a["createVNode"])(i)])])])})),h=(n("4de4"),n("caad"),n("fb6a"),n("4d63"),n("ac1f"),n("25f0"),n("2532"),n("4d90"),n("5319"),n("53ca")),v=function(e,t){if(void 0===e||!e)return null;var n,a=t||"{y}-{m}-{d} {h}:{i}:{s}";"object"===Object(h["a"])(e)?n=e:("string"===typeof e&&(e=/^[0-9]+$/.test(e)?parseInt(e):e.replace(new RegExp(/-/gm),"/")),"number"===typeof e&&10===e.toString().length&&(e*=1e3),n=new Date(e));var r={y:n.getFullYear(),m:n.getMonth()+1,d:n.getDate(),h:n.getHours(),i:n.getMinutes(),s:n.getSeconds(),a:n.getDay()},o=a.replace(/{([ymdhisa])+}/g,(function(e,t){var n=r[t];return"a"===t?["日","一","二","三","四","五","六"][n]:n.toString().padStart(2,"0")}));return o};function O(e){return{required:!0,message:e,trigger:["blur","change"]}}function j(e){return{required:!0,validator:e,trigger:"blur"}}function g(e,t,n){if("0"===t||""===t)return n(new Error("请输入大于0的正整数"));/(^[1-9]\d*$)/.test(t)?n():n(new Error("只能输入正整数！"))}function w(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:10,o=arguments.length;o>2&&(e=e.filter((function(e){return e[n].includes(a)})).slice());var c=e.slice().slice((t-1)*r,(t-1)*r+r);return c}function y(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",a=arguments.length;a>1&&(e=e.filter((function(e){return e[t].includes(n)})).slice());var r=e.length;return r}function V(e){var t=localStorage.getItem("sceneAll"),n=JSON.parse(t),a="";return n.filter((function(t){t.snum!==e||(a=t.sname)})),a}function N(e){if(e)return e=e.replace(/T|\+08:00/gim," "),e}var C=Object(a["withScopeId"])("data-v-dc82bc7a");Object(a["pushScopeId"])("data-v-dc82bc7a");var k={class:"right-menu"},x=Object(a["createVNode"])("div",{class:"avatar-wrapper"},[Object(a["createVNode"])("i",{class:"el-icon-user-solid user-avatar"}),Object(a["createVNode"])("i",{class:"el-icon-caret-bottom"})],-1),D=Object(a["createTextVNode"])("后台管理"),T=Object(a["createVNode"])("span",{style:{display:"block"}},"注销",-1);Object(a["popScopeId"])();var S=C((function(e,t,n,r,o,c){var i=Object(a["resolveComponent"])("screenfull"),l=Object(a["resolveComponent"])("el-dropdown-item"),u=Object(a["resolveComponent"])("router-link"),s=Object(a["resolveComponent"])("el-dropdown-menu"),d=Object(a["resolveComponent"])("el-dropdown");return Object(a["openBlock"])(),Object(a["createBlock"])("div",k,[Object(a["createVNode"])(i,{id:"screenfull",class:"right-menu-item hover-effect"}),Object(a["createVNode"])(d,{class:"avatar-container right-menu-item hover-effect",trigger:"click"},{dropdown:C((function(){return[Object(a["createVNode"])(s,null,{default:C((function(){return[Object(a["createVNode"])(u,{to:"/about"},{default:C((function(){return[Object(a["createVNode"])(l,null,{default:C((function(){return[D]})),_:1})]})),_:1}),Object(a["createVNode"])(l,{divided:"",onClick:e.logout},{default:C((function(){return[T]})),_:1},8,["onClick"])]})),_:1})]})),default:C((function(){return[x]})),_:1})])})),L=(n("96cf"),n("1da1"));function I(e,t,n,r,o,c){var i=Object(a["resolveComponent"])("svg-icon");return Object(a["openBlock"])(),Object(a["createBlock"])("div",null,[Object(a["createVNode"])(i,{onClick:c.click,data:o.isFullscreen?o.exitFullscreen:o.fullscreen},null,8,["onClick","data"])])}var R=n("93bf"),_=n.n(R),B=n("9921"),P=n.n(B),M=n("dbc7"),A=n.n(M),F={name:"Screenfull",data:function(){return{isFullscreen:!1,fullscreen:P.a,exitFullscreen:A.a}},mounted:function(){this.init()},beforeUnmount:function(){this.destroy()},methods:{click:function(){if(!_.a.isEnabled)return this.$message({message:"您的浏览器不支持全屏",type:"warning"}),!1;_.a.toggle()},change:function(){this.isFullscreen=_.a.isFullscreen},init:function(){_.a.isEnabled&&_.a.on("change",this.change)},destroy:function(){_.a.isEnabled&&_.a.off("change",this.change)}}};F.render=I;var E=F,H=n("6ac5"),z=Object(a["defineComponent"])({name:"HeaderBar",components:{Screenfull:E},setup:function(){var e=Object(r["c"])();function t(){return n.apply(this,arguments)}function n(){return n=Object(L["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(H["e"])();case 2:localStorage.clear(),e.push("/login");case 4:case"end":return t.stop()}}),t)}))),n.apply(this,arguments)}return{logout:t}}});n("cf9f"),n("aa02");z.render=S,z.__scopeId="data-v-dc82bc7a";var U=z,q=Object(a["defineComponent"])({name:"Header",components:{HeaderBar:U},setup:function(){var e=Object(a["ref"])(v(Date.now())),t=null;return Object(a["onMounted"])((function(){t=setInterval((function(){e.value=v(Date.now())}))})),Object(a["onUnmounted"])((function(){t&&clearInterval(t)})),{now:e}}});n("0194");q.render=b,q.__scopeId="data-v-096fc136";var Y=q,G=(n("d81d"),n("b0c0"),Object(a["withScopeId"])("data-v-264210bc"));Object(a["pushScopeId"])("data-v-264210bc");var X={class:"home-wrapper"},W=Object(a["createVNode"])("div",{id:"container"},null,-1),Z={class:"drawer-container"},J={class:"drawer-header"},$={class:"drawer-title"},K=Object(a["createTextVNode"])("新增"),Q=Object(a["createTextVNode"])("全部显示"),ee=Object(a["createTextVNode"])("全部隐藏"),te=Object(a["createTextVNode"])("编辑"),ne=Object(a["createTextVNode"])("规则"),ae=Object(a["createTextVNode"])("删除"),re=Object(a["createTextVNode"])("取消"),oe=Object(a["createTextVNode"])("提交"),ce=Object(a["createTextVNode"])("新增"),ie=Object(a["createTextVNode"])("编辑"),le=Object(a["createTextVNode"])("删除"),ue=Object(a["createTextVNode"])("取消"),se=Object(a["createTextVNode"])("提交"),de=Object(a["createTextVNode"])("查看详情"),fe=Object(a["createTextVNode"])("查看位置"),pe=Object(a["createVNode"])("span",null,null,-1),me={class:"monitorlist-panel custom-monitor"},be={class:"monitor-header"},he={class:"title"},ve=Object(a["createVNode"])("i",{class:"el-icon el-icon-close"},null,-1),Oe={class:"monitorlist-panel custom-monitor"},je={class:"monitor-header"},ge={class:"title"},we=Object(a["createVNode"])("i",{class:"el-icon el-icon-close"},null,-1),ye=Object(a["createTextVNode"])("取消"),Ve=Object(a["createTextVNode"])("查看"),Ne={ref:"equipImgRef",class:"equip-img"},Ce={class:"warning-wrap"},ke={class:"warning-content"},xe=Object(a["createVNode"])("br",null,null,-1),De=Object(a["createVNode"])("i",{class:"el-icon-setting"},null,-1),Te={class:"control-panel"},Se={class:"control-title o-h"},Le={class:"data-display-item"},Ie=Object(a["createVNode"])("div",{class:"title"},[Object(a["createVNode"])("span",{class:"icon iconfont",innerHTML:""}),Object(a["createVNode"])("span",null,"人员信息")],-1),Re={class:"display-content"},_e={class:"data-item"},Be={class:"count"},Pe=Object(a["createVNode"])("div",{class:"name"},"总上线人数",-1),Me={class:"data-item"},Ae={class:"count"},Fe=Object(a["createVNode"])("div",{class:"name"},"当前上线人数",-1),Ee={class:"data-display-item"},He=Object(a["createVNode"])("div",{class:"title"},[Object(a["createVNode"])("span",{class:"icon iconfont big",innerHTML:""}),Object(a["createVNode"])("span",null,"报警信息")],-1),ze={class:"display-content"},Ue={class:"data-item"},qe={class:"count"},Ye=Object(a["createVNode"])("div",{class:"name"},"报警总数",-1),Ge={class:"data-item warn"},Xe={class:"count"},We=Object(a["createVNode"])("div",{class:"name"},"待处理",-1),Ze={class:"control-buttons-container"},Je={class:"button-label"},$e={class:"button-switch"};Object(a["popScopeId"])();var Ke,Qe,et=G((function(e,t,n,r,o,c){var i=Object(a["resolveComponent"])("main-nav"),l=Object(a["resolveComponent"])("el-collapse-transition"),u=Object(a["resolveComponent"])("camera-list"),s=Object(a["resolveComponent"])("el-tab-pane"),d=Object(a["resolveComponent"])("basestation-list"),f=Object(a["resolveComponent"])("label-list"),p=Object(a["resolveComponent"])("person-list"),m=Object(a["resolveComponent"])("el-tabs"),b=Object(a["resolveComponent"])("el-drawer"),h=Object(a["resolveComponent"])("el-button"),v=Object(a["resolveComponent"])("el-form-item"),O=Object(a["resolveComponent"])("el-form"),j=Object(a["resolveComponent"])("el-table-column"),g=Object(a["resolveComponent"])("el-switch"),w=Object(a["resolveComponent"])("el-popconfirm"),y=Object(a["resolveComponent"])("el-table"),V=Object(a["resolveComponent"])("el-pagination"),N=Object(a["resolveComponent"])("el-dialog"),C=Object(a["resolveComponent"])("el-input"),k=Object(a["resolveComponent"])("el-col"),x=Object(a["resolveComponent"])("el-row"),D=Object(a["resolveComponent"])("el-transfer"),T=Object(a["resolveComponent"])("fence-box"),S=Object(a["resolveComponent"])("el-option"),L=Object(a["resolveComponent"])("el-select"),I=Object(a["resolveComponent"])("el-time-picker"),R=Object(a["resolveComponent"])("el-date-picker"),_=Object(a["resolveComponent"])("contextmenu-content"),B=Object(a["resolveComponent"])("form-content"),P=Object(a["resolveComponent"])("monitor-list"),M=Object(a["resolveComponent"])("history-monitor"),A=Object(a["resolveComponent"])("el-time-select"),F=Object(a["resolveComponent"])("handle"),E=Object(a["resolveComponent"])("layer-person-list"),H=Object(a["resolveComponent"])("mapChoosen"),z=Object(a["resolveDirective"])("loading"),U=Object(a["resolveDirective"])("drag-dialog");return Object(a["openBlock"])(),Object(a["createBlock"])("main",X,[W,Object(a["createVNode"])(l,null,{default:G((function(){return[Object(a["withDirectives"])(Object(a["createVNode"])(i,{ref:"mainNavRef",onNavClick:e.navClick},null,8,["onNavClick"]),[[a["vShow"],e.visibleObj.nav&&!e.status.isDrawFence]])]})),_:1}),Object(a["createVNode"])(b,{modelValue:e.drawerInfo.showList,"onUpdate:modelValue":t[3]||(t[3]=function(t){return e.drawerInfo.showList=t}),direction:"rtl",size:"50%","with-header":!1,onClose:e.resetNavIndex,"append-to-body":""},{default:G((function(){return[Object(a["createVNode"])("div",Z,[Object(a["createVNode"])("div",J,[Object(a["createVNode"])("div",$,Object(a["toDisplayString"])(e.drawerInfo.drawerTitle),1),Object(a["createVNode"])("i",{class:"el-icon-close",onClick:t[1]||(t[1]=function(t){return e.drawerInfo.showList=!1})})]),Object(a["createVNode"])(m,{modelValue:e.drawerInfo.activeName,"onUpdate:modelValue":t[2]||(t[2]=function(t){return e.drawerInfo.activeName=t}),type:"card",onTabClick:e.equipSwitchClick},{default:G((function(){return[Object(a["createVNode"])(s,{label:"摄像头",name:e.types.camera},{default:G((function(){return[e.drawerInfo.activeName===e.types.camera?(Object(a["openBlock"])(),Object(a["createBlock"])(u,{key:0,"form-data":e.detailsForm.formData,onShowEquipDetails:e.showEquipDetails,onAddEquip:e.addEquip},null,8,["form-data","onShowEquipDetails","onAddEquip"])):Object(a["createCommentVNode"])("",!0)]})),_:1},8,["name"]),Object(a["createVNode"])(s,{label:"基站",name:e.types.basestation},{default:G((function(){return[e.drawerInfo.activeName===e.types.basestation?(Object(a["openBlock"])(),Object(a["createBlock"])(d,{key:0,"form-data":e.detailsForm.formData,onShowEquipDetails:e.showEquipDetails,onAddEquip:e.addEquip},null,8,["form-data","onShowEquipDetails","onAddEquip"])):Object(a["createCommentVNode"])("",!0)]})),_:1},8,["name"]),Object(a["createVNode"])(s,{label:"标签",name:e.types.labelList},{default:G((function(){return[e.drawerInfo.activeName===e.types.labelList?(Object(a["openBlock"])(),Object(a["createBlock"])(f,{key:0,"form-data":e.detailsForm.formData,onShowEquipDetails:e.showEquipDetails},null,8,["form-data","onShowEquipDetails"])):Object(a["createCommentVNode"])("",!0)]})),_:1},8,["name"]),Object(a["createVNode"])(s,{label:"人员",name:e.types.person},{default:G((function(){return[e.drawerInfo.activeName===e.types.person?(Object(a["openBlock"])(),Object(a["createBlock"])(p,{key:0,"form-data":e.detailsForm.formData,onShowEquipDetails:e.showEquipDetails},null,8,["form-data","onShowEquipDetails"])):Object(a["createCommentVNode"])("",!0)]})),_:1},8,["name"])]})),_:1},8,["modelValue","onTabClick"])])]})),_:1},8,["modelValue","onClose"]),Object(a["createVNode"])(N,{title:"电子围栏",modelValue:e.fenceListInfo.tableVisible,"onUpdate:modelValue":t[7]||(t[7]=function(t){return e.fenceListInfo.tableVisible=t}),width:"50%"},{default:G((function(){return[Object(a["createVNode"])(O,{model:e.fenceListInfo.params,"label-width":"80px",inline:!0},{default:G((function(){return[Object(a["createVNode"])(v,{label:""},{default:G((function(){return[Object(a["createVNode"])(h,{type:"primary",onClick:e.handleAddFence},{default:G((function(){return[K]})),_:1},8,["onClick"])]})),_:1}),Object(a["createVNode"])(v,{label:""},{default:G((function(){return[Object(a["withDirectives"])(Object(a["createVNode"])(h,{type:"primary",onClick:t[4]||(t[4]=function(t){return e.toggleAllFenceVisible(!0)})},{default:G((function(){return[Q]})),_:1},512),[[a["vShow"],e.fenceListInfo.tableData.length>0]])]})),_:1}),Object(a["createVNode"])(v,{label:""},{default:G((function(){return[Object(a["withDirectives"])(Object(a["createVNode"])(h,{type:"primary",onClick:t[5]||(t[5]=function(t){return e.toggleAllFenceVisible(!1)})},{default:G((function(){return[ee]})),_:1},512),[[a["vShow"],e.fenceListInfo.tableData.length>0]])]})),_:1})]})),_:1},8,["model"]),Object(a["withDirectives"])(Object(a["createVNode"])(y,{"element-loading-text":"拼命加载中","element-loading-spinner":"el-icon-loading","element-loading-background":"rgba(0, 0, 0, 0.5)",data:e.fenceListInfo.tableData,border:"","tooltip-effect":"dark"},{default:G((function(){return[Object(a["createVNode"])(j,{prop:"areaname",label:"围栏名称",width:"",align:"center","show-overflow-tooltip":""}),Object(a["createVNode"])(j,{label:"显示",width:"",align:"center"},{default:G((function(t){var n=t.row;return[Object(a["createVNode"])(g,{modelValue:n.show,"onUpdate:modelValue":function(e){return n.show=e},"active-color":"#13ce66",onChange:function(t){return e.changeAreaVisible(t,n.areaids)}},null,8,["modelValue","onUpdate:modelValue","onChange"])]})),_:1}),Object(a["createVNode"])(j,{label:"操作",width:"250",align:"center"},{default:G((function(t){var n=t.row;return[Object(a["createVNode"])(h,{type:"primary",size:"mini",onClick:function(t){return e.handleEditFence(n)}},{default:G((function(){return[te]})),_:2},1032,["onClick"]),Object(a["createVNode"])(h,{type:"primary",size:"mini",onClick:function(t){return e.handleSeeRules(n)}},{default:G((function(){return[ne]})),_:2},1032,["onClick"]),Object(a["createVNode"])(w,{title:"确定删除电子围栏 ".concat(n.areaname," ？"),onConfirm:function(t){return e.handleDelFence(n)}},{reference:G((function(){return[Object(a["createVNode"])(h,{type:"danger",size:"mini",style:{"margin-left":"10px"}},{default:G((function(){return[ae]})),_:1})]})),_:2},1032,["title","onConfirm"])]})),_:1})]})),_:1},8,["data"]),[[z,e.fenceListInfo.loading]]),Object(a["withDirectives"])(Object(a["createVNode"])(V,{"current-page":e.fenceListInfo.params.curpage,"onUpdate:current-page":t[6]||(t[6]=function(t){return e.fenceListInfo.params.curpage=t}),"page-size":10,layout:"total, prev, pager, next, jumper",total:e.fenceListInfo.total,background:"",onCurrentChange:e.fenceCurrentChange},null,8,["current-page","total","onCurrentChange"]),[[a["vShow"],e.fenceListInfo.total&&e.fenceListInfo.tableData&&e.fenceListInfo.tableData.length]])]})),_:1},8,["modelValue"]),Object(a["createVNode"])(N,{title:"".concat(0===e.fenceInfo.dialogType?"新增":"编辑","电子围栏"),modelValue:e.fenceInfo.visible,"onUpdate:modelValue":t[11]||(t[11]=function(t){return e.fenceInfo.visible=t}),center:"",width:"800px"},{footer:G((function(){return[Object(a["createVNode"])("span",null,[Object(a["createVNode"])(h,{onClick:t[10]||(t[10]=function(t){return e.fenceInfo.visible=!1})},{default:G((function(){return[re]})),_:1}),Object(a["createVNode"])(h,{type:"primary",disabled:!e.drawFenceInfo.clonePoints.length,onClick:e.handleSubmitFence},{default:G((function(){return[oe]})),_:1},8,["disabled","onClick"])])]})),default:G((function(){return[Object(a["createVNode"])(O,{ref:"fenceInfoFormRef",model:e.fenceInfo.form,rules:e.fenceInfo.rules,"label-width":"120px"},{default:G((function(){return[Object(a["createVNode"])(x,{gutter:0},{default:G((function(){return[Object(a["createVNode"])(k,{span:12,offset:0},{default:G((function(){return[Object(a["createVNode"])(v,{label:"电子围栏名称：",prop:"name"},{default:G((function(){return[Object(a["createVNode"])(C,{modelValue:e.fenceInfo.form.name,"onUpdate:modelValue":t[8]||(t[8]=function(t){return e.fenceInfo.form.name=t}),modelModifiers:{trim:!0},clearable:"",style:{width:"200px"},placeholder:"请输入电子围栏名称"},null,8,["modelValue"])]})),_:1})]})),_:1})]})),_:1}),Object(a["createVNode"])(v,{label:"选择关联设备："},{default:G((function(){return[Object(a["createVNode"])(D,{modelValue:e.fenceInfo.form.chosenCamera,"onUpdate:modelValue":t[9]||(t[9]=function(t){return e.fenceInfo.form.chosenCamera=t}),filterable:"","filter-placeholder":"请输入名称",data:e.fenceInfo.allMapCamera,titles:["可选择设备","已选择设备"],props:e.transferProps},{default:G((function(e){var t=e.option;return[Object(a["createVNode"])("span",null,Object(a["toDisplayString"])(t.dname),1)]})),_:1},8,["modelValue","data","props"])]})),_:1}),Object(a["createVNode"])(v,{label:"绘制地图：",required:""},{default:G((function(){return[Object(a["createVNode"])(h,{type:"warning",size:"mini",onClick:e.handleFenceDraw},{default:G((function(){return[Object(a["createTextVNode"])(Object(a["toDisplayString"])("".concat(0===e.drawFenceInfo.clonePoints.length?"开始":"重新","绘制")),1)]})),_:1},8,["onClick"])]})),_:1})]})),_:1},8,["model","rules"])]})),_:1},8,["title","modelValue"]),Object(a["createVNode"])(l,null,{default:G((function(){return[e.status.isDrawFence?(Object(a["openBlock"])(),Object(a["createBlock"])(T,{key:0,onRevoke:e.handleRevokeFence,onRedraw:e.handleRedrawFence,onCancel:e.handleCancelDrawFence,onFinish:e.handleFinishDrawFence},null,8,["onRevoke","onRedraw","onCancel","onFinish"])):Object(a["createCommentVNode"])("",!0)]})),_:1}),Object(a["createVNode"])(N,{title:"规则列表",modelValue:e.ruleListInfo.visiable,"onUpdate:modelValue":t[13]||(t[13]=function(t){return e.ruleListInfo.visiable=t}),width:"80%"},{default:G((function(){return[Object(a["createVNode"])(O,{model:e.fenceListInfo.params,"label-width":"80px",inline:!0},{default:G((function(){return[Object(a["createVNode"])(v,{label:""},{default:G((function(){return[Object(a["createVNode"])(h,{type:"primary",onClick:e.handleAddRule},{default:G((function(){return[ce]})),_:1},8,["onClick"])]})),_:1})]})),_:1},8,["model"]),Object(a["withDirectives"])(Object(a["createVNode"])(y,{"element-loading-text":"拼命加载中","element-loading-spinner":"el-icon-loading","element-loading-background":"rgba(0, 0, 0, 0.5)",data:e.ruleListInfo.tableData,border:"","tooltip-effect":"dark"},{default:G((function(){return[Object(a["createVNode"])(j,{label:"规则类型",prop:"labelType",width:"",align:"center","show-overflow-tooltip":""}),Object(a["createVNode"])(j,{label:"是否每日循环",width:"",align:"center","show-overflow-tooltip":""},{default:G((function(e){var t=e.row;return[Object(a["createTextVNode"])(Object(a["toDisplayString"])(t.isloop?"是":"否"),1)]})),_:1}),Object(a["createVNode"])(j,{label:"开始时间",width:"",align:"center",prop:"stime"}),Object(a["createVNode"])(j,{label:"结束时间",width:"",align:"center",prop:"etime"}),Object(a["createVNode"])(j,{label:"操作",width:"210",align:"center"},{default:G((function(t){var n=t.row;return[Object(a["createVNode"])(h,{type:"primary",size:"mini",onClick:function(t){return e.handleEditRule(n)}},{default:G((function(){return[ie]})),_:2},1032,["onClick"]),Object(a["createVNode"])(w,{title:"确定删除该规则？",onConfirm:function(t){return e.handleDelRule(n)}},{reference:G((function(){return[Object(a["createVNode"])(h,{type:"danger",size:"mini",style:{"margin-left":"10px"}},{default:G((function(){return[le]})),_:1})]})),_:2},1032,["onConfirm"])]})),_:1})]})),_:1},8,["data"]),[[z,e.ruleListInfo.loading]]),Object(a["withDirectives"])(Object(a["createVNode"])(V,{"current-page":e.fenceListInfo.params.curpage,"onUpdate:current-page":t[12]||(t[12]=function(t){return e.fenceListInfo.params.curpage=t}),layout:"total, prev, pager, next, jumper","page-size":10,total:e.ruleListInfo.total,background:"",onCurrentChange:e.ruleCurrentChange},null,8,["current-page","total","onCurrentChange"]),[[a["vShow"],e.ruleListInfo.total&&e.ruleListInfo.tableData&&e.ruleListInfo.tableData.length]])]})),_:1},8,["modelValue"]),Object(a["createVNode"])(N,{title:(0===e.ruleItemDetail.dialogType?"新增":"编辑")+"规则",modelValue:e.ruleItemDetail.visiable,"onUpdate:modelValue":t[24]||(t[24]=function(t){return e.ruleItemDetail.visiable=t}),width:"60%",center:""},{footer:G((function(){return[Object(a["createVNode"])("span",null,[Object(a["createVNode"])(h,{onClick:t[23]||(t[23]=function(t){return e.ruleItemDetail.visiable=!1})},{default:G((function(){return[ue]})),_:1}),Object(a["createVNode"])(h,{type:"primary",onClick:e.handleSubmitRule},{default:G((function(){return[se]})),_:1},8,["onClick"])])]})),default:G((function(){return[Object(a["createVNode"])(O,{ref:"ruleFormRef",model:e.ruleItemDetail.form,rules:e.ruleItemDetailRule,"label-width":"100px"},{default:G((function(){return[Object(a["createVNode"])(x,{gutter:0},{default:G((function(){return[Object(a["createVNode"])(k,{span:12,offset:0},{default:G((function(){return[Object(a["createVNode"])(v,{label:"每天循环："},{default:G((function(){return[Object(a["createVNode"])(g,{modelValue:e.ruleItemDetail.form.isLoop,"onUpdate:modelValue":t[14]||(t[14]=function(t){return e.ruleItemDetail.form.isLoop=t}),"active-color":"#13ce66","inactive-color":"#ff4949"},null,8,["modelValue"])]})),_:1})]})),_:1}),Object(a["createVNode"])(k,{span:12,offset:0},{default:G((function(){return[Object(a["createVNode"])(v,{label:"规则类型：",prop:"permitType"},{default:G((function(){return[Object(a["createVNode"])(L,{modelValue:e.ruleItemDetail.form.permitType,"onUpdate:modelValue":t[15]||(t[15]=function(t){return e.ruleItemDetail.form.permitType=t}),placeholder:"请选择规则类型",clearable:""},{default:G((function(){return[(Object(a["openBlock"])(!0),Object(a["createBlock"])(a["Fragment"],null,Object(a["renderList"])(e.areaRulesOption,(function(e){return Object(a["openBlock"])(),Object(a["createBlock"])(S,{key:e.value,label:e.label,value:e.value},null,8,["label","value"])})),128))]})),_:1},8,["modelValue"])]})),_:1})]})),_:1}),Object(a["createVNode"])(k,{span:12,offset:0},{default:G((function(){return[Object(a["createVNode"])(v,{label:"限时时长：",prop:"limitedTime"},{default:G((function(){return[Object(a["createVNode"])(C,{modelValue:e.ruleItemDetail.form.limitedTime,"onUpdate:modelValue":t[16]||(t[16]=function(t){return e.ruleItemDetail.form.limitedTime=t}),modelModifiers:{trim:!0},placeholder:"请输入大于0的正整数",clearable:"",style:{"max-width":"200px"}},null,8,["modelValue"])]})),_:1})]})),_:1})]})),_:1}),e.ruleItemDetail.form.isLoop?(Object(a["openBlock"])(),Object(a["createBlock"])(x,{key:0,gutter:20},{default:G((function(){return[Object(a["createVNode"])(k,{span:12,offset:0},{default:G((function(){return[Object(a["createVNode"])(v,{label:"开始时间：",prop:"startTime"},{default:G((function(){return[Object(a["createVNode"])(I,{modelValue:e.ruleItemDetail.form.startTime,"onUpdate:modelValue":t[17]||(t[17]=function(t){return e.ruleItemDetail.form.startTime=t}),placeholder:"开始时间",onChange:e.timerPickerChange},null,8,["modelValue","onChange"])]})),_:1})]})),_:1}),Object(a["createVNode"])(k,{span:12,offset:0},{default:G((function(){return[Object(a["createVNode"])(v,{label:"结束时间：",prop:"endTime"},{default:G((function(){return[Object(a["createVNode"])(I,{modelValue:e.ruleItemDetail.form.endTime,"onUpdate:modelValue":t[18]||(t[18]=function(t){return e.ruleItemDetail.form.endTime=t}),placeholder:"结束时间"},null,8,["modelValue"])]})),_:1})]})),_:1})]})),_:1})):(Object(a["openBlock"])(),Object(a["createBlock"])(x,{key:1,gutter:20},{default:G((function(){return[Object(a["createVNode"])(k,{span:12,offset:0},{default:G((function(){return[Object(a["createVNode"])(v,{label:"开始时间：",prop:"startTime"},{default:G((function(){return[Object(a["createVNode"])(R,{modelValue:e.ruleItemDetail.form.startTime,"onUpdate:modelValue":t[19]||(t[19]=function(t){return e.ruleItemDetail.form.startTime=t}),type:"datetime",placeholder:"选择开始日期时间",onChange:t[20]||(t[20]=function(t){return e.ruleItemDetail.form.endTime=""})},null,8,["modelValue"])]})),_:1})]})),_:1}),Object(a["createVNode"])(k,{span:12,offset:0},{default:G((function(){return[Object(a["createVNode"])(v,{label:"结束时间：",prop:"endTime"},{default:G((function(){return[Object(a["createVNode"])(R,{modelValue:e.ruleItemDetail.form.endTime,"onUpdate:modelValue":t[21]||(t[21]=function(t){return e.ruleItemDetail.form.endTime=t}),type:"datetime",placeholder:"选择结束日期时间",disabled:!e.ruleItemDetail.form.startTime,disabledDate:e.ruleDisabledDate},null,8,["modelValue","disabled","disabledDate"])]})),_:1})]})),_:1})]})),_:1})),Object(a["createVNode"])(x,{gutter:0},{default:G((function(){return[Object(a["createVNode"])(k,{span:24,offset:0},{default:G((function(){return[Object(a["createVNode"])(v,{label:"备注："},{default:G((function(){return[Object(a["createVNode"])(C,{modelValue:e.ruleItemDetail.form.memo,"onUpdate:modelValue":t[22]||(t[22]=function(t){return e.ruleItemDetail.form.memo=t}),type:"textarea"},null,8,["modelValue"])]})),_:1})]})),_:1})]})),_:1})]})),_:1},8,["model","rules"])]})),_:1},8,["title","modelValue"]),Object(a["createVNode"])(N,{title:"报警管理",modelValue:e.alarmListInfo.tableVisible,"onUpdate:modelValue":t[32]||(t[32]=function(t){return e.alarmListInfo.tableVisible=t}),width:"60%"},{default:G((function(){return[Object(a["createVNode"])(O,{model:e.alarmListInfo.params,"label-width":"80px",inline:!0},{default:G((function(){return[Object(a["createVNode"])(v,{label:""},{default:G((function(){return[Object(a["createVNode"])(L,{modelValue:e.alarmListInfo.SourceType,"onUpdate:modelValue":t[25]||(t[25]=function(t){return e.alarmListInfo.SourceType=t}),placeholder:"全部类型",clearable:"",filterable:"",onChange:t[26]||(t[26]=function(){e.getAlarmListByCondition()})},{default:G((function(){return[(Object(a["openBlock"])(!0),Object(a["createBlock"])(a["Fragment"],null,Object(a["renderList"])(e.alarmType,(function(e){return Object(a["openBlock"])(),Object(a["createBlock"])(S,{key:e.value,label:e.label,value:e.value},null,8,["label","value"])})),128))]})),_:1},8,["modelValue"])]})),_:1}),Object(a["createVNode"])(v,{label:""},{default:G((function(){return[Object(a["createVNode"])(R,{modelValue:e.alarmListInfo.sTime,"onUpdate:modelValue":t[27]||(t[27]=function(t){return e.alarmListInfo.sTime=t}),type:"datetime",placeholder:"选择开始日期时间",onChange:e.getAlarmListByCondition},null,8,["modelValue","onChange"])]})),_:1}),Object(a["createVNode"])(v,{label:""},{default:G((function(){return[Object(a["createVNode"])(R,{modelValue:e.alarmListInfo.eTime,"onUpdate:modelValue":t[28]||(t[28]=function(t){return e.alarmListInfo.eTime=t}),type:"datetime",placeholder:"选择结束时间",onChange:e.getAlarmListByCondition},null,8,["modelValue","onChange"])]})),_:1}),Object(a["createVNode"])(v,{label:""},{default:G((function(){return[Object(a["createVNode"])(L,{modelValue:e.alarmListInfo.alarmLevel,"onUpdate:modelValue":t[29]||(t[29]=function(t){return e.alarmListInfo.alarmLevel=t}),placeholder:"全部等级",style:{width:"120px"},clearable:"",filterable:"",onChange:t[30]||(t[30]=function(){e.getAlarmListByCondition()})},{default:G((function(){return[Object(a["createVNode"])(S,{label:"普通",value:"0"}),Object(a["createVNode"])(S,{label:"紧急",value:"1"}),Object(a["createVNode"])(S,{label:"危急",value:"2"})]})),_:1},8,["modelValue"])]})),_:1})]})),_:1},8,["model"]),Object(a["withDirectives"])(Object(a["createVNode"])(y,{"element-loading-text":"拼命加载中","element-loading-spinner":"el-icon-loading","element-loading-background":"rgba(0, 0, 0, 0.5)",data:e.alarmListInfo.tableData,border:"","tooltip-effect":"dark"},{default:G((function(){return[Object(a["createVNode"])(j,{label:"等级",width:"100",align:"center","show-overflow-tooltip":""},{default:G((function(e){var t=e.row;return[Object(a["createTextVNode"])(Object(a["toDisplayString"])(0===t.alarmLevel?"普通":1===t.alarmLevel?"紧急":"危急"),1)]})),_:1}),Object(a["createVNode"])(j,{label:"类型",prop:"SourceType",width:"100",align:"center","show-overflow-tooltip":""}),Object(a["createVNode"])(j,{prop:"alarmContent",label:"内容",width:"","show-overflow-tooltip":""}),Object(a["createVNode"])(j,{label:"时间",width:"180","show-overflow-tooltip":""},{default:G((function(t){var n=t.row;return[Object(a["createTextVNode"])(Object(a["toDisplayString"])(e.formatTime(n.CreateTime)),1)]})),_:1}),Object(a["createVNode"])(j,{label:"操作",width:"200",align:"center"},{default:G((function(t){var n=t.row;return[Object(a["createVNode"])(h,{type:"primary",size:"mini",onClick:function(t){return e.handleDetailAlarm(n)}},{default:G((function(){return[de]})),_:2},1032,["onClick"]),Object(a["createVNode"])(h,{type:"primary",size:"mini"},{default:G((function(){return[fe]})),_:1})]})),_:1})]})),_:1},8,["data"]),[[z,e.alarmListInfo.loading]]),Object(a["withDirectives"])(Object(a["createVNode"])(V,{"current-page":e.alarmListInfo.params.curpage,"onUpdate:current-page":t[31]||(t[31]=function(t){return e.alarmListInfo.params.curpage=t}),"page-size":e.alarmListInfo.params.size,layout:"total, prev, pager, next, jumper",total:e.alarmListInfo.total,background:"",onCurrentChange:e.alarmCurrentChange},null,8,["current-page","page-size","total","onCurrentChange"]),[[a["vShow"],e.alarmListInfo.total&&e.alarmListInfo.tableData&&e.alarmListInfo.tableData.length]])]})),_:1},8,["modelValue"]),Object(a["createVNode"])(N,{title:"报警详情",modelValue:e.alarmInfo.visible,"onUpdate:modelValue":t[33]||(t[33]=function(t){return e.alarmInfo.visible=t}),width:"60%",center:""},{footer:G((function(){return[pe]})),default:G((function(){return[Object(a["createVNode"])(O,{ref:"ruleFormRef",model:e.alarmInfo.form,"label-width":"100px"},{default:G((function(){return[Object(a["createVNode"])(x,{gutter:0},{default:G((function(){return[Object(a["createVNode"])(k,{span:12,offset:0},{default:G((function(){return[Object(a["createVNode"])(v,{label:"触发人员：",prop:"SourceName"})]})),_:1}),Object(a["createVNode"])(k,{span:12,offset:0},{default:G((function(){return[Object(a["createVNode"])(v,{label:"触发时间"})]})),_:1}),Object(a["createVNode"])(k,{span:12,offset:0},{default:G((function(){return[Object(a["createVNode"])(v,{label:"触发类型"})]})),_:1})]})),_:1}),Object(a["createVNode"])(x,{gutter:20},{default:G((function(){return[Object(a["createVNode"])(k,{span:12,offset:0},{default:G((function(){return[Object(a["createVNode"])(v,{label:"触发位置"})]})),_:1}),Object(a["createVNode"])(k,{span:12,offset:0},{default:G((function(){return[Object(a["createVNode"])(v,{label:"是否处理"})]})),_:1})]})),_:1}),Object(a["createVNode"])(x,{gutter:0},{default:G((function(){return[Object(a["createVNode"])(k,{span:24,offset:0},{default:G((function(){return[Object(a["createVNode"])(v,{label:"内容描述"})]})),_:1})]})),_:1})]})),_:1},8,["model"])]})),_:1},8,["modelValue"]),e.visibleObj.contextmenu?(Object(a["openBlock"])(),Object(a["createBlock"])(_,{key:0,type:e.contextmenuTypeRef,"contxtmenu-position":e.contxtmenuPosition,"contextmenu-list":e.contextmenuList,onClicked:t[34]||(t[34]=function(t){return e.visibleObj.contextmenu=!1}),onSeeNowVideo:e.seeNowVideo,onSeeHistoryVideo:e.seeHistoryVideo,onShowDetails:e.showDetails,onTrackPlayback:e.handleClickTrackPlayback,onEdit:e.detailsEdit},null,8,["type","contxtmenu-position","contextmenu-list","onSeeNowVideo","onSeeHistoryVideo","onShowDetails","onTrackPlayback","onEdit"])):Object(a["createCommentVNode"])("",!0),Object(a["withDirectives"])(Object(a["createVNode"])(B,{ref:"formContentComponentRef","is-add":e.detailsForm.isAdd,editable:e.detailsForm.editable,"form-data":e.detailsForm.formData,"form-type":e.contextmenuTypeRef,"map-id":e.mapIdRef,x:e.detailsForm.x,y:e.detailsForm.y,onClose:e.hideDetails,onCancelForm:e.cancelForm,onChangeDirection:e.changeDirection,onUpdateX:e.updateX,onUpdateY:e.updateY,onConfirm:e.handleDetailConfirm},null,8,["is-add","editable","form-data","form-type","map-id","x","y","onClose","onCancelForm","onChangeDirection","onUpdateX","onUpdateY","onConfirm"]),[[a["vShow"],e.visibleObj.detailsForm]]),Object(a["withDirectives"])(Object(a["createVNode"])("div",null,[Object(a["createVNode"])("div",me,[Object(a["createVNode"])("header",be,[Object(a["createVNode"])("div",he,Object(a["toDisplayString"])(e.monitorListInfo.monitorTitle),1),Object(a["createVNode"])("button",{class:"closebtx",onClick:t[35]||(t[35]=function(){return e.handleCloseAllVideo&&e.handleCloseAllVideo.apply(e,arguments)})},[ve])]),(Object(a["openBlock"])(!0),Object(a["createBlock"])(a["Fragment"],null,Object(a["renderList"])(e.monitorListInfo.newMonitorList,(function(t,n){return Object(a["withDirectives"])((Object(a["openBlock"])(),Object(a["createBlock"])("div",{key:n,class:e.monitorListInfo.monitorInner},[Object(a["createVNode"])(P,{ref:"monitorListPanelRef","camera-data":t,onChangeMonitorListPanelState:function(n){return e.watchMonitorListPanelState(t.camera.id)},cameraData:t,livePlayCount:e.monitorListInfo.livePlayCount},null,8,["camera-data","onChangeMonitorListPanelState","cameraData","livePlayCount"])],2)),[[a["vShow"],t.active]])})),128))])],512),[[U,"monitor-header,custom-monitor"],[a["vShow"],e.visibleObj.monitorListFlag]]),Object(a["withDirectives"])(Object(a["createVNode"])("div",null,[Object(a["createVNode"])("div",Oe,[Object(a["createVNode"])("header",je,[Object(a["createVNode"])("div",ge,Object(a["toDisplayString"])(e.monitorListInfo.monitorTitle),1),Object(a["createVNode"])("button",{class:"closebtx",onClick:t[36]||(t[36]=function(){return e.handleCloseAllHistoryVideo&&e.handleCloseAllHistoryVideo.apply(e,arguments)})},[we])]),(Object(a["openBlock"])(!0),Object(a["createBlock"])(a["Fragment"],null,Object(a["renderList"])(e.monitorListInfo.newHistoryMonitorList,(function(t,n){return Object(a["withDirectives"])((Object(a["openBlock"])(),Object(a["createBlock"])("div",{key:n,class:e.monitorListInfo.monitorHistoryInner},[Object(a["createVNode"])(M,{ref:"hitoryMonitorListPanelRef","history-camera-data":t,onChangeHistoryMonitorListPanelState:function(n){return e.watchHistoryMonitorListPanelState(t.camera.id)},historyCameraData:t,historyPlayCount:e.monitorListInfo.historyPlayCount},null,8,["history-camera-data","onChangeHistoryMonitorListPanelState","historyCameraData","historyPlayCount"])],2)),[[a["vShow"],t.active]])})),128))])],512),[[U,"monitor-header,custom-monitor"],[a["vShow"],e.visibleObj.historyMonitorListFlag]]),Object(a["createVNode"])(N,{title:"选择轨迹回放时间",modelValue:e.trackPlayback.show,"onUpdate:modelValue":t[42]||(t[42]=function(t){return e.trackPlayback.show=t}),width:"400px",center:"",onClose:e.handleCloseContextmenu},{footer:G((function(){return[Object(a["createVNode"])("span",null,[Object(a["createVNode"])(h,{onClick:t[41]||(t[41]=function(t){return e.trackPlayback.show=!1})},{default:G((function(){return[ye]})),_:1}),Object(a["createVNode"])(h,{onClick:e.handleClickSeeTrackPlayback,type:"primary"},{default:G((function(){return[Ve]})),_:1},8,["onClick"])])]})),default:G((function(){return[Object(a["createVNode"])(O,{ref:"trackPlaybackFormRef",model:e.trackPlayback.form,rules:e.trackPlayback.rules,"label-width":"100px",inline:!1,size:"small"},{default:G((function(){return[Object(a["createVNode"])(v,{label:"选择日期：",prop:"date"},{default:G((function(){return[Object(a["createVNode"])(R,{modelValue:e.trackPlayback.form.date,"onUpdate:modelValue":t[37]||(t[37]=function(t){return e.trackPlayback.form.date=t}),type:"date",placeholder:"选择日期","picker-options":e.trackPlayback.datePickerOptions},null,8,["modelValue","picker-options"])]})),_:1}),Object(a["createVNode"])(v,{label:"开始时间：",prop:"startTime"},{default:G((function(){return[Object(a["createVNode"])(A,{modelValue:e.trackPlayback.form.startTime,"onUpdate:modelValue":t[38]||(t[38]=function(t){return e.trackPlayback.form.startTime=t}),placeholder:"起始时间","picker-options":{start:"08:30",step:"00:15",end:"18:30"},onChange:t[39]||(t[39]=function(t){return e.trackPlayback.form.endTime=""})},null,8,["modelValue"])]})),_:1}),Object(a["createVNode"])(v,{label:"结束日期：",prop:"endTime"},{default:G((function(){return[Object(a["createVNode"])(A,{modelValue:e.trackPlayback.form.endTime,"onUpdate:modelValue":t[40]||(t[40]=function(t){return e.trackPlayback.form.endTime=t}),placeholder:"结束时间",disabled:!e.trackPlayback.form.startTime,"picker-options":{start:"08:30",step:"00:15",end:"18:30",minTime:e.trackPlayback.form.startTime}},null,8,["modelValue","disabled","picker-options"])]})),_:1})]})),_:1},8,["model","rules"])]})),_:1},8,["modelValue","onClose"]),Object(a["withDirectives"])(Object(a["createVNode"])("div",Ne,null,512),[[a["vShow"],e.status.equipImgFollow]]),Object(a["createVNode"])("div",{class:"warning-container",style:{right:e.warningWidth}},[Object(a["createVNode"])("div",Ce,[Object(a["createVNode"])("div",{class:"warning-show-button",onClick:t[43]||(t[43]=function(){return e.showWarningList&&e.showWarningList.apply(e,arguments)})},"报警列表"),Object(a["createVNode"])("div",ke,[Object(a["createVNode"])(O,{model:e.fenceListInfo.params,"label-width":"80px",inline:!0},{default:G((function(){return[Object(a["createVNode"])(L,{modelValue:e.alarmForm.type,"onUpdate:modelValue":t[44]||(t[44]=function(t){return e.alarmForm.type=t}),placeholder:"全部",clearable:"",filterable:"",style:{width:"98%"},onChange:t[45]||(t[45]=function(){})},{default:G((function(){return[(Object(a["openBlock"])(!0),Object(a["createBlock"])(a["Fragment"],null,Object(a["renderList"])(e.alarmType,(function(e){return Object(a["openBlock"])(),Object(a["createBlock"])(S,{key:e.value,label:e.label,value:e.value},null,8,["label","value"])})),128))]})),_:1},8,["modelValue"]),xe,Object(a["createVNode"])(a["Transition"],{name:"slide-fade"},{default:G((function(){return[Object(a["createVNode"])(F,{alarmType:e.alarmForm.type},null,8,["alarmType"])]})),_:1})]})),_:1},8,["model"])])])],4),e.visibleObj.layerPerson?(Object(a["openBlock"])(),Object(a["createBlock"])(E,{key:1,"person-list":e.layerPerson,"mouse-position":e.layerPosition},null,8,["person-list","mouse-position"])):Object(a["createCommentVNode"])("",!0),Object(a["createVNode"])("div",{class:"control-menu",onClick:t[46]||(t[46]=function(t){return e.visibleObj.controlPannel=!e.visibleObj.controlPannel})},[De]),Object(a["withDirectives"])(Object(a["createVNode"])("div",Te,[Object(a["createVNode"])("div",Se,Object(a["toDisplayString"])(e.mapNameRef),1),Object(a["createVNode"])(L,{ref:"headerSearchSelectRef",modelValue:e.leftPannelSearch,"onUpdate:modelValue":t[47]||(t[47]=function(t){return e.leftPannelSearch=t}),"remote-method":e.querySearch,filterable:"","default-first-option":"",remote:"",size:"small",placeholder:"全局搜索",class:"search-select",onChange:e.searchChange},{default:G((function(){return[(Object(a["openBlock"])(!0),Object(a["createBlock"])(a["Fragment"],null,Object(a["renderList"])(e.userSearchRes,(function(e){return Object(a["openBlock"])(),Object(a["createBlock"])(S,{key:e.dids,value:e.dids,label:e.dname},null,8,["value","label"])})),128))]})),_:1},8,["modelValue","remote-method","onChange"]),Object(a["createVNode"])("div",Le,[Ie,Object(a["createVNode"])("div",Re,[Object(a["createVNode"])("div",_e,[Object(a["createVNode"])("div",Be,Object(a["toDisplayString"])(e.person.all.length),1),Pe]),Object(a["createVNode"])("div",Me,[Object(a["createVNode"])("div",Ae,Object(a["toDisplayString"])(e.person.currentMap.length),1),Fe])])]),Object(a["createVNode"])("div",Ee,[He,Object(a["createVNode"])("div",ze,[Object(a["createVNode"])("div",Ue,[Object(a["createVNode"])("div",qe,Object(a["toDisplayString"])(e.person.all.length),1),Ye]),Object(a["createVNode"])("div",Ge,[Object(a["createVNode"])("div",Xe,Object(a["toDisplayString"])(e.person.currentMap.length),1),We])])]),Object(a["createVNode"])("div",Ze,[(Object(a["openBlock"])(!0),Object(a["createBlock"])(a["Fragment"],null,Object(a["renderList"])(e.controlButtonList,(function(t,n){return Object(a["openBlock"])(),Object(a["createBlock"])("div",{class:"control-button-item",key:"button-".concat(n)},[Object(a["createVNode"])("div",Je,Object(a["toDisplayString"])(t.label),1),Object(a["createVNode"])("div",$e,[Object(a["createVNode"])(g,{modelValue:t.show,"onUpdate:modelValue":function(e){return t.show=e},onChange:function(n){return e.controlButtonChange(n,t.code)},size:"mini"},null,8,["modelValue","onUpdate:modelValue","onChange"])])])})),128))])],512),[[a["vShow"],e.visibleObj.controlPannel]]),Object(a["withDirectives"])(Object(a["createVNode"])(H,{"map-list":e.mapListRef,mapId:e.mapIdRef,onClosed:e.closeMapChoosen,onChangeMap:e.changeMap},null,8,["map-list","mapId","onClosed","onChangeMap"]),[[a["vShow"],e.visibleObj.map]])])})),tt=(n("99af"),n("c740"),n("4160"),n("a434"),n("a9e3"),n("b680"),n("b64b"),n("159b"),n("0769"),n("f3fc"),n("31b0")),nt=n.n(tt),at=n("ade3"),rt=(n("7f17"),n("6573")),ot=n.n(rt),ct=n("5530"),it=n("b047"),lt=n.n(it),ut=n("0644"),st=n.n(ut),dt=n("15a1"),ft={getAllScene:function(e){return Object(dt["a"])({url:"/tbs/getscene",method:"post",data:e})},getAllDevice:function(e){return Object(dt["a"])({url:"/tbs/getdevice",method:"post",data:e})},getAllLayer:function(e){return Object(dt["a"])({url:"/tbs/getlayer",method:"post",data:e})},getAllBuild:function(e){return Object(dt["a"])({url:"/tbs/getbuild",method:"post",data:e})},getAllHArea:function(e){return Object(dt["a"])({url:"/tbs/getharea",method:"post",data:e})},saveHArea:function(e){return Object(dt["a"])({url:"/tbs/saveharea",method:"post",data:e})},getOnehAreaSetDeivce:function(e){return Object(dt["a"])({url:"/tbs/getonehareasetdeivce",method:"post",data:e})},delHArea:function(e){return Object(dt["a"])({url:"/tbs/delharea",method:"post",data:e})},saveRule:function(e){return Object(dt["a"])({url:"/tbs/saverule",method:"post",data:e})},getRule:function(e){return Object(dt["a"])({url:"/tbs/getrule",method:"post",data:e})},delRule:function(e){return Object(dt["a"])({url:"/tbs/delrule",method:"post",data:e})}},pt={addCamera:function(e){return Object(dt["a"])({url:"/equip/camera/",method:"post",data:e})},delCamera:function(e){return Object(dt["a"])({url:"/equip/camera/".concat(e,"/"),method:"delete"})},getCameraData:function(e){return Object(dt["a"])({url:"/rcaec/bigwa",method:"post",data:e})},getCameraList:function(e){return Object(dt["a"])({url:"/equip/camera",params:e})}},mt={getAllAlamList:function(e){return Object(dt["a"])({url:"/rcaec/bigwa",method:"post",data:e})},getAllAlarmType:function(e){return Object(dt["a"])({url:"/tbs/getalarmtype",method:"post",data:e})},dealAlarmItem:function(e){return Object(dt["a"])({url:"/alarm/deal",method:"post",data:e})},dealAlarms:function(e){return Object(dt["a"])({url:"/alarm/dealall",method:"post",data:e})}},bt={getCommonApi:function(e){return Object(dt["a"])({url:"/rcaec/bigwa",method:"post",data:e})}},ht=n("9de4"),vt=n("362d"),Ot=n.n(vt),jt=(n("1276"),n("3835")),gt={basestation:"basestation",labelList:"labelList",person:"person",camera:"camera"},wt="List",yt=(Ke={},Object(at["a"])(Ke,gt.camera,{name:"摄像头",code:[gt.camera]+wt,title:"摄像头列表"}),Object(at["a"])(Ke,gt.basestation,{name:"设备管理",code:[gt.basestation]+wt,title:"基站列表"}),Object(at["a"])(Ke,gt.labelList,{name:"标签信息",code:[gt.labelList]+wt,title:"标签列表"}),Object(at["a"])(Ke,gt.person,{name:"人员信息",code:[gt.person]+wt,title:"人员列表"}),Ke),Vt={name:"电子围栏",code:"fence"},Nt={name:"报警管理",code:"alarm"},Ct=60,kt=(Qe={},Object(at["a"])(Qe,gt.basestation,[{label:"查看详情",clickCode:"showDetails"},{label:"编辑",clickCode:"edit"}]),Object(at["a"])(Qe,gt.labelList,[{label:"查看详情",clickCode:"showDetails"},{label:"轨迹回放",clickCode:"trackPlayback"},{label:"实时跟踪",clickCode:"tracking"}]),Object(at["a"])(Qe,gt.camera,[{label:"查看详情",clickCode:"showDetails"},{label:"查看实时视频",clickCode:"seeNowVideo"},{label:"查看历史视频",clickCode:"seeHistoryVideo"},{label:"编辑",clickCode:"edit"}]),Qe),xt={r:40,distance:20,width:100,height:100,basestationIcon:new Image,cameraIcon:new Image},Dt=["北","东北","东","东南","南","西南","西","西北"],Tt=Dt.map((function(e,t){return{label:e,value:String(t+1)}})),St={top:"M140,12a5,5,0,0,0-5-5H76L70,0,64,7H5a5,5,0,0,0-5,5V62a5,5,0,0,0,5,5H135a5,5,0,0,0,5-5Z",bottom:"M0,55a5,5,0,0,0,5,5H64l6,7,6-7h59a5,5,0,0,0,5-5V5a5,5,0,0,0-5-5H5A5,5,0,0,0,0,5Z",left:"M146,55a5,5,0,0,1-5,5H11a5,5,0,0,1-5-5V36L0,30l6-6V5a5,5,0,0,1,5-5H141a5,5,0,0,1,5,5Z",right:"M0,5A5,5,0,0,1,5,0H135a5,5,0,0,1,5,5V24l6,6-6,6V55a5,5,0,0,1-5,5H5a5,5,0,0,1-5-5Z"},Lt=["禁止进入","禁止外出","聚集报警","允许进入","允许外出","进入且限制停留时长","外出且限制停留时长"],It=Lt.map((function(e,t){return{label:e,value:String(t+1)}})),Rt=function(e){e=String(e);var t=It.findIndex((function(t){return t.value===e}));return It[t].label},_t={width:6e3,height:3e3},Bt={stroke:"red",fill:"rgba(0,255,0,0.1)",strokeWidth:3,perfectDrawEnabled:!1};function Pt(e,t,n){return{x:e.x-t.x*n,y:e.y-t.y*n}}function Mt(e,t){var n=e.offsetWidth,a=e.offsetHeight,r=window.innerWidth,o=window.innerHeight,c={left:t.left,top:t.top};return t.left+n>r&&(c.left=r-n),t.top+a+Ct>o&&(c.top=o-Ct-a),c}function At(e,t){var n=t.sx,a=t.sy,r=t.scale;return{x:(e.x-n)/r,y:(e.y-Ct-a)/r}}function Ft(e){var t=e.x,n=e.y,a=e.sx,r=e.sy,o=e.scale;return{x:~~((t-a)/o),y:~~((n-r-Ct)/o)}}function Et(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=e.pathSrc,a=e.width,r=e.height,o=e.color,c=document.createElementNS("http://www.w3.org/2000/svg","svg");c.setAttribute("width","".concat(a)),c.setAttribute("height","".concat(r)),c.setAttribute("x","0"),c.setAttribute("y","0"),c.setAttribute("viewBox","0 0 ".concat(t?a:"1024"," ").concat(t?r:"1024"));var i=document.createElementNS("http://www.w3.org/2000/svg","path");i.setAttribute("d",t?St.bottom:n),i.setAttribute("width","100%"),i.setAttribute("height","100%"),i.setAttribute("fill","".concat(o)),c.appendChild(i);var l=(new XMLSerializer).serializeToString(c),u=window.btoa(l),s=new window.Image;return s.src="data:image/svg+xml;base64,".concat(u),s}function Ht(){function e(){return(65536*(1+Math.random())|0).toString(16).substring(1)}return e()+e()+"-"+e()+"-"+e()+"-"+e()+"-"+e()+e()+e()}function zt(e){return Ut.apply(this,arguments)}function Ut(){return Ut=Object(L["a"])(regeneratorRuntime.mark((function e(t){var n,a,r,o,c,i,l,u,s,d,f,p;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(n=t.defdata.layrestype,"3"!==n){e.next=11;break}return a=t,r=a.defdata,o=r.layinfo,c=r.W,i=r.H,l=r.Color,u={pathSrc:o,width:c,height:i,color:l},e.next=7,Et(u);case 7:return s=e.sent,e.abrupt("return",s);case 11:return d=t,f=d.defdata.layinfo,p=new window.Image,p.src=ht["c"]+f,e.abrupt("return",p);case 16:case"end":return e.stop()}}),e)}))),Ut.apply(this,arguments)}var qt=function(){var e;(function(e){e[e["location"]=3]="location",e[e["alarm"]=1]="alarm",e[e["trans"]=199]="trans"})(e||(e={}));var t={location:"",alarm:""},n=Object(H["d"])();return n.forEach((function(n){n.servertype===e.location&&(t.location="ws://".concat(n.serverip,":").concat(n.serverport,"/").concat(e[3])),n.servertype===e.alarm&&(t.alarm="ws://".concat(n.serverip,":").concat(n.serverport,"/").concat(e[1]))})),t},Yt={mounted:function(e,t){var n=t.value.split(","),a=Object(jt["a"])(n,2),r=a[0],o=a[1],c=e.querySelector("."+r),i=e.querySelector("."+o);c.style.cssText+=";cursor:move;",i.style.cssText+=";top:5rem;";var l=function(){return function(e,t){return getComputedStyle(e,null)[t]}}();c.onmousedown=function(e){var t=e.clientX-c.offsetLeft,n=e.clientY-c.offsetTop,a=i.offsetWidth,r=i.offsetHeight,o=document.body.clientWidth,u=document.body.clientHeight-Ct+20,s=i.offsetLeft,d=o-i.offsetLeft-a,f=i.offsetTop,p=u-i.offsetTop-r,m=l(i,"left"),b=l(i,"top");m.includes("%")?(m=+document.body.clientWidth*(+m.replace(/%/g,"")/100),b=+document.body.clientHeight*(+b.replace(/%/g,"")/100)):(m=+m.replace(/\px/g,""),b=+b.replace(/\px/g,"")),document.onmousemove=function(e){var a=e.clientX-t,r=e.clientY-n;-a>s?a=-s:a>d&&(a=d),-r>f?r=-f:r>p&&(r=p),i.style.cssText+=";left:".concat(a+m,"px;top:").concat(r+b,"px;")},document.onmouseup=function(){document.onmousemove=null,document.onmouseup=null}}}},Gt=Yt,Xt=Gt,Wt=Object(a["withScopeId"])("data-v-f0915244"),Zt=Wt((function(e,t,n,r,o,c){return Object(a["openBlock"])(),Object(a["createBlock"])("nav",null,[Object(a["createVNode"])("ul",null,[(Object(a["openBlock"])(!0),Object(a["createBlock"])(a["Fragment"],null,Object(a["renderList"])(e.navList,(function(t,n){return Object(a["openBlock"])(),Object(a["createBlock"])("li",{key:t.name,class:{active:n===e.navIndex},onClick:function(a){return e.handleNavClick(t,n)}},[Object(a["createVNode"])("span",{class:"icon iconfont",innerHTML:t.icon},null,8,["innerHTML"]),Object(a["createVNode"])("div",null,Object(a["toDisplayString"])(t.name),1)],10,["onClick"])})),128))])])})),Jt=Object(a["defineComponent"])({name:"MainNav",emits:["navClick"],setup:function(e,t){var n=t.emit,r=[{name:"主页",icon:"&#xe61d;",code:"index"},Object(ct["a"])({icon:"&#xe61a;"},Vt),Object(ct["a"])({icon:"&#xe7e8;"},yt[gt.camera]),Object(ct["a"])({icon:"&#xe603;"},yt[gt.basestation]),Object(ct["a"])({icon:"&#xe6d8;"},yt[gt.labelList]),Object(ct["a"])({icon:"&#xe60d;"},yt[gt.person]),Object(ct["a"])({icon:"&#xe624;"},Nt)],o=Object(a["shallowRef"])(0);function c(e,t){o.value!==t&&(o.value=t);var a=e.code;a&&n("navClick",a)}function i(){o.value=0}return{navList:r,navIndex:o,handleNavClick:c,resetIndex:i}}});n("71ca");Jt.render=Zt,Jt.__scopeId="data-v-f0915244";var $t=Jt,Kt=(n("841c"),Object(a["createTextVNode"])("搜索")),Qt=Object(a["createTextVNode"])("详情");function en(e,t,n,r,o,c){var i=Object(a["resolveComponent"])("el-input"),l=Object(a["resolveComponent"])("el-form-item"),u=Object(a["resolveComponent"])("el-button"),s=Object(a["resolveComponent"])("el-form"),d=Object(a["resolveComponent"])("el-table-column"),f=Object(a["resolveComponent"])("el-table"),p=Object(a["resolveComponent"])("el-pagination");return Object(a["openBlock"])(),Object(a["createBlock"])("div",null,[Object(a["createVNode"])(s,{model:e.params,"label-width":"80px",inline:!0,size:"small"},{default:Object(a["withCtx"])((function(){return[Object(a["createVNode"])(l,{label:"设备编号"},{default:Object(a["withCtx"])((function(){return[Object(a["createVNode"])(i,{modelValue:e.params.search,"onUpdate:modelValue":t[1]||(t[1]=function(t){return e.params.search=t}),clearable:"",onChange:e.search},null,8,["modelValue","onChange"])]})),_:1}),Object(a["createVNode"])(l,{label:""},{default:Object(a["withCtx"])((function(){return[Object(a["createVNode"])(u,{type:"primary",onClick:e.search},{default:Object(a["withCtx"])((function(){return[Kt]})),_:1},8,["onClick"])]})),_:1})]})),_:1},8,["model"]),Object(a["createVNode"])(f,{data:e.tableData,border:"","tooltip-effect":"dark"},{default:Object(a["withCtx"])((function(){return[Object(a["createVNode"])(d,{label:"设备",prop:"DeviceName","show-overflow-tooltip":"",align:"center",width:"110"}),Object(a["createVNode"])(d,{label:"姓名",prop:"Username","show-overflow-tooltip":"",align:"center"}),Object(a["createVNode"])(d,{label:"位置","show-overflow-tooltip":"",align:"center"},{default:Object(a["withCtx"])((function(t){var n=t.row;return[Object(a["createTextVNode"])(Object(a["toDisplayString"])(e.getMap(n.snum)||"未上线"),1)]})),_:1}),Object(a["createVNode"])(d,{width:"160",label:"操作",align:"center"},{default:Object(a["withCtx"])((function(t){var n=t.row;return[Object(a["createVNode"])(u,{size:"mini",type:"primary",onClick:function(t){return e.handleDetail(n)}},{default:Object(a["withCtx"])((function(){return[Qt]})),_:2},1032,["onClick"])]})),_:1})]})),_:1},8,["data"]),Object(a["withDirectives"])(Object(a["createVNode"])(p,{background:"","current-page":e.params.page,"onUpdate:current-page":t[2]||(t[2]=function(t){return e.params.page=t}),"page-size":e.params.size,layout:"prev, pager, next",total:e.total,onCurrentChange:e.changePage},null,8,["current-page","page-size","total","onCurrentChange"]),[[a["vShow"],e.total&&e.tableData&&e.tableData.length]])])}var tn={getPersonData:function(e){return Object(dt["a"])({url:"/person/criminal/".concat(e,"/")})},getPersonList:function(e){return Object(dt["a"])({url:"/rcaec/bigwa",method:"post",data:e})}},nn="clicked",an=Object(a["defineComponent"])({name:"Label",setup:function(e,t){var n=t.emit,r=Object(a["reactive"])({page:1,size:10,prop:"Epaulet",search:""}),o=Object(a["ref"])([]),c=Object(a["ref"])(0);function i(){return l.apply(this,arguments)}function l(){return l=Object(L["a"])(regeneratorRuntime.mark((function e(){var t,n,a,i,l;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t={act:"rYVwSSwhmDcZRL0yQbO1611304770982"},e.next=3,tn.getPersonList(t);case 3:n=e.sent,a=n.data,i=a,l=""===r.search?w(i,r.page):w(i,r.page,r.prop,r.search),o.value=l,c.value=y(i,r.prop,r.search);case 9:case"end":return e.stop()}}),e)}))),l.apply(this,arguments)}function u(e){return s.apply(this,arguments)}function s(){return s=Object(L["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:console.log(t);case 1:case"end":return e.stop()}}),e)}))),s.apply(this,arguments)}function d(e){return f.apply(this,arguments)}function f(){return f=Object(L["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:n("showEquipDetails",t,gt.person),n(nn);case 2:case"end":return e.stop()}}),e)}))),f.apply(this,arguments)}function p(e){d(e)}function m(e){return b.apply(this,arguments)}function b(){return b=Object(L["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:console.log(t);case 1:case"end":return e.stop()}}),e)}))),b.apply(this,arguments)}function h(e){return v.apply(this,arguments)}function v(){return v=Object(L["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:r.page=t,i();case 2:case"end":return e.stop()}}),e)}))),v.apply(this,arguments)}function O(){return j.apply(this,arguments)}function j(){return j=Object(L["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:r.page=1,i();case 2:case"end":return e.stop()}}),e)}))),j.apply(this,arguments)}return Object(a["onMounted"])((function(){i()})),{params:r,tableData:o,total:c,handleEdit:u,handleDelete:m,changePage:h,search:O,getMap:V,handleDetail:p}}});an.render=en;var rn=an,on=Object(a["createTextVNode"])("搜索"),cn=Object(a["createTextVNode"])("详情");function ln(e,t,n,r,o,c){var i=Object(a["resolveComponent"])("el-input"),l=Object(a["resolveComponent"])("el-form-item"),u=Object(a["resolveComponent"])("el-button"),s=Object(a["resolveComponent"])("el-form"),d=Object(a["resolveComponent"])("el-table-column"),f=Object(a["resolveComponent"])("el-table"),p=Object(a["resolveComponent"])("el-pagination");return Object(a["openBlock"])(),Object(a["createBlock"])("div",null,[Object(a["createVNode"])(s,{model:e.params,"label-width":"80px",inline:!0,size:"small"},{default:Object(a["withCtx"])((function(){return[Object(a["createVNode"])(l,{label:"摄像头IP"},{default:Object(a["withCtx"])((function(){return[Object(a["createVNode"])(i,{modelValue:e.params.search,"onUpdate:modelValue":t[1]||(t[1]=function(t){return e.params.search=t}),clearable:"",onChange:e.search},null,8,["modelValue","onChange"])]})),_:1}),Object(a["createVNode"])(l,{label:""},{default:Object(a["withCtx"])((function(){return[Object(a["createVNode"])(u,{type:"primary",onClick:e.search},{default:Object(a["withCtx"])((function(){return[on]})),_:1},8,["onClick"])]})),_:1})]})),_:1},8,["model"]),Object(a["createVNode"])(f,{data:e.tableData,border:"","tooltip-effect":"dark"},{default:Object(a["withCtx"])((function(){return[Object(a["createVNode"])(d,{label:"IP",prop:"dnum","show-overflow-tooltip":"",align:"center",width:"110"}),Object(a["createVNode"])(d,{label:"名称",prop:"dname","show-overflow-tooltip":"",align:"center"}),Object(a["createVNode"])(d,{label:"位置","show-overflow-tooltip":"",align:"center"},{default:Object(a["withCtx"])((function(t){var n=t.row;return[Object(a["createTextVNode"])(Object(a["toDisplayString"])(e.getMap(n.snum)),1)]})),_:1}),Object(a["createVNode"])(d,{width:"160",label:"操作",align:"center"},{default:Object(a["withCtx"])((function(t){var n=t.row;return[Object(a["createVNode"])(u,{size:"mini",type:"primary",onClick:function(t){return e.handleDetail(n)}},{default:Object(a["withCtx"])((function(){return[cn]})),_:2},1032,["onClick"])]})),_:1})]})),_:1},8,["data"]),Object(a["withDirectives"])(Object(a["createVNode"])(p,{background:"","current-page":e.params.page,"onUpdate:current-page":t[2]||(t[2]=function(t){return e.params.page=t}),"page-size":e.params.size,layout:"prev, pager, next",total:e.total,onCurrentChange:e.changePage},null,8,["current-page","page-size","total","onCurrentChange"]),[[a["vShow"],e.total&&e.tableData&&e.tableData.length]])])}var un="clicked",sn=Object(a["defineComponent"])({name:"Camera",setup:function(e,t){var n=t.emit,r=Object(a["reactive"])({page:1,size:10,prop:"dnum",search:""}),o=Object(a["ref"])([]),c=Object(a["shallowRef"])(0);function i(){return l.apply(this,arguments)}function l(){return l=Object(L["a"])(regeneratorRuntime.mark((function e(){var t,n,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:t=Object(H["a"])(),n=[],t.filter((function(e){"Camera_IP"===e.dtypecode&&n.push(e)})),a=""===r.search?w(n,r.page):w(n,r.page,r.prop,r.search),o.value=a,c.value=y(n,r.prop,r.search);case 6:case"end":return e.stop()}}),e)}))),l.apply(this,arguments)}function u(e){return s.apply(this,arguments)}function s(){return s=Object(L["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:console.log(t);case 1:case"end":return e.stop()}}),e)}))),s.apply(this,arguments)}function d(e){return f.apply(this,arguments)}function f(){return f=Object(L["a"])(regeneratorRuntime.mark((function e(t){var a,r,o;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a={act:"fCGtP4nXdRZjr6TYeiN1611196242913",DeviceIdS:t},e.next=3,pt.getCameraData(a);case 3:r=e.sent,o=r.data,n("showEquipDetails",o[0][0],gt.camera),n(un);case 7:case"end":return e.stop()}}),e)}))),f.apply(this,arguments)}function p(e){d(e.dids)}function m(e,t){pt.delCamera(t.dids).then((function(){ot.a.success("删除成功")})).catch((function(e){ot.a.error(e)}))}function b(e){return h.apply(this,arguments)}function h(){return h=Object(L["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:r.page=t,i();case 2:case"end":return e.stop()}}),e)}))),h.apply(this,arguments)}function v(){return O.apply(this,arguments)}function O(){return O=Object(L["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:r.page=1,i();case 2:case"end":return e.stop()}}),e)}))),O.apply(this,arguments)}function j(){n("addEquip",gt.camera)}return Object(a["onMounted"])((function(){i()})),{params:r,tableData:o,total:c,handleEdit:u,handleDelete:m,changePage:b,search:v,addEquip:j,getMap:V,handleDetail:p}}});sn.render=ln;var dn=sn,fn=Object(a["createTextVNode"])("搜索"),pn=Object(a["createTextVNode"])("详情");function mn(e,t,n,r,o,c){var i=Object(a["resolveComponent"])("el-input"),l=Object(a["resolveComponent"])("el-form-item"),u=Object(a["resolveComponent"])("el-button"),s=Object(a["resolveComponent"])("el-form"),d=Object(a["resolveComponent"])("el-table-column"),f=Object(a["resolveComponent"])("el-table"),p=Object(a["resolveComponent"])("el-pagination");return Object(a["openBlock"])(),Object(a["createBlock"])("div",null,[Object(a["createVNode"])(s,{model:e.params,"label-width":"80px",inline:!0,size:"small"},{default:Object(a["withCtx"])((function(){return[Object(a["createVNode"])(l,{label:"基站编号"},{default:Object(a["withCtx"])((function(){return[Object(a["createVNode"])(i,{modelValue:e.params.search,"onUpdate:modelValue":t[1]||(t[1]=function(t){return e.params.search=t}),clearable:"",onChange:e.search},null,8,["modelValue","onChange"])]})),_:1}),Object(a["createVNode"])(l,{label:""},{default:Object(a["withCtx"])((function(){return[Object(a["createVNode"])(u,{type:"primary",onClick:e.search},{default:Object(a["withCtx"])((function(){return[fn]})),_:1},8,["onClick"])]})),_:1})]})),_:1},8,["model"]),Object(a["createVNode"])(f,{data:e.tableData,border:"","tooltip-effect":"dark"},{default:Object(a["withCtx"])((function(){return[Object(a["createVNode"])(d,{label:"编号",prop:"dnum","show-overflow-tooltip":"",align:"center",width:"110"}),Object(a["createVNode"])(d,{label:"名称",prop:"dname","show-overflow-tooltip":"",align:"center"}),Object(a["createVNode"])(d,{label:"位置","show-overflow-tooltip":"",align:"center"},{default:Object(a["withCtx"])((function(t){var n=t.row;return[Object(a["createTextVNode"])(Object(a["toDisplayString"])(e.getMap(n.snum)),1)]})),_:1}),Object(a["createVNode"])(d,{width:"160",label:"操作",align:"center"},{default:Object(a["withCtx"])((function(t){var n=t.row;return[Object(a["createVNode"])(u,{size:"mini",type:"primary",onClick:function(t){return e.handleDetail(n)}},{default:Object(a["withCtx"])((function(){return[pn]})),_:2},1032,["onClick"])]})),_:1})]})),_:1},8,["data"]),Object(a["withDirectives"])(Object(a["createVNode"])(p,{background:"","current-page":e.params.page,"onUpdate:current-page":t[2]||(t[2]=function(t){return e.params.page=t}),"page-size":e.params.size,layout:"prev, pager, next",total:e.total,onCurrentChange:e.changePage},null,8,["current-page","page-size","total","onCurrentChange"]),[[a["vShow"],e.total&&e.tableData&&e.tableData.length]])])}var bn={addStation:function(e){return Object(dt["a"])({url:"/equip/baseStation/",method:"post",data:e})},delStation:function(e){return Object(dt["a"])({url:"/equip/baseStation/".concat(e,"/"),method:"delete"})},getStationData:function(e){return Object(dt["a"])({url:"/rcaec/bigwa",method:"post",data:e})},getStationList:function(e){var t=e.page,n=e.size;return Object(dt["a"])({url:"/equip/baseStation/?page=".concat(t,"&size=").concat(n)})}},hn="clicked",vn=Object(a["defineComponent"])({name:"Basestation",setup:function(e,t){var n=t.emit,r=Object(a["reactive"])({page:1,size:10,prop:"dnum",search:""}),o=Object(a["ref"])([]),c=Object(a["ref"])(0);function i(){return l.apply(this,arguments)}function l(){return l=Object(L["a"])(regeneratorRuntime.mark((function e(){var t,n,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:t=Object(H["a"])(),n=[],t.filter((function(e){"LocateStation"===e.dtypecode&&n.push(e)})),a=""===r.search?w(n,r.page):w(n,r.page,r.prop,r.search),o.value=a,c.value=y(n,r.prop,r.search);case 6:case"end":return e.stop()}}),e)}))),l.apply(this,arguments)}function u(e){console.log(e)}function s(e){return d.apply(this,arguments)}function d(){return d=Object(L["a"])(regeneratorRuntime.mark((function e(t){var a,r,o;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a={act:"fCGtP4nXdRZjr6TYeiN1611196242913",DeviceIdS:t},e.next=3,bn.getStationData(a);case 3:r=e.sent,o=r.data,n("showEquipDetails",o[0][0],gt.basestation),n(hn);case 7:case"end":return e.stop()}}),e)}))),d.apply(this,arguments)}function f(e){s(e.dids)}function p(e){bn.delStation(e.dids).then((function(){ot.a.success("删除成功")})).catch((function(e){ot.a.error(e)}))}function m(){n("addEquip",gt.camera)}function b(e){return h.apply(this,arguments)}function h(){return h=Object(L["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:r.page=t,i();case 2:case"end":return e.stop()}}),e)}))),h.apply(this,arguments)}function v(){return O.apply(this,arguments)}function O(){return O=Object(L["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:r.page=1,i();case 2:case"end":return e.stop()}}),e)}))),O.apply(this,arguments)}return Object(a["onMounted"])((function(){i()})),{params:r,tableData:o,total:c,handleEdit:u,handleDetail:f,handleDelete:p,changePage:b,search:v,addEquip:m,getMap:V}}});vn.render=mn;var On=vn,jn={class:"fence-box"};function gn(e,t,n,r,o,c){return Object(a["openBlock"])(),Object(a["createBlock"])("ul",jn,[(Object(a["openBlock"])(!0),Object(a["createBlock"])(a["Fragment"],null,Object(a["renderList"])(e.list,(function(t,n){return Object(a["openBlock"])(),Object(a["createBlock"])("li",{key:n,class:{active:0===n},onClick:function(a){return e.handleClick(t,n)}},Object(a["toDisplayString"])(t.label),11,["onClick"])})),128))])}var wn={1:"revoke",2:"redraw",3:"cancel",4:"finish"},yn=Object(a["defineComponent"])({name:"FenceBox",emits:Object.keys(wn).map((function(e){return wn[e]})),setup:function(e,t){var n=t.emit,a=[{label:"绘制"},{label:"撤销"},{label:"重新绘制"},{label:"取消"},{label:"完成"}];function r(e,t){n(wn[t])}return{list:a,handleClick:r}}});yn.render=gn;var Vn=yn,Nn=Object(a["withScopeId"])("data-v-6e671808"),Cn=Nn((function(e,t,n,r,o,c){return Object(a["withDirectives"])((Object(a["openBlock"])(),Object(a["createBlock"])("div",{ref:"contextMenuRef",class:["context-menu",{hidden:e.hiddenRef}],style:e.styleAttrs?e.styleAttrs:{}},[(Object(a["openBlock"])(!0),Object(a["createBlock"])(a["Fragment"],null,Object(a["renderList"])(e.contextmenuList,(function(t){return Object(a["openBlock"])(),Object(a["createBlock"])("div",{key:t.label,class:"menu-item",onClick:function(n){return e.handleClickContentmenu(t.clickCode)}},Object(a["toDisplayString"])(t.label),9,["onClick"])})),128))],6)),[[a["vShow"],e.contextmenuList.length]])})),kn="showDetails",xn="trackPlayback",Dn="edit",Tn="clicked",Sn="seeNowVideo",Ln="seeHistoryVideo",In=[kn,xn,Dn,Tn,Sn,Ln],Rn=Object(a["defineComponent"])({props:{type:{type:String,default:gt.basestation},contextmenuList:{type:Array,default:function(){return[]}},contxtmenuPosition:{type:Object,default:function(){return{}}}},emits:In,setup:function(e,t){var n=t.emit,r=Object(a["shallowReactive"])({x:0,y:0}),o=Object(a["shallowRef"])(!0),c=Object(a["ref"])();function i(t){In.includes(t)&&n(t,e.type),n(Tn)}function l(){Object(a["nextTick"])((function(){var t=Mt(c.value,e.contxtmenuPosition),n={};for(var a in t)n[a]=t[a]+"px";Object.assign(r,n),o.value=!1}))}return Object(a["watch"])((function(){return e.contxtmenuPosition}),(function(){l()})),Object(a["onMounted"])((function(){l()})),{contextMenuRef:c,styleAttrs:r,hiddenRef:o,handleClickContentmenu:i,getPx:l}}});n("3ab4");Rn.render=Cn,Rn.__scopeId="data-v-6e671808";var _n=Rn,Bn={class:"custom-form"},Pn={class:"form-header"},Mn={class:"title"},An=Object(a["createVNode"])("i",{class:"el-icon el-icon-close"},null,-1),Fn={class:"form-body"};function En(e,t,n,r,o,c){var i=Object(a["resolveComponent"])("el-form-item"),l=Object(a["resolveComponent"])("el-col"),u=Object(a["resolveComponent"])("el-row"),s=Object(a["resolveComponent"])("el-image"),d=Object(a["resolveComponent"])("el-input"),f=Object(a["resolveComponent"])("el-option"),p=Object(a["resolveComponent"])("el-select"),m=Object(a["resolveComponent"])("el-form"),b=Object(a["resolveDirective"])("drag-dialog");return Object(a["withDirectives"])((Object(a["openBlock"])(),Object(a["createBlock"])("div",null,[Object(a["createVNode"])("div",Bn,[Object(a["createVNode"])("div",Pn,[Object(a["createVNode"])("div",Mn,Object(a["toDisplayString"])(e.formTitle),1),Object(a["createVNode"])("button",{class:"closebtx",onClick:t[1]||(t[1]=function(){return e.handleClickHeaderClose&&e.handleClickHeaderClose.apply(e,arguments)})},[An])]),Object(a["createVNode"])("div",Fn,[Object(a["createVNode"])(m,{ref:"formContentRef",model:e.form,rules:e.rules,"label-width":"110px",inline:!1,size:"small"},{default:Object(a["withCtx"])((function(){return[e.formType===e.types.labelList?(Object(a["openBlock"])(),Object(a["createBlock"])(u,{key:0,gutter:10},{default:Object(a["withCtx"])((function(){return[Object(a["createVNode"])(l,{span:12,offset:0},{default:Object(a["withCtx"])((function(){return[Object(a["createVNode"])(i,{label:"名称：",prop:"shapeName"},{default:Object(a["withCtx"])((function(){return[Object(a["createTextVNode"])(Object(a["toDisplayString"])(e.form.DeviceName),1)]})),_:1})]})),_:1}),Object(a["createVNode"])(l,{span:12,offset:0},{default:Object(a["withCtx"])((function(){return[Object(a["createVNode"])(i,{label:"编号：",prop:"roomNum"},{default:Object(a["withCtx"])((function(){return[Object(a["createTextVNode"])(Object(a["toDisplayString"])(e.form.DeviceNum),1)]})),_:1})]})),_:1}),Object(a["createVNode"])(l,{span:12,offset:0},{default:Object(a["withCtx"])((function(){return[Object(a["createVNode"])(i,{label:"类型："},{default:Object(a["withCtx"])((function(){return[Object(a["createTextVNode"])(Object(a["toDisplayString"])(e.form.DeviceType),1)]})),_:1})]})),_:1}),Object(a["createVNode"])(l,{span:12,offset:0},{default:Object(a["withCtx"])((function(){return[Object(a["createVNode"])(i,{label:"位置："},{default:Object(a["withCtx"])((function(){return[Object(a["createTextVNode"])(Object(a["toDisplayString"])(e.form.SceneName||"未上线"),1)]})),_:1})]})),_:1}),Object(a["createVNode"])(l,{span:12,offset:0},{default:Object(a["withCtx"])((function(){return[Object(a["createVNode"])(i,{label:"状态："},{default:Object(a["withCtx"])((function(){return[Object(a["createTextVNode"])(Object(a["toDisplayString"])(e.form.IsUse?"正常":"异常"),1)]})),_:1})]})),_:1}),Object(a["createVNode"])(l,{span:12,offset:0},{default:Object(a["withCtx"])((function(){return[Object(a["createVNode"])(i,{label:"电量："},{default:Object(a["withCtx"])((function(){return[Object(a["createTextVNode"])(Object(a["toDisplayString"])(e.form.shapeName),1)]})),_:1})]})),_:1})]})),_:1})):e.formType===e.types.person?(Object(a["openBlock"])(),Object(a["createBlock"])(u,{key:1,gutter:10},{default:Object(a["withCtx"])((function(){return[Object(a["createVNode"])(l,{span:12,offset:0},{default:Object(a["withCtx"])((function(){return[Object(a["createVNode"])(i,{label:"姓名：",prop:"shapeName"},{default:Object(a["withCtx"])((function(){return[Object(a["createTextVNode"])(Object(a["toDisplayString"])(e.form.Username),1)]})),_:1})]})),_:1}),Object(a["createVNode"])(l,{span:12,offset:0},{default:Object(a["withCtx"])((function(){return[Object(a["createVNode"])(i,{label:"标签：",prop:"roomNum"},{default:Object(a["withCtx"])((function(){return[Object(a["createTextVNode"])(Object(a["toDisplayString"])(e.form.DeviceName?e.form.DeviceName:"未绑定"),1)]})),_:1})]})),_:1}),Object(a["createVNode"])(l,{span:24,offset:0},{default:Object(a["withCtx"])((function(){return[Object(a["createVNode"])(i,{label:"照片："},{default:Object(a["withCtx"])((function(){return[Object(a["createVNode"])(s,{src:e.form.Photo?e.form.Photo:e.form.src},null,8,["src"])]})),_:1})]})),_:1}),Object(a["createVNode"])(l,{span:12,offset:0},{default:Object(a["withCtx"])((function(){return[Object(a["createVNode"])(i,{label:"类型："},{default:Object(a["withCtx"])((function(){return[Object(a["createTextVNode"])(Object(a["toDisplayString"])(e.form.Personnel_category),1)]})),_:1})]})),_:1}),Object(a["createVNode"])(l,{span:12,offset:0},{default:Object(a["withCtx"])((function(){return[Object(a["createVNode"])(i,{label:"职位："},{default:Object(a["withCtx"])((function(){return[Object(a["createTextVNode"])(Object(a["toDisplayString"])(e.form.Position),1)]})),_:1})]})),_:1}),Object(a["createVNode"])(l,{span:12,offset:0},{default:Object(a["withCtx"])((function(){return[Object(a["createVNode"])(i,{label:"状态："},{default:Object(a["withCtx"])((function(){return[Object(a["createTextVNode"])(Object(a["toDisplayString"])(0===e.form.Fettle?"上船":"离船"),1)]})),_:1})]})),_:1}),Object(a["createVNode"])(l,{span:12,offset:0},{default:Object(a["withCtx"])((function(){return[Object(a["createVNode"])(i,{label:"电量："},{default:Object(a["withCtx"])((function(){return[Object(a["createTextVNode"])(Object(a["toDisplayString"])(e.form.BraceletVoltage),1)]})),_:1})]})),_:1})]})),_:1})):e.formType===e.types.basestation?(Object(a["openBlock"])(),Object(a["createBlock"])(u,{key:2,gutter:10},{default:Object(a["withCtx"])((function(){return[Object(a["createVNode"])(l,{span:24,offset:0},{default:Object(a["withCtx"])((function(){return[Object(a["createVNode"])(i,{label:"基站名称：",prop:"shapeName"},{default:Object(a["withCtx"])((function(){return[e.editable?(Object(a["openBlock"])(),Object(a["createBlock"])(d,{key:0,modelValue:e.form.DeviceName,"onUpdate:modelValue":t[2]||(t[2]=function(t){return e.form.DeviceName=t}),modelModifiers:{trim:!0},placeholder:"请输入基站名称",clearable:""},null,8,["modelValue"])):(Object(a["openBlock"])(),Object(a["createBlock"])(a["Fragment"],{key:1},[Object(a["createTextVNode"])(Object(a["toDisplayString"])(e.form.DeviceName),1)],64))]})),_:1})]})),_:1}),Object(a["createVNode"])(l,{span:24,offset:0},{default:Object(a["withCtx"])((function(){return[Object(a["createVNode"])(i,{label:"基站编号：",prop:"ip"},{default:Object(a["withCtx"])((function(){return[e.editable?(Object(a["openBlock"])(),Object(a["createBlock"])(d,{key:0,modelValue:e.form.DeviceNum,"onUpdate:modelValue":t[3]||(t[3]=function(t){return e.form.DeviceNum=t}),modelModifiers:{trim:!0},placeholder:"请输入基站编号",clearable:""},null,8,["modelValue"])):(Object(a["openBlock"])(),Object(a["createBlock"])(a["Fragment"],{key:1},[Object(a["createTextVNode"])(Object(a["toDisplayString"])(e.form.DeviceNum),1)],64))]})),_:1})]})),_:1}),Object(a["createVNode"])(l,{span:12,offset:0},{default:Object(a["withCtx"])((function(){return[Object(a["createVNode"])(i,{label:"基站x：",prop:"x"},{default:Object(a["withCtx"])((function(){return[e.editable?(Object(a["openBlock"])(),Object(a["createBlock"])(d,{key:0,modelValue:e.form.x,"onUpdate:modelValue":t[4]||(t[4]=function(t){return e.form.x=t}),modelModifiers:{trim:!0},placeholder:"x",clearable:""},null,8,["modelValue"])):(Object(a["openBlock"])(),Object(a["createBlock"])(a["Fragment"],{key:1},[Object(a["createTextVNode"])(Object(a["toDisplayString"])(e.form.x),1)],64))]})),_:1})]})),_:1}),Object(a["createVNode"])(l,{span:12,offset:0},{default:Object(a["withCtx"])((function(){return[Object(a["createVNode"])(i,{label:"基站y：",prop:"y"},{default:Object(a["withCtx"])((function(){return[e.editable?(Object(a["openBlock"])(),Object(a["createBlock"])(d,{key:0,modelValue:e.form.y,"onUpdate:modelValue":t[5]||(t[5]=function(t){return e.form.y=t}),modelModifiers:{trim:!0},placeholder:"y",clearable:""},null,8,["modelValue"])):(Object(a["openBlock"])(),Object(a["createBlock"])(a["Fragment"],{key:1},[Object(a["createTextVNode"])(Object(a["toDisplayString"])(e.form.y),1)],64))]})),_:1})]})),_:1}),Object(a["createVNode"])(l,{span:24,offset:0},{default:Object(a["withCtx"])((function(){return[Object(a["createVNode"])(i,{label:"基站类型：",prop:"type"},{default:Object(a["withCtx"])((function(){return[e.editable?(Object(a["openBlock"])(),Object(a["createBlock"])(p,{key:0,modelValue:e.form.DeviceType,"onUpdate:modelValue":t[6]||(t[6]=function(t){return e.form.DeviceType=t}),clearable:"",placeholder:"请选择基站类型"},{default:Object(a["withCtx"])((function(){return[Object(a["createVNode"])(f,{label:"零维基站",value:"0"}),Object(a["createVNode"])(f,{label:"一维基站",value:"1"})]})),_:1},8,["modelValue"])):(Object(a["openBlock"])(),Object(a["createBlock"])(a["Fragment"],{key:1},[Object(a["createTextVNode"])(Object(a["toDisplayString"])(e.form.DeviceType),1)],64))]})),_:1})]})),_:1})]})),_:1})):(Object(a["openBlock"])(),Object(a["createBlock"])(u,{key:3,gutter:10},{default:Object(a["withCtx"])((function(){return[Object(a["createVNode"])(l,{span:24,offset:0},{default:Object(a["withCtx"])((function(){return[Object(a["createVNode"])(i,{label:"摄像头名称：",prop:"shapeName"},{default:Object(a["withCtx"])((function(){return[e.editable?(Object(a["openBlock"])(),Object(a["createBlock"])(d,{key:0,modelValue:e.form.DeviceName,"onUpdate:modelValue":t[7]||(t[7]=function(t){return e.form.DeviceName=t}),modelModifiers:{trim:!0},placeholder:"请输入摄像头名称",clearable:""},null,8,["modelValue"])):(Object(a["openBlock"])(),Object(a["createBlock"])(a["Fragment"],{key:1},[Object(a["createTextVNode"])(Object(a["toDisplayString"])(e.form.DeviceName),1)],64))]})),_:1})]})),_:1}),Object(a["createVNode"])(l,{span:24,offset:0},{default:Object(a["withCtx"])((function(){return[Object(a["createVNode"])(i,{label:"摄像头ip：",prop:"DeviceNum"},{default:Object(a["withCtx"])((function(){return[e.editable?(Object(a["openBlock"])(),Object(a["createBlock"])(d,{key:0,modelValue:e.form.DeviceNum,"onUpdate:modelValue":t[8]||(t[8]=function(t){return e.form.DeviceNum=t}),modelModifiers:{trim:!0},placeholder:"请输入摄像头ip",clearable:""},null,8,["modelValue"])):(Object(a["openBlock"])(),Object(a["createBlock"])(a["Fragment"],{key:1},[Object(a["createTextVNode"])(Object(a["toDisplayString"])(e.form.DeviceNum),1)],64))]})),_:1})]})),_:1}),Object(a["createVNode"])(l,{span:12,offset:0},{default:Object(a["withCtx"])((function(){return[Object(a["createVNode"])(i,{label:"摄像头x：",prop:"x"},{default:Object(a["withCtx"])((function(){return[e.editable?(Object(a["openBlock"])(),Object(a["createBlock"])(d,{key:0,modelValue:e.form.x,"onUpdate:modelValue":t[9]||(t[9]=function(t){return e.form.x=t}),modelModifiers:{trim:!0},placeholder:"x",clearable:""},null,8,["modelValue"])):(Object(a["openBlock"])(),Object(a["createBlock"])(a["Fragment"],{key:1},[Object(a["createTextVNode"])(Object(a["toDisplayString"])(e.form.x),1)],64))]})),_:1})]})),_:1}),Object(a["createVNode"])(l,{span:12,offset:0},{default:Object(a["withCtx"])((function(){return[Object(a["createVNode"])(i,{label:"摄像头y：",prop:"y"},{default:Object(a["withCtx"])((function(){return[e.editable?(Object(a["openBlock"])(),Object(a["createBlock"])(d,{key:0,modelValue:e.form.y,"onUpdate:modelValue":t[10]||(t[10]=function(t){return e.form.y=t}),modelModifiers:{trim:!0},placeholder:"y",clearable:""},null,8,["modelValue"])):(Object(a["openBlock"])(),Object(a["createBlock"])(a["Fragment"],{key:1},[Object(a["createTextVNode"])(Object(a["toDisplayString"])(e.form.y),1)],64))]})),_:1})]})),_:1}),Object(a["createVNode"])(l,{span:12,offset:0})]})),_:1})),Object(a["createVNode"])(u,{gutter:0},{default:Object(a["withCtx"])((function(){return[Object(a["createVNode"])(l,{span:24,offset:0},{default:Object(a["withCtx"])((function(){return[Object(a["createVNode"])(i,{label:"备注：",prop:"desc"},{default:Object(a["withCtx"])((function(){return[e.editable?(Object(a["openBlock"])(),Object(a["createBlock"])(d,{key:0,modelValue:e.form.desc,"onUpdate:modelValue":t[11]||(t[11]=function(t){return e.form.desc=t}),type:"textarea"},null,8,["modelValue"])):(Object(a["openBlock"])(),Object(a["createBlock"])(a["Fragment"],{key:1},[Object(a["createTextVNode"])(Object(a["toDisplayString"])(e.form.desc),1)],64))]})),_:1})]})),_:1})]})),_:1}),Object(a["createVNode"])(i)]})),_:1},8,["model","rules"])])])],512)),[[b,"form-header,custom-form"]])}n("8ba4");var Hn=function(e){var t={};return Tt.forEach((function(e){t[e.value]=e.label})),t[e]||e},zn="updateX",Un="updateY",qn="confirm",Yn="changeDirection",Gn="cancelForm",Xn="close",Wn=Object(a["defineComponent"])({name:"FormContent",directives:{"drag-dialog":Xt},props:{isAdd:{type:Boolean,default:!1},formType:{type:String,default:gt.person},editable:{type:Boolean,default:!1},x:{type:Number,default:0},y:{type:Number,default:0},formData:{type:Object,default:function(){return{}}},mapId:{type:[String,Number],required:!0}},emits:[zn,Un,qn,Yn,Gn,Xn],setup:function(e,t){var n=t.emit,r=Object(a["ref"])(),o=Object(a["reactive"])({roomNum:"1",src:"/images/staff_big.png",ip:"10.1.200.16",x:"",y:"",type:"",AlarmMappingLayerIdS:"",BrandCode:"",BrandName:"",BuildingName:"",BuildingNum:"",CreateTime:"",DeviceName:"",DeviceNum:"",DeviceObjProperty:"",DeviceSelfPointRelation:"",DeviceType:"",DeviceTypeCode:"",InstallSceneNum:"",IsUse:!0,OwnAlarmSourceCode:"",PDeviceIds:"",SceneName:"",direction:"1",shapeName:"",desc:""}),c=function(e,t,n){if(!t)return n(new Error("ip不能为空"));var a=/((2(5[0-5]|[0-4]\d))|[0-1]?\d{1,2})(\.((2(5[0-5]|[0-4]\d))|[0-1]?\d{1,2})){3}/g;if(!a.test(t))return n(new Error("请输入正确的ip地址"));n()},i=function(e,t,n){if(!t)return n(new Error("不能为空"));t=Number(t),Number.isInteger(t)?n():n(new Error("请输入数字值"))},l=function(e,t,a){var r=_t.width;t>=r?a(new Error("超出最大值".concat(r-1))):t<0?a(new Error("x坐标不能小于0")):(n(zn,t),a())},u=function(e,t,a){var r=_t.height;t>=r?a(new Error("超出最大值".concat(r-1))):t<0?a(new Error("y坐标不能小于0")):(n(Un,t),a())},s={shapeName:[O("请输入名称")],ip:[j(c)],x:[j(i),j(l)],y:[j(i),j(u)],type:[O("请选择基站类型")],direction:[O("请选择摄像头方向")],DeviceNum:[O("请输入摄像头ip")]},d=gt,f=Object(a["computed"])((function(){var t,n=(t={},Object(at["a"])(t,gt.camera,"摄像头"),Object(at["a"])(t,gt.basestation,"基站"),Object(at["a"])(t,gt.labelList,"标签"),Object(at["a"])(t,gt.person,"人员"),t);return n[e.formType]}));function p(e){n(Yn,e)}function m(){var t=e.editable?Gn:Xn;n(t)}function b(){r.value.resetFields()}function h(){r.value.validate((function(e){e&&n(qn,o)}))}return Object(a["watch"])((function(){return e.formData}),(function(t){Object(a["nextTick"])((function(){t&&(console.log("newVal",t),Object.assign(o,t),o.x=String(e.x),o.y=String(e.y))}))})),Object(a["watch"])((function(){return e.x}),(function(e){console.log("x",e),isNaN(e)||(o.x=String(e))})),Object(a["watch"])((function(){return e.y}),(function(e){isNaN(e)||(o.y=String(e))})),{formContentRef:r,cameraDirectionFormate:Hn,formTitle:f,form:o,rules:s,cameraDirection:Tt,changeDirection:p,handleClickHeaderClose:m,types:d,resetFields:b,handleClick:h}}});Wn.render=En;var Zn=Wn,Jn={class:"fence-box"};function $n(e,t,n,r,o,c){return Object(a["openBlock"])(),Object(a["createBlock"])("ul",Jn,[(Object(a["openBlock"])(!0),Object(a["createBlock"])(a["Fragment"],null,Object(a["renderList"])(o.list,(function(e,t){return Object(a["openBlock"])(),Object(a["createBlock"])("li",{key:t,onClick:function(n){return c.handleClick(e,t)}},Object(a["toDisplayString"])(e.label),9,["onClick"])})),128))])}var Kn={name:"FenceBox",data:function(){return{list:[{label:"取消"},{label:"完成"}]}},methods:{handleClick:function(e,t){var n={0:"cancel",1:"finish"};this.$emit(n[t])}}};Kn.render=$n;var Qn=Object(a["withScopeId"])("data-v-297d393a");Object(a["pushScopeId"])("data-v-297d393a");var ea={key:0,class:"canvas-container"};Object(a["popScopeId"])();var ta=Qn((function(e,t,n,r,o,c){return n.visible?(Object(a["openBlock"])(),Object(a["createBlock"])("div",ea,[Object(a["createVNode"])("canvas",{id:"water-alarm-canvas",ref:"waterAlarmCanvas",onClick:t[1]||(t[1]=function(){return c.clickHandler&&c.clickHandler.apply(c,arguments)})},null,512),Object(a["createVNode"])("i",{class:"el-icon-close hidden-icon",onClick:t[2]||(t[2]=function(){return c.hiddenBox&&c.hiddenBox.apply(c,arguments)})})])):Object(a["createCommentVNode"])("",!0)})),na=(n("cb29"),{name:"WaterAlarm",props:{visible:{type:Boolean,default:!1}},data:function(){return{ctx:null,radarR:60,radarR1:150,shipImg:null,shipDeg:0,alpha:.1,personPosArr:[[100,100],[400,100]]}},mounted:function(){this.visible&&this.init()},methods:{init:function(){var e=this,t=this.$el,n=t.clientWidth,a=t.clientHeight;this.$refs.waterAlarmCanvas.width=n,this.$refs.waterAlarmCanvas.height=a,this.ctx=this.$refs.waterAlarmCanvas.getContext("2d"),this.shipImg=new Image,this.shipImg.src="/images/car.png",this.shipImg.onload=function(){var t={ctx:e.ctx,shipImg:e.shipImg,shipWidth:60,shipHeight:60,shipDeg:e.shipDeg,radarR:e.radarR,radarR1:e.radarR1,alpha:e.alpha,personPosArr:e.personPosArr};e.drawScene(t),e.animate()}},animate:function(){if(this.visible){requestAnimationFrame(this.animate);var e={ctx:this.ctx,shipImg:this.shipImg,shipWidth:60,shipHeight:60,shipDeg:this.shipDeg,radarR:this.radarR,radarR1:this.radarR1,alpha:this.alpha,personPosArr:this.personPosArr};this.drawScene(e),this.shipDeg=Math.random()*Math.PI*2,this.radarR=this.radarR>300?0:++this.radarR,this.radarR1=this.radarR1>300?0:++this.radarR1,this.alpha+=.01,this.alpha=this.alpha>1?.1:this.alpha}},drawScene:function(e){var t=e.ctx,n=e.shipImg,a=e.shipWidth,r=e.shipHeight,o=e.shipDeg,c=e.radarR,i=e.radarR1,l=e.alpha,u=e.personPosArr,s=this.$refs.waterAlarmCanvas,d=s.width,f=s.height;t.clearRect(0,0,d,f),this.drawBasicIcon(t,d,f),this.drawRadar({ctx:t,pos:[d/2,f/2],r:c}),this.drawRadar({ctx:t,pos:[d/2,f/2],r:i}),this.drawPerson(t,u,l),t.save(),t.translate(d/2,f/2),t.rotate(o),t.drawImage(n,-a/2,-r/2,a,r),t.restore()},drawBasicIcon:function(e,t,n){e.beginPath(),e.fillStyle="#2CA3FF",e.arc(t/2,n/2,t/2,0,2*Math.PI),e.fill(),e.closePath(),e.beginPath(),e.lineCap="round",e.strokeStyle="#fff",e.lineWidth=4,e.moveTo(0,n/2),e.lineTo(t,n/2),e.moveTo(t/2,0),e.lineTo(t/2,n),e.stroke(),e.closePath(),e.beginPath(),e.strokeStyle="#ffffff";for(var a=0;a<6;a++)e.arc(t/2,n/2,50*a,0,2*Math.PI);e.lineWidth=2,e.stroke(),e.closePath()},drawRadar:function(e){var t=e.ctx,n=e.pos,a=e.r;t.beginPath();var r=t.createRadialGradient(n[0],n[1],0,n[0],n[1],a);r.addColorStop(0,"rgba(200,0,0,1.0)"),r.addColorStop(1,"rgba(200,0,0,0.1)"),t.fillStyle=r,t.arc(n[0],n[1],a,0,2*Math.PI),t.fill(),t.closePath()},drawPerson:function(e,t,n){e.beginPath(),e.fillStyle="rgba(255,0,0,".concat(n,")"),t.forEach((function(t){e.arc(t[0],t[1],4,0,2*Math.PI)})),e.fill(),e.closePath()},hiddenBox:function(){this.$emit("update:visible",!1)},clickHandler:function(e){console.log(e);for(var t=this.personPosArr,n=e.offsetX,a=e.offsetY,r=0,o=t.length;r<o;r++)if(n>t[r][0]-4&&n<t[r][0]+4&&a>t[r][1]-4&&a<t[r][1]+4)return void this.$message("落水人员被点击了")}}});n("8b64");na.render=ta,na.__scopeId="data-v-297d393a";var aa={ref:"monitorListPanelRef",class:"historical-mon"},ra={class:"top-title"},oa={style:{width:"10%"}},ca=Object(a["createTextVNode"])(">"),ia={ref:"playerRef",class:"live-video",muted:"",autoplay:"",controls:"true",style:{"object-fit":"fill"}};function la(e,t,n,r,o,c){var i=Object(a["resolveComponent"])("el-switch");return Object(a["openBlock"])(),Object(a["createBlock"])("div",null,[Object(a["createVNode"])("div",aa,[Object(a["createVNode"])("div",ra,[Object(a["createVNode"])("span",null,Object(a["toDisplayString"])(e.cameraName),1),Object(a["createVNode"])("div",oa,[Object(a["createVNode"])(i,{modelValue:e.cameraHigh,"onUpdate:modelValue":t[1]||(t[1]=function(t){return e.cameraHigh=t}),class:"switchStyle","active-text":"高清","inactive-text":"清晰","active-value":!0,"inactive-value":!1,"active-color":"#13ce66","inactive-color":"rgba(67, 67, 122, 1)",onChange:t[2]||(t[2]=function(t){return e.changSwitch(t,e.cameraHigh)})},{default:Object(a["withCtx"])((function(){return[ca]})),_:1},8,["modelValue"])]),Object(a["createVNode"])("button",{onClick:t[3]||(t[3]=function(){return e.hidden&&e.hidden.apply(e,arguments)}),onTouchstart:t[4]||(t[4]=Object(a["withModifiers"])((function(){return e.hidden&&e.hidden.apply(e,arguments)}),["stop","prevent"]))},null,32)]),Object(a["createVNode"])("div",{class:"h5videowrapper h5container",style:e.getStyle()},[Object(a["withDirectives"])(Object(a["createVNode"])("span",null,"视频加载中...",512),[[a["vShow"],e.isLoading]]),Object(a["createVNode"])("video",ia,null,512)],4)],512)])}var ua=n("7566"),sa="changeMonitorListPanelState",da=Object(a["defineComponent"])({name:"MonitorList",directives:{dragDialog:Xt},props:{cameraData:{type:Object,required:!0},livePlayCount:{type:Number,required:!0}},emits:[sa],setup:function(e,t){var n=t.emit,r=Object(a["ref"])(),o=Object(a["reactive"])({playList:{},monitorPanelState:!1,serverHost:"",cameraId:0,cameraName:"",cameraHigh:!1,subtype:2,isLoading:!1}),c=Object(a["toRefs"])(o),i=Object(a["ref"])();function l(e,t){if(ua["a"].isSupported()){console.log("playerRef",i);var n=i.value;if(n){o.isLoading=!0;var a=e.camera.id;o.cameraId=a,o.cameraName=e.camera.name;var c="rtsp://".concat(e.camera.username,":").concat(e.camera.password,"@").concat(e.camera.ip,"?channel=1&subtype=").concat(t);"海康"===e.camera.brand||"海康威视"===e.camera.brand?c="rtsp://".concat(e.camera.username,":").concat(e.camera.password,"@").concat(e.camera.ip,"/Streaming/Channels/10").concat(t):"大华"===e.camera.brand&&(c="rtsp://".concat(e.camera.username,":").concat(e.camera.password,"@").concat(e.camera.ip,"?channel=1&subtype=").concat(t)),console.log("rtsp",c),r.value=e.camera.player;var u="".concat(ht["b"],"/").concat(a,"/?url=").concat(encodeURIComponent(c),"}&brand=").concat(e.camera.brand);r.value=ua["a"].createPlayer({type:"flv",isLive:!0,enableStashBuffer:!1,autoCleanupMaxBackwardDuration:60,autoCleanupMinBackwardDuration:30,statisticsInfoReportInterval:2e3,stashInitialSize:131072,enableDurationMonitor:!0,enableVideoFrozenMonitor:!0,enableConstVideoViewSize:!0,url:u});var s=r.value;s.on(ua["a"].Events.METADATA_ARRIVED,(function(){o.isLoading=!1,console.log("--== 视频资源到达 ==--")})),s.enableVideoStateMonitor(!0),s.on(ua["a"].Events.VIDEO_RESOLUTION_CHANGED,(function(){l(o.playList,o.subtype),console.log("视频分辨率发生变化")})),s.on(ua["a"].Events.MEDIA_SOURCE_ENDED,(function(){l(o.playList,o.subtype),console.log("视频流已停止")})),s.on(ua["a"].Events.MEDIA_SOURCE_CLOSE,(function(){console.log("视频源已关闭")}));var d=!1;n.addEventListener("pause",(function(){d=!0})),n.addEventListener("play",(function(){d=!1})),s.on(ua["a"].Events.NETWORK_ERROR,(function(){ot.a.error("网络异常，无法加载该视频")})),s.on(ua["a"].Events.MEDIA_ERROR,(function(){console.log("视频源异常")})),s.on(ua["a"].Events.VIDEO_FROZEN,(function(){d||l(o.playList,o.subtype)})),s.on(ua["a"].Events.ERROR,(function(e,t){d||l(o.playList,o.subtype),console.log("--== flvjs error, type:"+e+", detail:"+t+" ==--"),console.log("--== should set a timer(for example, 3 seconds) to reload current flv ==--")})),r.value.attachMediaElement(n);try{r.value.load(),r.value.play()}catch(f){console.log(f)}}}}function u(){return 1===e.livePlayCount?"width:100%; height:100%":"width:100%; height:26rem"}function s(){"undefined"!==typeof r.value&&null!=r.value.e&&null!=r.value&&(r.value.pause(),r.value.unload(),r.value.detachMediaElement(),r.value.destroy()),n(sa,o.cameraId)}function d(e,t){o.cameraHigh=t,o.cameraHigh?o.subtype=1:o.subtype=2,"undefined"!==typeof r.value&&null!=r.value.e&&null!=r.value&&(r.value.pause(),r.value.unload(),r.value.detachMediaElement(),r.value.destroy()),Object(a["nextTick"])((function(){console.log(o.playList),l(o.playList,o.subtype)}))}function f(e){e&&(console.log("playList",o.playList),console.log("newValue",e),o.playList=e,Object(a["nextTick"])((function(){e.active?l(e,o.subtype):"undefined"!==typeof r.value&&null!=r.value.e&&null!=r.value&&(r.value.pause(),r.value.unload(),r.value.detachMediaElement(),r.value.destroy())})))}return Object(a["onUnmounted"])((function(){"undefined"!==typeof r.value&&null!=r.value.e&&null!=r.value&&(r.value.pause(),r.value.unload(),r.value.detachMediaElement(),r.value.destroy())})),Object(a["onMounted"])((function(){f(e.cameraData)})),Object(ct["a"])(Object(ct["a"])({},c),{},{getStyle:u,hidden:s,changSwitch:d,playerRef:i})}});n("6993");da.render=la;var fa=da,pa=Object(a["withScopeId"])("data-v-64dc0cc8");Object(a["pushScopeId"])("data-v-64dc0cc8");var ma={ref:"hsitoryMonitorListPanelRef",class:"historical-mon"},ba={class:"top-title"},ha={class:"video-controls"},va={class:""},Oa={class:"time"},ja={ref:"innerBarRef",class:"inner-bar"},ga={class:"time"},wa={class:"rate"},ya={class:"rate-list"},Va={key:0,class:"block",style:{width:"100%"}},Na={style:{width:"38%",float:"left"}},Ca={style:{width:"30%",float:"left"}},ka={style:{width:"30%","padding-left":"10px",float:"left"}};Object(a["popScopeId"])();var xa=pa((function(e,t,n,r,o,c){var i=Object(a["resolveComponent"])("el-date-picker"),l=Object(a["resolveComponent"])("el-time-picker");return Object(a["openBlock"])(),Object(a["createBlock"])("div",ma,[Object(a["createVNode"])("div",ba,[Object(a["createVNode"])("span",null,Object(a["toDisplayString"])(e.cameraName),1),Object(a["createVNode"])("button",{onClick:t[1]||(t[1]=function(){return e.hidden&&e.hidden.apply(e,arguments)}),onTouchstart:t[2]||(t[2]=Object(a["withModifiers"])((function(){return e.hidden&&e.hidden.apply(e,arguments)}),["stop","prevent"]))},null,32)]),Object(a["createVNode"])("div",{class:"h5videowrapper h5container",style:e.getStyle()},[Object(a["withDirectives"])(Object(a["createVNode"])("span",null,"视频加载中...",512),[[a["vShow"],e.isLoading]]),Object(a["createVNode"])("video",{ref:"playerRef",class:"history-video",autoplay:"",controls:"true",style:{width:"100%",height:"100%","object-fit":"fill"},onTimeupdate:t[3]||(t[3]=function(){return e.handleVideoProgress&&e.handleVideoProgress.apply(e,arguments)})},null,544)],4),Object(a["withDirectives"])(Object(a["createVNode"])("div",ha,[Object(a["createVNode"])("div",va,[Object(a["withDirectives"])(Object(a["createVNode"])("span",{class:"icon iconfont",onClick:t[4]||(t[4]=function(t){return e.changePlayStatus(!0)})},"",512),[[a["vShow"],!e.playStatus]]),Object(a["withDirectives"])(Object(a["createVNode"])("span",{class:"icon iconfont",onClick:t[5]||(t[5]=function(t){return e.changePlayStatus(!1)})},"",512),[[a["vShow"],e.playStatus]])]),Object(a["createVNode"])("span",Oa,Object(a["toDisplayString"])(0!=e.currentTime?e.currentTime:""),1),Object(a["createVNode"])("div",{ref:"progressBarRef",class:"progress",onClick:t[6]||(t[6]=function(){return e.handleProgress&&e.handleProgress.apply(e,arguments)})},[Object(a["createVNode"])("div",ja,null,512)],512),Object(a["createVNode"])("span",ga,Object(a["toDisplayString"])(e.eTime),1),Object(a["createVNode"])("div",wa,[Object(a["createVNode"])("span",null,"×"+Object(a["toDisplayString"])(e.currentRate),1),Object(a["createVNode"])("ul",ya,[Object(a["createVNode"])("li",{onClick:t[7]||(t[7]=function(t){return e.changeRate(5)})},"5.0"),Object(a["createVNode"])("li",{onClick:t[8]||(t[8]=function(t){return e.changeRate(4)})},"4.0"),Object(a["createVNode"])("li",{onClick:t[9]||(t[9]=function(t){return e.changeRate(3)})},"3.0"),Object(a["createVNode"])("li",{onClick:t[10]||(t[10]=function(t){return e.changeRate(2)})},"2.0"),Object(a["createVNode"])("li",{onClick:t[11]||(t[11]=function(t){return e.changeRate(1.5)})},"1.5"),Object(a["createVNode"])("li",{onClick:t[12]||(t[12]=function(t){return e.changeRate(1.2)})},"1.2"),Object(a["createVNode"])("li",{onClick:t[13]||(t[13]=function(t){return e.changeRate(1)})},"1.0"),Object(a["createVNode"])("li",{onClick:t[14]||(t[14]=function(t){return e.changeRate(.5)})},"0.5"),Object(a["createVNode"])("li",{onClick:t[15]||(t[15]=function(t){return e.changeRate(.2)})},"0.2")])])],512),[[a["vShow"],e.players]]),e.timePicker?(Object(a["openBlock"])(),Object(a["createBlock"])("div",Va,[Object(a["createVNode"])("div",Na,[Object(a["createVNode"])(i,{modelValue:e.day,"onUpdate:modelValue":t[16]||(t[16]=function(t){return e.day=t}),type:"date","value-format":"timestamp",placeholder:"选择日期"},null,8,["modelValue"])]),Object(a["createVNode"])("div",Ca,[Object(a["createVNode"])(l,{modelValue:e.sTime,"onUpdate:modelValue":t[17]||(t[17]=function(t){return e.sTime=t}),"value-format":"HH:mm:ss",style:{width:"100%"},placeholder:"开始时间"},null,8,["modelValue"])]),Object(a["createVNode"])("div",ka,[Object(a["createVNode"])(l,{modelValue:e.eTime,"onUpdate:modelValue":t[18]||(t[18]=function(t){return e.eTime=t}),"value-format":"HH:mm:ss",style:{width:"100%"},placeholder:"结束时间"},null,8,["modelValue"])]),Object(a["createVNode"])("button",{class:"el-button el-button--medium el-button--info",style:{width:"100%","background-color":"#02163a"},onClick:t[19]||(t[19]=function(){return e.searchVideo&&e.searchVideo.apply(e,arguments)})}," 查询回放 ")])):Object(a["createCommentVNode"])("",!0)],512)})),Da="changeHistoryMonitorListPanelState",Ta=Object(a["defineComponent"])({name:"HistpryMonitor",props:{historyCameraData:{type:Object,required:!0},historyPlayCount:{type:Number,required:!0}},emits:[Da],setup:function(e,t){var n=t.emit,r=Object(a["ref"])(),o=Object(a["ref"])(),c=Object(a["ref"])(),i=Object(a["ref"])(),l=Object(a["reactive"])({playList:{},day:"",sTime:0,eTime:0,startTime:0,endTime:0,playStatus:!1,timePicker:!0,currentTime:0,overTime:0,currentRate:1,currentId:"",cameraId:0,cameraName:"",isLoading:!1}),u=Object(a["toRefs"])(l),s=Object(a["computed"])((function(){var e=l.sTime.toString().split(":"),t=l.eTime.toString().split(":"),n=36e5*(t[0]-e[0])+6e4*(t[1]-e[1])+1e3*(t[2]-e[2]);return n})),d=Object(a["computed"])((function(){return o.value[0].clientWidth})),f=Object(a["computed"])((function(){var e=l.sTime.toString().split(":");return l.day+36e5*e[0]+6e4*e[1]+1e3*e[2]}));function p(e){var t=parseFloat(e),n=new Date(t).getFullYear(),a=new Date(t).getMonth()+1,r=new Date(t).getDate(),o=new Date(t).getHours(),c=new Date(t).getMinutes(),i=new Date(t).getSeconds();return"".concat(n).concat(a>9?a:"0"+a).concat(r>9?r:"0"+r,"T").concat(o>9?o:"0"+o).concat(c>9?c:"0"+c).concat(i>9?i:"0"+i,"Z")}function m(e){var t=parseFloat(e),n=new Date(t).getFullYear(),a=new Date(t).getMonth()+1,r=new Date(t).getDate(),o=new Date(t).getHours(),c=new Date(t).getMinutes(),i=new Date(t).getSeconds();return"".concat(n,"_").concat(a>9?a:"0"+a,"_").concat(r>9?r:"0"+r,"_").concat(o>9?o:"0"+o,"_").concat(c>9?c:"0"+c,"_").concat(i>9?i:"0"+i)}function b(e){if(ua["a"].isSupported()){var t=Object(a["ref"])(),n=t.value;if(!l.startTime&&!l.endTime&&!e.startTime&&!e.endTime)return;if(l.startTime=e.startTime?e.startTime:l.startTime,l.endTime=e.endTime?e.endTime:l.endTime,e.startTime&&e.endTime?l.timePicker=!1:l.timePicker=!0,n){l.isLoading=!0;var r=e.camera.id;l.cameraId=r,l.cameraName=e.camera.name;var o="";if("海康"==e.camera.brand||"海康威视"==e.camera.brand){var c=p(l.startTime.toString()),u=p(l.endTime.toString());o="rtsp://".concat(e.camera.nvr_username," : ").concat(e.camera.nvr_password,"@").concat(e.camera.nvr_ip,"/Streaming/tracks/").concat(e.camera.nvr_channel,"01/?starttime=").concat(c,'&endtime=" +\n              ').concat(u,"&codecType=h264&subtype=1")}else if("大华"==e.camera.brand){var s=m(l.startTime.toString()).replace(/-/g,"_").replace(/:/g,"_").replace(/ /g,"_"),d=m(l.endTime.toString()).replace(/-/g,"_").replace(/:/g,"_").replace(/ /g,"_");o="rtsp://".concat(e.camera.nvr_username," : ").concat(e.camera.nvr_password,"@").concat(e.camera.nvr_ip,"/cam/playback?channel=").concat(e.camera.nvr_channel,"&subtype=1&starttime=").concat(s,'&endtime=" +\n              ').concat(d)}i.value=e.camera.player,e.camera.id!=l.currentId&&(l.currentTime=0,l.eTime=0,l.currentRate=1),l.currentId=e.camera.id;var f="".concat(ht["b"],"/").concat(r,"/?url=").concat(encodeURIComponent(o),"}&brand=").concat(e.camera.brand);i.value=ua["a"].createPlayer({type:"flv",isLive:!1,hasVideo:!0,url:f});var b=i.value;b.on(ua["a"].Events.METADATA_ARRIVED,(function(){console.log("--== meta data arrived ==--"),l.isLoading=!1,l.playStatus=!0})),n.addEventListener("pause",(function(){l.playStatus=!0})),n.addEventListener("play",(function(){l.playStatus=!1})),i.value.attachMediaElement(n);try{i.value.load(),i.value.play()}catch(h){console.log(h)}}}}function h(){return 1===e.historyPlayCount?"width:100%; height:100%":"width:100%; height:26rem"}function v(){"undefined"!==typeof i.value&&null!=i.value.e&&null!=i.value&&(i.value.pause(),i.value.unload(),i.value.detachMediaElement(),i.value.destroy()),n(Da,l.cameraId)}function O(e){var t=parseFloat(e),n=new Date(t).getFullYear(),a=new Date(t).getMonth()+1,r=new Date(t).getDate();return"".concat(n,"-").concat(a>9?a:"0"+a,"-").concat(r>9?r:"0"+r)}function j(){l.sTime&&l.eTime&&l.day?(l.startTime=new Date(Date.parse(O(l.day)+" "+l.sTime)).getTime(),l.endTime=new Date(Date.parse(O(l.day)+" "+l.eTime)).getTime(),b(l.playList)):ot.a.error("请选择时间段查询")}function g(e){var t=Object(a["ref"])();e?t.value[0].play():t.value[0].pause(),l.playStatus=e}function w(e){var t=parseFloat(e),n=new Date(t).getHours(),a=new Date(t).getMinutes(),r=new Date(t).getSeconds();return"".concat(n>9?n:"0"+n,":").concat(a>9?a:"0"+a,":").concat(r>9?r:"0"+r)}function y(e){if(l.sTime&&l.eTime&&l.day){r.value[0].style.width=e.offsetX+"px";var t=Math.floor(e.offsetX/o.value[0].offsetWidth*s.value),n=l.sTime.toString().split(":");l.startTime=Number(l.day+36e5*Number(n[0])+6e4*Number(n[1])+1e3*Number(n[2])+t),b(l.playList)}else ot.a.error("请选择时间段查询")}function V(e){l.currentTime=Number(w(1e3*e.target.currentTime+l.startTime+"")),r.value[0].style.width=(1e3*e.target.currentTime+l.startTime-f.value)/(l.endTime-l.startTime)*d.value+"px"}function N(e){l.currentRate=e,c.value[0].playbackRate=e}return Object(a["onUnmounted"])((function(){"undefined"!==typeof i.value&&null!=i.value.e&&null!=i.value&&(i.value.pause(),i.value.unload(),i.value.detachMediaElement(),i.value.destroy())})),Object(a["watch"])(e.historyCameraData,(function(e){e&&(l.playList=e,Object(a["nextTick"])((function(){e.active?b(e):"undefined"!==typeof i.value&&null!=i.value.e&&null!=i.value&&(i.value.pause(),i.value.unload(),i.value.detachMediaElement(),i.value.destroy())})))})),Object(ct["a"])(Object(ct["a"])({},u),{},{handleProgress:y,getStyle:h,hidden:v,searchVideo:j,changePlayStatus:g,handleVideoProgress:V,changeRate:N})}});n("cc86");Ta.render=xa,Ta.__scopeId="data-v-64dc0cc8";var Sa=Ta;function La(e,t){return Object(a["openBlock"])(),Object(a["createBlock"])("div",null," 1 ")}const Ia={};Ia.render=La;var Ra=Object(a["createTextVNode"])("搜索"),_a=Object(a["createTextVNode"])("详情");function Ba(e,t,n,r,o,c){var i=Object(a["resolveComponent"])("el-input"),l=Object(a["resolveComponent"])("el-form-item"),u=Object(a["resolveComponent"])("el-button"),s=Object(a["resolveComponent"])("el-form"),d=Object(a["resolveComponent"])("el-table-column"),f=Object(a["resolveComponent"])("el-table"),p=Object(a["resolveComponent"])("el-pagination");return Object(a["openBlock"])(),Object(a["createBlock"])("div",null,[Object(a["createVNode"])(s,{model:e.params,"label-width":"80px",inline:!0,size:"small"},{default:Object(a["withCtx"])((function(){return[Object(a["createVNode"])(l,{label:"标签编号"},{default:Object(a["withCtx"])((function(){return[Object(a["createVNode"])(i,{modelValue:e.params.search,"onUpdate:modelValue":t[1]||(t[1]=function(t){return e.params.search=t}),clearable:"",onChange:e.search},null,8,["modelValue","onChange"])]})),_:1}),Object(a["createVNode"])(l,{label:""},{default:Object(a["withCtx"])((function(){return[Object(a["createVNode"])(u,{type:"primary",onClick:e.search},{default:Object(a["withCtx"])((function(){return[Ra]})),_:1},8,["onClick"])]})),_:1})]})),_:1},8,["model"]),Object(a["createVNode"])(f,{data:e.tableData,border:"","tooltip-effect":"dark"},{default:Object(a["withCtx"])((function(){return[Object(a["createVNode"])(d,{label:"编号",prop:"dnum","show-overflow-tooltip":"",align:"center",width:"110"}),Object(a["createVNode"])(d,{label:"名称",prop:"dname","show-overflow-tooltip":"",align:"center"}),Object(a["createVNode"])(d,{label:"类型",prop:"dtype","show-overflow-tooltip":"",align:"center"}),Object(a["createVNode"])(d,{label:"位置","show-overflow-tooltip":"",align:"center"},{default:Object(a["withCtx"])((function(t){var n=t.row;return[Object(a["createTextVNode"])(Object(a["toDisplayString"])(e.getMap(n.snum)||"未上线"),1)]})),_:1}),Object(a["createVNode"])(d,{width:"160",label:"操作",align:"center"},{default:Object(a["withCtx"])((function(t){var n=t.row;return[Object(a["createVNode"])(u,{size:"mini",type:"primary",onClick:function(t){return e.handleDetail(n)}},{default:Object(a["withCtx"])((function(){return[_a]})),_:2},1032,["onClick"])]})),_:1})]})),_:1},8,["data"]),Object(a["withDirectives"])(Object(a["createVNode"])(p,{background:"","current-page":e.params.page,"onUpdate:current-page":t[2]||(t[2]=function(t){return e.params.page=t}),"page-size":e.params.size,layout:"prev, pager, next",total:e.total,onCurrentChange:e.changePage},null,8,["current-page","page-size","total","onCurrentChange"]),[[a["vShow"],e.total&&e.tableData&&e.tableData.length]])])}var Pa={getLabelData:function(e){return Object(dt["a"])({url:"/rcaec/bigwa",method:"post",data:e})},getLabelList:function(e){return Object(dt["a"])({url:"/rcaec/bigwa",method:"post",params:e})}},Ma="clicked",Aa=Object(a["defineComponent"])({name:"Label",setup:function(e,t){var n=t.emit,r=Object(a["reactive"])({page:1,size:10,prop:"dnum",search:""}),o=Object(a["ref"])([]),c=Object(a["ref"])(0);function i(){return l.apply(this,arguments)}function l(){return l=Object(L["a"])(regeneratorRuntime.mark((function e(){var t,n,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:t=Object(H["a"])(),n=[],t.filter((function(e){"Epaulet"===e.dtypecode&&n.push(e)})),a=""===r.search?w(n,r.page):w(n,r.page,r.prop,r.search),o.value=a,console.log("label",a),c.value=y(n,r.prop,r.search);case 7:case"end":return e.stop()}}),e)}))),l.apply(this,arguments)}function u(e){return s.apply(this,arguments)}function s(){return s=Object(L["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:console.log(t);case 1:case"end":return e.stop()}}),e)}))),s.apply(this,arguments)}function d(e){return f.apply(this,arguments)}function f(){return f=Object(L["a"])(regeneratorRuntime.mark((function e(t){var a,r,o;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a={act:"fCGtP4nXdRZjr6TYeiN1611196242913",DeviceIdS:t},e.next=3,Pa.getLabelData(a);case 3:r=e.sent,o=r.data,n("showEquipDetails",o[0][0],gt.labelList),n(Ma);case 7:case"end":return e.stop()}}),e)}))),f.apply(this,arguments)}function p(e){d(e.dids)}function m(e){return b.apply(this,arguments)}function b(){return b=Object(L["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:console.log(t);case 1:case"end":return e.stop()}}),e)}))),b.apply(this,arguments)}function h(e){return v.apply(this,arguments)}function v(){return v=Object(L["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:r.page=t,i();case 2:case"end":return e.stop()}}),e)}))),v.apply(this,arguments)}function O(){return j.apply(this,arguments)}function j(){return j=Object(L["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:r.page=1,i();case 2:case"end":return e.stop()}}),e)}))),j.apply(this,arguments)}return Object(a["onMounted"])((function(){i()})),{params:r,tableData:o,total:c,handleEdit:u,handleDelete:m,changePage:h,search:O,getMap:V,handleDetail:p}}});Aa.render=Ba;var Fa=Aa,Ea=Object(a["withScopeId"])("data-v-8316ca22");Object(a["pushScopeId"])("data-v-8316ca22");var Ha={class:"handle-class"},za={class:"danger-level"},Ua={style:{"line-height":"2.6rem"}},qa=Object(a["createTextVNode"])("  - "),Ya=Object(a["createVNode"])("br",null,null,-1),Ga={class:"bot-bar"},Xa=Object(a["createTextVNode"])(" 查看报警位置 "),Wa=Object(a["createTextVNode"])(" 查看详情 "),Za={class:"tips"},Ja=Object(a["createVNode"])("p",null,"已经到底啦！",-1),$a={class:"set-bar"},Ka=Object(a["createTextVNode"])(" 一键处理 "),Qa={class:"loader loader--style2",title:"1"},er=Object(a["createVNode"])("svg",{version:"1.1",id:"loader-1",xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",x:"0px",y:"0px",width:"40px",height:"40px",viewBox:"0 0 50 50",style:{"enable-background":"new 0 0 50 50"},"xml:space":"preserve"},[Object(a["createVNode"])("path",{fill:"#000",d:"M25.251,6.461c-10.318,0-18.683,8.365-18.683,18.683h4.068c0-8.071,6.543-14.615,14.615-14.615V6.461z"},[Object(a["createVNode"])("animateTransform",{attributeType:"xml",attributeName:"transform",type:"rotate",from:"0 25 25",to:"360 25 25",dur:"0.6s",repeatCount:"indefinite"})])],-1);Object(a["popScopeId"])();var tr=Ea((function(e,t,n,r,o,c){var i=Object(a["resolveComponent"])("el-button"),l=Object(a["resolveComponent"])("el-popconfirm");return Object(a["openBlock"])(),Object(a["createBlock"])("div",{class:"handle",onScrollCapture:t[14]||(t[14]=function(t){return e.lazyLoad(t)})},[Object(a["createVNode"])("div",Ha,[Object(a["createVNode"])("button",{class:"未处理"==e.flag?"active":"",onClick:t[1]||(t[1]=function(t){return e.handleStatus("未处理")}),onTouchstart:t[2]||(t[2]=Object(a["withModifiers"])((function(t){return e.handleStatus(0)}),["stop","prevent"]))}," 未处理 ",34),Object(a["createVNode"])("button",{class:"已处理"==e.flag?"active":"",onClick:t[3]||(t[3]=function(t){return e.handleStatus("已处理")}),onTouchstart:t[4]||(t[4]=Object(a["withModifiers"])((function(t){return e.handleStatus(2)}),["stop","prevent"]))}," 已处理 ",34)]),Object(a["createVNode"])("div",za,[Object(a["createVNode"])("button",{class:e.status[3],onClick:t[5]||(t[5]=function(t){return e.handleLevel(3)}),onTouchstart:t[6]||(t[6]=Object(a["withModifiers"])((function(t){return e.handleLevel(3)}),["stop","prevent"]))}," 全部 ",34),Object(a["createVNode"])("button",{class:e.status[2],onClick:t[7]||(t[7]=function(t){return e.handleLevel(2)}),onTouchstart:t[8]||(t[8]=Object(a["withModifiers"])((function(t){return e.handleLevel(2)}),["stop","prevent"]))}," 危急 ",34),Object(a["createVNode"])("button",{class:e.status[1],onClick:t[9]||(t[9]=function(t){return e.handleLevel(1)}),onTouchstart:t[10]||(t[10]=Object(a["withModifiers"])((function(t){return e.handleLevel(1)}),["stop","prevent"]))}," 严重 ",34),Object(a["createVNode"])("button",{class:e.status[0],onClick:t[11]||(t[11]=function(t){return e.handleLevel(0)}),onTouchstart:t[12]||(t[12]=Object(a["withModifiers"])((function(t){return e.handleLevel(0)}),["stop","prevent"]))}," 普通 ",34)]),Object(a["createVNode"])("ul",{ref:"alarmBarRef",name:"warn-items",onTouchmove:t[13]||(t[13]=function(){return e.scrollAlarms&&e.scrollAlarms.apply(e,arguments)})},[(Object(a["openBlock"])(!0),Object(a["createBlock"])(a["Fragment"],null,Object(a["renderList"])(e.showAlarms,(function(t,n){return Object(a["openBlock"])(),Object(a["createBlock"])("li",{key:t.Id,ref:"itemsRef",class:"active"},[Object(a["createVNode"])("div",{class:"top-bar",style:1==t.status?"filter:grayscale(0.5)":""},[Object(a["createVNode"])("span",{style:e.styleArr[t.alarmLevel],class:"alarm-level"},Object(a["toDisplayString"])(e.alarmLevel(t.alarmLevel)),5),Object(a["createVNode"])("p",null,[Object(a["createVNode"])("span",Ua,Object(a["toDisplayString"])(e.formatTime(t.CreateTime)),1),qa,Object(a["createVNode"])("span",null,Object(a["toDisplayString"])(t.SourceType),1),Ya,Object(a["createVNode"])("span",{style:e.colorStyleArr[t.alarmLevel]},Object(a["toDisplayString"])(t.alarmContent),5)])],4),Object(a["createVNode"])("div",Ga,[Object(a["withDirectives"])(Object(a["createVNode"])(i,{size:"mini",onClick:function(n){return e.viewToAlarm(t)},onTouchstart:Object(a["withModifiers"])((function(n){return e.viewToAlarm(t)}),["stop","prevent"])},{default:Ea((function(){return[Xa]})),_:2},1032,["onClick","onTouchstart"]),[[a["vShow"],t.map]]),Object(a["createVNode"])(i,{size:"mini",onClick:function(n){return e.alarmDetail(t.id)},onTouchstart:Object(a["withModifiers"])((function(n){return e.alarmDetail(t.id)}),["stop","prevent"])},{default:Ea((function(){return[Wa]})),_:2},1032,["onClick","onTouchstart"]),Object(a["createVNode"])(l,{title:"确定处理选中的报警 ？",onConfirm:function(a){return e.handleAlarm(t.id,n,t.dispose_status)}},{reference:Ea((function(){return[Object(a["withDirectives"])(Object(a["createVNode"])(i,{size:"mini"},{default:Ea((function(){return[Object(a["createTextVNode"])(Object(a["toDisplayString"])((t.dispose_status,"处理")),1)]})),_:2},1536),[[a["vShow"],2!==t.dispose_status]])]})),_:2},1032,["onConfirm"])])],512)})),128)),Object(a["withDirectives"])(Object(a["createVNode"])("li",Za,[Ja],512),[[a["vShow"],!e.loading]])],544),Object(a["createVNode"])("div",$a,[Object(a["createVNode"])(l,{title:"确定一键处理所有报警 ？",onConfirm:e.handleAll},{reference:Ea((function(){return[Object(a["withDirectives"])(Object(a["createVNode"])(i,{size:"mini",class:"single-line"},{default:Ea((function(){return[Ka]})),_:1},512),[[a["vShow"],"已处理"!=e.flag]])]})),_:1},8,["onConfirm"]),Object(a["createVNode"])("span",null,"共"+Object(a["toDisplayString"])(e.total)+"条",1),Object(a["createVNode"])("div",null,[Object(a["withDirectives"])(Object(a["createVNode"])("span",Qa,[er],512),[[a["vShow"],e.loading]])])])],32)})),nr=n("2909"),ar=Object(a["defineComponent"])({name:"Handle",props:{alarmType:{required:!1,default:""}},setup:function(e){var t=Object(a["reactive"])({status:["","","","active"],showAlarms:[],alarms:[],styleArr:[{background:"#00A67B"},{background:"#FF7352"},{background:"#D9354E"}],colorStyleArr:[{color:"#00A67B"},{color:"#FF7352"},{color:"#D9354E"}],flag:"未处理",size:10,page:1,loading:!1,oldY:void 0,disposeStatus:"未处理",typeid:"",alarmLevel:"",alarmTypeArr:[],alarmTypeName:"全部类型",total:0,contentVisiable:!1}),n=Object(a["ref"])(),r=Object(a["ref"])(),o=Object(a["toRefs"])(t);function c(){return i.apply(this,arguments)}function i(){return i=Object(L["a"])(regeneratorRuntime.mark((function n(){var a,r,o,c;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return a={act:"6Z6wTPGkfMVF9eLTOXA1611040899987",curpage:t.page,sys_showpagesize:t.size,ShowSceneNum:"",SourceType:e.alarmType,alarmLevel:t.alarmLevel,sTime:"",eTime:"",alarmProgress:t.disposeStatus},n.next=3,mt.getAllAlamList(a);case 3:r=n.sent,o=r.result,c=r.data,o.success&&(t.showAlarms=[].concat(Object(nr["a"])(t.showAlarms),Object(nr["a"])(c.content)),t.total=c.count),t.loading=!1;case 7:case"end":return n.stop()}}),n)}))),i.apply(this,arguments)}function l(e){var t=["普通","严重","危急"];return t[e]}function u(e){var n=e.targetTouches[0].pageX;void 0===t.oldY&&(t.oldY=n);var a=void 0===t.oldY?n:t.oldY;r.value.scrollTop-=n-a,t.oldY=n}function s(e){t.loading=!0,t.disposeStatus!=e?(t.page=1,t.flag=e,t.disposeStatus=e,t.showAlarms=[],c()):t.loading=!1}function d(e){var a=n.value&&n.value.offsetHeight,o=r.value.offsetHeight;if(e.target.scrollTop>a*t.page*t.size-o){if(t.showAlarms.length<t.page*t.size)return;t.page+=1,t.loading=!0,c()}}function f(e){t.loading=!0,t.alarmLevel===e||""===t.alarmLevel&&3===e?t.loading=!1:(t.status=["","","",""],t.status[e]="active",t.alarmLevel=3===e?"":e,t.page=1,t.showAlarms=[],c())}function p(e){console.log(e),t.contentVisiable=!0}function m(e,n){t.showAlarms.splice(n,1),t.total=t.total-1,ot.a.success("处理成功!")}function b(){t.showAlarms=[],ot.a.success("处理成功!")}return Object(a["onMounted"])((function(){c()})),Object(a["watch"])((function(){return e.alarmType}),(function(e){Object(a["nextTick"])((function(){t.page=1,t.showAlarms=[],c()}))})),Object(ct["a"])(Object(ct["a"])({},o),{},{itemsRef:n,alarmBarRef:r,formatTime:N,alarmLevel:l,scrollAlarms:u,handleStatus:s,lazyLoad:d,handleLevel:f,alarmDetail:p,handleAll:b,handleAlarm:m})}});n("f2e5");ar.render=tr,ar.__scopeId="data-v-8316ca22";var rr=ar,or=Object(a["withScopeId"])("data-v-556b882e"),cr=or((function(e,t,n,r,o,c){var i=Object(a["resolveComponent"])("el-scrollbar");return Object(a["withDirectives"])((Object(a["openBlock"])(),Object(a["createBlock"])("div",{ref:"listRef",class:["person-list-container",{hidden:e.hiddenRef}],style:e.styleAttrs?e.styleAttrs:{}},[Object(a["createVNode"])(i,{style:{"max-height":"400px"}},{default:or((function(){return[(Object(a["openBlock"])(!0),Object(a["createBlock"])(a["Fragment"],null,Object(a["renderList"])(e.personList,(function(t){return Object(a["openBlock"])(),Object(a["createBlock"])("div",{key:t.name,class:"person-item",onClick:function(n){return e.handleClick(t)}},Object(a["toDisplayString"])(t.name),9,["onClick"])})),128))]})),_:1})],6)),[[a["vShow"],e.personList.length]])})),ir="clicked",lr=Object(a["defineComponent"])({props:{personList:{type:Array,default:function(){return[]}},mousePosition:{type:Object,default:function(){return{}}}},emits:[ir],setup:function(e,t){var n=t.emit,r=Object(a["shallowReactive"])({x:0,y:0}),o=Object(a["shallowRef"])(!0),c=Object(a["ref"])();function i(){Object(a["nextTick"])((function(){var t=Mt(c.value,e.mousePosition),n={};for(var a in t)n[a]=t[a]+"px";Object.assign(r,n),o.value=!1}))}function l(e){n(ir,e)}return Object(a["watch"])((function(){return e.mousePosition}),(function(){i()})),Object(a["onMounted"])((function(){i()})),{styleAttrs:r,hiddenRef:o,listRef:c,handleClick:l}}});n("7154");lr.render=cr,lr.__scopeId="data-v-556b882e";var ur=lr,sr=Object(a["withScopeId"])("data-v-7ff0bed1");Object(a["pushScopeId"])("data-v-7ff0bed1");var dr={class:"custom-form map-container"},fr={class:"form-header"},pr=Object(a["createVNode"])("div",{class:"title"},"选择地图",-1),mr=Object(a["createVNode"])("i",{class:"el-icon el-icon-close"},null,-1),br={class:"form-body"},hr={class:"map-content"};Object(a["popScopeId"])();var vr=sr((function(e,t,n,r,o,c){var i=Object(a["resolveDirective"])("drag-dialog");return Object(a["withDirectives"])((Object(a["openBlock"])(),Object(a["createBlock"])("div",null,[Object(a["createVNode"])("div",dr,[Object(a["createVNode"])("div",fr,[pr,Object(a["createVNode"])("button",{class:"closebtx",onClick:t[1]||(t[1]=function(){return e.handleClickHeaderClose&&e.handleClickHeaderClose.apply(e,arguments)})},[mr])]),Object(a["createVNode"])("div",br,[Object(a["createVNode"])("div",hr,[(Object(a["openBlock"])(!0),Object(a["createBlock"])(a["Fragment"],null,Object(a["renderList"])(e.mapList,(function(t){return Object(a["openBlock"])(),Object(a["createBlock"])("div",{class:["map-item",{active:t.snum===e.mapId}],key:t.snum,onClick:function(n){return e.changeMap(t.snum)}},[Object(a["createVNode"])("img",{src:e.imgUrl+t.surl,alt:""},null,8,["src"]),Object(a["createVNode"])("span",null,Object(a["toDisplayString"])(t.sname),1)],10,["onClick"])})),128))])])])],512)),[[i,"form-header,custom-form"]])})),Or="closed",jr="changeMap",gr=Object(a["defineComponent"])({name:"mapChoosen",directives:{"drag-dialog":Xt},props:{mapId:{type:String,required:!0},mapList:{type:Object,default:function(){return[]}}},emits:[Or,jr],setup:function(e,t){var n=t.emit;function a(){n(Or)}function r(t){t!==e.mapId&&n(jr,t)}return{imgUrl:ht["c"],handleClickHeaderClose:a,changeMap:r}}});n("be1d");gr.render=vr,gr.__scopeId="data-v-7ff0bed1";var wr=gr,yr={class:"fence-box"};function Vr(e,t,n,r,o,c){return Object(a["openBlock"])(),Object(a["createBlock"])("ul",yr,[(Object(a["openBlock"])(!0),Object(a["createBlock"])(a["Fragment"],null,Object(a["renderList"])(e.list,(function(t,n){return Object(a["openBlock"])(),Object(a["createBlock"])("li",{key:n,class:{active:0===n},onClick:function(a){return e.handleClick(t,n)}},Object(a["toDisplayString"])(t.label),11,["onClick"])})),128))])}var Nr={1:"revoke",2:"redraw",3:"cancel",4:"finish"},Cr=Object(a["defineComponent"])({name:"AlarmContent",emits:Object.keys(Nr).map((function(e){return Nr[e]})),setup:function(e,t){var n=t.emit,a=[{label:"绘制"},{label:"撤销"},{label:"重新绘制"},{label:"取消"},{label:"完成"}];function r(e,t){n(Nr[t])}return{list:a,handleClick:r}}});Cr.render=Vr;var kr,xr=n("5a0c"),Dr=n.n(xr),Tr="bg-img",Sr="addEquip",Lr=1,Ir=qt();console.log(Ir),function(e){e[e["HTagInit"]=1e3]="HTagInit",e[e["HTagOnline"]=1001]="HTagOnline",e[e["HTagOffline"]=1002]="HTagOffline",e[e["HTagMove"]=1003]="HTagMove",e[e["HLayerGroupStatistics"]=1004]="HLayerGroupStatistics",e[e["HTagLogOff"]=1005]="HTagLogOff"}(kr||(kr={}));var Rr="-350px",_r=Object(a["defineComponent"])({name:"Content",directives:{dragDialog:Xt},components:{mainNav:$t,personList:rn,cameraList:dn,basestationList:On,fenceBox:Vn,contextmenuContent:_n,formContent:Zn,monitorList:fa,historyMonitor:Sa,labelList:Fa,handle:rr,layerPersonList:ur,mapChoosen:wr},setup:function(){var e=Object(a["shallowRef"])(Rr),t=Object(a["reactive"])({}),n=Object(a["ref"])([]),r=Object(a["shallowRef"])(Object(H["b"])()||"S-jb04"),o=Object(a["shallowRef"])(),c=Object(a["ref"])({}),i=Object(a["ref"])({}),l=Object(a["ref"])(null),u=Object(a["ref"])(null),s=Object(a["reactive"])({scale:0,minScale:0,maxScale:2,sx:0,sy:0}),d=Object(a["shallowReactive"])({isPlayBack:!1,isfollowing:!1,draggable:!1,isDrawFence:!1,equipImgFollow:!1}),f=Object(a["shallowRef"])(gt.basestation),p=Object(a["shallowReactive"])({left:0,top:0}),m=Object(a["ref"])(null),b=Object(a["computed"])((function(){return kt[f.value]})),h=Object(a["reactive"])({show:!1,isAdd:!1,editable:!1,formData:null,x:0,y:0}),v=Object(a["reactive"])({show:!1,form:{date:new Date||"",startTime:"08:30",endTime:"08:45"},rules:{date:O("请选择日期"),startTime:O("请选择开始时间"),endTime:O("请选择结束时间")},datePickerOptions:{disabledDate:function(e){return e.getTime()>Date.now()}},tween:null,steps:[],lineNode:null,linePos:[]}),y=Object(a["shallowReactive"])({nav:!0,waterAlarmPanel:!1,contextmenu:!1,detailsForm:!1,monitorListFlag:!1,historyMonitorListFlag:!1,area:!0,layerPerson:!1,map:!1,controlPannel:!0}),V=Object(a["reactive"])({monitorTitle:"",monitorInner:"monitor-inner-pannel",monitorHistoryInner:"monitor-inner-pannel",newMonitorList:[],newHistoryMonitorList:[],cameraCount:4,liveCameraCount:1,historyCameraCount:1,livePlayCount:1,historyPlayCount:1,monitorListFlag:!1,historyMonitorListFlag:!1}),C=Object(a["reactive"])({showList:!1,drawerTitle:yt[gt.basestation].title,activeName:gt.basestation}),k=Object(a["reactive"])({visible:!1,dialogType:0,form:{name:"",chosenCamera:[]},allMapCamera:[],rules:{name:O("请输入电子围栏名称")}}),x=Object(a["reactive"])({tableVisible:!1,params:{curpage:1},loading:!1,allData:[],tableData:[],total:0}),D=Object(a["reactive"])({message:null,points:[],clonePoints:[]}),T=Object(a["reactive"])({visiable:!1,loading:!1,allData:[],tableData:[],total:0,curpage:1}),S=Object(a["ref"])(),I=Object(a["reactive"])({visiable:!1,dialogType:0,form:{name:"",memo:"",isLoop:!1,limitedTime:"",startTime:"",endTime:"",permitType:""}}),R=function(e,t,n){if(I.form.isLoop){var a=Dr()(new Date).format("YYYY-MM-DD"),r=Dr()(t).format("HH:mm:ss"),o=Dr()(I.form.startTime).format("HH:mm:ss"),c=new Date("".concat(a," ").concat(o)),i=new Date("".concat(a," ").concat(r));if(c.getTime()>i.getTime())return n(new Error("结束时间不能小于开始时间"));n()}else n()},_={name:O("请输入规则名称"),limitedTime:j(g),permitType:O("请选择规则类型"),startTime:O("请选择开始时间"),endTime:[O("请选择结束时间"),j(R)]},B=Object(a["computed"])((function(){return function(e){return!!I.form.startTime&&e.getTime()<I.form.startTime.getTime()}})),P=Object(a["reactive"])({visible:!1,dialogType:0,form:{CreateTime:"",IDS:"",Id:0,SceneName:"",ShowSceneNum:"",SourceDbOrDeviceIdS:"",SourceName:"",SourcePointNum:"",SourceType:"",alarmContent:"",alarmLevel:0,alarmProgress:"",dealAccount:"",dealMemo:"",dealTime:""}}),M=Object(a["reactive"])({tableVisible:!1,params:{curpage:1,size:8},loading:!1,allData:[],tableData:[],total:0,ShowSceneNum:"",SourceType:"",alarmLevel:"",sTime:"",eTime:"",alarmProgress:""});function A(){I.form.endTime&&(I.form.endTime="")}var F={x:0,y:0},E=Object(a["ref"])(null);function z(){E.value.batchDraw()}var U=new Ot.a.Layer,q=new Ot.a.Layer,Y=new Ot.a.Layer,G={cameraGroup:new Ot.a.Group({name:"cameraGroup"}),basestationGroup:new Ot.a.Group({name:"basestationGroup"}),personGroup:new Ot.a.Group({name:"personGroup"}),fenceGroup:new Ot.a.Group({name:"fenceGroup"}),locateBubbleGroup:new Ot.a.Group({name:"locateBubbleGroup"})},X=Object(a["reactive"])({id:0,attrs:{x:0,y:0}}),W=Object(a["reactive"])({basestationData:{x:0,y:0},cameraData:{x:0,y:0},checkedNode:null});Object(a["watch"])(V.newMonitorList,(function(e){var t=0;e.forEach((function(e){var n=e.active;n&&t++})),0===t&&(y.monitorListFlag=!1),V.livePlayCount=t,V.monitorInner=1===t?"monitor-inner-one":"monitor-inner-pannel",e.length>V.cameraCount&&(e.length>1e3*V.cameraCount&&e.splice(0,e.length-V.cameraCount),e.forEach((function(t,n){n<e.length-V.cameraCount&&(t.active=!1)})))})),Object(a["watch"])(V.newHistoryMonitorList,(function(e){var t=0;e.forEach((function(e){var n=e.active;n&&t++})),0===t&&(y.historyMonitorListFlag=!1),V.historyPlayCount=t,V.monitorHistoryInner=1===t?"monitor-inner-one":"monitor-inner-pannel",e.length>V.cameraCount&&(e.length>1e3*V.cameraCount&&e.splice(0,e.length-V.cameraCount),e.forEach((function(t,n){n<e.length-V.cameraCount&&(t.active=!1)})))}));var Z=null;function J(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];Z&&Z.destroy();var t=D.points;if(0!==t.length){var n=new Ot.a.Shape(Object(ct["a"])(Object(ct["a"])({},Bt),{},{sceneFunc:function(n,a){n.beginPath(),n.moveTo(t[0].x,t[0].y);for(var r=1;r<t.length;r++){var o=t[r],c=o.x,i=o.y;n.lineTo(c,i)}n.stroke(),e&&n.closePath(),n.fillStrokeShape(a)}}));Z=n,G.fenceGroup.add(n),z()}else z()}function $(){D.points=[],J()}function K(){var e=D.points,t=e.length;0===t?ot.a.info("还一个点都没有添加噢！"):1===t||2===t?$():(e.splice(t-2,2),J())}function Q(){$(),d.isDrawFence=!1,D.message.close(),D.points=[],D.clonePoints=[],k.visible=!0}function ee(){var e=D.points,t=e.length;t<4?ot.a.info("最少三个点才能组成一个面"):(D.message.close(),d.isDrawFence=!1,e.pop(),D.clonePoints=st()(e),J(!0),setTimeout((function(){k.visible=!0,$()}),500))}function te(){if(f.value!==gt.labelList){var e=X.attrs,t=e.x,n=e.y;if(m.value.to({x:t,y:n}),f.value===gt.camera){var a=X.attrs.direction;m.value.image(c.value[a])}z()}}function ne(){}function ae(e){var t=e.clientX,n=e.clientY;Object.assign(p,{left:t,top:n-Ct}),y.contextmenu=!0}function re(){y.contextmenu&&(y.contextmenu=!1,ne(),m.value=null)}function oe(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:r.value,a=e.imageObj,o=e.src,c=!(!a||!a.src&&!a[n]),i=null;c?(i=a.src?a:a[n],t(i)):(i=new window.Image,i.src=o,i.onload=function(){null===a?a=i:a[n]=i,t(i)},i.onerror=function(){ot.a.error("加载图片失败")})}function ce(){E.value.on("wheel",(function(e){var t=e.evt,n=-40*t.deltaY,a=(t.clientX-s.sx)/s.scale,r=(t.clientY-s.sy)/s.scale;n>0?(s.scale+=.05,s.scale=Number((s.scale+.05).toFixed(2)),s.scale>=s.maxScale&&(s.scale=s.maxScale)):(s.scale-=.05,s.scale=Number((s.scale-.05).toFixed(2)),s.scale<=s.minScale&&(s.scale=s.minScale)),s.sx=t.clientX-s.scale*a,s.sy=t.clientY-s.scale*r,E.value.setAttrs({x:s.sx,y:s.sy,scaleX:s.scale,scaleY:s.scale}),d.isDrawFence&&J(),z()}))}function ie(){E.value.on("mousedown",(function(e){var t=e.evt;d.isDrawFence?u.value=window.setTimeout((function(){var e=At({x:t.clientX,y:t.clientY},s);D.points.push(e),J()}),300):(d.draggable=!0,Object.assign(F,{x:t.clientX,y:t.clientY}),E.value.container().style.cursor="move",re())}))}function le(){E.value.on("mouseup mouseout",(function(){d.draggable&&(d.draggable=!1,E.value.container().style.cursor="default")}))}function ue(){E.value.on("mousemove",lt()((function(e){var t=function(){var t=e.evt;if(d.isDrawFence){var n=D.points;if(n.length>=1){n.length>1&&n.pop();var a=At({x:t.clientX,y:t.clientY},s);n.push(a),J()}}else if(d.draggable){s.sx+=t.clientX-F.x,s.sy+=t.clientY-F.y;var r=Pt({x:.25*E.value.width(),y:0},{x:0,y:0},s.scale).x,o=Pt({x:.75*E.value.width(),y:0},{x:_t.width,y:0},s.scale).x,c=Pt({x:0,y:Ct},{x:0,y:0},s.scale).y,i=Pt({x:0,y:E.value.height()},{x:0,y:_t.height},s.scale).y,l=Pt({x:0,y:E.value.height()/2},{x:0,y:_t.height/2},s.scale).y;r<=o||s.sx>r?s.sx=r:s.sx<o&&(s.sx=o),c<=i||s.sy>c?s.sy=c:s.sy<i&&(s.sy=i),s.scale===s.minScale&&(s.sy=l),Object.assign(F,{x:t.clientX,y:t.clientY}),E.value.setAttrs({x:s.sx,y:s.sy}),z()}};t()}),10))}function se(){E.value.on("contextmenu",(function(e){var t=e.evt;t.preventDefault(),u.value&&clearTimeout(u.value),d.isDrawFence&&ee()}))}function de(){ce(),ie(),le(),ue(),se()}function fe(){E.value=new Ot.a.Stage({width:window.innerWidth,height:window.innerHeight-Ct,container:"container",scale:{x:s.scale,y:s.scale}})}function pe(){ne(),y.detailsForm=!1}var me=[],be={all:[],currentMap:[]},he={all:[],currentMap:[]},ve={all:[],currentMap:[]},Oe={all:[],currentMap:[]},je=Object(a["reactive"])({all:[],currentMap:[]}),ge=null;function we(){return ye.apply(this,arguments)}function ye(){return ye=Object(L["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:E.value.add(U).add(q).add(Y),Object.keys(G).forEach((function(e){U.add(G[e])})),q.moveToBottom(),Y.moveToTop();case 4:case"end":return e.stop()}}),e)}))),ye.apply(this,arguments)}var Ve={};function Ne(e){return Ce.apply(this,arguments)}function Ce(){return Ce=Object(L["a"])(regeneratorRuntime.mark((function e(t){var n,a,r,o,c;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=t.x,a=t.y,r=t.lids,e.next=3,zt(t);case 3:o=e.sent,c=new Ot.a.Image({x:n,y:a,width:o.width,height:o.height,image:o,shadowColor:"rgba(0,0,0,0)",shadowBlur:o.width,name:r}),c.on("contextmenu",(function(e){if(console.log(e),d.isDrawFence)return!1;pe(),X.attrs=st()(e.target.attrs),m.value=c,f.value=gt.basestation,ae(e.evt),y.contextmenu=!0,c.shadowColor("red"),z()})),G.basestationGroup.add(c),Ve[r]=c,z();case 9:case"end":return e.stop()}}),e)}))),Ce.apply(this,arguments)}var ke={};function xe(e){return De.apply(this,arguments)}function De(){return De=Object(L["a"])(regeneratorRuntime.mark((function e(t){var n,a,r,o,c;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=t.x,a=t.y,r=t.lids,e.next=3,zt(t);case 3:o=e.sent,c=new Ot.a.Image({x:n,y:a,width:o.width,height:o.height,image:o,shadowColor:"rgba(0,0,0,0)",shadowBlur:o.width,name:r}),c.on("contextmenu",(function(e){if(console.log(e),d.isDrawFence)return!1;pe(),X.attrs=st()(e.target.attrs),f.value=gt.camera,m.value=c,ae(e.evt),y.contextmenu=!0,c.shadowColor("green"),z()})),G.cameraGroup.add(c),ke[r]=c,z();case 9:case"end":return e.stop()}}),e)}))),De.apply(this,arguments)}var Te=Object(a["ref"])([{name:"1",id:"sdf"}]),Se=Object(a["shallowReactive"])({left:0,top:0}),Le={};function Ie(e){return Re.apply(this,arguments)}function Re(){return Re=Object(L["a"])(regeneratorRuntime.mark((function e(t){var n,a,r,o,c,i,l,u,s,d,f,p,m,b,h,v,O,j,g,w,V,N,C,k,x,D,T;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=24,a=16,r=2*n,o=2*a,c=t.x,i=t.y,l=t.sname,u=t.lids,s=t.defdata,d=s.W,f=s.H,p=s.layinfo,m=s.Color,b=s.IsHaveCount,h=s.CountItem,v=d-r,O=f-o,j=new Ot.a.Group({x:c,y:i}),g={pathSrc:p,width:d,height:f,color:m},e.next=12,Et(g,"标注图层"===t.ltype);case 12:w=e.sent,V=new Ot.a.Image({image:w,stroke:"rgba(255,0,0,.5)"}),b?(C=new Ot.a.Text({x:d/2-n,y:f/8,text:l,fontSize:14,fill:"#fff"}),C.offsetX(C.width()/2),k=new Ot.a.Line({points:[.1*v,O/2,.9*v,O/2],stroke:"#fff",strokeWidth:.5}),x=new Ot.a.Group({x:v/2,y:.7*(O-10)}),Le[u]=[],D=h.length,T=10,h.forEach((function(e,t){var n=new Ot.a.Group({x:T*t}),a=(O-10)/2*.5,r=new Ot.a.Rect({width:v/3/D,height:a,fill:"rgba(255,255,255,.6)",cornerRadius:a});r.offsetX(r.width()/2);var o=new Ot.a.Text({x:0,y:a/2,fill:m,text:"?",name:e});o.offsetX(o.width()/2),o.offsetY(o.height()/2),n.add(r).add(o),Le[u].push(o),x.add(n)})),j.add(V).add(C).add(k).add(x),j.on("dblclick",(function(e){console.log(e);var t=e.evt,n=t.clientX,a=t.clientY;Object.assign(Se,{left:n,top:a-Ct}),y.layerPerson=!0}))):(N=new Ot.a.Text({x:d/2-n,y:(O-10)/2,text:l,fontSize:14,fill:"#fff"}),N.offsetX(N.width()/2),N.offsetY(N.height()/2),j.add(V).add(N)),G.locateBubbleGroup.add(j);case 16:case"end":return e.stop()}}),e)}))),Re.apply(this,arguments)}var _e={};function Be(e){var t=e.areaids,n=e.points,a=e.areaname,r=e.show,o=JSON.parse(n),c=new Ot.a.Group({name:t,visible:r}),i=o[0],l=new Ot.a.Text({x:i.X+10,y:i.Y+10,text:a,fill:"#fff",fontSize:24}),u=new Ot.a.Shape(Object(ct["a"])(Object(ct["a"])({},Bt),{},{sceneFunc:function(e,t){e.beginPath(),e.moveTo(o[0].X,o[0].Y);for(var n=1;n<o.length;n++){var a=o[n],r=a.X,c=a.Y;e.lineTo(r,c)}e.stroke(),e.closePath(),e.fillStrokeShape(t)}}));c.add(u).add(l),_e[t]&&(_e[t].destroy(),delete _e[t]),G.fenceGroup.add(c),_e[t]=c,z()}Object(a["watch"])((function(){return y.detailsForm}),(function(e){!1===e&&(h.formData={},h.x=0,h.y=0)}));var Pe={};function Me(e){return Ae.apply(this,arguments)}function Ae(){return Ae=Object(L["a"])(regeneratorRuntime.mark((function e(t){var n,a,r,o,c,l,u,s=arguments;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:n=s.length>1&&void 0!==s[1]?s[1]:0,a=t.x,r=t.y,o=t.name,c=t.id,l=t.type,u=function(e){var t=new Ot.a.Group({name:c+"",x:a,y:r});ge||(ge={width:e.width,height:e.height});var i=new Ot.a.Image({x:0,y:0,width:e.width,height:e.height,image:e,shadowColor:"rgba(0,0,0,0)",shadowBlur:e.width,id:String(c)}),l=14,u=new Ot.a.Text({x:0,y:-l-5,text:o,fontSize:l,fill:"#fff",id:String(c)});t.add(i).add(u),Pe[c]=t,G.personGroup.value&&0===n?G.personGroup.add(t):Y&&n&&(Y.add(t),t.moveToTop()),z(),0===n?t.on("contextmenu",(function(e){if(console.log(e),console.log(e.target.attrs.id),d.isDrawFence)return!1;X.id=e.target.attrs.id,X.attrs=st()(e.target.attrs),pe(),m.value=i,f.value=gt.labelList,ae(e.evt),y.contextmenu=!0,i.shadowColor("#123456"),z()})):d.isPlayBack=!0},oe({src:"/images/staff_unchecked".concat(l||1,".png"),imageObj:i.value},u,l||1);case 4:case"end":return e.stop()}}),e)}))),Ae.apply(this,arguments)}var Fe={label:"dname",key:"dids"},Ee=Object(a["ref"])([]);function He(){return me.filter((function(e){return"Camera_IP"===e.dtypecode&&e.snum===r.value})).slice()}function ze(){return Ue.apply(this,arguments)}function Ue(){return Ue=Object(L["a"])(regeneratorRuntime.mark((function e(){var t,n,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t={act:"Vd95kIrsbON1Z6H27eM1586422577340",TypeCodeChar:""},e.next=3,ft.getAllDevice(t);case 3:n=e.sent,a=n.data,console.log("getAllDevice",a),me=a||[],k.allMapCamera=He(),console.log(k.allMapCamera),Object(H["f"])(me);case 10:case"end":return e.stop()}}),e)}))),Ue.apply(this,arguments)}function qe(e){return Ye.apply(this,arguments)}function Ye(){return Ye=Object(L["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:ve.currentMap=ve.all.filter((function(e){return e.snum===t})),ve.currentMap.forEach((function(e){xe(e)}));case 2:case"end":return e.stop()}}),e)}))),Ye.apply(this,arguments)}function Ge(e){he.currentMap=he.all.filter((function(t){return t.snum===e})),he.currentMap.forEach((function(e){Ie(e)}))}function Xe(e){be.currentMap=be.all.filter((function(t){return t.snum===e})),be.currentMap.forEach((function(e){Ne(e)}))}var We=function(e){je.currentMap=je.all.filter((function(t){return t.LocationSceneId===e})),je.currentMap.forEach((function(e){Me(e)}))};function Ze(){return Je.apply(this,arguments)}function Je(){return Je=Object(L["a"])(regeneratorRuntime.mark((function e(){var t,n,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t={act:"kTM5tsxPxjZPbajPzDQ1586422437860",ProductId:"99999999-9999-9999-9999-999999999999"},e.next=3,ft.getAllLayer(t);case 3:n=e.sent,a=n.data,console.log("getAllLayer=>",a),he.all=a.filter((function(e){return"标注图层"===e.ltype})),Ge(r.value),ve.all=a.filter((function(e){return"摄像头图层"===e.ltype})),qe(r.value),be.all=a.filter((function(e){return"基站图层"===e.ltype})),Xe(r.value),z();case 13:case"end":return e.stop()}}),e)}))),Je.apply(this,arguments)}function $e(){return Ke.apply(this,arguments)}function Ke(){return Ke=Object(L["a"])(regeneratorRuntime.mark((function e(){var t,n,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t={act:"cRfPNhii9hVXQ6D8C151586425533740"},e.next=3,ft.getAllBuild(t);case 3:n=e.sent,a=n.data,console.log("getAllBuild",a);case 6:case"end":return e.stop()}}),e)}))),Ke.apply(this,arguments)}function Qe(e){Oe.currentMap=Oe.all.filter((function(t){return t.snum===e})),x.allData=Oe.currentMap,x.tableData=w(x.allData,x.params.curpage),x.total=x.allData.length,Oe.currentMap.forEach((function(e){Be(e)}))}function et(){return tt.apply(this,arguments)}function tt(){return tt=Object(L["a"])(regeneratorRuntime.mark((function e(){var t,n,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t={act:"KP9NBmF37ejHCChTUhA1586415869244"},e.next=3,ft.getAllHArea(t);case 3:n=e.sent,a=n.data,console.log("getAllHArea",a),Oe.all=a.map((function(e){return Object(ct["a"])(Object(ct["a"])({},e),{},{show:y.area})})),Qe(r.value);case 8:case"end":return e.stop()}}),e)}))),tt.apply(this,arguments)}function rt(){return it.apply(this,arguments)}function it(){return it=Object(L["a"])(regeneratorRuntime.mark((function e(){var t,n,a,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t={act:"6Z6wTPGkfMVF9eLTOXA1611040899987",curpage:M.params.curpage,sys_showpagesize:M.params.size,ShowSceneNum:M.ShowSceneNum,SourceType:M.SourceType,alarmLevel:M.alarmLevel,sTime:M.sTime,eTime:M.eTime,alarmProgress:M.alarmProgress},e.next=3,mt.getAllAlamList(t);case 3:n=e.sent,a=n.result,r=n.data,a.success&&(M.tableData=r.content,M.total=r.count);case 6:case"end":return e.stop()}}),e)}))),it.apply(this,arguments)}function ut(){M.loading=!0,rt(),M.loading=!1}function dt(){M.params.curpage=1,M.loading=!0,rt(),M.loading=!1}function vt(e){console.log(e),P.visible=!0,P.form=e}var jt=null;function wt(){return Dt.apply(this,arguments)}function Dt(){return Dt=Object(L["a"])(regeneratorRuntime.mark((function e(){var n,a,o=arguments;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:n=o.length>0&&void 0!==o[0]?o[0]:ht["c"]+t[r.value].surl,console.log("src:",n),a=new window.Image,a.src=n,a.onload=Object(L["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t=new Ot.a.Image({image:a,name:Tr,width:a.width,height:a.height,listening:!1}),s.scale=Number((window.innerWidth/t.width()).toFixed(2)),s.minScale=s.scale,e.next=5,q.add(t);case 5:return E.value.setAttrs({scale:{x:s.scale,y:s.scale}}),jt=t,t.moveToBottom(),e.next=10,z();case 10:de(),ze(),Ze(),$e(),et(),rt(),ea();case 17:case"end":return e.stop()}}),e)})));case 5:case"end":return e.stop()}}),e)}))),Dt.apply(this,arguments)}function Tt(e){var n=new window.Image;n.src=ht["c"]+t[e].surl,n.onload=function(){jt.image(n),z()}}function St(e){return Lt.apply(this,arguments)}function Lt(){return Lt=Object(L["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,wt(t);case 2:case"end":return e.stop()}}),e)}))),Lt.apply(this,arguments)}function Mt(){return Ut.apply(this,arguments)}function Ut(){return Ut=Object(L["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:fe(),we(),St();case 3:case"end":return e.stop()}}),e)}))),Ut.apply(this,arguments)}function qt(){return Yt.apply(this,arguments)}function Yt(){return Yt=Object(L["a"])(regeneratorRuntime.mark((function e(){var a,c,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a={act:"bPxM1k2cWCeMeEIbWZV1586415800673"},e.next=3,ft.getAllScene(a);case 3:c=e.sent,i=c.data,console.log("getAllMap=>",i),i&&i.forEach((function(e){t[e.snum]=e})),n.value=i||[],o.value=t[r.value].sname,localStorage.setItem("sceneAll",JSON.stringify(i)),Mt();case 11:case"end":return e.stop()}}),e)}))),Yt.apply(this,arguments)}function Gt(){var e=document.documentElement,t=document.body.clientWidth||document.documentElement.clientWidth;t=t>2400?2400:t,e.style.fontSize=t/190+"px"}var Xt=Object(a["ref"])();function Wt(e){for(var t in console.log("navCode=>",e),re(),y.layerPerson=!1,yt)if(yt[t].code===e){C.showList=!0,C.drawerTitle=yt[t].title,C.activeName=t;break}Vt.code===e&&(x.tableVisible=!0),Nt.code===e&&(M.tableVisible=!0)}function Zt(){Xt.value.resetIndex()}function Jt(e){C.showList=!0,C.drawerTitle=yt[e.props.name].title}var $t=Object(a["ref"])();function Kt(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;k.visible=!0,k.dialogType=e,D.clonePoints=[],Object(a["nextTick"])((function(){$t.value.resetFields(),k.form.chosenCamera=[]}))}function Qt(){Kt(0)}var en="";function tn(e){return nn.apply(this,arguments)}function nn(){return nn=Object(L["a"])(regeneratorRuntime.mark((function e(t){var n,a,o,c,i,l,u;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return Kt(1),n=t.areaids,a=t.points,o=t.areaname,en=n,c={act:"WHIHF7U1FtTjZORrI4h1611195385202",LayerIdS:n,SceneNum:r.value},e.next=6,ft.getOnehAreaSetDeivce(c);case 6:i=e.sent,l=i.data,console.log("getOnehAreaSetDeivce",l),u=JSON.parse(l.deviceitem),u.forEach((function(e){k.form.chosenCamera.push(e.DeviceIdS)})),k.form.name=o,D.clonePoints=JSON.parse(a);case 13:case"end":return e.stop()}}),e)}))),nn.apply(this,arguments)}function an(){k.visible=!1,x.tableVisible=!1,D.message=ot()({showClose:!0,message:"鼠标单击左键新增点，右键可完成绘制",type:"warning",duration:0}),D.points=[],d.isDrawFence=!0}function rn(){$t.value.validate(function(){var e=Object(L["a"])(regeneratorRuntime.mark((function e(t){var n,a,o,c;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!t){e.next=8;break}return n=k.form.chosenCamera.map((function(e){var t=k.allMapCamera.findIndex((function(t){return t.dids===e}));return{DeviceIdS:e,DeviceType:k.allMapCamera[t].dname}})),a={act:"i9YWieOBzym06JamZtI1586422307190",LayerIdS:0===k.dialogType?Ht():en,SceneNum:r.value,CheckSourceID:JSON.stringify(D.clonePoints.map((function(e){return{X:e.x,Y:e.y}}))),DevicePointRelation:0===k.form.chosenCamera.length?"":JSON.stringify(n),CheckSourceUnitName:k.form.name},e.next=5,ft.saveHArea(a);case 5:o=e.sent,c=o.result,"操作成功"===c.msg&&(ot.a.success(c.msg),k.visible=!1,et());case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}function on(e){return cn.apply(this,arguments)}function cn(){return cn=Object(L["a"])(regeneratorRuntime.mark((function e(t){var n,a,o,c;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=t.areaids,a={act:"mYfPMH51aE2FMOzxiFd1586422236651",LayerIdS:n,SceneNum:r.value},e.next=4,ft.delHArea(a);case 4:o=e.sent,console.log(o),c=o.result,c.msg&&(ot.a.success(c.msg),et());case 8:case"end":return e.stop()}}),e)}))),cn.apply(this,arguments)}function ln(e){return un.apply(this,arguments)}function un(){return un=Object(L["a"])(regeneratorRuntime.mark((function e(t){var n,a,o;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return T.loading=!0,n={act:"N71kyUJz3OiP2MOZ6Ea1586415957754",LayerIdS:t,SceneNum:r.value},e.next=4,ft.getRule(n);case 4:a=e.sent,o=a.data,T.allData=o.map((function(e){return Object(ct["a"])(Object(ct["a"])({},e),{},{labelType:Rt(e.ptype)})}))||[],T.tableData=w(T.allData,T.curpage),T.total=o.length||0,console.log(o),T.loading=!1;case 11:case"end":return e.stop()}}),e)}))),un.apply(this,arguments)}function sn(e){T.loading=!0,T.tableData=w(T.allData,e),T.loading=!1}var dn="",fn="",pn="";function mn(e){return bn.apply(this,arguments)}function bn(){return bn=Object(L["a"])(regeneratorRuntime.mark((function e(t){var n,a,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:T.visiable=!0,n=t.areaids,a=t.points,r=t.areaname,dn=a,fn=n,pn=r,ln(n);case 6:case"end":return e.stop()}}),e)}))),bn.apply(this,arguments)}function hn(e){x.loading=!0,x.tableData=w(x.allData,e),x.loading=!1}function vn(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;I.visiable=!0,I.dialogType=e,I.form.name=pn,I.form.memo="",I.form.isLoop=!1,I.form.limitedTime="",I.form.startTime="",I.form.endTime="",I.form.permitType="",Object(a["nextTick"])((function(){S.value.clearValidate()}))}function On(){vn(0),Object(a["nextTick"])((function(){console.log(I.form)}))}var jn=0;function gn(e){return wn.apply(this,arguments)}function wn(){return wn=Object(L["a"])(regeneratorRuntime.mark((function e(t){var n,a,r,o,c,i,l,u,s,d,f;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return vn(1),n=t.stime,a=t.ptype,r=t.memo,o=t.id,c=t.etime,i=t.isloop,l=t.limtime,jn=o,u=function(e,t,n){if(e){var a=Dr()(new Date).format("YYYY-MM-DD");return{startTime:new Date("".concat(a," ").concat(t)),endTime:new Date("".concat(a," ").concat(n))}}return{startTime:new Date(t),endTime:new Date(n)}},e.next=6,u(i,n,c);case 6:s=e.sent,d=s.startTime,f=s.endTime,I.form.memo=r,I.form.isLoop=i,I.form.limitedTime=String(l),I.form.startTime=d,I.form.endTime=f,I.form.permitType=String(a),console.log(I.form);case 16:case"end":return e.stop()}}),e)}))),wn.apply(this,arguments)}function yn(){S.value.validate(function(){var e=Object(L["a"])(regeneratorRuntime.mark((function e(t){var n,a,o,c,i,l,u,s,d,f,p,m,b,h;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!t){e.next=11;break}return n=I.form,a=n.memo,o=n.isLoop,c=n.limitedTime,i=n.startTime,l=n.endTime,u=n.permitType,s=function(e,t,n){var a=e?"HH:mm:ss":"YYYY-MM-DD HH:mm:ss";return{StartTime:Dr()(t).format(a),EndTime:Dr()(n).format(a)}},d=s(o,i,l),f=d.StartTime,p=d.EndTime,m={act:"QRZNk8BItBSJTT0ikWT1586422170736",LayerIdS:fn,SceneNum:r.value,ID:0===I.dialogType?0:jn,CheckSourceUnitName:pn,CheckSourceID:dn,Memo:a,RuleLocateType:2,PermitType:u,IsLoopEveryDay:o,OwnUserType:"0,2",OwnParam:"",LimitedTime:c,StartTime:f,EndTime:p},e.next=7,ft.saveRule(m);case 7:b=e.sent,h=b.result,h.msg&&(ot.a.success(h.msg),I.visiable=!1,ln(fn)),console.log(m);case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}function Vn(e){return Nn.apply(this,arguments)}function Nn(){return Nn=Object(L["a"])(regeneratorRuntime.mark((function e(t){var n,a,o,c;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=t.id,a={act:"nBpfTKDXs2nDV7y4dT41586415983980",LayerIdS:fn,SceneNum:r.value,ID:n},e.next=4,ft.delRule(a);case 4:o=e.sent,c=o.result,c.msg&&(ot.a.success(c.msg),ln(fn));case 7:case"end":return e.stop()}}),e)}))),Nn.apply(this,arguments)}var Cn=Object(a["ref"])();function kn(e,t){h.editable=!1,y.detailsForm=!1,y.detailsForm=!0,h.formData=e,Cn.value.resetFields(),f.value=t}function xn(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:f.value;if(h.editable=!1,y.detailsForm=!1,!h.isAdd){var t=m.value.attrs;h.x=t.x,h.y=t.y}e===gt.basestation||e===gt.labelList||e===gt.person||gt.camera,y.detailsForm=!0,console.log("formContentComponentRef.value",Cn.value),Cn.value.resetFields()}function Dn(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:f.value;xn(e),h.editable=!0;var t=m.value.attrs;h.formData=t,h.x=t.x,h.y=t.y}function Tn(e){e=404,pt.getCameraData(e).then((function(e){if(e){var t=!0;V.newMonitorList.push({camera:e,active:t}),V.monitorListFlag=!0}else ot.a.error("调取监控失败")})).catch((function(){ot.a.error("调取监控失败")}))}function Sn(e){e=404,pt.getCameraData(e).then((function(e){if(e){var t=!0;V.newHistoryMonitorList.push({camera:e,active:t}),V.historyMonitorListFlag=!0}else ot.a.error("调取历史监控失败")})).catch((function(){ot.a.error("调取历史监控失败")}))}function Ln(){Tn(X.id),y.monitorListFlag=!0,V.monitorTitle="查看实时视频"}function In(){V.newMonitorList.splice(0,V.newMonitorList.length),y.monitorListFlag=!1,ne()}function Rn(){V.newHistoryMonitorList.splice(0,V.newHistoryMonitorList.length),y.historyMonitorListFlag=!1,ne()}function _n(){Sn(X.id),y.historyMonitorListFlag=!0,V.monitorTitle="查看历史视频"}function Bn(e){V.newMonitorList.forEach((function(t){e===t.camera.id&&(t.active=!1)}))}function Pn(e){V.newHistoryMonitorList.forEach((function(t){e===t.camera.id&&(t.active=!1)}))}var Mn=Object(a["ref"])();function An(){v.show=!0}function Fn(){ne(),Mn.value.resetFields()}function En(){}var Hn=Object(a["ref"])(null);function zn(){W.checkedNode.destroy(),d.equipImgFollow=!0}function Un(e){var t,n=e.x,a=e.y,r=e.type,o=(t={},Object(at["a"])(t,gt.basestation,l.value),Object(at["a"])(t,gt.camera,c.value[Lr]),t),i=o[r],u=new Ot.a.Image({x:n-xt.width/2,y:a-xt.height,width:xt.width,height:xt.height,name:Sr,image:i});return u.on("click",zn),u.shadowColor("blue"),u.shadowBlur(20),G["".concat(f.value,"Group")].add(u),z(),u}function qn(e){var t,n=e.evt;if(d.equipImgFollow){var a=Ft(Object(ct["a"])({x:n.clientX,y:n.clientY},s)),r=a.x,o=a.y;h.x=r,h.y=o,W.checkedNode=Un({type:f.value,x:r,y:o}),d.equipImgFollow=!1,z();var c=Hn.value;(null===c||void 0===c||null===(t=c.children)||void 0===t?void 0:t[0])&&c.removeChild(c.children[0])}}function Yn(e){var t=e.evt;if(!1!==d.equipImgFollow){var n=Ft(Object(ct["a"])({x:t.clientX,y:t.clientY},s)),a=n.x,r=n.y;h.x=a,h.y=r;var o=Hn.value,c=o.offsetWidth,i=o.offsetHeight;o.style.left=t.clientX-c/2+"px",o.style.top=t.clientY-i-2+"px"}}function Gn(e){if(d.equipImgFollow||W.checkedNode)ot()("正在添加设备中，请勿重复操作");else{C.showList=!1,d.equipImgFollow=!0,f.value=e;var t=e===gt.basestation?l.value:c.value[Lr];Hn.value.appendChild(t),h.isAdd=!0,xn(),h.editable=!0,E.value.on("mousemove",Yn),E.value.on("click",qn)}}function Xn(e){if(h.isAdd){var t=G["".concat(f.value,"Group")].findOne("."+Sr);if(t)t.image(c.value[e]);else{var n=Hn.value;n&&n.children[0]&&n.replaceChild(c.value[e],n.children[0])}}else m.value.image(c.value[e]),h.formData.direction=e;z()}function Wn(e,t){var n=null;n=h.isAdd?E.value.findOne("."+Sr):m.value,void 0!==e&&n.to({x:e}),void 0!==t&&n.to({y:t})}function Zn(e){Wn(e)}function Jn(e){Wn(void 0,e)}function $n(){var e;d.equipImgFollow=!1,W.checkedNode&&W.checkedNode.destroy(),W.checkedNode=null,pe();var t=Hn.value;if((null===t||void 0===t||null===(e=t.children)||void 0===e?void 0:e[0])&&t.removeChild(t.children[0]),h.isAdd){var n=E.value.findOne("."+Sr);n&&n.destroy(),z(),h.isAdd=!1}else te();h.formData=null,t&&(t.style.left="-9999px",t.style.top="-9999px")}var Kn=null;var Qn=null;function ea(){var e=Ir.alarm;Qn=new WebSocket(e),Qn.onmessage=function(){var e=Object(L["a"])(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:n=JSON.parse(t.data),console.log(n);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}function ta(){e.value=e.value!==Rr?Rr:"0"}function na(e){console.log("formData",e)}var aa=Object(a["ref"])([]),ra=Object(a["reactive"])({type:""});function oa(){return ca.apply(this,arguments)}function ca(){return ca=Object(L["a"])(regeneratorRuntime.mark((function e(){var t,n,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t={act:"E83yVQOUUMYKt6jRYRI1586428010174"},e.next=3,mt.getAllAlarmType(t);case 3:n=e.sent,a=n.data,aa.value=a.map((function(e){return{label:e.alarmtype,value:e.alarmtype}}));case 6:case"end":return e.stop()}}),e)}))),ca.apply(this,arguments)}function ia(e,t){var n=_e[t];n.visible(e),z(),ot.a.success("操作成功")}function la(e){x.allData.forEach((function(t){t.show=e,_e[t.areaids].visible(e)})),z(),ot.a.success("操作成功")}var ua=Object(a["reactive"])([{label:"基站",show:!1,code:"basestation"},{label:"摄像头",show:!0,code:"camera"},{label:"地图",show:y.map,code:"map"},{label:"导航栏",show:y.nav,code:"nav"}]);function sa(e,t){"nav"===t&&(y.nav=e),"camera"===t&&Object.keys(ke).forEach((function(t){ke[t].visible(e),z()})),"map"===t&&(y.map=e)}function da(){y.map=!1;var e=ua.findIndex((function(e){return"map"===e.code}));ua[e].show=!1}function fa(e){for(var n in r.value=e,o.value=t[e].sname,Tt(e),G.cameraGroup.destroyChildren(),ke)delete ke[n];for(var a in qe(e),G.basestationGroup.destroyChildren(),Ve)delete ke[a];for(var c in G.locateBubbleGroup.destroyChildren(),Le)delete Le[c];for(var i in Ge(e),G.fenceGroup.destroyChildren(),_e)delete _e[i];for(var l in Qe(e),G.personGroup.destroyChildren(),Pe)delete Pe[l];We(e),Y.destroyChildren()}var pa=Object(a["shallowRef"])(""),ma=Object(a["computed"])((function(){return me.filter((function(e){return e.dtype.includes("基站")}))})),ba=Object(a["ref"])([]);function ha(e){ba.value=""!==e?ma.value.filter((function(t){return t.dname.includes(e)})):st()(ma.value)}function va(e){return Oa.apply(this,arguments)}function Oa(){return Oa=Object(L["a"])(regeneratorRuntime.mark((function e(t){var n,a,o,c,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(console.log(t),t){e.next=3;break}return e.abrupt("return");case 3:if(n=ma.value.findIndex((function(e){return t===e.dids})),!(n>-1)){e.next=16;break}if(a=ma.value[n].snum,a!==r.value){e.next=15;break}return o={act:"fCGtP4nXdRZjr6TYeiN1611196242913",DeviceIdS:t},e.next=10,bt.getCommonApi(o);case 10:c=e.sent,i=c.data,console.log(i),e.next=16;break;case 15:nt.a.confirm("选中的目标不在当前地图，是否跳转？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"info"}).then((function(){fa(a)})).catch((function(){ot.a.info("已取消跳转"),pa.value=""}));case 16:case"end":return e.stop()}}),e)}))),Oa.apply(this,arguments)}function ja(){if(jt){s.scale=Number((window.innerWidth/jt.width()).toFixed(2)),s.minScale=s.scale,s.sx=0,s.sy=0;var e={x:s.sx,y:s.sy,width:window.innerWidth,height:window.innerHeight-Ct,scale:{x:s.scale,y:s.scale}};E.value.setAttrs(e),z()}}var ga=lt()(Gt,100),wa=lt()(ja,100);return Object(a["onMounted"])((function(){qt(),oa(),Gt(),window.addEventListener("resize",ga),window.addEventListener("resize",wa)})),Object(a["onUnmounted"])((function(){var e,t;u.value&&clearTimeout(u.value),null===(e=Kn)||void 0===e||e.close(),null===(t=Qn)||void 0===t||t.close(),window.removeEventListener("resize",ga),document.documentElement.style.fontSize="",window.removeEventListener("resize",wa)})),{warningWidth:e,showWarningList:ta,mapIdRef:r,mapNameRef:o,mapListRef:n,showDetails:xn,formContentComponentRef:Cn,mainNavRef:Xt,visibleObj:y,status:d,drawerInfo:C,fenceInfo:k,fenceListInfo:x,ruleListInfo:T,ruleFormRef:S,ruleItemDetail:I,types:gt,navClick:Wt,resetNavIndex:Zt,equipSwitchClick:Jt,fenceInfoFormRef:$t,handleAddFence:Qt,handleFenceDraw:an,handleEditFence:tn,handleSubmitFence:rn,handleDelFence:on,fenceCurrentChange:hn,drawFenceInfo:D,handleRevokeFence:K,handleRedrawFence:$,handleCancelDrawFence:Q,handleFinishDrawFence:ee,contextmenuTypeRef:f,contxtmenuPosition:p,contextmenuList:b,detailsForm:h,trackPlayback:v,hideDetails:pe,equipImgRef:Hn,addEquip:Gn,updateX:Zn,updateY:Jn,changeDirection:Xn,cancelForm:$n,handleDetailConfirm:na,detailsEdit:Dn,handleClickTrackPlayback:An,handleCloseContextmenu:Fn,handleClickSeeTrackPlayback:En,seeNowVideo:Ln,seeHistoryVideo:_n,handleCloseAllVideo:In,handleCloseAllHistoryVideo:Rn,popMonitorVideo:Tn,popHistoryMonitorVideo:Sn,watchMonitorListPanelState:Bn,watchHistoryMonitorListPanelState:Pn,monitorListInfo:V,showEquipDetails:kn,alarmType:aa,alarmForm:ra,transferProps:Fe,transferData:Ee,handleSeeRules:mn,handleAddRule:On,handleEditRule:gn,handleSubmitRule:yn,handleDelRule:Vn,areaRulesOption:It,ruleCurrentChange:sn,ruleDisabledDate:B,timerPickerChange:A,ruleItemDetailRule:_,changeAreaVisible:ia,toggleAllFenceVisible:la,layerPerson:Te,layerPosition:Se,controlButtonList:ua,controlButtonChange:sa,closeMapChoosen:da,changeMap:fa,leftPannelSearch:pa,querySearch:ha,searchChange:va,searchDevice:ma,person:je,userSearchRes:ba,alarmInfo:P,alarmListInfo:M,formatTime:N,alarmCurrentChange:ut,getAlarmListByCondition:dt,handleDetailAlarm:vt}}});n("af5b");_r.render=et,_r.__scopeId="data-v-264210bc";var Br=_r,Pr={components:{headerComponent:Y,mainComponent:Br}};n("c002");Pr.render=i,Pr.__scopeId="data-v-45d78b5a";var Mr=Pr,Ar=[{path:"/",name:"Home",component:Mr},{path:"/login",name:"Login",component:function(){return n.e("login").then(n.bind(null,"9ed6"))}},{path:"/about",name:"About",component:function(){return n.e("about").then(n.bind(null,"f820"))}}],Fr=Object(r["a"])({history:Object(r["b"])(),routes:Ar,scrollBehavior:function(e,t,n){return n||{top:0}}}),Er=Fr,Hr=n("323e"),zr=n.n(Hr),Ur=(n("a5d8"),{title:"船舶项目"}),qr=Ur,Yr=qr.title,Gr=function(e){return e?"".concat(e," - ").concat(Yr):"".concat(Yr)},Xr=["/login"];Er.beforeEach(function(){var e=Object(L["a"])(regeneratorRuntime.mark((function e(t,n){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(zr.a.start(),document.title=Gr(t.meta.title),a=Object(H["c"])(),!a){e.next=8;break}if("/login"!==t.path){e.next=6;break}return e.abrupt("return","/");case 6:e.next=13;break;case 8:if(!Xr.includes(t.path)){e.next=12;break}return e.abrupt("return",!0);case 12:return e.abrupt("return","/login?redirect=".concat(t.path));case 13:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),Er.afterEach((function(e){zr.a.done()}));var Wr=n("5502"),Zr=Object(Wr["a"])({state:{},mutations:{},actions:{},modules:{}});function Jr(e,t,n,r,o,c){var i=Object(a["resolveComponent"])("router-view");return Object(a["openBlock"])(),Object(a["createBlock"])(i)}var $r={name:"App"};$r.render=Jr;var Kr=$r,Qr=(n("5415"),n("d559")),eo=n.n(Qr),to=(n("17fe"),n("6740")),no=n.n(to),ao=(n("5160"),n("fa2e")),ro=n.n(ao),oo=(n("163d"),n("f440")),co=n.n(oo),io=(n("5397"),n("5481")),lo=n.n(io),uo=(n("5bf7"),n("6feb")),so=n.n(uo),fo=(n("9fb0"),n("ab51")),po=n.n(fo),mo=(n("398c"),n("b27e")),bo=n.n(mo),ho=(n("4062"),n("1970")),vo=n.n(ho),Oo=(n("71ec"),n("e1fa")),jo=n.n(Oo),go=(n("43ea"),n("424b")),wo=n.n(go),yo=(n("24da"),n("70b5")),Vo=n.n(yo),No=(n("accc"),n("d197")),Co=n.n(No),ko=(n("08eb"),n("ba7e")),xo=n.n(ko),Do=(n("47b1"),n("5a1e")),To=n.n(Do),So=(n("d709"),n("3779")),Lo=n.n(So),Io=(n("8989"),n("f5c0")),Ro=n.n(Io),_o=(n("42dc"),n("19ec")),Bo=n.n(_o),Po=(n("34c0"),n("aff9")),Mo=n.n(Po),Ao=(n("f60d"),n("a1dd")),Fo=n.n(Ao),Eo=(n("3bc8"),n("ee0f")),Ho=n.n(Eo),zo=(n("0bd6"),n("05c2")),Uo=n.n(zo),qo=(n("8ac7"),n("e661")),Yo=n.n(qo),Go=(n("8c51"),n("6560")),Xo=n.n(Go),Wo=(n("9792"),n("6142")),Zo=n.n(Wo),Jo=(n("163c"),n("fa2a")),$o=n.n(Jo),Ko=(n("19b8"),n("5c97")),Qo=n.n(Ko),ec=(n("d37b"),n("4c63")),tc=n.n(ec),nc=(n("5deb"),n("550a")),ac=n.n(nc),rc=(n("3728"),n("cb75")),oc=n.n(rc),cc=(n("828f"),n("015f")),ic=n.n(cc),lc=(n("e33e"),n("c83f")),uc=n.n(lc),sc=(n("0832"),n("b462")),dc=n.n(sc),fc=(n("dc92"),n("43f9")),pc=n.n(fc),mc=(n("4af4"),n("44fb")),bc=n.n(mc),hc=(n("a471"),n("51d4")),vc=n.n(hc),Oc=n("3ef0"),jc=n.n(Oc),gc=(n("1294"),[bc.a,pc.a,dc.a,uc.a,ic.a,oc.a,ac.a,tc.a,Qo.a,$o.a,Zo.a,Xo.a,Yo.a,Uo.a,Ho.a,Fo.a,Mo.a,Bo.a,Ro.a,Lo.a,To.a,xo.a,Co.a,Vo.a,wo.a,jo.a,vo.a,bo.a,po.a,so.a,lo.a,co.a,ro.a]),wc=[no.a,eo.a,ot.a],yc=function(e){e.config.globalProperties.$ELEMENT={size:"small"},vc.a.use(jc.a),gc.forEach((function(t){e.component(t.name,t)})),wc.forEach((function(t){e.use(t)}))},Vc=(n("8e1f"),n("c00b"),n("b5a0")),Nc=(n("ebcf"),{mounted:function(e,t){var n=null;e.addEventListener("click",(function(){n&&clearTimeout(n),n=window.setTimeout((function(){t.value()}),1e3)}))}}),Cc=Nc,kc=Object(a["createApp"])(Kr);yc(kc),kc.directive("debounce-click",Cc),kc.use(Vc["a"],{tagName:"svg-icon"}).use(Zr).use(Er).mount("#app")},cf9f:function(e,t,n){"use strict";n("fcdc")},dbc7:function(e,t){const n={name:"exit-fullscreen",data:{width:"128",height:"128",viewBox:"0 0 128 128",data:'<path pid="0" d="M49.217 41.329l-.136-35.24c-.06-2.715-2.302-4.345-5.022-4.405h-3.65c-2.712-.06-4.866 2.303-4.806 5.016l.152 19.164-24.151-23.79a6.698 6.698 0 00-9.499 0 6.76 6.76 0 000 9.526l23.93 23.713-18.345.074c-2.712-.069-5.228 1.813-5.64 5.02v3.462c.069 2.721 2.31 4.97 5.022 5.03l35.028-.207c.052.005.087.025.133.025l2.457.054a4.626 4.626 0 003.436-1.38c.88-.874 1.205-2.096 1.169-3.462l-.262-2.465c0-.048.182-.081.182-.136h.002zm52.523 51.212l18.32-.073c2.713.06 5.224-1.609 5.64-4.815v-3.462c-.068-2.722-2.317-4.97-5.021-5.04l-34.58.21c-.053 0-.086-.021-.138-.021l-2.451-.06a4.64 4.64 0 00-3.445 1.381c-.885.868-1.201 2.094-1.174 3.46l.27 2.46c.005.06-.177.095-.177.141l.141 34.697c.069 2.713 2.31 4.338 5.022 4.397l3.45.006c2.705.062 4.867-2.31 4.8-5.026l-.153-18.752 24.151 23.946a6.69 6.69 0 009.494 0 6.747 6.747 0 000-9.523L101.74 92.54v.001zM48.125 80.662a4.636 4.636 0 00-3.437-1.382l-2.457.06c-.05 0-.082.022-.137.022l-35.025-.21c-2.712.07-4.957 2.318-5.022 5.04v3.462c.409 3.206 2.925 4.874 5.633 4.814l18.554.06-24.132 23.928c-2.62 2.626-2.62 6.89 0 9.524a6.694 6.694 0 009.496 0l24.155-23.79-.155 18.866c-.06 2.722 2.094 5.093 4.801 5.025h3.65c2.72-.069 4.962-1.685 5.022-4.406l.141-34.956c0-.05-.182-.082-.182-.136l.262-2.46c.03-1.366-.286-2.592-1.166-3.46h-.001zM80.08 47.397a4.62 4.62 0 003.443 1.374l2.45-.054c.055 0 .088-.02.143-.028l35.08.21c2.712-.062 4.953-2.312 5.021-5.033l.009-3.463c-.417-3.211-2.937-5.084-5.64-5.025l-18.615-.073 23.917-23.715c2.63-2.623 2.63-6.879.008-9.513a6.691 6.691 0 00-9.494 0L92.251 26.016l.155-19.312c.065-2.713-2.097-5.085-4.802-5.025h-3.45c-2.713.069-4.954 1.693-5.022 4.406l-.139 35.247c0 .054.18.088.18.136l-.267 2.465c-.028 1.366.288 2.588 1.174 3.463v.001z"/>'}};e.exports=n},ec90:function(e,t,n){},f223:function(e,t,n){},f2e5:function(e,t,n){"use strict";n("f223")},f50a:function(e,t,n){},fcdc:function(e,t,n){}});
//# sourceMappingURL=app.eb000d08.js.map